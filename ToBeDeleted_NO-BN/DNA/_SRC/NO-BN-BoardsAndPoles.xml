<!--========================================================================================================

    NO-BN-BoardsAndPoles.xml
	
	Include in DNA file using XPPq XML preprocessor directive <xpp:expand href="fileName.xml"/>.

	(c) Railcomplete AS, Norway, 2019-2020 All rights reserved.
	
=========================================================================================================-->
<xpp:bloc>



<!--========================================================================================================
	bnp - Boards 'n poles.
	Domain-specific Lua functions, stored in Global Extension Dictionary (not in each object).
=========================================================================================================-->
    <LuaFunction Name="NOBN_bnp_getBoardOrPoleName()" ReturnType="String"
		Description="Returns a short type name for signs (boards and poles), according to the object's variant." >
        <Constructor>String NOBN_bnp_getBoardOrPoleName()</Constructor>
        <Formula>
function NOBN_bnp_getBoardOrPoleName()
	if Variant:find("ERTMS Planovergang, forsignal") then 
		return "Fs-PLO"
	elseif Variant:find("ERTMS Planovergang, signal") then 
		return "PLO"
	elseif Variant:find("E34") then 
		return "Stedskilt"
	elseif Variant:find("E35") then 
		return "Stoppskilt"
	elseif Variant:find("Bevegelig kryss") then
        return "Bev.X"
    elseif Variant:find("refleks") then
        return "Refl."
    elseif Variant:find("Baliseskilt") then
        return "Balise"
    elseif Variant:find("innkoplet") then
        return "Innkopl."
    elseif Variant:find("utkoplet") then
        return "Utkopl."
    elseif Variant:find("Nødtelefon") then
        return "Nødtlf."
    elseif Variant:find("1000V") then
        return "1000V"
    elseif Variant:find("se og lytt") then
        return "Se/lytt"
    elseif Variant:find("enkel") then
        return "PLO"
    elseif Variant:find("fler") then
        return "PLO-fler"
    elseif Variant:find("Sidespor") then
        return "Ssp."
    elseif Variant:find("Kjedebrudd") then
        return "Kj.br."
    elseif Variant:find("meterangivelse") then
        return "Meterang."
    elseif Variant:find("Spornummer") then
        return "Spornr"
    elseif Variant:find("Anleggsområde") then
        return "Anl.omr."
    elseif Variant:find("Rømningsavstand") then
        return "Rømn.avst."
	elseif Variant:find("Arbeidsområdeskilt Type 1%-2") then
        return "Ao type 1-2"
	elseif Variant:find("Arbeidsområdeskilt Type 1%-3") then
        return "Ao type 1-2"
	elseif Variant:find("Arbeidsområdeskilt Type 2%-2") then
        return "Ao type 1-2"
	elseif Variant:find("Arbeidsområdeskilt Type 2%-3") then
        return "Ao type 1-2"	
	elseif Variant:find("Arbeidsområdeskilt Orienterende") then
        return "Ao type Orient."
	elseif Variant:match("%d+%w+-%d") then
        return Variant:match("%d+%w+-%d")
    elseif Variant:match("%d+-%w+") then
        return Variant:match("%d+-%w+")
    elseif Variant:match("%d+%w+") then
        return Variant:match("%d+%w+")
    end
end
        </Formula>
    </LuaFunction> 

	
	
	<LuaFunction Name="NOBN_bnp_getEscapeDistanceBoardTexts()" ReturnType="String"
		Description="Returns a table {'Left'=Lval,'Right'=Rval} with distance to nearest related marker. Default step 10, default offset 0. '?':missing marker, '+':multiple markers found." >
		<Constructor>String NOBN_bnp_getEscapeDistanceBoardTexts([Int step[, Int offset]])</Constructor>
		<Formula>
function NOBN_bnp_getEscapeDistanceBoardTexts(step,offset)
	local r,n,s,t,i,k,downIndex,upIndex
	if step == nil then 
		step = 10
	else
		step = math.floor(math.abs(step))
		if step == 0 then
			step = 10
		end
	end
	if offset == nil then 
		offset = 0
	end
	if this.RcType ~= "KO-SKT Rømningsavstand" then
		return _warning,"Bad object type ["..RcType.."], 'KO-SKT Rømningsavstand' was expected"
	else
		r = Relations["Har markør"]
		n = getCollectionLength(r)
		s = {}
		t = {}
		for i = 1, n do
			table.insert(t,r[i-1].Mileage) --collection r is indexed from 0
		end
		t = RC__sortTable(t)
		k = 0
		for i = 1, n do
			if Mileage &gt; t[i] then
				k = k + 1
			end
		end
		if leftSided then
			downIndex = "Left"
			upIndex = "Right"
		else
			downIndex = "Right"
			upIndex = "Left"
		end
		if k == 0 then
			s[downIndex] = "?"
		elseif k == 1 then
			s[downIndex] = math.floor((offset + Mileage - t[k] + step/2)/step)*step
		elseif k &gt;= 1 then
			s[downIndex] = math.floor((offset + Mileage - t[k] + step/2)/step)*step.."+"
		end
		if k == n then
			s[upIndex] = "?"
		elseif k == n-1 then
			s[upIndex] = math.floor(offset + (t[k+1] - Mileage + step/2)/step)*step
		elseif k &lt;= n-2 then
			s[upIndex] = math.floor(offset + (t[k+1] - Mileage + step/2)/step)*step.."+"
		end
	end
	return s
end
		</Formula>
	</LuaFunction>

	
	
	<LuaFunction Name="NOBN_bnp_getEscapeDistanceBoardTextLeft()" ReturnType="String"
			Description="Returns distance from escape route board to a left-sided related marker. '?':No marker found in arrow direction. '+':Multiple markers found in arrow direction. denoting the emergency exit (with optional step and offset). Default step size is 10. Default offset is 0." >
		<Constructor>String NOBN_bnp_getEscapeDistanceBoardTextLeft([[Int step[, Int offset]])</Constructor>
		<Formula>
function NOBN_bnp_getEscapeDistanceBoardTextLeft(step,offset)
	if Variant:match("venstre") or Variant:match("begge") then
			return NOBN_bnp_getEscapeDistanceBoardTexts(step,offset)["Left"] 
		else 
			return "-",_info("Relate escape distance board to a marker with relation 'Har markør'.")
		end
end
		</Formula>
	</LuaFunction>


	
	<LuaFunction Name="NOBN_bnp_getEscapeDistanceBoardTextRight()" ReturnType="String"
			Description="Returns distance from escape route board to a right-sided related marker. '?':No marker found in arrow direction. '+':Multiple markers found in arrow direction. denoting the emergency exit (with optional step and offset). Default step size is 10. Default offset is 0." >
		<Constructor>String NOBN_bnp_getEscapeDistanceBoardTextRight([[Int step[, Int offset]])</Constructor>
		<Formula>
function NOBN_bnp_getEscapeDistanceBoardTextRight(step,offset)
		if Variant:match("høyre") or Variant:match("begge") then
			return NOBN_bnp_getEscapeDistanceBoardTexts(step,offset)["Right"]
		else 
			return "-",_info("Relate escape distance board to a marker with relation 'Har markør'.")
		end
end
		</Formula>
	</LuaFunction>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/REFLEKSER
	SA-MSS Refleks på lyssignal
	På forsignal og hovedsignal
	TODO 2018-07-06: Kvitte oss med attachment, skifte det ut men relation som gjør tilsvarende. Må ha det nå pga reflekser kan attaches til signaler og reflekser.
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="SA-MSS Refleks på lyssignal" 
				DrawTail="true"
				Layer="JBTSI_SA_MSS" Color="ByLayer"
				Group="Skilt/Kjørende personell/Reflekser"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="signal" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXATTRIBUTES___VERTICAL_AND_FAR___JBTSI"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_JBTSI"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_GENERAL_OBJECT"/>

		<Variants DefaultValue="Hel refleksring for Ø127 signalmast">
			<Variant Name="Halv refleksring for Ø127 signalmast" >
				<SetValue Key="PoleRouting3D" Value="None" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-REFLEKS-HALV-RING-Ø127" />
			</Variant>
			<Variant Name="Hel refleksring for Ø127 signalmast" >
				<SetValue Key="PoleRouting3D" Value="None" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-REFLEKS-HEL-RING-Ø127" />
			</Variant>
			<Variant Name="Flat ensidet refleks for lyssignal" >
				<SetValue Key="PoleRouting3D" Value="Vertical" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-REFLEKS-FLAT-ENSIDET" />
			</Variant>
		</Variants>

		<LuaExpression Name="Offset3D.Z">
			<Formula>
				if (Attachment.RcType == "SA-SIG Signal") then 
					return 1.84
				elseif (Attachment.RcType == "SA-MSS Refleks på lyssignal") then --stacked reflective markers on one signal, they shall be 80 cm apart according to BN rules
					return 2.91
				else 
					return 0
				end
			</Formula>
		</LuaExpression>

		<LuaExpression Name="name"><Formula>NOBN_bnp_getBoardOrPoleName()</Formula></LuaExpression>

		<InsertSymbol VariantName="Halv refleksring for Ø127 signalmast" DisplayBlockName="NO-BN-2D-JBTSI-SIGNAL-REFLEKS-HALV" 
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Hel refleksring for Ø127 signalmast" DisplayBlockName="NO-BN-2D-JBTSI-SIGNAL-REFLEKS-HEL" 
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Flat ensidet refleks for lyssignal" DisplayBlockName="NO-BN-2D-JBTSI-SIGNAL-REFLEKS-HALV" 
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SIGNAL-REFLEKS-HEL" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSI-SIGNAL-REFLEKS
			{% if Variant == 'Halv refleksring for Ø127 signalmast' %}HALV
			{% elsif Variant == 'Hel refleksring for Ø127 signalmast' %}HEL
			{% elsif Variant == 'Flat ensidet refleks for lyssignal' %}HALV
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>
	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/HØYSPENTANLEGG
	EH-BKT Signal 65 Strøm
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="EH-BKT Signal 65 Strømavtager"
				DrawTail="true"
				Layer="JBTKL_EH_BKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Høyspentanlegg"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="kl-mast" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTKL"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<Variants DefaultValue="Signal 65A Jordet seksjon">
			<Variant Name="Signal 65A Jordet seksjon" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-EH-BKT-65A" />
			</Variant>
			<Variant Name="Signal 65B Varselsignal for kontaktledningssignal" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-EH-BKT-65B" />
			</Variant>
			<Variant Name="Signal 65C Utkopling foran dødseksjon" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-EH-BKT-65C" />
			</Variant>
			<Variant Name="Signal 65D Innkopling etter dødseksjon" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-EH-BKT-65D" />
			</Variant>
			<Variant Name="Signal 65E Senking av strømavtaker" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-EH-BKT-65E" />
			</Variant>
			<Variant Name="Signal 65F Heving av strømavtaker" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-EH-BKT-65F" />
			</Variant>
			<Variant Name="Signal 65G-1 Stopp for elektrisk lokomotiv" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-EH-BKT-65G-1" />
			</Variant>
			<Variant Name="Signal 65G-2 Stopp for elektrisk lokomotiv, strømløst mot høyre" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-EH-BKT-65G-2" />
			</Variant>
			<Variant Name="Signal 65G-3 Stopp for elektrisk lokomotiv, strømløst mot venstre" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-EH-BKT-65G-3" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Signal 65A Jordet seksjon" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-65A-JORDETSEKSJON"
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 65B Varselsignal for kontaktledningssignal" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-65B-KONTAKTLEDNING"
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 65C Utkopling foran dødseksjon" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-65C-UTKOPLING"
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 65D Innkopling etter dødseksjon" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-65D-INNKOPLING"
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 65E Senking av strømavtaker" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-65E-SENKSTROEMAVTAKER"
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 65F Heving av strømavtaker" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-65F-HEVSTROEMAVTAKER"
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 65G-1 Stopp for elektrisk lokomotiv" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-65G-1-STOPPELLOK"
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 65G-2 Stopp for elektrisk lokomotiv, strømløst mot høyre" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-65G-2-STOPPELLOK-VSIDE"
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 65G-3 Stopp for elektrisk lokomotiv, strømløst mot venstre" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-65G-3-STOPPELLOK-HSIDE"
                DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-65A-JORDETSEKSJON" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy='-'>
			NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL
			{% if Variant == 'Signal 65A Jordet seksjon' %}65A-JORDETSEKSJON
			{% elsif Variant == 'Signal 65B Varselsignal for kontaktledningssignal' %}65B-KONTAKTLEDNING
			{% elsif Variant == 'Signal 65C Utkopling foran dødseksjon' %}65C-UTKOPLING
			{% elsif Variant == 'Signal 65D Innkopling etter dødseksjon' %}65D-INNKOPLING
			{% elsif Variant == 'Signal 65E Senking av strømavtaker' %}65E-SENKSTROEMAVTAKER
			{% elsif Variant == 'Signal 65F Heving av strømavtaker' %}65F-HEVSTROEMAVTAKER
			{% elsif Variant == 'Signal 65G-1 Stopp for elektrisk lokomotiv' %}65G-1-STOPPELLOK
			{% elsif Variant == 'Signal 65G-2 Stopp for elektrisk lokomotiv, strømløst mot høyre' %}65G-2-STOPPELLOK-VSIDE
			{% elsif Variant == 'Signal 65G-3 Stopp for elektrisk lokomotiv, strømløst mot venstre' %}65G-3-STOPPELLOK-HSIDE
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>
	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/DIVERSE
	KO-SKT Signal 66 Togvei slutt
	Signal 66, Togvei slutt, selve skiltplata, ikke signalet som sluttpunkt for togvei
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Signal 66 Togvei slutt"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Diverse"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="montasjeelement" DrawTail="true" />
		
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<Variants DefaultValue="66 Togvei slutt">
			<Variant Name="66 Togvei slutt" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-66" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="66 Togvei slutt" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-66-TOGVEI-SLUTT" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-66-TOGVEI-SLUTT" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
		</SymbolDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>
	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/ORIENTERINGSSIGNALER
	KO-SKT Signal 67 Orienteringssignal
	Orienteringssignal for PLO/plattform - dag/natt - ikke bruk tyfon nattestid, eller på angitte klokkeslett
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Signal 67 Orienteringssignal" 
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Orienteringssignaler"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<Variants DefaultValue="Signal 67A Orienteringssignal">
			<Variant Name="Signal 67A Orienteringssignal" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-67A" />
			</Variant>
			<Variant Name="Signal 67B Orienteringssignal for planovergang" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-67B" />
			</Variant>
			<Variant Name="Signal 67C Orienteringssignal for holdeplass" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-67C" />
			</Variant>
			<Variant Name="Signal 67D Orienteringssignal for planovergang og holdeplass" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-67D" />
			</Variant>
			<Variant Name="Signal 67E Orienteringssignal dagtid" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-67E" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Signal 67A Orienteringssignal" DisplayName="67A Orienteringssignal" 
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-67A-ORIENTERINGSIGNAL"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
	
		<InsertSymbol VariantName="Signal 67B Orienteringssignal for planovergang"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-67B-ORIENTERINGSIGNAL-PLANOVERGANG"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 67C Orienteringssignal for holdeplass"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-67C-ORIENTERINGSIGNAL-HOLDEPLASS"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 67D Orienteringssignal for planovergang og holdeplass"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-67D-ORIENTERINGSIGNAL-PLANOVERGANG-HOLDEPLASS"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<!-- TODO Skilt natt/dag mangler som 3D-objekt -->
		<InsertSymbol VariantName="Signal 67E Orienteringssignal dagtid"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-67E-ORIENTERINGSIGNAL-DAGTID"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-67A-ORIENTERINGSIGNAL" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy='-'>
				NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL
				{% if Variant == 'Signal 67A Orienteringssignal' %}67A-ORIENTERINGSIGNAL
				{% elsif Variant == 'Signal 67B Orienteringssignal for planovergang' %}67B-ORIENTERINGSIGNAL-PLANOVERGANG
				{% elsif Variant == 'Signal 67C Orienteringssignal for holdeplass' %}67C-ORIENTERINGSIGNAL-HOLDEPLASS
				{% elsif Variant == 'Signal 67D Orienteringssignal for planovergang og holdeplass' %}67D-ORIENTERINGSIGNAL-PLANOVERGANG-HOLDEPLASS
				{% elsif Variant == 'Signal 67E Orienteringssignal dagtid' %}67E-ORIENTERINGSIGNAL-DAGTID
				{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>
	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/HASTIGHETSSIGNALER
	KO-SKT Signal 68/69 hastighetssignal
	Permanente og midlertidige hastighetsgrenser og -varsler. Sporvekselhastigheter.
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Signal 68/69 hastighetssignal"
				DrawTail="true"
                Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Hastighetssignaler"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>

		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" /> 
		<AttachTo Category="signal" DrawTail="true" />
		<AttachTo Category="kl-mast" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<CustomAttribute DataType="UInt32" Name="SignSpeed" DisplayName="Hastighet" DefaultValue="" />
				
		<Variants DefaultValue="68A Nedsatt hastighet">
			<Variant Name="Signal 68A Nedsatt hastighet" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-68A" />
			</Variant>
			<Variant Name="Signal 68B Økt hastighet" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-68B" />
			</Variant>
			<Variant Name="Signal 68C Avvikende hastighet" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-68C" />
			</Variant>
			<Variant Name="Signal 68D-1 Markeringsmerke" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-68D" />
			</Variant>
			<Variant Name="Signal 68D-2 Markeringsmerke på motrettet 68B" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-68D" />
			</Variant>
			<Variant Name="Signal 68D-3 Markeringsmerke på motrettet 69B" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-68D" />
			</Variant>
			<Variant Name="Signal 68F Tilleggshastighet" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-68F" />
			</Variant>
			<Variant Name="Signal 68G Hastighet for krengetog" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-68G" />
			</Variant>
			<Variant Name="Signal 69A Midlertidig nedsatt hastighet" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-69A" />
			</Variant>
			<Variant Name="Signal 69B Midlertidig hastighet opphører" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-69B" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Signal 68A Nedsatt hastighet" DisplayName="68A Nedsatt hastighet"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-68A-NEDSATT-HASTIGHET"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
			<SetValue Key="SignSpeed" Value="40" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 68B Økt hastighet" DisplayName="68B Økt hastighet"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-68B-OEKT-HASTIGHET"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
			<SetValue Key="SignSpeed" Value="80" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 68C Avvikende hastighet" DisplayName="68C Avvikende hastighet"
					DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-68C-NEDSATT-HASTIGHET"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
			<SetValue Key="SignSpeed" Value="50" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 68D-1 Markeringsmerke" DisplayName="68D-1 Markeringsmerke"
					DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-68D-1-MARKERINGSMERKE"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
			<SetValue Key="SignSpeed" Value="40" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 68D-2 Markeringsmerke på motrettet 68B" DisplayName="68D-2 Markeringsmerke på motrettet 68B"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-68D-2-MARKERINGSMERKE-MOTRETTET"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
			<SetValue Key="SignSpeed" Value="40" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 68D-3 Markeringsmerke på motrettet 69B" DisplayName="68D-3 Markeringsmerke på motrettet 69B"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-68D-3-MARKERINGSMERKE-MOTRETTET-MIDLERTIDIG"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
			<SetValue Key="SignSpeed" Value="40" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 68F Tilleggshastighet" DisplayName="68F Tilleggshastighet (underskilt)"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-68F-TILLEGGSHASTIGHET"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
			<SetValue Key="SignSpeed" Value="5" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 68G Hastighet for krengetog" DisplayName="68G Hastighet for krengetog"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-68G-HASTIGHET-KRENGETOG"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
			<SetValue Key="SignSpeed" Value="130" />
		</InsertSymbol>
		
		<!-- Fastened to rail using a special clamp (pole is drawn to rail). Assume board is max 40 cm wide, the train needs 2.12 free space. -->
		<InsertSymbol VariantName="Signal 69A Midlertidig nedsatt hastighet" DisplayName="69A Midlertidig nedsatt hastighet"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-69A-MIDLERTIDIG-NEDSATT"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="0.75" > 
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
			<SetValue Key="SignSpeed" Value="40" />
			<SetValue Key="Model3DOffsetTowardsAlignment" Value="-1.75" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 69B Midlertidig hastighet opphører" DisplayName="69B Midlertidig hastighet opphører"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-69B-MIDLERTIDIG-OPPHOERER"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="0.75" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
			<SetValue Key="SignSpeed" Value="80" />
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-68A-NEDSATT-HASTIGHET" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL
			{% if Variant == 'Signal 68A Nedsatt hastighet' %}68A-NEDSATT-HASTIGHET
			{% elsif Variant == 'Signal 68B Økt hastighet' %}68B-OEKT-HASTIGHET
			{% elsif Variant == 'Signal 68C Avvikende hastighet' %}68C-NEDSATT-HASTIGHET
			{% elsif Variant == 'Signal 68D-1 Markeringsmerke' %}68D-1-MARKERINGSMERKE
			{% elsif Variant == 'Signal 68D-2 Markeringsmerke på motrettet 68B' %}68D-2-MARKERINGSMERKE-MOTRETTET
			{% elsif Variant == 'Signal 68D-3 Markeringsmerke på motrettet 69B' %}68D-3-MARKERINGSMERKE-MOTRETTET-MIDLERTIDIG
			{% elsif Variant == 'Signal 68F Tilleggshastighet' %}68F-TILLEGGSHASTIGHET
			{% elsif Variant == 'Signal 68G Hastighet for krengetog' %}68G-HASTIGHET-KRENGETOG
			{% elsif Variant == 'Signal 69A Midlertidig nedsatt hastighet' %}69A-MIDLERTIDIG-NEDSATT
			{% elsif Variant == 'Signal 69B Midlertidig hastighet opphører' %}69B-MIDLERTIDIG-OPPHOERER
			{% endif %}
			</BlockNameFormat>
			
			<SymbolAttribute Tag="HAST_5">
				<!--'v5' DotLiquid funksjon: Dersom hastighet ender på 0..4 så returneres 0, ellers returneres 5-->
				<Value>{{SignSpeed | v5}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="HAST_10">
				<!--'v10' DotLiquid funksjon: Returnerer input div 10 (input er en float railML verdi) -->
				<Value>{{SignSpeed | v10}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="PLUSS_HAST">
				<Value>+{{SignSpeed}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="KRENGE_HAST">
				<Value>{{SignSpeed}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="VENT_10">
				<Value>{{SignSpeed | v10}}</Value>
			</SymbolAttribute>
		</SymbolDefinition>

		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{SignSpeed | v10}}</Value>
			</Attribute>
			<Attribute Tag="T02">
				<Value>{{SignSpeed | v5}}</Value>
			</Attribute>
			<Attribute Tag="T03">
				<Value>+{{SignSpeed}}</Value>
			</Attribute>
		</Model3DDefinition>

		<SymbolDefinition DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/DIVERSE
	SA-MSS Skilt meterangivelse
	Underskilt for meterangivelse til målpunkt, evt for annet formål
	TODO: INFO MANGLER - Banedata kode = ? 
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="SA-MSS Skilt meterangivelse (målavstand)"
				DrawTail="true"
				Layer="JBTSI_SA_MSS" Color="ByLayer"
				Group="Skilt/Kjørende personell/Diverse"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="montasjeelement" DrawTail="true" />
		
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTSI"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<CustomAttribute DataType="UInt32" Name="TargetDistance" DisplayName="Avstand i meter" DefaultValue="300" />

		<Variants>
			<Variant Name="Meterangivelse (underskilt)">
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-METERANGIVELSE" />
			</Variant>
		</Variants>
		   
		<InsertSymbol VariantName="Meterangivelse (underskilt)" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-UNDERSKILT-METERANGIVELSE" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-UNDERSKILT-METERANGIVELSE" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<SymbolAttribute Tag="AVSTAND">
				<Value>{{TargetDistance}}m</Value>
			</SymbolAttribute>
		</SymbolDefinition>

		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{TargetDistance}}m</Value>
			</Attribute>
		</Model3DDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" >
			<Rotation />
		</SymbolDefinition>

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/ATC
	SA-MSS Signal 60 ATC
	Signal 60 ATC-skilt som ikke egentlig kan hektes på lyssignaler (dvs alle 60-skilt unntatt 60E)
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="SA-MSS Signal 60 ATC"
				DrawTail="true"
				Layer="JBTSI_SA_MSS" Color="ByLayer"
				Group="Skilt/Kjørende personell/ATC"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="montasjeelement" DrawTail="true" />
		
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTSI"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>
	
		<CustomAttribute DataType="String" Name="Text1" DisplayName="Tekst 1" DefaultValue="" 
			DotLiquidExpression="
			{%    if Variant == 'Signal 60D ATC repeter hastighet 10 km/h' %}1
			{% elsif Variant == 'Signal 60D ATC repeter hastighet 40 km/h' %}4
			{% elsif Variant == 'Signal 60F F-ATC' %}FATC
			{% elsif Variant == 'Signal 60G D-ATC' %}DATC
			{% elsif Variant == 'Signal 60H ATC slutter' %}ATC
			{% elsif Variant == 'Signal ATC innkoplet' %}ATC
			{% elsif Variant == 'Signal ATC utkoplet' %}ATC
			{% elsif Variant == 'Signal 60F F-ATC begynner (gammel type)' %}FATC
			{% elsif Variant == 'Signal 60G D-ATC begynner (gammel type)' %}DATC
			{% endif %}" 
		/>
		<CustomAttribute DataType="String" Name="Text2" DisplayName="Tekst 2" DefaultValue=""
			DotLiquidExpression="
			{%    if Variant == 'Signal ATC innkoplet' %}INNKOBLET
			{% elsif Variant == 'Signal ATC utkoplet' %}UTKOBLET
			{% elsif Variant == 'Signal 60F F-ATC begynner (gammel type)' %}BEGYNNER
			{% elsif Variant == 'Signal 60G D-ATC begynner (gammel type)' %}BEGYNNER
			{% endif %}"
			/>

		<!-- Merk: Skilt 60E "ATC Varsel" er gruppert sammen med Ugyldighetsskilt, kan bare hektes på et signal -->
		<Variants DefaultValue="Signal 60D ATC repeter hastighet">
			<Variant Name="Signal 60A ATC forsignal" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60A" />
			</Variant>
			<Variant Name="Signal 60B ATC repeter målpunkt" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60B" />
			</Variant>
			<Variant Name="Signal 60C ATC nødbrems" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60C" />
			</Variant>
			<Variant Name="Signal 60D ATC repeter hastighet" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60D" />
			</Variant>
			<Variant Name="Signal 60D ATC repeter hastighet 10 km/h" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60D-10" />
			</Variant>
			<Variant Name="Signal 60D ATC repeter hastighet 40 km/h" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60D-40" />
			</Variant>
			<Variant Name="Signal 60F F-ATC" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60FG" />
			</Variant>
			<Variant Name="Signal 60G D-ATC" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60FG" />
			</Variant>
			<Variant Name="Signal 60H ATC slutter" > <!--Grå bakgrunn, 'ATC' overstrøket, alle de andre FATC/DATC har gul bakgrunn-->
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60H" />
			</Variant>
			<Variant Name="Signal ATC innkoplet" > <!--ATC innkoblet/utkoblet, S.047608/9, har ikke eget nummer i SJT TFF-->
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60FG-2-LINJER" />
			</Variant>
			<Variant Name="Signal ATC utkoplet" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60FG-2-LINJER" />
			</Variant>
			<Variant Name="Signal 60F F-ATC begynner (gammel type)" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60FG-2-LINJER" />
			</Variant>
			<Variant Name="Signal 60G D-ATC begynner (gammel type)" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60FG-2-LINJER" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Signal 60A ATC forsignal" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60A-ATC-FORSIGNAL"
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 60B ATC repeter målpunkt" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60B-ATC-REPETER-MAALPUNKT" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 60C ATC nødbrems" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60C-ATC-NOEDBREMS" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 60D ATC repeter hastighet" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60D-ATC-REPETER-HASTIGHET" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<InsertSymbol VariantName="Signal 60D ATC repeter hastighet 10 km/h" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60D-ATC-REPETER-HASTIGHET-10" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<InsertSymbol VariantName="Signal 60D ATC repeter hastighet 40 km/h" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60D-ATC-REPETER-HASTIGHET-40" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<!-- 60E: Se lenger opp, skilt som bare kan hektes på lyssignaler -->
		<InsertSymbol VariantName="Signal 60F F-ATC" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60F-F-ATC" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 60G D-ATC" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60G-D-ATC" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<!--TODO mangler 2D-symbol for visning av 60H, kan lages fra 'FJS slutter'-->
		<InsertSymbol VariantName="Signal 60H ATC slutter" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60H-ATC-SLUTTER" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal ATC innkoplet" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-ATC-INNKOPLET" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/> <!--Har ikke eget signalnummer hos Bane NOR-->
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal ATC utkoplet" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-ATC-UTKOPLET" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<InsertSymbol VariantName="Signal 60F F-ATC begynner (gammel type)" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60F-F-ATC" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 60G D-ATC begynner (gammel type)" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60G-D-ATC" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<!--TODO mangler 2D-symbol for visning av 60H, kan lages fra 'FJS slutter'-->
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SIGNAL-MANGLENDE-SYMBOL" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSI-SKILT-KJOERENDE
			{%    if Variant == 'Signal 60A ATC forsignal' %}SIGNAL-60A-ATC-FORSIGNAL
			{% elsif Variant == 'Signal 60B ATC repeter målpunkt' %}SIGNAL-60B-ATC-REPETER-MAALPUNKT
			{% elsif Variant == 'Signal 60C ATC nødbrems' %}SIGNAL-60C-ATC-NOEDBREMS
			{% elsif Variant == 'Signal 60D ATC repeter hastighet' %}SIGNAL-60D-ATC-REPETER-HASTIGHET
			{% elsif Variant == 'Signal 60D ATC repeter hastighet 10 km/h' %}SIGNAL-60D-ATC-REPETER-HASTIGHET-10
			{% elsif Variant == 'Signal 60D ATC repeter hastighet 40 km/h' %}SIGNAL-60D-ATC-REPETER-HASTIGHET-40
			{% elsif Variant == 'Signal 60F F-ATC' %}SIGNAL-60F-F-ATC
			{% elsif Variant == 'Signal 60G D-ATC' %}SIGNAL-60G-D-ATC
			{% elsif Variant == 'Signal 60H ATC slutter' %}SIGNAL-60H-ATC-SLUTTER
			{% elsif Variant == 'Signal ATC innkoplet' %}ATC-INNKOPLET
			{% elsif Variant == 'Signal ATC utkoplet' %}ATC-UTKOPLET
			{% elsif Variant == 'Signal 60F F-ATC begynner (gammel type)' %}SIGNAL-60F-F-ATC
			{% elsif Variant == 'Signal 60G D-ATC begynner (gammel type)' %}SIGNAL-60G-D-ATC
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>

		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{Text1}}</Value>
			</Attribute>
			<Attribute Tag="T02">
				<Value>{{Text2}}</Value>
			</Attribute>
		</Model3DDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" >
			<Rotation />
		</SymbolDefinition>

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/DIVERSE
	SA-MSS Baliseskilt
	Baliseskilt på plattformkanten (siden mot sporet).
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="SA-MSS Baliseskilt på plattformkant"
				DrawTail="false"
				Layer="JBTSI_SA_MSS" Color="ByLayer"
				Group="Skilt/Kjørende personell/Diverse"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTSI"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<Variants DefaultValue="Baliseskilt">
			<Variant Name="Baliseskilt" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-BALISESKILT" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Baliseskilt" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-SIGNAL-BALISE" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation RotateIfRightSideOfAlignment="true" AddAngle="0" Direction="false" />
			<SetValue Key="dir" Value="both" />
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-SIGNAL-BALISE" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD
			{% if Variant == 'Baliseskilt' %}SIGNAL-BALISE
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>BALISE</Value>
			</Attribute>
		</Model3DDefinition>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" />
				<SnapPoint X="0" Y="3" />
				<SnapPoint X="0" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/AVSTANDSSKILT
	KO-SKT Signal 61 Avstandsskilt
	Frittstående men relatert til signaler
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Signal 61 Avstandsskilt"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Avstandsskilt"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" DrawTail="false"/>
		<AttachTo Category="kl-mast" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />
		
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<Variants DefaultValue="61C Avstandsskilt 3 (250m til Hs)">
			<Variant Name="61A Avstandsskilt 1 (1000m til Hs)" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-61A" />
			</Variant>
			<Variant Name="61B Avstandsskilt 2 (800m til Hs)" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-61B" />
			</Variant>
			<Variant Name="61C Avstandsskilt 3 (250m til Hs)" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-61C" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="61A Avstandsskilt 1 (1000m til Hs)" DisplayName="61A Avstandsskilt 1" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-61A-AVSTAND1" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="61B Avstandsskilt 2 (800m til Hs)" DisplayName="61B Avstandsskilt 2" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-61B-AVSTAND2" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="61C Avstandsskilt 3 (250m til Hs)" DisplayName="61C Avstandsskilt 3" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-61C-AVSTAND3" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-61C-AVSTAND3" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat>
			{%    if Variant ==  '61A Avstandsskilt 1 (1000m til Hs)' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-61A-AVSTAND1
			{% elsif Variant ==  '61B Avstandsskilt 2 (800m til Hs)' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-61B-AVSTAND2
			{% elsif Variant ==  '61C Avstandsskilt 3 (250m til Hs)' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-61C-AVSTAND3
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/SKILT PÅ LYSSIGNALER
	SA-MSS Skilt på signal
	Signal 60E ATC Varsel, 62 Ugyldighet, 70 PLO, 72A/72B FJS, 73 Rasvarsling - som bare skal  plasseres på 
	lyssignaler (men vi lar dem få lov til å hekte seg på stolper også, i tilfelle signalet er "fullt")
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="SA-MSS Skilt på lyssignal"
				DrawTail="true"
				Layer="JBTSI_SA_MSS" Color="ByLayer"
				Group="Skilt/Kjørende personell/Skilt på lyssignal"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				> 
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="signal" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTSI"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<Variants DefaultValue="Signal 60E ATC Varsel">
			<Variant Name="Signal 60E ATC Varsel" >
				<!-- Foran på 3-lys Hs skjerm hvis montert på standard mast -->
				<SetValue Key="3D Offset Towards Driver" Value="0.10" />  
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-60E" />
			</Variant>
			<Variant Name="Signal 62 Ugyldighetsskilt" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-62" />
			</Variant>
			<Variant Name="Signal 70 Planovergang" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-70" />
			</Variant>
			<Variant Name="Signal 72A FJS begynner" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-72A" />
			</Variant>
			<Variant Name="Signal 72B FJS slutter" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-72B" />
			</Variant>
			<Variant Name="Signal 73 Rasvarsling" >
				<!--TODO sjekk om 73 tilhører SA og ikke KO - er jo plassert på et signal-->
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-73" /> 
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Signal 60E ATC Varsel" DisplayName="60E ATC Varsel"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60E-ATC-VARSEL" 
				DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 62 Ugyldighetsskilt" DisplayName="62 Ugyldighetsskilt"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-62-UGYLDIG-SIGNAL" 
				DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 70 Planovergang" DisplayName="70 Planovergang"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-70-PLANOVERGANGSSKILT" 
				DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 72A FJS begynner" DisplayName="72A FJS begynner"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-72A-STARTFJS" 
				DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 72B FJS slutter" DisplayName="72B FJS slutter"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-72B-SLUTTFJS" 
				DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 73 Rasvarsling" DisplayName="73 Rasvarslingsskilt"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-73-RASVARSEL" 
				DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60E-ATC-VARSEL" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat>
			{% if Variant == 'Signal 60E ATC Varsel' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-60E-ATC-VARSEL
			{% elsif Variant == 'Signal 62 NO-BN-2D-JBTSI-SIGNAL-UGYLDIGhetsskilt' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-62-NO-BN-2D-JBTSI-SIGNAL-UGYLDIG-SIGNAL
			{% elsif Variant == 'Signal 70 Planovergang' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-70-PLANOVERGANGSSKILT
			{% elsif Variant == 'Signal 72A FJS begynner' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-72A-STARTFJS
			{% elsif Variant == 'Signal 72B FJS slutter' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-72B-SLUTTFJS
			{% elsif Variant == 'Signal 73 Rasvarsling' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-73-RASVARSEL
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/STIGNING- OG FALLVISERE
	KO-SKT Signal 63 Stigning-/fallviser
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Signal 63 Stigning-/fallviser" 
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Stigning- og fallvisere"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="kl-mast" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<CustomAttribute Name="Gradient" DataType="Int32" DefaultValue="99" />
		
		<Variants DefaultValue="Signal 63A Fallviser">
			<Variant Name="Signal 63A Fallviser" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-63A" />
			</Variant>
			<Variant Name="Signal 63B Stigningsviser" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-63B" />
			</Variant>
		</Variants>
		
		<InsertSymbol VariantName="Signal 63A Fallviser" DisplayName="63A Fallviser" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-63A-FALLVISER" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 63B Stigningsviser" DisplayName="63B Stigningsviser" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-63B-STIGNINGSVISER" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-63A-FALLVISER" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat>
			{% if Variant == 'Signal 63A Fallviser' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-63A-FALLVISER
			{% elsif Variant == 'Signal 63B Stigningsviser' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-63B-STIGNINGSVISER
			{% endif %}
			</BlockNameFormat>
			<SymbolAttribute Tag="Gradient">
				<Value>{{GRADIENT}}</Value>
			</SymbolAttribute>
		</SymbolDefinition>

		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{GRADIENT}}</Value>
			</Attribute>
		</Model3DDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" >
			<Rotation />
		</SymbolDefinition>

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/STOLPER
	KO-SKT Signal 64 Stolpe
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Signal 64 Stolpe"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Stolper"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>stolpe</RelationSourceSpace>
		<AttachmentCategory Name="stolpe" PassAttachmentToTarget="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />
			
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_GENERAL_OBJECT"/>

		<LuaExpression Name="name"><Formula>NOBN_bnp_getBoardOrPoleName()</Formula></LuaExpression>

		<CustomAttribute DataType="Boolean" Name="RotateText" InvertOnAlignmentReverse="true" DisplayName="Roter tekst" DefaultValue="False" />  
		<CustomAttribute DataType="String" Name="LeftText" DisplayName="Venstrejustert tekst" DefaultValue="Svart/Hvit" />
		<CustomAttribute DataType="String" Name="RightText" DisplayName="Høyrejustert tekst" DefaultValue="Svart/Hvit" />

		<Variants DefaultValue="Signal 64A Grensestolpe">
			<Variant Name="Signal 64A Grensestolpe" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-64A" />
				<SetValue Key="LeftText" Value="Svart/Hvit" />
				<SetValue Key="RightText" Value="Svart/Hvit" />
				<SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}" />
			</Variant>
			<Variant Name="Signal 64B Seksjoneringsstolpe" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-64B" />
				<SetValue Key="LeftText" Value="Rød/Hvit" />
				<SetValue Key="RightText" Value="Rød/Hvit" />
				<SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}" />
			</Variant>
			<Variant Name="Signal 64C Rasvarslingsstolpe" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-64C" />
				<SetValue Key="LeftText" Value="Gul/Hvit" />
				<SetValue Key="RightText" Value="Gul/Hvit" />
				<SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}" />
			</Variant>
			<Variant Name="Signal 64D Bremsestolpe" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-64D" />
				<SetValue Key="LeftText" Value="Gul/Svart" />
				<SetValue Key="RightText" Value="Gul/Svart" />
				<SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}" />
			</Variant>
			<Variant Name="Signal 64E Teknisk stolpe" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-64E" />
				<SetValue Key="LeftText" Value="Blå/Hvit" />
				<SetValue Key="RightText" Value="Blå/Hvit" />
				<SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}" />
			</Variant>
			<Variant Name="Signal 64F Dvergsignalstolpe" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-64F" />
				<SetValue Key="LeftText" Value="Svart/Hvit" />
				<SetValue Key="RightText" Value="Svart/Hvit" />
				<SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Signal 64A Grensestolpe" DisplayName="64A Grensestolpe" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64A-GRENSESTOLPE" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 64B Seksjoneringsstolpe" DisplayName="64B Seksjoneringsstolpe" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64B-SEKSJONERINGSSTOLPE" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 64C Rasvarslingsstolpe" DisplayName="64C Rasvarslingsstolpe" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64C-RASVARSLINGSSTOLPE" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 64D Bremsestolpe" DisplayName="64D Bremsestolpe" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64D-BREMSESTOLPE" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="Signal 64E Teknisk stolpe" DisplayName="64E Teknisk stolpe" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64E-TEKNISKSTOLPE" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		<InsertSymbol VariantName="64F Dvergsignalstolpe" DisplayName="Signal 64F Dvergsignalstolpe" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64F-DVERGSIGNALSTOLPE" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64A-GRENSESTOLPE" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat>
			{% if Variant == 'Signal 64A Grensestolpe' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64A-GRENSESTOLPE
			{% elsif Variant == 'Signal 64B Seksjoneringsstolpe' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64B-SEKSJONERINGSSTOLPE
			{% elsif Variant == 'Signal 64C Rasvarslingsstolpe' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64C-RASVARSLINGSSTOLPE
			{% elsif Variant == 'Signal 64D Bremsestolpe' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64D-BREMSESTOLPE
			{% elsif Variant == 'Signal 64E Teknisk stolpe' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64E-TEKNISKSTOLPE
			{% elsif Variant == 'Signal 64F Dvergsignalstolpe' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-64F-DVERGSIGNALSTOLPE
			{% endif %}
			</BlockNameFormat>
			<SymbolAttribute Tag="LEFTUP">
				<Value>{% if RotateText == 'False' and dir == 'up' %}{{LeftText}}{% elsif RotateText == 'True' and dir == 'down' %}{{LeftText}}{% else %}{% endif %}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="RIGHTUP">
				<Value>{% if RotateText == 'True' and dir == 'up' %}{{RightText}}{% elsif RotateText == 'False' and dir == 'down' %}{{RightText}}{% else %}{% endif %}</Value>
			</SymbolAttribute>
		</SymbolDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>
	
	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/DIVERSE
	KO-SKT Skilt nødtelefon
	TODO Lage 3D-modell for skilt Nødtelefon
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Skilt nødtelefon"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Diverse"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="apparatskap" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />
		
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<Variants DefaultValue="Nødtelefon" >
			<Variant Name="Nødtelefon" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-NOEDTELEFON" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Nødtelefon" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-NOEDTELEFON" 
                DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation RotateIfRightSideOfAlignment="true" AddAngle="0" Direction="false"/>
			<SetValue Key="dir" Value="both" />
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-NOEDTELEFON" AllowSymbolMove="true" >
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat>
			{% if Variant == 'Nødtelefon' %}NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-NOEDTELEFON
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" />
				<SnapPoint X="0" Y="3" />
				<SnapPoint X="0" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/DIVERSE
	KO-SKT Signal 74 Toglengdeskilt
=========================================================================================================-->
	<ObjectType DataType="tStopPost" Class="RailwayPlacedObject" Name="KO-SKT Signal 74 Toglengdeskilt"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Diverse"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<CustomAttribute DataType="UInt32" Name="HUNDRE_M" DisplayName="Hundre-metere" 
			DotLiquidExpression="{{trainLength | toint | divided_by:100}}" />

		<CustomAttribute DataType="UInt32" Name="TI_M" DisplayName="Ti-metere" 
			DotLiquidExpression="{{trainLength | toint | modulo:100 | divided_by:10}}" />

		<CustomAttribute DataType="UInt32" Name="EN_M" DisplayName="En-metere" 
			DotLiquidExpression="{{trainLength | toint | modulo:10}} " />

		<Variants DefaultValue="Signal 74-1 Toglengde (bred type)">
			<Variant Name="Signal 74-1 Toglengde (bred type)" >
				<SetValue Key="name" Value="74-1" />
				<SetValue Key="trainLength" Value="741" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-74-1" />
			</Variant>
			<Variant Name="Signal 74-2 Toglengde (smal type)" >
				<SetValue Key="name" Value="74-2" />
				<SetValue Key="trainLength" Value="742" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-74-2" />
			</Variant>
		</Variants>
		
		<InsertSymbol VariantName="Signal 74-1 Toglengde (bred type)" DisplayName="74-1 Toglengdeskilt (bred type)" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-74-1-TOGLENGDE1" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
		<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<InsertSymbol VariantName="Signal 74-2 Toglengde (smal type)" DisplayName="74-2 Toglengdeskilt (smal type)" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-74-2-TOGLENGDE2" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-74-1-TOGLENGDE1" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL
				{% if Variant == 'Signal 74-1 Toglengde (bred type)' %}74-1-TOGLENGDE1
				{% elsif Variant == 'Signal 74-2 Toglengde (smal type)' %}74-2-TOGLENGDE2
				{% endif %}
			</BlockNameFormat>

			<!-- Info: Bred type 2D toglengdeskilt symbol benytter tag TOGLENGDE, mens smal type 3D-objekt benytter tags HUNDRE_M, TI_M og EN_M: -->
			<SymbolAttribute Tag="TOGLENGDE">
				<Value>{{trainLength}}m</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="HUNDRE_M">
				<Value>{{HUNDRE_M}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="TI_M">
				<Value>{{TI_M}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="EN_M">
				<Value>{{EN_M}}</Value>
			</SymbolAttribute>
		</SymbolDefinition>

		<!-- Info: Bred type 3D toglengdeskilt benytter tag T01, mens smal type 3D-objekt benytter T02, T03 og T04: -->
		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{trainLength}}m</Value>
			</Attribute>
			<Attribute Tag="T02">
				<Value>{{HUNDRE_M}}</Value>
			</Attribute>
			<Attribute Tag="T03">
				<Value>{{TI_M}}</Value>
			</Attribute>
			<Attribute Tag="T04">
				<Value>{{EN_M}}</Value>
			</Attribute>
			<Attribute Tag="T05">
				<Value>m</Value>
			</Attribute>
		</Model3DDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/DIVERSE
	KO-SKT Skilt spornummer
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Skilt spornummer"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Diverse"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="aak" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___POLEORYOKE"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<CustomAttribute DataType="String" Name="TrackNumber" DisplayName="Spornummer" DefaultValue="38" />

		<Variants>
			<Variant Name="Spornummer">
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-SPORNUMMER" />
				<SetValue Key="PoleOrYoke" Value="Yoke" />
			</Variant>
		</Variants>
		
		<!-- Assume that the track number board has been placed close to "own" track: -->
		<LuaExpression Name="TrackNumber"><Formula>getClosestTracks()[0].code</Formula></LuaExpression>
		<LuaExpression Name="code"><Formula>TrackNumber</Formula></LuaExpression>
		
		<!-- Assume yoke placement, but stay away from exact ventre track in order to keep the tail drawing in place: -->
		<LuaExpression Name="DistanceToAlignment"><Formula>RightSided and 4e-4 or -4e-4</Formula></LuaExpression>
		
		<!-- In alignment snap mode, assume pole,l not yoke. -->
		<InsertSymbol VariantName="Spornummer" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SPORNUMMER" 
				DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SPORNUMMER" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<SymbolAttribute Tag="SPORNUMMER">
				<Value>{{TrackNumber}}</Value>
			</SymbolAttribute>
		</SymbolDefinition>

		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{TrackNumber}}</Value>
			</Attribute>
		</Model3DDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
				<SnapPoint X="0" Y="3" />
				<SnapPoint X="0" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	VEDLIKEHOLDSPERSONELL/ARBEIDSOMRÅDESKILT
	SA-MSS Arbeidsområdeskilt
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="SA-MSS Arbeidsområdeskilt"
				DrawTail="true"
				Layer="JBTOB_SA_MSS" Color="ByLayer"
				Group="Skilt/Vedlikeholdspersonell/Arbeidsområdeskilt"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}" 
				>

		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="signal" DrawTail="true" />
		<AttachTo Category="apparatskap" DrawTail="true" />
		<AttachTo Category="markerboard" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTSI"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<CustomAttribute DataType="String" Name="TEKST1" DisplayName="Tekstlinje 1" DefaultValue="" />
		<CustomAttribute DataType="String" Name="TEKST2" DisplayName="Tekstlinje 2" DefaultValue="Arbeidsområde" />
		<CustomAttribute DataType="String" Name="TEKST3" DisplayName="Tekstlinje 3" DefaultValue="" />
		<CustomAttribute DataType="String" Name="TEKST4" DisplayName="Tekstlinje 4" DefaultValue="" />
		<CustomAttribute DataType="String" Name="TEKST5" DisplayName="Tekstlinje 5" DefaultValue="Arbeidsområde" />
		<CustomAttribute DataType="String" Name="TEKST6" DisplayName="Tekstlinje 6" DefaultValue="" />

		<Variants>
			<Variant Name="Arbeidsområdeskilt Type 1-2" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-ARBEIDSOMRÅDE-1-2" />
			</Variant>
			<Variant Name="Arbeidsområdeskilt Type 1-3" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-ARBEIDSOMRÅDE-1-3" />
			</Variant>
			<Variant Name="Arbeidsområdeskilt Type 2-2" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-ARBEIDSOMRÅDE-2-2" />
			</Variant>
			<Variant Name="Arbeidsområdeskilt Type 2-3" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-ARBEIDSOMRÅDE-2-3" />
			</Variant>
			<Variant Name="Arbeidsområdeskilt Orienterende" >		
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-ARBEIDSOMRÅDE-3" />
			</Variant>	
		</Variants>
		
		<InsertSymbol VariantName="Arbeidsområdeskilt Type 1-2" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-1-2" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="0" Direction="true" RotateIfRightSideOfAlignment="true"/>
			<SetValue Key="dir" Value="both" />
			<SetValue Key="TEKST1" Value="Arbeidsområde" />
			<SetValue Key="TEKST2" Value="OSL 1" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Arbeidsområdeskilt Type 1-3" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-1-3" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="0" Direction="true" RotateIfRightSideOfAlignment="true"/>
			<SetValue Key="dir" Value="both" />
			<SetValue Key="TEKST1" Value="Arbeidsområde" />
			<SetValue Key="TEKST2" Value="OSL 1" />
			<SetValue Key="TEKST3" Value="OSL 3" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Arbeidsområdeskilt Type 2-2" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-2-2" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="0" Direction="true" RotateIfRightSideOfAlignment="true"/>
			<SetValue Key="dir" Value="both" />
			<SetValue Key="TEKST1" Value="Arbeidsområde" />
			<SetValue Key="TEKST2" Value="OSL 1" />
			<SetValue Key="TEKST4" Value="Arbeidsområde" />
			<SetValue Key="TEKST5" Value="OSL 3" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Arbeidsområdeskilt Type 2-3" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-2-3" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="0" Direction="true" RotateIfRightSideOfAlignment="true"/>
			<SetValue Key="dir" Value="both" />
			<SetValue Key="TEKST1" Value="Venstre" />
			<SetValue Key="TEKST2" Value="Arbeidsområde" />
			<SetValue Key="TEKST3" Value="OSL 1" />
			<SetValue Key="TEKST4" Value="Høyre" />
			<SetValue Key="TEKST5" Value="Arbeidsområde" />
			<SetValue Key="TEKST6" Value="OSL 3" />
		</InsertSymbol>
		
		<InsertSymbol VariantName="Arbeidsområdeskilt Orienterende" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-3" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="0" Direction="true" RotateIfRightSideOfAlignment="true"/>
			<SetValue Key="dir" Value="none" />
			<SetValue Key="TEKST2" Value="Port til:" />
			<SetValue Key="TEKST4" Value="Arbeidsområde" />
			<SetValue Key="TEKST5" Value="OSL 1 - OSL 3" />
		</InsertSymbol>
		
		<!-- Note: Direction=="true" in element InsertSymbol (enable keybd shortcut for direction flipping up/down), so RC adds 180 DD to the 'down' direction: -->
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-1" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE
			{% if Variant == 'Arbeidsområdeskilt Type 1-2' %}1-2
			{% elsif Variant == 'Arbeidsområdeskilt Type 1-3' %}1-3
			{% elsif Variant == 'Arbeidsområdeskilt Type 2-2' %}2-2
			{% elsif Variant == 'Arbeidsområdeskilt Type 2-3' %}2-3
			{% elsif Variant == 'Arbeidsområdeskilt Orienterende' %}3
			{% endif %}
			</BlockNameFormat>
			<SymbolAttribute Tag="TEKST1">
				<Value>{{TEKST1}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="TEKST2">
				<Value>{{TEKST2}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="TEKST3">
				<Value>{{TEKST3}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="TEKST4">
				<Value>{{TEKST4}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="TEKST5">
				<Value>{{TEKST5}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="TEKST6">
				<Value>{{TEKST6}}</Value>
			</SymbolAttribute>
		</SymbolDefinition>

		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{TEKST1}}</Value>
			</Attribute>
			<Attribute Tag="T02">
				<Value>{{TEKST2}}</Value>
			</Attribute>
			<Attribute Tag="T03">
				<Value>{{TEKST3}}</Value>
			</Attribute>
			<Attribute Tag="T04">
				<Value>{{TEKST4}}</Value>
			</Attribute>
			<Attribute Tag="T05">
				<Value>{{TEKST5}}</Value>
			</Attribute>
			<Attribute Tag="T06">
				<Value>{{TEKST6}}</Value>
			</Attribute>
		</Model3DDefinition>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
				<SnapPoint X="3" Y="0" />
				<SnapPoint X="-3" Y="0" />
				<SnapPoint X="0" Y="3" />
				<SnapPoint X="0" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>
	

	
<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/ID- OG PILSKILT
	SA-MSS Signal 101 Identifikasjonsskilt
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="SA-MSS Signal 101 Identifikasjonsskilt"
				DrawTail="true"
				Layer="JBTSI_SA_MSS" Color="ByLayer"
				Group="Skilt/Kjørende personell/ID- og pilskilt"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="signal" DrawTail="true" />
		<AttachTo Category="markerboard" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTSI"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_GENERAL_OBJECT"/>

		<!-- (Name is given explicitly, not through the usual naming formula for boards and poles) -->

		<CustomAttribute DataType="String" Name="ID_BOKSTAV" DisplayName="ID-skilt litra (øvre linje)" DefaultValue="" />
		<CustomAttribute DataType="String" Name="ID_NUMMER" DisplayName="ID-skilt signalnummer (midtre/øvre linje)" DefaultValue="" />
		<CustomAttribute DataType="String" Name="ID_STED" DisplayName="ID-skilt stedsforkortelse (nedre linje)" DefaultValue="" />
		<CustomAttribute DataType="String" Name="ID_MINDRE_SIGNAL" DisplayName="Litra/Nummer" DefaultValue="" />
						   
		<LuaExpression Name="code">
			<Formula>Attachment.code</Formula>
		</LuaExpression>
		
		<LuaExpression Name="ID_BOKSTAV">
			<Formula>NOBN_sig_getSignalLitra()</Formula>
		</LuaExpression>

		<LuaExpression Name="ID_NUMMER">
			<Formula>NOBN_sig_getSignalNumber()</Formula>
		</LuaExpression>

		<LuaExpression Name="ID_STED">
			<Formula>Attachment.RC_com_getOcpCode()</Formula>
		</LuaExpression>

		<LuaExpression Name="ID_MINDRE_SIGNAL">
			<Formula>if Variant == 'Signal 101-5 ID-skilt for dvergsignal og togsporsignal, 1-linje, 180x100' then
				return "R"..code
			elseif Variant == 'Signal 101-6 ID-skilt for dvergsignal, 1-linje, 300x100' then
				return "R"..code
			elseif Variant == 'Signal 101-7 ID-skilt for Veisignal, 200x300' then
				return "W"..code
			elseif Variant == 'Signal 101-8 ID-skilt for skiftesignal, 300x200' then
				return "Z"..code
			else 
				return "Bad Variant ["..Variant.."]",_warning
			end</Formula>
		</LuaExpression>

		<Variants>
			<Variant Name="Signal 101-1 ID-skilt for Hs og Fs, 3 linjer, 800x455" >
				<SetValue Key="name" Value="ID (Hs/Fs/3-lj.)" />
				<!--3D-verdiene er tilpasset BN hovedsignal:-->
				<SetValue Key="Offset3D.Z" Value="2.02" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-101-1-800x455" />
			</Variant>
			<Variant Name="Signal 101-2 ID-skilt for Hs og Fs, 2 linjer, 800x325" >
				<SetValue Key="name" Value="ID (Hs/Fs/2-lj.)" />
				<SetValue Key="Offset3D.Z" Value="2.02" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-101-2-800x325" />
			</Variant>
			<Variant Name="Signal 101-3 ID-skilt for Hs og Fs, 3 linjer, Ø600" >
				<SetValue Key="name" Value="ID (Hs/Fs/rundt)" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-101-3-Ø600" />
				<SetValue Key="Offset3D.Z" Value="2.02" />
			</Variant>
			<Variant Name="Signal 101-4 ID-skilt for ERTMS, 2 linjer, 700x325" >
				<SetValue Key="name" Value="ID (ERTMS/2-lj.)" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-101-4-700x325" />
				<SetValue Key="Offset3D.Z" Value="2.0" />
			</Variant>
			<Variant Name="Signal 101-5 ID-skilt for dvergsignal og togsporsignal, 1-linje, 180x100" >
				<SetValue Key="name" Value="ID Ds/Tsp, lite" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-101-5-180x100" />
				<SetValue Key="Offset3D.Z" Value="0.6" />
			</Variant>
			<Variant Name="Signal 101-6 ID-skilt for dvergsignal, 1-linje, 300x100" >
				<SetValue Key="name" Value="ID Ds, stort" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-101-6-300x100" />
				<SetValue Key="Offset3D.Z" Value="0.6" />
			</Variant>
			<Variant Name="Signal 101-7 ID-skilt for Veisignal, 200x300" >
				<SetValue Key="name" Value="ID PLOs/Fs-PLO" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-101-7-200x300" />
				<SetValue Key="Offset3D.Z" Value="1.7" />
			</Variant>
			<Variant Name="Signal 101-8 ID-skilt for skiftesignal, 300x200" >
				<SetValue Key="name" Value="ID Skiftesig." />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-101-8-300x200" />
				<SetValue Key="Offset3D.Z" Value="1.7" />
			</Variant>
			<Variant Name="Signal 101-9 ID-skilt for ERTMS, 2 linjer, 400x200" >
				<SetValue Key="name" Value="ID ERTMS (lite)" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-101-9-400x200-ERTMS" />
				<SetValue Key="Offset3D.Z" Value="1.7" />
			</Variant>
			<Variant Name="Signal 101-10 ID-skilt for ERTMS, 3 linjer, 700x350" >
				<SetValue Key="name" Value="ID ERTMS (stort)" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-101-10-700x350-ERTMS" />
				<SetValue Key="Offset3D.Z" Value="1.7" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Signal 101-1 ID-skilt for Hs og Fs, 3 linjer, 800x455" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-101-1-ID-3-LINJER" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 101-2 ID-skilt for Hs og Fs, 2 linjer, 800x325" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-101-2-ID-2-LINJER" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 101-3 ID-skilt for Hs og Fs, 3 linjer, Ø600" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-101-3-ID-RUNDT" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<!--ERTMS ID-skilt benytter samme 2D-symbol i geo-tegning som for lyssignaler. 2D- og 3D benytter attributter T04 oppe (bokstav og nr) og T03 (sted) nede.-->
		<InsertSymbol VariantName="Signal 101-4 ID-skilt for ERTMS, 2 linjer, 700x325" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-101-2-ID-2-LINJER" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 101-5 ID-skilt for dvergsignal og togsporsignal, 1-linje, 180x100" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-101-5-ID-MINDRE-SIGNAL-180x100" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<InsertSymbol VariantName="Signal 101-6 ID-skilt for dvergsignal, 1-linje, 300x100" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-101-6-ID-MINDRE-SIGNAL-300x100" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 101-7 ID-skilt for Veisignal, 200x300" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-101-7-ID-MINDRE-SIGNAL-200x300" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 101-8 ID-skilt for skiftesignal, 300x200" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-101-8-ID-MINDRE-SIGNAL-300x200" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 101-9 ID-skilt for ERTMS, 2 linjer, 400x200" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-101-9-ID-ERTMS-400x200" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 101-10 ID-skilt for ERTMS, 3 linjer, 700x350" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-101-10-ID-ERTMS-700x350" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-101-1-ID-3-LINJER" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL
			{% if Variant == 'Signal 101-1 ID-skilt for Hs og Fs, 3 linjer, 800x455' %}101-1-ID-3-LINJER
			{% elsif Variant == 'Signal 101-2 ID-skilt for Hs og Fs, 2 linjer, 800x325' %}101-2-ID-2-LINJER
			{% elsif Variant == 'Signal 101-3 ID-skilt for Hs og Fs, 3 linjer, Ø600' %}101-3-ID-RUNDT
			{% elsif Variant == 'Signal 101-4 ID-skilt for ERTMS, 2 linjer, 700x325' %}101-2-ID-2-LINJER
			{% elsif Variant == 'Signal 101-5 ID-skilt for dvergsignal og togsporsignal, 1-linje, 180x100' %}101-5-ID-MINDRE-SIGNAL-180x100
			{% elsif Variant == 'Signal 101-6 ID-skilt for dvergsignal, 1-linje, 300x100' %}101-6-ID-MINDRE-SIGNAL-300x100
			{% elsif Variant == 'Signal 101-7 ID-skilt for Veisignal, 200x300' %}101-7-ID-MINDRE-SIGNAL-200x300
			{% elsif Variant == 'Signal 101-8 ID-skilt for skiftesignal, 300x200' %}101-8-ID-MINDRE-SIGNAL-300x200
			{% elsif Variant == 'Signal 101-9 ID-skilt for ERTMS, 2 linjer, 400x200' %}101-9-ID-ERTMS-400x200
			{% elsif Variant == 'Signal 101-10 ID-skilt for ERTMS, 3 linjer, 700x350' %}101-10-ID-ERTMS-700x350
			{% endif %}
			</BlockNameFormat>
			<SymbolAttribute Tag="ID_BOKSTAV">
				<Value>{{ID_BOKSTAV}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="ID_NUMMER">
				<Value>{{ID_NUMMER}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="ID_STED">
				<Value>{{ID_STED}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="ID_BOKSTAV_OG_NR">
				<Value>{{ID_BOKSTAV}} {{ID_NUMMER}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="ID_MINDRE_SIGNAL">
				<Value>{{ID_MINDRE_SIGNAL}}</Value>
			</SymbolAttribute>
		</SymbolDefinition>

		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{ID_BOKSTAV}}</Value>
			</Attribute>
			<Attribute Tag="T02">
				<Value>{{ID_NUMMER}}</Value>
			</Attribute>
			<Attribute Tag="T03">
				<Value>{{ID_STED}}</Value>
			</Attribute>
			<Attribute Tag="T04">
				<Value>{{ID_BOKSTAV}} {{ID_NUMMER}}</Value>
			</Attribute>
			<Attribute Tag="T05">
				<Value>{{ID_MINDRE_SIGNAL}}</Value>
			</Attribute>
		</Model3DDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
				<SnapPoint X="7" Y="7" />
				<SnapPoint X="7" Y="-7" />
				<SnapPoint X="-7" Y="7" />
				<SnapPoint X="-7" Y="-7" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/ID- OG PILSLKILT
	SA-MSS Signal 102 Pilskilt (underskilt)
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="SA-MSS Signal 102 Pilskilt (underskilt)"
				DrawTail="true"
				Layer="JBTSI_SA_MSS" Color="ByLayer"
				Group="Skilt/Kjørende personell/ID- og pilskilt"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="signal" DrawTail="true"/> 
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTSI"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_GENERAL_OBJECT"/>

		<LuaExpression Name="name"><Formula>NOBN_bnp_getBoardOrPoleName()</Formula></LuaExpression>

		<Variants>
			<Variant Name="Pil mot høyre (102-1)" >
				<SetValue Key="name" Value="Pil (høyre)" />
				<!--
				3D-verdier tilpasset frittstående SATEMA dverg: 3D Offset.Z=1.18, 3D OffsetTowardsDriver=-0.13:
				3D-verdier tilpasset NSI-63 signal med vanlig signalskap og SATEMA dverg: 3D Offset.Z=1.33, 3D OffsetTowardsDriver=0.20 -->
				<SetValue Key="Offset3D.Z" Value="1.33" />
				<SetValue Key="3D Offset Towards Driver" Value="0.20" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-102-PIL-VSIDE" />
			</Variant>
			<Variant Name="Pil mot venstre (102-2)" >
				<SetValue Key="name" Value="Pil (venstre)" />
				<!--3D-verdier tilpasset NSI-63 signal med vanlig signalskap og SATEMA dverg:-->
				<SetValue Key="Offset3D.Z" Value="1.33" />
				<SetValue Key="3D Offset Towards Driver" Value="0.20" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-102-PIL-HSIDE" />
			</Variant>
			<Variant Name="Pil begge veier (102-3)" >
				<SetValue Key="name" Value="Pil (begge veier)" />
				<!--3D-verdier tilpasset skilt på 3.50 m høy stolpe med underskilt "pilskilt":-->
				<SetValue Key="Offset3D.Z" Value="2.9" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-MSS-102-PIL-DOBBELSIDIG" />
			</Variant>
		</Variants>
		
		<InsertSymbol VariantName="Pil mot høyre (102-1)" DisplayName="102-1 Pilskilt" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-102-1-PILSKILT-H"
				DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Pil mot venstre (102-2)" DisplayName="102-2 Pilskilt" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-102-2-PILSKILT-V"
				DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Pil begge veier (102-3)" DisplayName="102-3 Pilskilt" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-102-3-PILSKILT-HV"
				DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-102-1-PILSKILT-H" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL
			{% if Variant == 'Pil mot høyre (102-1)' %}102-1-PILSKILT-H
			{% elsif Variant == 'Pil mot venstre (102-2)' %}102-2-PILSKILT-V
			{% elsif Variant == 'Pil begge veier (102-3)' %}102-3-PILSKILT-HV
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" >
			<Rotation />
		</SymbolDefinition>

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0.3" />  <!--Plassering litt opp på 2D-symbolets mast-->
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/DIVERSE
	KO-SKT Skilt 1000V togvarmeanlegg
	TODO Lage 3D-modell for skilt "1000V"
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Skilt 1000V togvarmeanlegg"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Diverse"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="teknisk_bygg" DrawTail="true" />
		<AttachTo Category="apparatskap" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTEL"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<LuaExpression Name="name"><Formula>NOBN_bnp_getBoardOrPoleName()</Formula></LuaExpression>

		<Variants>
			<Variant Name="1000V togvarmeanlegg">
				<SetValue Key="Model3DName" Value="NO-BN-3D-UKJENT" />
			</Variant>
		</Variants>
				   
		<InsertSymbol VariantName="1000V togvarmeanlegg" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-1000V" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-1000V" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat>
			{% if Variant == '1000 V togvarmeanlegg' %}NO-BN-2D-JBTSI-SKILT-KJOERENDE-1000V
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/DIVERSE
	KO-SKT Skilt bevegelig kryss
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Skilt bevegelig kryss"
				DrawTail="true"
                Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Diverse"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>
		 
		<Variants>
			<Variant Name="Bevegelig kryss">
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-BEVEGELIG-KRYSS" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Bevegelig kryss" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-BEVEGELIG-KRYSS" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-BEVEGELIG-KRYSS" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
		</SymbolDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>
	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/KILOMETERSKILT
	KO-SKT Signal 75 Kilometrering
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Signal 75 Kilometrering"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Kilometerskilt"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="kl-mast" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<CustomAttribute DataType="UInt32" Name="HEL_KM" DisplayName="Hel km" DefaultValue="0" />
		<CustomAttribute DataType="UInt32" Name="HALV_KM" DisplayName="Halv km" DefaultValue="0" />
		
		<LuaExpression Name="HEL_KM"  > 
			<Formula>RC_com_getNearestEntireKm()</Formula>
		</LuaExpression>

        <LuaExpression Name="HALV_KM"  >
			<Formula>RC_com_getNearestHalfKm()</Formula>
		</LuaExpression>

		<Variants DefaultValue="Signal 75A-1 Kilometrering">
			<Variant Name="Signal 75A-1 Kilometrering" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-75A-1" />
			</Variant>
			<Variant Name="Signal 75A-2 Kilometrering, gammel type" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-75A-2" />
			</Variant>
			<Variant Name="Signal 75B Kilometrering i tunnel" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-75B" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Signal 75A-1 Kilometrering" DisplayName="75A-1 Kilometrering" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-75A-1-KILOMETER-NY" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 75A-2 Kilometrering, gammel type" DisplayName="75A-2 Kilometrering, gammel type" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-75A-2-KILOMETER-GAMMEL" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Signal 75B Kilometrering i tunnel" DisplayName="75B Kilometerskilt for tunneler" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-75B-KILOMETER-TUNNEL" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.8" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL-75A-1-KILOMETER-NY" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIGNAL
			{% if Variant == 'Signal 75A-1 Kilometrering' %}75A-1-KILOMETER-NY
			{% elsif Variant == 'Signal 75A-2 Kilometrering, gammel type' %}75A-2-KILOMETER-GAMMEL
			{% elsif Variant == 'Signal 75B Kilometrering i tunnel' %}75B-KILOMETER-TUNNEL
			{% endif %}
			</BlockNameFormat>
			<SymbolAttribute Tag="HUNDRE_KM">
				<Value>{{HEL_KM | divided_by:100}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="TI_KM">
				<Value>{{HEL_KM | modulo:100 | divided_by:10}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="EN_KM">
				<Value>{{HEL_KM | modulo:10}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="HEL_KM">
				<Value>{{HEL_KM}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="HALV_KM">
				<Value>{{HALV_KM}}</Value>
			</SymbolAttribute>
		</SymbolDefinition>

		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{HEL_KM}}</Value>
			</Attribute>
			<Attribute Tag="T02">
				<Value>{{HALV_KM}}</Value>
			</Attribute>
			<Attribute Tag="T03">
				<Value>{{HEL_KM | divided_by:100}}</Value>
			</Attribute>
			<Attribute Tag="T04">
				<Value>{{HEL_KM | modulo:100 | divided_by:10}}</Value>
			</Attribute>
			<Attribute Tag="T05">
				<Value>{{HEL_KM | modulo:10}}</Value>
			</Attribute>
		</Model3DDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	TREDJEPERSON
	KO-SKT Rømningsavstand
	Mann, pil og avstand til nærmeste rømningsvei(er), vendt mot gangbane ved sporet
	TODO: Skille på 2D-symbol for begge veier, bare venstre og bare høyre avstand.
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Rømningsavstand"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Tredjeperson"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="kl-mast" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />
		
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>
					
		<LuaExpression Name="dir"><Formula>"both"</Formula></LuaExpression>
				   
		<Variants DefaultValue="Skilt Rømningsavstand begge veier">
			<Variant Name="Skilt Rømningsavstand begge veier" >
			</Variant>
			<Variant Name="Skilt Rømningsavstand mot venstre" >
			</Variant>
			<Variant Name="Skilt Rømningsavstand mot høyre" >
			</Variant>
		</Variants>
		
		<CustomAttribute DataType="String" Name="LeftDistance" DisplayName="Rømningsavstand mot venstre" DefaultValue="-" 
			Description="The 'LeftDistance' custom attribute holds the distance, along own alignment, between the board and a left-sided related marker (FE-DIV MARKØR) object."/>
		<CustomAttribute DataType="String" Name="RightDistance" DisplayName="Rømningsavstand mot høyre" DefaultValue="-"
			Description="The 'RightDistance' custom attribute holds the distance, along own alignment, between the board and a right-sided related marker (FE-DIV MARKØR) object."/>
		
		<LuaExpression Name="LeftDistance" >
			<Formula>NOBN_bnp_getEscapeDistanceBoardTextLeft(10,0)</Formula>
		</LuaExpression>
		
		<LuaExpression Name="RightDistance" >
			<Formula>NOBN_bnp_getEscapeDistanceBoardTextRight(10,0)</Formula>
		</LuaExpression>

		<LuaExpression Name="Model3DName" >
			<Formula>if Variant == "Skilt Rømningsavstand begge veier" then
	return "NO-BN-3D-KO-SKT-RØMNINGSAVSTAND-VH"
elseif  Variant == "Skilt Rømningsavstand mot venstre" then
	return "NO-BN-3D-KO-SKT-RØMNINGSAVSTAND-V"
elseif  Variant == "Skilt Rømningsavstand mot høyre" then
	return "NO-BN-3D-KO-SKT-RØMNINGSAVSTAND-H"
else
	return "Bad Variant ["..Variant.."], cannot Evaluate Model3DName",_warning
end
			</Formula>
		</LuaExpression>

		<InsertSymbol VariantName="Skilt Rømningsavstand begge veier" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-ROEMNINGSVEI-VH"
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.8" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation RotateIfRightSideOfAlignment="true" AddAngle="0" Direction="false"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Skilt Rømningsavstand mot venstre" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-ROEMNINGSVEI-V"
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.8" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation RotateIfRightSideOfAlignment="true" AddAngle="0" Direction="false"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Skilt Rømningsavstand mot høyre" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-ROEMNINGSVEI-H"
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.8" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation RotateIfRightSideOfAlignment="true" AddAngle="0" Direction="false"/>
		</InsertSymbol>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-ROEMNINGSVEI-VH" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat>
			{% if Variant == 'Skilt Rømningsavstand begge veier' %}NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-ROEMNINGSVEI-VH
			{% elsif Variant == 'Skilt Rømningsavstand mot venstre' %}NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-ROEMNINGSVEI-V
			{% elsif Variant == 'Skilt Rømningsavstand mot høyre' %}NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-ROEMNINGSVEI-H
			{% endif %}
			</BlockNameFormat>
			<SymbolAttribute Tag="VDIST">
				<Value>{{LeftDistance}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="HDIST">
				<Value>{{RightDistance}}</Value>
			</SymbolAttribute>
		</SymbolDefinition>

		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{LeftDistance}}</Value>
			</Attribute>
			<Attribute Tag="T02">
				<Value>{{RightDistance}}</Value>
			</Attribute>
		</Model3DDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" >
			<Rotation />
		</SymbolDefinition>

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	TREDJEPERSON
	KO-SKT Stopp se og lytt
	'Stopp! se og lytt etter tog' - skilt mot vei
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Stopp se og lytt"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Tredjeperson"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>

		<RelationSourceSpace>skilt_mot_vei</RelationSourceSpace>
		<AttachmentCategory Name="skilt_mot_vei" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt_mot_vei" />
		<AttachTo Category="signal_mot_vei" />
		<AttachTo Category="montasjeelement" DrawTail="true" />
		
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<Variants>
			<Variant Name="Skilt Stopp se og lytt">
				<SetValue Key="Model3DName" Value="NO-BN-3D-UKJENT" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Skilt Stopp se og lytt" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-STOPPSEOGLYTT"
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
			<Rotation RotateIfRightSideOfAlignment="true" AddAngle="180" Direction="false"/>
		</InsertSymbol>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-STOPPSEOGLYTT" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
		</SymbolDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt_mot_vei" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>

	

<!--========================================================================================================
	SKILT
	TREDJEPERSON
	KO-SKT Skilt Trafikkskilt 138 Jernbaneovergang
	Diverse skilt, Trafikkskilt 138 Jernbaneovergang / ... vendt mot vei
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Trafikkskilt 138 Jernbaneovergang"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer" 
				Group="Skilt/Tredjeperson"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>

		<RelationSourceSpace>skilt_mot_vei</RelationSourceSpace>
		<AttachmentCategory Name="skilt_mot_vei" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt_mot_vei" />
		<AttachTo Category="signal_mot_vei" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTSI"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>
		
		<!-- To be mounted on level crossing signal towards road traffic -->

		<Variants DefaultValue="Andreaskors for enkeltspor" >
			<Variant Name="Andreaskors for enkeltspor" >
				<SetValue Key="name" Value="Jernbaneovergang" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-TRAFIKKSKILT-138-JERNBANEOVERGANG-ENKELTSPOR" />
			</Variant>
			<Variant Name="Andreaskors for flere spor" >
				<SetValue Key="name" Value="Jernbaneovergang flere spor" />
				<SetValue Key="Model3DName" Value="NO-BN-3D-SA-TRAFIKKSKILT-138-JERNBANEOVERGANG-FLERSPOR" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Andreaskors for enkeltspor" DisplayName="Trafikkskilt 138 Jernbaneovergang"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-138-MOT-VEI" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
			<OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>
		
		<InsertSymbol VariantName="Andreaskors for flere spor" DisplayName="Trafikkskilt 138 Jernbaneovergang flere spor"
				DisplayBlockName="NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-138-MOT-VEI-FLERE-SPOR" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
			<OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-TREDJEPERSON-138-MOT-VEI" AllowSymbolMove="true" >
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSI-SKILT-TREDJEPERSON
			{% if Variant == 'Enkel' %}138-MOT-VEI
			{% elsif Variant == 'Flere' %}138-MOT-VEI-FLERE-SPOR
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>
			
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt_mot_vei" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>
	</ObjectType>
	


<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/DIVERSE
	KO-SKT Skilt anleggsområde
	TODO Lage 3D-modell for skilt Anleggsområde begynner/slutter
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Anleggsområde"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Diverse"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>
		
		<Variants>
			<Variant Name="Anleggsområde begynner" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-UKJENT" />
			</Variant>
			<Variant Name="Anleggsområde slutter" >
				<SetValue Key="Model3DName" Value="NO-BN-3D-UKJENT" />
			</Variant>
		</Variants>
		
		<InsertSymbol VariantName="Anleggsområde begynner" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-ANLEGGSOMRAADE-BEGYNNER" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<InsertSymbol VariantName="Anleggsområde slutter" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-ANLEGGSOMRAADE-SLUTTER" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation AddAngle="-90" Direction="true"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-ANLEGGSOMRAADE-BEGYNNER" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSI-SKILT-KJOERENDE
			{% if Variant == 'Anleggsområde begynner' %}ANLEGG-BEGYNNER
			{% elsif Variant == 'Anleggsområde slutter' %}ANLEGG-SLUTTER
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	KJØRENDE PERSONELL/DIVERSE
	KO-SKT Skilt sidespor
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Sidespor"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Kjørende personell/Diverse"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				> 
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>

		<CustomAttribute DataType="String" Name="SSP_NAVN" DisplayName="Sidespor navn (store bokstaver):" DefaultValue="Firmanavn AS" />
		<CustomAttribute DataType="String" Name="SSP_KM" DisplayName="Kilometer (xxx,xx):" DefaultValue="0,0" />
		<CustomAttribute DataType="String" Name="SSP_FRA_STASJON" DisplayName="Stasjon 1" DefaultValue="Askeby" />
		<CustomAttribute DataType="String" Name="SSP_TIL_STASJON" DisplayName="Stasjon 2" DefaultValue="Potteby" />
		
		<Variants>
			<Variant Name="Sidespor">
				<SetValue Key="Model3DName" Value="NO-BN-3D-UKJENT" />
			</Variant>
		</Variants>
		
		<InsertSymbol VariantName="Sidespor" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIDESPOR"
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation RotateIfRightSideOfAlignment="true" AddAngle="180" Direction="false"/>
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-KJOERENDE-SIDESPOR" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<SymbolAttribute Tag="SSP_NAVN">
				<Value>{{SSP_NAVN}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="SSP_KM">
				<Value>Km. {{SSP_KM}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="SSP_STASJON">
				<Value>{{SSP_FRA_STASJON}}og {{SSP_TIL_STASJON}}</Value>
			</SymbolAttribute>
		</SymbolDefinition>

		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{SSP_NAVN}}</Value>
			</Attribute>
			<Attribute Tag="T02">
				<Value>Km. {{SSP_KM}}</Value>
			</Attribute>
			<Attribute Tag="T03">
				<Value>{{SSP_FRA_STASJON} } og {{SSP_TIL_STASJON}}</Value>
			</Attribute>
		</Model3DDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	VEDLIKEHOLDSPERSONELL
	KO-SKT Skilt geografisk kjedebrudd
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Kjedebrudd"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Vedlikeholdspersonell/Kjedebrudd"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>
		
		<CustomAttribute DataType="UInt32" Name="FRA_KM" DisplayName="Fra km" DefaultValue="15" />
		<CustomAttribute DataType="UInt32" Name="FRA_MM" DisplayName="Fra mm" DefaultValue="422000" />
		<CustomAttribute DataType="UInt32" Name="TIL_KM" DisplayName="Til km" DefaultValue="15" />
		<CustomAttribute DataType="UInt32" Name="TIL_MM" DisplayName="Til mm" DefaultValue="450000" />
		<CustomAttribute DataType="Decimal" Name="Sprang" DisplayName="Sprang i m" DefaultValue="28"/>

		<LuaExpression Name="dir"><Formula>"both"</Formula></LuaExpression>

		<LuaExpression Name="FRA_KM">
			<Formula>
				local km = getAlignmentInfo().NearestMileageChange.MileageIn
				if (RC__isNan(km)) then return "0" end
				return string.format("%d", km/1000)
			</Formula>
		</LuaExpression>
		
		<LuaExpression Name="FRA_MM">
			<Formula>
				local km = getAlignmentInfo().NearestMileageChange.MileageIn
				if (RC__isNan(km)) then return "0" end
				return string.format("%.06f", 1000*(km%1000)+0.5)
			</Formula>
		</LuaExpression>
		
		<LuaExpression Name="TIL_KM">
			<Formula>
				local km = getAlignmentInfo().NearestMileageChange.MileageOut
				if (RC__isNan(km)) then return "0" end
				return string.format("%d", km/1000)
			</Formula>
		</LuaExpression>
		
		<LuaExpression Name="TIL_MM">
			<Formula>
				local km = getAlignmentInfo().NearestMileageChange.MileageOut
				if (RC__isNan(km)) then return "0" end
				return string.format("%.06f", 1000*(km%1000)+0.5)
			</Formula>
		</LuaExpression>
		
		<LuaExpression Name="Sprang">
			<Formula>
				local mileageChange = getAlignmentInfo().NearestMileageChange
				if (RC__isNan(mileageChange.MileageOut) or RC__isNan(mileageChange.MileageIn)) then return "0" end
				return string.format("%.0f", (mileageChange.MileageOut - mileageChange.MileageIn))
			</Formula>
		</LuaExpression>
				   
		<Variants>
			<Variant Name="Eksakt kjedebrudd">
				<SetValue Key="Model3DName" Value="NO-BN-3D-KO-SKT-KJEDEBRUDD-EKSAKT" />
			</Variant>
		</Variants>

		<InsertSymbol VariantName="Eksakt kjedebrudd" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-SIGNAL-KJEDEBRUDD"
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation RotateIfRightSideOfAlignment="true" AddAngle="0" Direction="false"/>
		</InsertSymbol>

		<!--TODO Få kjedebruddskiltet til å plukke opp verdiene sine fra de to alignment'ene som møtes på samme sted-->
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-SIGNAL-KJEDEBRUDD" AllowSymbolMove="true">
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<SymbolAttribute Tag="FRA_KM">
				<Value>{{FRA_KM}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="FRA_M">
				<Value>{{FRA_MM}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="TIL_KM">
				<Value>{{TIL_KM}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="TIL_M">
				<Value>{{TIL_MM}}</Value>
			</SymbolAttribute>
			<SymbolAttribute Tag="Sprang">
				<Value>{% if sprang &gt; 0 %}+{% endif %}{{sprang}}m</Value>
			</SymbolAttribute>
		</SymbolDefinition>

		<Model3DDefinition>
			<Attribute Tag="T01">
				<Value>{{FRA_KM}}</Value>
			</Attribute>
			<Attribute Tag="T02">
				<Value>{{FRA_MM}}</Value>
			</Attribute>
			<Attribute Tag="T03">
				<Value>{{TIL_KM}}</Value>
			</Attribute>
			<Attribute Tag="T04">
				<Value>{{TIL_MM}}</Value>
			</Attribute>
			<Attribute Tag="T05">
				<Value>{% if sprang &gt; 0 %}+{% endif %}{{sprang}}m</Value>
			</Attribute>
		</Model3DDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" />
				<SnapPoint X="0" Y="3" />
				<SnapPoint X="0" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>

	</ObjectType>



<!--========================================================================================================
	SKILT
	VEDLIKEHOLDSPERSONELL
	KO-SKT Signal 75C/75D Hev/senk sporrenser
=========================================================================================================-->
	<ObjectType DataType="tSign" Class="RailwayPlacedObject" Name="KO-SKT Signal 75C/75D Hev/senk sporrenser"
				DrawTail="true"
				Layer="JBTOB_KO_SKT" Color="ByLayer"
				Group="Skilt/Vedlikeholdspersonell/Sporrenser"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSourceSpace>skilt</RelationSourceSpace>
		<AttachmentCategory Name="skilt" PassAttachmentToTarget="true" />
		<AttachTo Category="skilt" />
		<AttachTo Category="kl-mast" DrawTail="true" />
		<AttachTo Category="montasjeelement" DrawTail="true" />

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_TAG_OBJECTINFO_METADATA_VAR"/>
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___VERTICAL_AND_STACKED___JBTOB"/>
		<xpp:expand select="NOBN_com_DISCIPLINE_SKILT"/>
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS"/>
		<xpp:expand select="RC_com_SET_OCP_STATION_REF"/>
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_BOARD_OBJECT"/>
		
		<LuaExpression Name="Model3DName"><Formula>_KO_SKT_75CD_Model3dName()</Formula></LuaExpression>
		<LuaFunction Name="_KO_SKT_75CD_Model3dName()" ReturnType="String"
				Description="Obtains the board's 3D model name." >
			<Constructor>String _KO_SKT_75CD_Model3dName()</Constructor>
			<Formula>
				function _KO_SKT_75CD_Model3dName()
					if Variant == "Signal 75C-1 Hev sporrenser (til høyre for sporet)" then
						return "NO-BN-3D-KO-SKT-75C-HSIDE"
					elseif Variant == "Signal 75C-2 Hev sporrenser (til venstre for sporet)" then
						return "NO-BN-3D-KO-SKT-75C-VSIDE"
					elseif Variant == "Signal 75D-1 Senk sporrenser (til høyre for sporet)" then
						return "NO-BN-3D-KO-SKT-75D-HSIDE"
					elseif Variant == "Signal 75D-2 Senk sporrenser (til venstre for sporet)" then
						return "NO-BN-3D-KO-SKT-75D-VSIDE"
					else	
						return "Bad Variant ["..Variant.."]."
					end
				end
			</Formula>
		</LuaFunction>

		<Variants DefaultValue="Signal 75C-1 Hev sporrenser (til høyre for sporet)">
			<Variant Name="Signal 75C-1 Hev sporrenser (til høyre for sporet)" />
			<Variant Name="Signal 75C-2 Hev sporrenser (til venstre for sporet)" />
			<Variant Name="Signal 75D-1 Senk sporrenser (til høyre for sporet)" />
			<Variant Name="Signal 75D-2 Senk sporrenser (til venstre for sporet)" /> 
		</Variants>

		<InsertSymbol VariantName="75C Hev sporrenser" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-SIGNAL-75C-1-HEV-HSIDE" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation RotateIfLeftSideOfAlignment="false" AddAngle="-90" Direction="true"/>
			<SetValue Key="Variant" Value="{% if RightSided %}Signal 75C-1 Hev sporrenser (til høyre for sporet){% else %}Signal 75C-2 Hev sporrenser (til venstre for sporet){% endif %}" /> 
		</InsertSymbol>
		
		<InsertSymbol VariantName="75D Senk sporrenser" DisplayBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-SIGNAL-75D-1-SENK-HSIDE" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
			<Rotation RotateIfLeftSideOfAlignment="false" AddAngle="-90" Direction="true"/>
			<SetValue Key="Variant" Value="{% if RightSided %}Signal 75D-1 Senk sporrenser (til høyre for sporet){% else %}Signal 75D-2 Senk sporrenser (til venstre for sporet){% endif %}" /> 
		</InsertSymbol>

		<SymbolDefinition X="0.0" Y="0.0" AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-SIGNAL-75C-1-HEV-HSIDE" >
			<Rotation RotateDirection="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSI-SKILT-VEDLIKEHOLD-SIGNAL
			{% if dir == 'up' %}
				{% if Variant == 'Signal 75C-1 Hev sporrenser (til høyre for sporet)' %}75C-1-HEV-HSIDE
				{% elsif Variant == 'Signal 75C-2 Hev sporrenser (til venstre for sporet)' %}75C-2-HEV-VSIDE
				{% elsif Variant == 'Signal 75D-1 Senk sporrenser (til høyre for sporet)' %}75D-1-SENK-HSIDE
				{% elsif Variant == 'Signal 75D-2 Senk sporrenser (til venstre for sporet)' %}75D-2-SENK-VSIDE
				{% endif %}
			{% else %}
				{% if Variant == 'Signal 75C-1 Hev sporrenser (til høyre for sporet)' %}75C-2-HEV-VSIDE
				{% elsif Variant == 'Signal 75C-2 Hev sporrenser (til venstre for sporet)' %}75C-1-HEV-HSIDE
				{% elsif Variant == 'Signal 75D-1 Senk sporrenser (til høyre for sporet)' %}75D-2-SENK-VSIDE
				{% elsif Variant == 'Signal 75D-2 Senk sporrenser (til venstre for sporet)' %}75D-1-SENK-HSIDE
				{% endif %}
			{% endif %}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition X="0.0" Y="0.0" DefaultBlockName="NO-BN-2D-INSERTION-POINT" />

		<SnapPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="0" Y="0" TargetSpace="skilt" />
				<SnapPoint X="0" Y="0" TargetSpace="montasjeelement" />
			</SnapPoints>
		</SnapPointsDefinitions>

		<DisplayPointsDefinitions>
			<SnapPoints>
				<SnapPoint X="3" Y="3" />
				<SnapPoint X="3" Y="-3" />
				<SnapPoint X="-3" Y="3" />
				<SnapPoint X="-3" Y="-3" />
			</SnapPoints>
		</DisplayPointsDefinitions>
	
	</ObjectType>



<!--========================================================================================================
	SKILT
	VEDLIKEHOLDSPERSONELL
	KO-???
	TODO: Det mangler fortsatt et par skilt, bl.a. trasepunkt, høyspentkabel jordingsende
	TODO: Det mangler en del avsn. 4 skilt for tredjeperson
=========================================================================================================-->



<!--========================================================================================================
    End of file 
=========================================================================================================-->
</xpp:bloc>