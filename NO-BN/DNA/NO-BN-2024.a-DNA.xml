<?xml version="1.0" encoding="utf-8"?>
<RailwayObjectTypeDefinitions xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <DnaIdentification Name="NO-BN 2024.a (develop 2024-10-09 compliant to RC 2024.3)">
  <DnaIri>
   <AdministrationCountry>NO</AdministrationCountry>
   <AdministrationDelimiter>-</AdministrationDelimiter>
   <AdministrationCode>BN</AdministrationCode>
   <AgentCountry>NO</AgentCountry>
   <AgentDelimiter>.</AgentDelimiter>
   <AgentCode>0001</AgentCode>
   <DateTime>2024-09-19T00:00:00+01:00</DateTime>
   <VersionNumber>2024.a</VersionNumber>
  </DnaIri>
  <Description>RailCOMPLETE(r) Definisjon av nettverkselementer for Bane NOR</Description>
  <AdministrationName>Bane NOR SF</AdministrationName>
  <AgentName>Railcomplete AS</AgentName>
 </DnaIdentification>
 <ReleaseNotesFolder>..\NO-BN\ReleaseNotes</ReleaseNotesFolder>
 <DistanceAcrossScreenAtDocumentStart>420</DistanceAcrossScreenAtDocumentStart>
 <OwnAlignmentJigHighlightingGlobalWidthRelativeToScreenSize>0.003</OwnAlignmentJigHighlightingGlobalWidthRelativeToScreenSize>
 <DefaultStagePattern>
  <Prefix></Prefix>
  <MainStageDigits>2</MainStageDigits>
  <SubStageDigits>2</SubStageDigits>
  <MainAndSubPartSeparator></MainAndSubPartSeparator>
  <StageSeparator>-</StageSeparator>
  <Suffix></Suffix>
 </DefaultStagePattern>
 <RightSideOfAlignmentPositive>true</RightSideOfAlignmentPositive>
 <ReferenceAlignmentProjectionMethod>Direct</ReferenceAlignmentProjectionMethod>
 <DnaMappingFolder>..\NO-BN\DNA\DnaMappings</DnaMappingFolder>
 <SwitchGeometryPath>..\NO-BN\DNA\Switches\NO-BN-2024.a-SwitchGeometries.xml</SwitchGeometryPath>
 <SymbolLibraryPath>..\NO-BN\2D\NO-BN-2024.a-2D.dwg</SymbolLibraryPath>
 <ObjectThumbnailsPath>..\NO-BN\2D\NO-BN-2024.a-SymbolThumbnails.rc</ObjectThumbnailsPath>
 <Geometry3DLibraryFolder>..\NO-BN\3D\STD-2024.a\3D Text Styles</Geometry3DLibraryFolder>
 <Geometry3DLibraryFolder>..\NO-BN\3D\STD-2024.a\FE</Geometry3DLibraryFolder>
 <Geometry3DLibraryFolder>..\NO-BN\3D\STD-2024.a\KO</Geometry3DLibraryFolder>
 <Geometry3DLibraryFolder>..\NO-BN\3D\STD-2024.a\KU</Geometry3DLibraryFolder>
 <Geometry3DLibraryFolder>..\NO-BN\3D\STD-2024.a\EH</Geometry3DLibraryFolder>
 <Geometry3DLibraryFolder>..\NO-BN\3D\STD-2024.a\EL</Geometry3DLibraryFolder>
 <Geometry3DLibraryFolder>..\NO-BN\3D\STD-2024.a\SA</Geometry3DLibraryFolder>
 <Geometry3DLibraryFolder>..\NO-BN\3D\STD-2024.a\TE</Geometry3DLibraryFolder>
 <Geometry3DLibraryFolder>..\NO-BN\3D\STD-2024.a\SK</Geometry3DLibraryFolder>
 <Geometry3DLayerMappingFolder>..\NO-BN\3D\LayerMappings</Geometry3DLayerMappingFolder>
 <FaqPath>..\..\FAQ\general-faq.xml</FaqPath>
 <FaqPath>..\NO-BN\FAQ\NO-BN-2024.a-faq.xml</FaqPath>
 <WebPagesPath>..\..\WebLinks\general-WebLinks.xml</WebPagesPath>
 <WebPagesPath>..\NO-BN\WebLinks\NO-BN-2024.a-WebLinks.xml</WebPagesPath>
 <TutorialsFolder>..\NO-BN\Tutorials</TutorialsFolder>
 <LuaTooltipPagesFolder>..\NO-BN\Lua\LuaTooltipPages</LuaTooltipPagesFolder>
 <LuaTooltipImagesPath>..\NO-BN\Lua\LuaTooltipPages\TooltipImages\TooltipImages.xaml</LuaTooltipImagesPath>
 <DefaultSettingsForCommands>
  <DefaultTrainDimensions>
   <CarWidth>3.40</CarWidth>
   <AxleSeparation>18.0</AxleSeparation>
   <AxleCount>2</AxleCount>
   <NoseLength>3.0</NoseLength>
   <TailLength>3.0</TailLength>
   <CarCount>1</CarCount>
   <CarSeparation>1.0</CarSeparation>
  </DefaultTrainDimensions>
  <DefaultSightingSettings>
   <GeneralSettings>
    <SightingMethod>Region</SightingMethod>
    <StopAtDistance>10</StopAtDistance>
   </GeneralSettings>
   <CadSettings>
    <Color>ByLayer</Color>
    <Transparency>ByLayer</Transparency>
    <Linetype>ByLayer</Linetype>
    <GlobalWidth>0</GlobalWidth>
   </CadSettings>
   <TrainSettings>
    <TrainWindowTopEdge>3.2</TrainWindowTopEdge>
    <TrainWindowBottomEdge>2.9</TrainWindowBottomEdge>
    <TrainWindowLeftEdge>-0.3</TrainWindowLeftEdge>
    <TrainWindowRightEdge>0.3</TrainWindowRightEdge>
   </TrainSettings>
   <SightingPrecision>
    <StepLength>1.0</StepLength>
   </SightingPrecision>
  </DefaultSightingSettings>
 </DefaultSettingsForCommands>
 <DefaultEarthingBlockName>NO-BN-2D-JBTEH_TEC-TRANSIENT-EARTHING-CONNECTOR-Geographic</DefaultEarthingBlockName>
 <DefaultUnresolved3DGeometryFileName>NO-BN-3D-FE-DIV-UKJENT</DefaultUnresolved3DGeometryFileName>
 <Units>
  <LinearUnit Precision="3">Decimal</LinearUnit>
  <AngularUnit Precision="3" Clockwise="false">Decimal Degrees</AngularUnit>
  <InsertionScaleUnit>Meters</InsertionScaleUnit>
  <LightingUnits>International</LightingUnits>
 </Units>
 <AutocadSupportFileSearchFolder>%appdata%\Autodesk\ApplicationPlugins\RC.bundle\Adm\NO-BN\AutoCAD</AutocadSupportFileSearchFolder>
 <DefaultFont>Standard</DefaultFont>
 <DefaultStyle>Standard</DefaultStyle>
 <DefaultHeight>1.0</DefaultHeight>
 <StyleDefinitions Description="RailCOMPLETE Style definitions for Bane NOR" Culture="NOR">
  <TextStyle Name="RC-STANDARD" Font="iso3098" Height="0.0"/>
  <Linetype Name="RC-SOLID" PatternLength="1">
   <Dash>1</Dash>
  </Linetype>
  <Linetype Name="RC-DASHED" PatternLength="3">
   <Dash>2</Dash>
   <Dash>-1</Dash>
  </Linetype>
  <Linetype Name="RC-DASHED-01" PatternLength="4.0">
   <Dash>3.5</Dash>
   <Dash>-0.5</Dash>
  </Linetype>
  <Linetype Name="RC-DASHED-02" PatternLength="4.0">
   <Dash>2.5</Dash>
   <Dash>-0.50</Dash>
   <Dash>0.5</Dash>
   <Dash>-0.50</Dash>
  </Linetype>
  <Linetype Name="RC-DASHED-03" PatternLength="4.0">
   <Dash>1.50</Dash>
   <Dash>-0.50</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.50</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.50</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-jl" PatternLength="2.5">
   <Dash>0.50</Dash>
   <ComplexDash Text="jl" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.4,-0.25" DashLength="-0.5"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-jl-SUSPENDED" PatternLength="2.5" IsScaledToFit="false">
   <Dash>0.5</Dash>
   <ComplexDash DashLength="-0.5" Text="jl" ShapeScale="0.5" ShapeRotation="0" ShapeStyle="RC-STANDARD" ShapeIsUcsOriented="false" ShapeOffset="-0.4,-0.25"/>
   <Dash>1.5</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu06" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="06" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu16" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="16" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu25" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="25" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu35" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="35" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu50" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="50" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu70" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="70" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu95" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="95" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu120" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="120" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu150" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="150" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu185" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="185" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu240" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="240" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu300" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="300" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Cu400" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Cu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="400" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Alu35" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Alu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="35" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Alu50" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Alu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="50" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Alu80" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Alu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="80" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Alu120" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Alu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="120" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Alu150" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Alu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="150" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Alu190" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Alu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="190" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-EARTHING-Alu240" PatternLength="4.0">
   <Dash>0.50</Dash>
   <ComplexDash Text="Alu" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <ComplexDash Text="240" ShapeScale="0.5" ShapeStyle="RC-STANDARD" ShapeRotation="0.0" ShapeIsUcsOriented="false" ShapeOffset="-0.9,-0.25" DashLength="-1"/>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
   <Dash>0.50</Dash>
   <Dash>-0.25</Dash>
  </Linetype>
  <Linetype Name="RC-OCP" PatternLength="50">
   <Dash>25</Dash>
   <Dash>-25</Dash>
  </Linetype>
  <Linetype Name="RC-Brukerdefinert" PatternLength="200">
   <Dash>25</Dash>
   <Dash>-5</Dash>
   <Dash>25</Dash>
   <Dash>-5</Dash>
   <Dash>25</Dash>
   <Dash>-5</Dash>
   <Dash>25</Dash>
   <Dash>-5</Dash>
   <Dash>25</Dash>
   <Dash>-5</Dash>
   <Dash>70</Dash>
   <Dash>-5</Dash>
  </Linetype>
  <Linetype Name="RC-EtcsOmraade" PatternLength="30">
   <Dash>15</Dash>
   <Dash>-15</Dash>
  </Linetype>
  <Linetype Name="RC-Arbeidsområde" PatternLength="75">
   <Dash>50</Dash>
   <Dash>-25</Dash>
  </Linetype>
  <Linetype Name="RC-Lokalområde" PatternLength="325">
   <Dash>75</Dash>
   <Dash>-75</Dash>
   <Dash>75</Dash>
   <Dash>-70</Dash>
   <Dash>10</Dash>
   <Dash>-70</Dash>
  </Linetype>
  <Linetype Name="RC-Parsellgrense" PatternLength="45">
   <Dash>30</Dash>
   <Dash>-15</Dash>
  </Linetype>
  <Linetype Name="RC-Plattform" PatternLength="200">
   <Dash>200</Dash>
  </Linetype>
  <Linetype Name="RC-Jernbanebro" PatternLength="50">
   <Dash>45</Dash>
   <Dash>-5</Dash>
  </Linetype>
  <Linetype Name="RC-Veibro" PatternLength="45">
   <Dash>40</Dash>
   <Dash>-5</Dash>
  </Linetype>
  <Linetype Name="RC-Tunnel" PatternLength="40">
   <Dash>35</Dash>
   <Dash>-5</Dash>
  </Linetype>
  <Linetype Name="RC-Viewport" PatternLength="100">
   <Dash>85</Dash>
   <Dash>-15</Dash>
  </Linetype>
  <Linetype Name="RC-JordingsMaskenett" PatternLength="100">
   <Dash>85</Dash>
   <Dash>-15</Dash>
  </Linetype>
  <Layer Name="JBTRC_XRF" Color="62" Description="Refererte eksterne DWG-filer. RailCOMPLETE-objekter i XRef kan leses, men ikke skrives."/>
  <Layer Name="JBTRC$SYMBOLRAMMER_HISTORIC" Color="62" Description="Symbolrammer for historiske objekter (på et lag med navn som begynner med krøllalfa '@')"/>
  <Layer Name="JBTRC$SYMBOLRAMMER_UNFINISHED" Color="62" Description="Symbolrammer for objekter som ikke er ferdig spesifisert ennå (objektnavnet inneholder 'UNFINISHED')"/>
  <Layer Name="JBTRC$SYMBOLRAMMER_ERROR" Color="62" Description="Symbolrammer for objekter der en eller flere modelchecks returnerer '_error'"/>
  <Layer Name="JBTRC$SYMBOLRAMMER_WARNING" Color="62" Description="Symbolrammer for objekter der en eller flere modelchecks returnerer '_warning'"/>
  <Layer Name="JBTRC$SYMBOLRAMMER_DEFAULT" Color="62" Description="Symbolrammer for objekter som ikke viser rammen for historisk / uferdig / error / warning"/>
  <Layer Name="JBTFE@OBJEKTNAVN" Color="62" Description="Navn for tverrfaglige objekter (FE)"/>
  <Layer Name="JBTKU@OBJEKTNAVN" Color="62" Description="Navn for underbygningsobjekter (UB)"/>
  <Layer Name="JBTKO@OBJEKTNAVN" Color="62" Description="Navn for overbygningsobjekter (OB)"/>
  <Layer Name="JBTEH@OBJEKTNAVN" Color="62" Description="Navn for høyspentobjekter (KL)"/>
  <Layer Name="JBTSA@OBJEKTNAVN" Color="62" Description="Navn for signalobjekter (SI)"/>
  <Layer Name="JBTEL@OBJEKTNAVN" Color="62" Description="Navn for elektro lavspentobjekter (EL)"/>
  <Layer Name="JBTTE@OBJEKTNAVN" Color="62" Description="Navn for teleobjekter (TE)"/>
  <Layer Name="JBTFE@OBJEKTINFO" Color="62" Description="Info for tverrfaglige objekter (FE)"/>
  <Layer Name="JBTKU@OBJEKTINFO" Color="62" Description="Info for underbygningsobjekter (UB)"/>
  <Layer Name="JBTKO@OBJEKTINFO" Color="62" Description="Info for overbygningsobjekter (OB)"/>
  <Layer Name="JBTEH@OBJEKTINFO" Color="62" Description="Info for høyspentobjekter (KL)"/>
  <Layer Name="JBTSA@OBJEKTINFO" Color="62" Description="Info for signalobjekter (SI)"/>
  <Layer Name="JBTEL@OBJEKTINFO" Color="62" Description="Info for elektro lavspentobjekter (EL)"/>
  <Layer Name="JBTTE@OBJEKTINFO" Color="62" Description="Info for teleobjekter (TE)"/>
  <Layer Name="JBTFE@OBJEKTID" Color="62" Description="FDV Banedata Objekt-ID for tverrfaglige objekter (FE)"/>
  <Layer Name="JBTKU@OBJEKTID" Color="62" Description="FDV Banedata Objekt-ID for underbygningsobjekter (UB)"/>
  <Layer Name="JBTKO@OBJEKTID" Color="62" Description="FDV Banedata Objekt-ID for overbygningsobjekter (OB)"/>
  <Layer Name="JBTEH@OBJEKTID" Color="62" Description="FDV Banedata Objekt-ID for høyspentobjekter (KL)"/>
  <Layer Name="JBTSA@OBJEKTID" Color="62" Description="FDV Banedata Objekt-ID for signalobjekter (SI)"/>
  <Layer Name="JBTEL@OBJEKTID" Color="62" Description="FDV Banedata Objekt-ID for elektro lavspentobjekter (EL)"/>
  <Layer Name="JBTTE@OBJEKTID" Color="62" Description="FDV Banedata Objekt-ID for teleobjekter (TE)"/>
  <Layer Name="JBTKO@KILOMETRERING" Color="62" Description="Kilometer / hektometer i objekter av type 'Kilometrering'"/>
  <Layer Name="JBTKO@BANENUMMER" Color="62" Description="Banenummer i objekter av type 'Kilometrering'"/>
  <Layer Name="JBTFE#ANNOTATIONS_GEOMETRY" Color="2" Description="Transientgrafikk for geometri"/>
  <Layer Name="JBTFE#ANNOTATIONS_ALIGNMENTNAME" Color="2" Description="Transientgrafikk for alignment-navn"/>
  <Layer Name="JBTFE#ANNOTATIONS_MILEAGE" Color="2" Description="Transientgrafikk for mileage"/>
  <Layer Name="JBTFE#ANNOTATIONS_MILEAGECHANGE" Color="2" Description="Transientgrafikk for kjedebrudd"/>
  <Layer Name="JBTFE#ANNOTATIONS_VERTICALPROFILE" Color="2" Description="Transientgrafikk for vertikalprofil"/>
  <Layer Name="JBTFE#ANNOTATIONS_FOULINGPOINT" Color="2" Description="Transientgrafikk for spormiddel"/>
  <Layer Name="JBTFE#ANNOTATIONS_REFERENCEALIGNMENT" Color="2" Description="Transientgrafikk for referansespor"/>
  <Layer Name="JBTFE#ANNOTATIONS_SECTION" Color="2" Description="Transientgrafikk for segmenter i alignments (sporfelt, sporbruk etc.)"/>
  <Layer Name="JBTFE#ANNOTATIONS_RELATIONS" Color="7" Description="Transientgrafikk for relasjoner"/>
  <Layer Name="JBTFE#ANNOTATIONS_ALIGNMENT_POS_3D" Color="7" Description="Transientgrafikk for plassering av objekt i 3D i forhold til eget spor"/>
  <Layer Name="JBTFE#ANNOTATIONS_EARTHING" Color="90" Description="Transientgrafikk for jording"/>
  <Layer Name="JBTFE#ANNOTATIONS_SIGHT_LINE" Color="2" Linetype="RC-DASHED" Description="Transientgrafikk for 2D siktlinjer" Transparency="0"/>
  <Layer Name="JBTFE#ANNOTATIONS_SIGHT_REGION" Color="2" Linetype="RC-DASHED" Description="Transientgrafikk for 2D siktområder" Transparency="0"/>
  <Layer Name="JBTFE#ANNOTATIONS_SIGHT_BEAM" Color="2" Description="Transientgrafikk for 2D siktbjelker" Transparency="70"/>
  <Layer Name="JBTFE#ANNOTATIONS_SIGHT_VOLUME" Color="2" Description="Transientgrafikk for 2D siktvolumer" Transparency="70"/>
  <Layer Name="JBTFE_DIV" Color="4" Description="Diverse tverrfaglige objekter (FE)"/>
  <Layer Name="JBTFE_RCS" Color="4" Description="railML Cross-Section object (CO)"/>
  <Layer Name="JBTFE_BALLONGER" Color="4" Description="Ballonger (gåsenebb) (FE)"/>
  <Layer Name="JBTFE_OCP_OMRÅDER" Color="1" Description="OCP-områder (railML: Operation Control Point) (FE)"/>
  <Layer Name="JBTFE_OMRÅDER" Color="1" Description="Områder, unntatt OCP områder (FE)"/>
  <Layer Name="JBTFE_ETIKETTER" Color="4" Description="Etiketter (FE)"/>
  <Layer Name="JBTFE_MARKØRER" Color="4" Description="Markører (FE)"/>
  <Layer Name="JBTFE_WATCH" Color="4" Description="Watch-objekter (FE)"/>
  <Layer Name="JBTFE_SPORBRUK" Color="4" Description="Sporbruk (FE)"/>
  <Layer Name="JBTFE_SPORBRUKGRENSE" Color="4" Description="Sporbrukgrense-objekter (FE)"/>
  <Layer Name="JBTFE_HJL" Color="6" Description="Hjelpelinjer (FE)"/>
  <Layer Name="JBTKU_SKT" Color="2" Description="Skilt som ikke tilhører noen bestemt fag-kategori (KU)"/>
  <Layer Name="JBTKU_SKF" Color="2" Description="Skiltfundamenter (som ikke må utføres i Underbygningsentreprisen)"/>
  <Layer Name="JBTKU_FUN" Color="2" Description="Fundamenter (store, som krever ny stabilisering av spor) (KU)"/>
  <Layer Name="JBTKU_KFK" Color="1" Description="Kabelkanal (med avtapping av kabler underveis)"/>
  <Layer Name="JBTKU_KFR" Color="5" Description="Rørkryss og omstøpte rørpakker (uten avtapping av kabler underveis)"/>
  <Layer Name="JBTKU_KFP" Color="6" Description="Enkeltvise stålrør som presses gjennom grunn, også under spor i drift"/>
  <Layer Name="JBTKU_KFT" Color="3" Description="Trekkerør (fleksible rør med lav beskyttelse)"/>
  <Layer Name="JBTKU_KFØ_TREKKEKUM" Color="2" Description="Trekkekummer"/>
  <Layer Name="JBTKU_VEI" Color="5" Description="Veibane (bilvei, sykkelsti, fotgjengere, rømningsvei)"/>
  <Layer Name="JBTKO_SPO" Color="2" Description="Spor"/>
  <Layer Name="JBTKO_PLF" Color="4" Description="Plattformkanter"/>
  <Layer Name="JBTKO_SPV" Color="2" Description="Sporveksler og sporkryss"/>
  <Layer Name="JBTKO_SPF" Color="2" Description="Sporfortsettelser"/>
  <Layer Name="JBTKO_TNG" Color="2" Description="Tunger"/>
  <Layer Name="JBTKO_SKJ" Color="2" Description="Skinneskjøter"/>
  <Layer Name="JBTKO_SVI" Color="2" Description="Sviller"/>
  <Layer Name="JBTKO_MVS" Color="2" Description="Oppkjørsbjelker"/>
  <Layer Name="JBTKO_SST" Color="2" Description="Sporstoppere"/>
  <Layer Name="JBTKO_KJK_isolasjon" Color="2" Description="Enkeltskinne kjørekant og sporisolering (isolert:lw=0.05/color=Green, uisolert:lw=0.20/color=Red)"/>
  <Layer Name="JBTKO_HOS" Color="2" Description="Traséseksjoner - horisontalgeometri (segmenter)"/>
  <Layer Name="JBTKO_VES" Color="2" Description="Traséseksjoner - vertikalprofil (segmenter)"/>
  <Layer Name="JBTKO_HOT" Color="2" Description="Karakteristiske trasépunkter - horisontalgeometri (overgang mellom segmenter)"/>
  <Layer Name="JBTKO_VET" Color="2" Description="Karakteristiske trasépunkter - vertikalprofil (overgang mellom segmenter)"/>
  <Layer Name="JBTKO_SKT" Color="2" Description="Skilt"/>
  <Layer Name="JBTKO$SPF" Color="62" Description="Komponentlag for sporfortsettelser - overbygning"/>
  <Layer Name="JBTKO$SPV" Color="62" Description="Komponentlag for sporveksler - overbygning"/>
  <Layer Name="JBTKO@SPV_TYPE" Color="62" Description="Tekstattributt for sporvekseltype"/>
  <Layer Name="JBTEH_KTL" Color="7" Lineweight="Lineweight035" Linetype="Continuous" Description="Kontaktledning (kjørbar/ikke kjørbar/avspenningsline)"/>
  <Layer Name="JBTEH_LED" Color="4" Lineweight="Lineweight018" Linetype="Continuous" Description="KL høyspentledning"/>
  <Layer Name="JBTEH_FIL" Color="2" Lineweight="Lineweight018" Linetype="Continuous" Description="Fixline"/>
  <Layer Name="JBTEH_BAR" Color="2" Lineweight="Lineweight018" Linetype="Continuous" Description="Bardun fra kl-mast til et forankringsobjekt"/>
  <Layer Name="JBTEH_STR" Color="2" Lineweight="Lineweight018" Linetype="Continuous" Description="Strever fra kl-mast til et forankringspunkt"/>
  <Layer Name="JBTEH_LEF" Color="2" Description="Fortsettelse av høyspentledning til høyspentledning"/>
  <Layer Name="JBTEH_KTF" Color="2" Description="Fortsettelse av kontaktledning til kontaktledning. Merk: JBTEH_ISO Lineisolator forbinder kontaktledning og avspenningsline."/>
  <Layer Name="JBTEH$KFO" Color="62" Description="Komponentlag for ledningsfortsettelser - KL-system"/>
  <Layer Name="JBTEH_FUN" Color="2" Description="Fundamenter for KL-master"/>
  <Layer Name="JBTEH_JOR" Color="3" Linetype="RC-DASHED" Description="Langsgående jordleder (tilhører KL-faget)"/>
  <Layer Name="JBTEH_JOF" Color="2" Description="KL skinnetilkobling for jord"/>
  <Layer Name="JBTEH_JSK" Color="2" Description="KL jordskinne (eng: 'earthing busbar')"/>
  <Layer Name="JBTEH_JEL" Color="2" Description="KL jordelektrode"/>
  <Layer Name="JBTEH_ASK" Color="3" Description="Avskjerming - beskyttelse mot høyspentanlegg"/>
  <Layer Name="JBTEH_LBA" Color="2" Description="KL ledningsbytte annotering"/>
  <Layer Name="JBTEH_AAK" Color="2" Description="KL åk"/>
  <Layer Name="JBTEH_MAS" Color="2" Description="KL mast, frittstående"/>
  <Layer Name="JBTEH_MAS_HGM_TUNNEL" Color="2" Description="KL mast, hengemast for bru og tunnel"/>
  <Layer Name="JBTEH_MAS_HGM_ÅK" Color="2" Description="KL mast, Hengemast i åk"/>
  <Layer Name="JBTEH_UTL" Color="2" Description="KL utligger"/>
  <Layer Name="JBTEH_UTK" Color="2" Description="KL seksjonsutliggerkonsoll"/>
  <Layer Name="JBTEH_KLK" Color="2" Description="KL kontakttrådklemme"/>
  <Layer Name="JBTEH_AEH" Color="2" Description="KL avspenning, på kl-mast eller på tunnelfeste"/>
  <Layer Name="JBTEH_FIX" Color="2" Description="KL fixpunkt (deler klemme med bærelinen)"/>
  <Layer Name="JBTEH_BAF" Color="2" Description="KL kraftoverføring, bardun fotplate (på fundament)"/>
  <Layer Name="JBTEH_STF" Color="2" Description="KL kraftoverføring, strever fotplate, evt med streveren inkludert, (fotplate på fundament, i tunnelhvelv)"/>
  <Layer Name="JBTEH_TUF" Color="2" Description="KL kraftoverføring, tunnelfeste fotplate (på vegg, i tunnelhvelv), for bardun, strever, avspenning"/>
  <Layer Name="JBTEH_FPM" Color="2" Description="KL kraftoverføring, forankring på mast"/>
  <Layer Name="JBTEH_FOR" Color="2" Description="KL forbindelse (strømbro)"/>
  <Layer Name="JBTEH_SVE" Color="2" Description="KL svevende kryss"/>
  <Layer Name="JBTEH_SIL" Color="2" Description="KL seksjonsisolator (kjørbar)"/>
  <Layer Name="JBTEH_ISO" Color="2" Description="KL lineisolator (ikke kjørbar)"/>
  <Layer Name="JBTEH_ISS" Color="2" Description="KL stavisolator (kjørbar)"/>
  <Layer Name="JBTEH_BRY" Color="2" Description="KL høyspentbryter"/>
  <Layer Name="JBTEH_MAN" Color="2" Description="KL manøvermaskin"/>
  <Layer Name="JBTEH_SUG" Color="2" Description="KL sugetransformator"/>
  <Layer Name="JBTEH_AUT" Color="2" Description="KL autotransformator"/>
  <Layer Name="JBTEH_TER" Color="2" Description="Høyspent-tekniske bygninger og rom"/>
  <Layer Name="JBTEH_BKT" Color="2" Description="KL skilt"/>
  <Layer Name="JBTEH$SPV" Off="true" Color="62" Description="Komponentlag for sporveksler - kontaktledning (skravert: strømløst i avvikespor)"/>
  <Layer Name="JBTEH@STREKKRAFT" Color="62" Description="KL strekkraft [kN]"/>
  <Layer Name="JBTEH@SPENNLENGDE" Color="62" Description="KL spennlengde [m]"/>
  <Layer Name="JBTEH@SIKKSAKK" Color="62" Description="KL sikk-sakk [cm]"/>
  <Layer Name="JBTEH@UTLIGGER_LEDNING" Color="62" Description="KL navn for ledning holdt av utligger"/>
  <Layer Name="JBTSA_ATC" Color="2" Description="NSS balisegruppe (National Signalling System: ATC2 / Ebicab 700)"/>
  <Layer Name="JBTSA_ATB" Color="2" Description="NSS balise (National Signalling System: ATC2 / Ebicab 700)"/>
  <Layer Name="JBTSA_ATK" Color="2" Description="NSS balisekoder (National Signalling System: ATC2 / Ebicab 700)"/>
  <Layer Name="JBTSA_ETC" Color="2" Description="ETCS balisegruppe"/>
  <Layer Name="JBTSA_ETB" Color="2" Description="ETCS balise (Eurobalise)"/>
  <Layer Name="JBTSA_LEU" Color="2" Description="ETCS balisekoder (Lineside Encoder Unit) "/>
  <Layer Name="JBTSA_TER" Color="2" Description="Signaltekniske bygninger og rom"/>
  <Layer Name="JBTSA_APS" Color="2" Description="Apparatskap"/>
  <Layer Name="JBTSA_AVI" Color="2" Description="Avsporingsindikator"/>
  <Layer Name="JBTSA_SSP" Color="2" Description="Sporsperre"/>
  <Layer Name="JBTSA_DRV" Color="2" Description="Drivmaskin"/>
  <Layer Name="JBTSA_SPD" Color="2" Description="Sporsperredrivmaskin"/>
  <Layer Name="JBTSA_LOK" Color="2" Description="Lokalstiller"/>
  <Layer Name="JBTSA_SAM" Color="2" Description="Samlelås"/>
  <Layer Name="JBTSA_TEA" Color="2" Description="Togdeteksjonsavsnitt for akseltellere"/>
  <Layer Name="JBTSA_TEL" Color="2" Description="Tellepunkt for akseltellere"/>
  <Layer Name="JBTSA_TET" Color="2" Description="Tuningenhet for akseltellere"/>
  <Layer Name="JBTSA_SPF" Color="2" Description="Togdeteksjonsavsnitt for 95/105 Hz sporfelt"/>
  <Layer Name="JBTSA_SFA" Color="2" Description="Togdeteksjonsavsnitt for FTGS sporfelt"/>
  <Layer Name="JBTSA_SFS" Color="2" Description="Forbinder for FTGS sporfelt"/>
  <Layer Name="JBTSA_SFT" Color="2" Description="Tuningenhet for FTGS sporfelt tilførsel/retur"/>
  <Layer Name="JBTSA_SIG" Color="2" Description="Signal"/>
  <Layer Name="JBTSA_ERT" Color="2" Description="ERTMS marker board"/>
  <Layer Name="TFES_FIK" Color="2" Description="Fiktivt signal (vipunkt, fiktivt sluttpunkt for tog- og/eller -skiftevei)"/>
  <Layer Name="JBTSA_SIK" Color="2" Description="Sikringsanlegg"/>
  <Layer Name="JBTSA_FUN" Color="2" Description="Stolpe for S-lås, Lok. og mindre signaler"/>
  <Layer Name="JBTSA_AVS" Color="2" Description="Avstander"/>
  <Layer Name="JBTSA_MSS" Color="2" Description="Merker, skilt og stolper"/>
  <Layer Name="JBTSA$SPV" Off="true" Color="62" Description="Komponentlag for sporveksler - signal (tett skravur:sentralstilt, løs skravør:kontrollåst, tom:håndstilt, fylt ring:trykknapp, rektangel:kontrollås.)"/>
  <Layer Name="JBTEL_LYA" Color="2" Description="Lysarmatur (punkter i tak og på vegg, typisk innendørs)"/>
  <Layer Name="JBTEL_LYS" Color="2" Description="Lys (arealbelyning, plattformbelysning, nødlys, adkomstveibelysning, tunnellys etc)"/>
  <Layer Name="JBTEL_FSP" Color="2" Description="Fordelingsskap"/>
  <Layer Name="JBTEL_SVG" Color="2" Description="Sporvekselvarmeskap / gruppeskap"/>
  <Layer Name="JBTEL_TVP" Color="2" Description="Togvarmepost"/>
  <Layer Name="JBTEL_TRF" Color="2" Description="Transformator"/>
  <Layer Name="JBTEL_UPS" Color="2" Description="UPS fordeler"/>
  <Layer Name="JBTTE_RAC" Color="2" Description="Telerack"/>
  <Layer Name="JBTTE_TLT" Color="2" Description="Telefon langs sporet (telefonsystem for togleder)"/>
  <Annotations>
   <PropertyNames>
    <StartOfAlignment>Start</StartOfAlignment>
    <StockRails>            SS</StockRails>
    <BeginToCurve>_K</BeginToCurve>
    <BeginToSpiral>_S</BeginToSpiral>
    <BeginToTangent>_RL</BeginToTangent>
    <CurveToEnd>K_</CurveToEnd>
    <SpiralToEnd>S_</SpiralToEnd>
    <TangentToEnd>RL_</TangentToEnd>
    <CurveToCurve>FKP</CurveToCurve>
    <CurveToSpiral>OE</CurveToSpiral>
    <CurveToTangent>KP</CurveToTangent>
    <SpiralToCurve>OE</SpiralToCurve>
    <SpiralToSpiral>FOB</SpiralToSpiral>
    <SpiralToTangent>OB</SpiralToTangent>
    <TangentToSpiral>OB</TangentToSpiral>
    <TangentToCurve>KP</TangentToCurve>
    <TangentToTangent>TP</TangentToTangent>
    <Length>L</Length>
    <CurveLength>Lk</CurveLength>
    <SpiralLength>L</SpiralLength>
    <TangentLength>Lr</TangentLength>
    <CurveRadius>R</CurveRadius>
    <Spiral>S</Spiral>
    <StraightLine>RL</StraightLine>
    <Sag>LBP</Sag>
    <Crest>HBP</Crest>
    <VerticalCurveStart>SE1</VerticalCurveStart>
    <VerticalCurveEnd>SE2</VerticalCurveEnd>
    <VerticalParabolaStart>PE1</VerticalParabolaStart>
    <VerticalParabolaEnd>PE2</VerticalParabolaEnd>
    <Length3D>L3D</Length3D>
    <ParaCurveLength>PL</ParaCurveLength>
    <PviElevation>H</PviElevation>
    <PviMileage>PEL.</PviMileage>
    <CantHeight>h</CantHeight>
    <CantRampStart>RB</CantRampStart>
    <CantRampEnd>RE</CantRampEnd>
    <CantCommonRampPoint>REB</CantCommonRampPoint>
   </PropertyNames>
   <GeometryAnnotations Color="ByLayer" TextStyle="RC-STANDARD" TextHeight="1" PermanentAnnotationLayer="JBTFE#ANNOTATIONS_GEOMETRY" UseTransientColorWhenMakingPermanent="false" TurnOffMagnification="0.001" DynamicScaling="true" MinMagnification="0.05" AlignmentBarSize="1" TextDistFromAlignment="1.25" DecimalSensitivity="1" DetailedViewMagnification="0.1" DrawCircles="true" DisplayCant="true" ClothoidRadiusFormatLuaFunctionName="NOBN_ClothoidRadiusFormatting"/>
   <ProfileAnnotations PermanentAnnotationLayer="JBTFE#ANNOTATIONS_VERTICALPROFILE" Color="ByLayer" TextStyle="RC-STANDARD" TextHeight="1" UseTransientColorWhenMakingPermanent="false" TurnOffMagnification="0.005" DynamicScaling="true" AlignmentBarSize="3" TextDistFromAlignment="1" GradientTextHeight="1" GradientLineLength="3" MinMagnification="0.01" DecimalSensitivity="1" TurnOffRadiusMagnification="0.1" TurnOffMileageMagnification="0.1" TurnOffElevationMagnification="0.1" TurnOffVerticalTransitionPoints="0.1" TurnOffGradientMagnification="0.005" TurnOffCrestSagMagnification="0.1" TurnOffLengthMagnification="0.1" ElevationFormatLuaFunctionName="NOBN_VerticalProfileElevationFormatting" MileageFormatLuaFunctionName="NOBN_VerticalProfileMileageFormatting"/>
   <AlignmentNameAnnotations PermanentAnnotationLayer="JBTFE#ANNOTATIONS_ALIGNMENTNAME" Color="ByLayer" TextStyle="RC-STANDARD" TextHeight="1" UseTransientColorWhenMakingPermanent="false" TurnOffMagnification="0.05" MinMagnification="0.01" DynamicScaling="true" MultipleTransientBlocks="false" MaxItemsAcrossScreen="1" TextDistFromAlignment="0.75" RightSide="false" BarSize="0" Rotate90="false"/>
   <MileageAnnotations PermanentAnnotationLayer="JBTFE#ANNOTATIONS_MILEAGE" Color="ByLayer" TextStyle="RC-STANDARD" TextHeight="1" UseTransientColorWhenMakingPermanent="false" TextDistFromAlignment="3" RightSideOfAlignment="true" Rotate90="true" MajorBarSize="3" MinorBarSize="1" DynamicScaling="true" MaxMajorStepsAcrossScreen="5" TurnOffMagnification="0.01" MajorMinStep="1e-3" MajorMaxStep="1e4" MinorFactor="10" MileageFormatLuaFunctionName="NOBN_MileageAnnotationsMileageFormatting"/>
   <MileageChangeAnnotations PermanentAnnotationLayer="JBTFE#ANNOTATIONS_MILEAGECHANGE" Color="ByLayer" UseTransientColorWhenMakingPermanent="false" TurnOffMagnification="0.01" DecimalSensitivity="10">
    <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_KJEDEBRUDD-Schematic">
     <SymbolAttribute Tag="INN_KM" DataType="Int32">
      <Value>
								{% assign bool = {{alignmentRotation | minus:currentView | cosisnegative}} %}
								{% if bool == 'True' %}{{Mileage | divided_by:1000 | toint}}
								{% else %}{{MileageIn | divided_by:1000 | toint}}
								{% endif %}
							</Value>
     </SymbolAttribute>
     <SymbolAttribute Tag="UT_KM" DataType="Int32">
      <Value>
							
								{% assign bool = {{alignmentRotation | minus:currentView | cosisnegative}} %}
								{% if bool == 'True' %}{{MileageIn | divided_by:1000 | toint}}
								{% else %}{{Mileage | divided_by:1000 | toint}}
								{% endif %}
							</Value>
     </SymbolAttribute>
     <SymbolAttribute Tag="INN_M" DataType="Double">
      <Value>
								{% assign bool = {{alignmentRotation | minus:currentView | cosisnegative}} %}
								{% if bool == 'True' %}{{Mileage | modulo:1000}}
								{% else %}{{MileageIn | modulo:1000}}
								{% endif %}
							</Value>
     </SymbolAttribute>
     <SymbolAttribute Tag="UT_M" DataType="Double">
      <Value>
								{% assign bool = {{alignmentRotation | minus:currentView | cosisnegative}} %}
								{% if bool == 'True' %}{{MileageIn | modulo:1000}}
								{% else %}{{Mileage | modulo:1000}}
								{% endif %}
							</Value>
     </SymbolAttribute>
     <SymbolAttribute Tag="SPRANG" DataType="Double">
      <Value>{{Mileage | minus:MileageIn}}</Value>
     </SymbolAttribute>
    </SymbolDefinition>
   </MileageChangeAnnotations>
   <ReferenceAlignmentAnnotations PermanentAnnotationLayer="JBTFE#ANNOTATIONS_REFERENCEALIGNMENT" Color="ByBlock" TextStyle="RC-STANDARD" TextHeight="1" UseTransientColorWhenMakingPermanent="true" DoNotDisplayText="false" Width="4.5" ParentLinetype="RC-SOLID" ParentLinetypeScale="1" ChildLinetype="RC-DASHED" ChildLinetypeScale="2" InvalidChildLinetype="RC-DASHED" InvalidChildLinetypeScale="0.2" DynamicScaling="false" TurnOffMagnification="0.01"/>
   <AlignmentElementAnnotations PermanentAnnotationLayer="JBTFE#ANNOTATIONS_SECTION" Color="ByLayer" TextStyle="RC-STANDARD" TextHeight="1" AnnotationWidth="3" DynamicScaling="true" MinMagnification="0.3" TurnOffMagnification="0.01"/>
   <FoulingPointAnnotations PermanentAnnotationLayer="JBTFE#ANNOTATIONS_FOULINGPOINT" Color="ByLayer" TextStyle="RC-STANDARD" TextHeight="1" DynamicScaling="true" DecimalSensitivity="2.5" TurnOffMileageMagnification="0.5" TurnOffFoulingDistanceMagnification="0.5" TurnOffMagnification="0.05"/>
   <SightLineMadePermanent PermanentAnnotationLayer="JBTFE#ANNOTATIONS_SIGHT_LINE"/>
   <SightAreaMadePermanent PermanentAnnotationLayer="JBTFE#ANNOTATIONS_SIGHT_REGION"/>
   <SightBeamMadePermanent PermanentAnnotationLayer="JBTFE#ANNOTATIONS_SIGHT_BEAM"/>
   <SightVolumeMadePermanent PermanentAnnotationLayer="JBTFE#ANNOTATIONS_SIGHT_VOLUME"/>
   <BrakingCurveMadePermanent PermanentAnnotationLayer="JBTFE#ANNOTATIONS_BRAKING_CURVE_EBICAB700"/>
   <RelationAnnotations Color="4" PermanentAnnotationLayer="JBTFE#ANNOTATIONS_RELATIONS" UseTransientColorWhenMakingPermanent="true"/>
   <AttachmentAnnotations Color="Magenta" PermanentAnnotationLayer="JBTFE#ANNOTATIONS_ATTACHMENT"/>
   <PositionInAlignmentAnnotations Color="ByBlock" PermanentAnnotationLayer="JBTFE#ANNOTATIONS_ALIGNMENT_POS_3D"/>
   <EarthingAlignmentAnnotations Color="3" PermanentAnnotationLayer="JBTFE#ANNOTATIONS_EARTHING" UseTransientColorWhenMakingPermanent="false"/>
   <SectionAnnotations Color="2" PermanentAnnotationLayer="JBTFE#ANNOTATIONS_SECTIONS" UseTransientColorWhenMakingPermanent="true"/>
   <Transient3DPreviewAnnotations UseTransientColorWhenMakingPermanent="true"/>
  </Annotations>
  <SectionColors>
   <string>5</string>
   <string>9</string>
   <string>6</string>
   <string>4</string>
   <string>2</string>
   <string>7</string>
  </SectionColors>
  <SymbolFrames Layer="JBTRC$SYMBOLRAMMER_DEFAULT">
   <IgnoreLayer>JBTRC$$INNSETTINGSPUNKT</IgnoreLayer>
   <IgnoreLayer>JBTRC$$SYMBOLBESKRIVELSE</IgnoreLayer>
   <IgnoreLayer>JBTSA$$BALISE_SNAPPELINJER_3m</IgnoreLayer>
   <IgnoreLayer>JBTSA$$BALISE_SNAPPELINJER_8m</IgnoreLayer>
   <IgnoreLayer>JBTSA$$BALISE_SNAPPELINJER_12m</IgnoreLayer>
   <IgnoreLayer>JBTSA$$SA_ATB_METALLFRITT_PROFIL</IgnoreLayer>
   <IgnoreLayer>JBTSA$$SA_TEL_RESERVERT_OMRÅDE_SOPP</IgnoreLayer>
   <IgnoreLayer>JBTEH$$UTLIGGER_TYPE</IgnoreLayer>
   <SymbolFrame Name="Symbolramme-R2.75" CircleRadius="2.75" HorizontalMargin="1" VerticalMargin="1">
    <Tail CornerCutDistance="1.5" SegmentLengthBeforeCornerCut="2.5"/>
   </SymbolFrame>
   <SymbolFrame Name="Watch" CircleRadius="2.5" HorizontalMargin="1.5" VerticalMargin="1.5"/>
   <SymbolFrame Name="Frame1" CircleRadius="1" HorizontalMargin="2" VerticalMargin="2"/>
   <SymbolFrame Name="Frame2" CircleRadius="3" HorizontalMargin="1" VerticalMargin="1" Transparency="50"/>
   <SymbolFrame Name="Frame3" CircleRadius="0" HorizontalMargin="0" VerticalMargin="0"/>
   <SymbolFrame Name="Frame4" CircleRadius="0.8" HorizontalMargin="0" VerticalMargin="0" Color="252" LineWidth="0.1" Transparency="10"/>
   <SymbolFrame Name="Frame5" CircleRadius="1.5" HorizontalMargin="0" VerticalMargin="0" Color="252" LineWidth="0.5" Transparency="10"/>
   <SymbolFrame Name="Historic" CircleRadius="3" HorizontalMargin="1" VerticalMargin="1" Color="5" LineWidth="6" Transparency="20" Linetype="Continuous" Layer="JBTRC$SYMBOLRAMMER_HISTORIC"/>
   <SymbolFrame Name="Unfinished" CircleRadius="3" HorizontalMargin="1" VerticalMargin="1" Color="140" LineWidth="0.3" Transparency="20" Layer="JBTRC$SYMBOLRAMMER_UNFINISHED"/>
   <SymbolFrame Name="Warning" CircleRadius="3" HorizontalMargin="1" VerticalMargin="1" Color="255,165,0" LineWidth="0.15" Transparency="20" Linetype="RC-DASHED" Layer="JBTRC$SYMBOLRAMMER_WARNING"/>
   <SymbolFrame Name="Error" CircleRadius="3" HorizontalMargin="1" VerticalMargin="1" Color="1" LineWidth="0.3" Transparency="20" Layer="JBTRC$SYMBOLRAMMER_ERROR"/>
   <SymbolFrame Name="Requested" CircleRadius="3" HorizontalMargin="1" VerticalMargin="1" Color="160" LineWidth="0.1" Transparency="20" Layer="JBTRC$SYMBOLRAMMER_REQUESTED"/>
   <SymbolFrame Name="Granted" CircleRadius="3" HorizontalMargin="1" VerticalMargin="1" Color="90" LineWidth="0.1" Transparency="20" Layer="JBTRC$SYMBOLRAMMER_GRANTED"/>
  </SymbolFrames>
  <Thumbnails>
   <IncludeLayer>JBTRC$$ANNOTERINGSTEKST_SYMBOL</IncludeLayer>
   <IncludeLayer>JBTSA$$VISNING_SKJEMATISK_PLAN</IncludeLayer>
  </Thumbnails>
 </StyleDefinitions>
 <LuaFunction Name="NOBN_ClothoidRadiusFormatting()" ReturnType="String" HideFromUser="true" Description="Returns the annotation for clothoid type.">
  <Signature>String NOBN_ClothoidRadiusFormatting(string segment1, double radius1, string segment2, string radius2, int decimals)</Signature>
  <Formula>
			function NOBN_ClothoidRadiusFormatting(s1, r1, s2, r2, d)
				local prevSegmentText, nextSegmentText
				if s1 == "Line" then
					prevSegmentText = "RL"
				elseif s1 == "Arc" then
					prevSegmentText = string.format("R%.0"..d.."f", r1)
				elseif s1 == "Spiral" then
					prevSegmentText = "FOB"
				elseif s1 == "Clothoid" then -- DEPRECATED
					prevSegmentText = "FOB"
				else
					return
				end
				
				if s2 == "Line" then
					nextSegmentText = "RL"
				elseif s2 == "Arc" then
					nextSegmentText = string.format("R%.0"..d.."f", r2)
				elseif s2 == "Spiral" then
					nextSegmentText = "FOB"
				elseif s2 == "Clothoid" then -- DEPRECATED
					nextSegmentText = "FOB"
				else
					return
				end
			
				return "&lt;"..prevSegmentText.."-"..nextSegmentText.."&gt;"
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_VerticalProfileElevationFormatting()" ReturnType="String" HideFromUser="true" Description="Returns elevation annotation.">
  <Signature>String NOBN_VerticalProfileElevationFormatting(double elevation, int decimals)</Signature>
  <Formula>
			function NOBN_VerticalProfileElevationFormatting(x, d)
				return string.format("H=%.0"..d.."f".." moh.", x)
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_VerticalProfileMileageFormatting()" ReturnType="String" HideFromUser="true" Description="Returns vertical profile mileage annotation.">
  <Signature>String NOBN_VerticalProfileMileageFormatting(double mileage, int decimals)</Signature>
  <Formula>
			function NOBN_VerticalProfileMileageFormatting(x, d)
				return string.format("PEL.%.0"..d.."f", x)
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_MileageAnnotationsMileageFormatting()" ReturnType="String" HideFromUser="true" Description="Returns mileage annotation.">
  <Signature>String NOBN_MileageAnnotationsMileageFormatting(double mileage, int decimals)</Signature>
  <Formula>
			function NOBN_MileageAnnotationsMileageFormatting(x, d)
				return string.format("Km.%.0"..d.."f", x)
			end
		</Formula>
 </LuaFunction>
 <ShowLayerMenu HideMissingLayerSets="true"/>
 <ShowLayer Name="COM_ShowDepointsLayer" DisplayName="Generelt/Defpoints">
  <LayerSelection Type="PartialMatch" CaseSensitive="false">Defpoints</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowInsertionPoint" DisplayName="Generelt/Innsettingspunkt">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTRC$$INNSETTINGSPUNKT</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowDescription" DisplayName="Generelt/Symbolbeskrivelse">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTRC$$SYMBOLBESKRIVELSE</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowAnnotationTextLocatorSymbol" DisplayName="Generelt/Annoteringstekst gjenfinningssymbol">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTRC$$ANNOTERINGSTEKST_SYMBOL</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowSymbolFramesAll" DisplayName="Generelt/Symbolrammer, alle typer" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTRC$SYMBOLRAMMER_HISTORIC</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTRC$SYMBOLRAMMER_UNFINISHED</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTRC$SYMBOLRAMMER_ERROR</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTRC$SYMBOLRAMMER_WARNING</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowSymbolFramesUnfinished" DisplayName="Generelt/Symbolrammer 'Uferdig'" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTRC$SYMBOLRAMMER_UNFINISHED</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowSymbolFramesWarning" DisplayName="Generelt/Symbolrammer 'Advarsel'" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTRC$SYMBOLRAMMER_WARNING</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowSymbolFramesError" DisplayName="Generelt/Symbolrammer 'Feil'" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTRC$SYMBOLRAMMER_ERROR</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowSymbolFramesHistoric" DisplayName="Generelt/Symbolrammer 'Historisk' ('@@...' lag)" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTRC$SYMBOLRAMMER_HISTORIC</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowHistoricObjects" DisplayName="Generelt/Historiske objekter (på '@@...' lag)" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">@@</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowName" DisplayName="Generelt/Navn (markør, watch etc)">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE@OBJEKTNAVN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowTag" DisplayName="Generelt/Tag (markør, watch etc)">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE@OBJEKTID</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowInfo" DisplayName="Generelt/Beskrivelse (markør, watch etc)">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE@OBJEKTINFO</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowReservedAreaForCabinetDoors" DisplayName="Generelt/Reservert område for skapdører">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE$$RESERVERT_FOR_SKAPDOERER</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowWipeoutForCabinets" DisplayName="Generelt/Wipeout under alle skap" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE$$WIPEOUT_SKAP</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowTrackUsage" DisplayName="Generelt/Sporbruk">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE_SPORBRUK</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowSymbolsForSchematicDrawing" DefaultOff="true" DisplayName="Generelt/Skjematisk plan (1-linje skjema)">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$VISNING_SKJEMATISK_PLAN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowSymbolsForCableDrawing" DefaultOff="false" DisplayName="Generelt/Kabelplan og geografiske symboler (1-linje skjema)">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$VISNING_KABELPLAN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowSymbolsForIsolationAndReturnCurrentDrawing" DefaultOff="true" DisplayName="Generelt/Sporisolering og returkretsskjema symboler (i 2-linje skjema)">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$VISNING_SPORISOLERING_OG_RETURKRETS</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowRelations" DisplayName="Generelt/Relasjoner">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_RELATIONS</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowOwnAlignmentPosition" DisplayName="Generelt/Posisjon i egen akse">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_ALIGNMENT_POS_3D</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowReferenceAlignmentSystem" DisplayName="Generelt/Referansesporsystem">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_REFERENCEALIGNMENT</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowAlignmentNames" DisplayName="Generelt/Linjenavn">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_ALIGNMENTNAME</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowAnnotationObjectsForGeometryAndVerticalProfile" DisplayName="Generelt/Geometri, overhøyde og vertikalprofil">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_GEOMETRY</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_VERTICALPROFILE</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_SECTION</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowFoulingPoints" DisplayName="Signal/Spormiddel">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_FOULINGPOINT</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowChainage" DisplayName="Generelt/Kilometriering">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_MILEAGE</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_MILEAGECHANGE</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSK$$WIPEOUT_SKILT</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowSighting" DisplayName="Generelt/Sikt">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_SIGHT_LINE</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_SIGHT_REGION</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_SIGHT_BEAM</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_SIGHT_VOLUME</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowSections" DisplayName="Generelt/Sporfelt og akseltelleravsnitt">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_SECTION</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowMarkers" DisplayName="Generelt/Markører">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE_MARKØRER</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowWatches" DisplayName="Generelt/Watch">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE_WATCH</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowLabels" DisplayName="Generelt/Etiketter">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE_ETIKETTER</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowRegions" DisplayName="Generelt/Områder">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE_OMRÅDER</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowTables" DisplayName="Generelt/Tabeller">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE_TABELLER</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="COM_ShowAuxiliaryLineAlignments" DisplayName="Generelt/Hjelpelinje">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE_HJL</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SUB_ShowCableDucts" DisplayName="Underbygning/Alle føringsveier">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU_KFK</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU_KFR</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU_KFP</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU_KFT</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU_KFØ_TREKKEKUM</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SUB_ShowFoundationAndFixtureLocators" DisplayName="Underbygning/Fundamentlokalisering">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU$$LOKALISERING_AV_FUNDAMENTER_OG_SKILTFESTER</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SUB_ShowFoundationsAndFixtures" DisplayName="Underbygning/Alle fundamenter og skiltfester">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU_FUN</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_FUN</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU_SKF</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SUB_ShowName" DisplayName="Underbygning/Navn">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU@OBJEKTNAVN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SUB_ShowTag" DisplayName="Underbygning/Objekt-ID">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU@OBJEKTID</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SUB_ShowInfo" DisplayName="Underbygning/Objektinfo">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU@OBJEKTINFO</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowAllPointObjectsExceptBoards" DisplayName="Overbygning/Alle punktobjekter unntatt skilt og sporforbindelser">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_MVS</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_SKJ</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_SVI</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_KJK</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_TNG</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_SST</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowAlignments" DisplayName="Overbygning/Spor">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_SPO</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowSwitchesAndCrossings" DisplayName="Overbygning/Sporveksel og sporkryss">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_SPV</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowContinuations" DisplayName="Overbygning/Sporfortsettelser">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_SPF</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowSwitchTongues" DisplayName="Overbygning/Sporvekseltunger">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_TNG</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowPlatforms" DisplayName="Overbygning/Plattformkanter">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_PLF</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowName" DisplayName="Overbygning/Navn">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO@OBJEKTNAVN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowTag" DisplayName="Overbygning/Objekt-ID">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO@OBJEKTID</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowInfo" DisplayName="Overbygning/Objektinfo">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO@OBJEKTINFO</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowSwitchAndCrossingType" DisplayName="Sporforbindelser/Sporveksel og sporkryss type">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO@SPV_TYPE</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowAlignmentContinuation" DisplayName="Sporforbindelser/Sporfortsettelses-symbol" DefaultOff="false">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO$SPF</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowSwitchAndCrossingGraphicsForTrack" DisplayName="Sporforbindelser/Overbygnings-symbol for sporveksel og sporkryss">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO$SPV</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowSwitchAndCrossingGraphicsForHighVoltage" DisplayName="Sporforbindelser/KL-symbol for sporveksel (elektrifisering)" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH$SPV</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowSwitchAndCrossingGraphicsForSignalling" DisplayName="Sporforbindelser/Signal-symbol for sporveksel (omstilling og kontroll)" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$SPV</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$WIPEOUT_SPORVEKSEL</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_TNG</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowSwitchLeftAndRightCentreLines" DisplayName="Sporforbindelser/Sporveksel og sporkryss senterlinjer (del av OB-symbol)" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO$$SPORVEKSEL_GEOMETRI</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowSwitchLongSleepers" DisplayName="Sporforbindelser/Sporveksel langsvilleparti (del av OB-symbol)" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO$$SPORVEKSEL_LANGSVILLEPARTI</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TRK_ShowSwitchAndCrossingShortSleepers" DisplayName="Sporforbindelser/Sporveksel kortsvilleparti (del av OB-symbol)" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO$$SPORVEKSEL_KORTSVILLEPARTI</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowAllPointObjectsExceptBoards" DisplayName="Kontaktledning/Alle punktobjekter unntatt skilt og fundamenter">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_FUN</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_MAS</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_JBTEH_MAS_HGM_TUNNEL</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_MAS_HGM_TUNNEL</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_UTL</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_KLK</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_AAK</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_AEH</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_TUF</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_FIX</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_BAF</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_STF</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_FPM</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_ASK</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_SIL</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_ISO</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_ISS</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_JOF</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_JSK</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_JEL</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_FOR</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_SVE</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_BRY</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_SUG</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_AUT</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_TER</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_MAN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowContactWire" DisplayName="Kontaktledning/Kontaktledninger og fixliner">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_KTL</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_FIL</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowAlignmentContinuation" DisplayName="Sporforbindelser/Sporfortsettelses-symbol" DefaultOff="false">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH$KFO</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowName" DisplayName="Kontaktledning/Navn">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH@OBJEKTNAVN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowTag" DisplayName="Kontaktledning/Objekt-ID">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH@OBJEKTID</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowInfo" DisplayName="Kontaktledning/Objektinfo">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH@OBJEKTINFO</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowTensioningForce" DisplayName="Kontaktledning/Avspenning strekkraft">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH@STREKKRAFT</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowSpanlength" DisplayName="Kontaktledning/Spennlengde">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH@SPENNLENGDE</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowCantileverSystemType" DisplayName="Kontaktledning/Utligger type">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH$$UTLIGGER_TYPE</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowCantileverPushOrPullDirection" DisplayName="Kontaktledning/Utligger kraftretning">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH$$UTLIGGER_KRAFTRETNING</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowCantileverContactWire" DisplayName="Kontaktledning/Utligger ledningstilhørighet">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH@UTLIGGER_LEDNING</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowCantileverStagger" DisplayName="Kontaktledning/Utligger sikk-sakk">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH@SIKKSAKK</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowAutotransformerPoles" DisplayName="Kontaktledning/Poler autotransformator">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH$$AUTOTRANSFORMATOR_POLER</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowSwitchActuatorSymbol" DisplayName="Kontaktledning/Manøvermaskin symbol (grafikk)">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH$$MANØVERMASKIN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="OCS_ShowWipeoutForIsolator" DisplayName="Kontaktledning/Wipeout for kontaktledningsobjekter" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH$$WIPEOUT_ISOLATOR</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowAllPointObjectsExceptBoards" DisplayName="Signal/Alle punktobjekter unntatt skilt">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_APS</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_ATB</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_ATC</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_ATK</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_AVI</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_DRV</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_LOK</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_MSS</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_SAM</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_SIG</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_SIK</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_SPD</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_SPF</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_SSP</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_TEL</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_TET</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_TEA</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_TVD</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_TER</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowName" DisplayName="Signal/Navn">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA@OBJEKTNAVN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowTag" DisplayName="Signal/Objekt-ID">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA@OBJEKTID</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowInfo" DisplayName="Signal/Objektinfo">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA@OBJEKTINFO</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowAxleCounterSnapLine" DisplayName="Signal/Snappelinje for akselteller" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$AKSELTELLER_SNAPPELINJE</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowAxleCcounterMinimumLateralSeparationBelow120kmh" DisplayName="Signal/Akselteller sensor minsteavstand til neste skinne inntil 120 kmh" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$AKSELTELLER_SIDEVEIS_MINSTEAVSTAND_INNTIL_120_KMH</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowAxleCcounterMinimumLateralSeparationAboveOrAt120kmh" DisplayName="Signal/Akselteller sensor minsteavstand til neste skinne over eller ved 120 kmh" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$AKSELTELLER_SIDEVEIS_MINSTEAVSTAND_OVER_ELLER_VED_120_KMH</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowAxleCounterReservedAreaForTuningUnit" DisplayName="Signal/Reservert område for 'Tp-sopp'" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$AKSELTELLER_RESERVERT_OMRAADE_FOR_TUNINGENHET</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowBaliseMetalFreeZone" DisplayName="Signal/Metallfritt profil rundt baliser" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$BALISE_METALLFRITT_PROFIL</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowBaliseSnaplinesAll" DisplayName="Signal/Alle snaplinjer for baliser" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$BALISE_SNAPPELINJER_3m</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$BALISE_SNAPPELINJER_8m</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$BALISE_SNAPPELINJER_12m</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowBaliseSnaplines3m" DisplayName="Signal/Snaplinjer 3m for baliser">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$BALISE_SNAPPELINJER_3m</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowBaliseSnaplines8m" DisplayName="Signal/Snaplinjer 8m for baliser" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$BALISE_SNAPPELINJER_8m</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowBaliseSnaplines12m" DisplayName="Signal/Snaplinjer 12m for baliser" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA$$BALISE_SNAPPELINJER_12m</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowBrakingCurveConventional" DisplayName="Signal/ATC bremsekurver">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE#ANNOTATIONS_BRAKING_CURVE</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="SIG_ShowWipeoutForCircleInSwitch" DisplayName="Signal/Wipeout for sirkel i TK" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO__KO_SPV_SPORVEKSEL_WIPEOUT</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="POW_ShowName" DisplayName="Lavspent/Navn">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEL@OBJEKTNAVN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="POW_ShowTag" DisplayName="Lavspent/Objekt-ID">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEL@OBJEKTID</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="POW_ShowInfo" DisplayName="Lavspent/Objektinfo">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEL@OBJEKTINFO</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TEL_ShowName" DisplayName="Tele/Navn og info">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTTE@OBJEKTNAVN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TEL_ShowTag" DisplayName="Tele/Objekt-ID">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTTE@OBJEKTID</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="TEL_ShowInfo" DisplayName="Tele/Objektinfo">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTTE@OBJEKTINFO</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="BNP_ShowAllBoards" DisplayName="Skilt/Alle skilt og stolper">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH_BKT</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO_SKT</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA_MSS</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="BNP_ShowWipeoutForBoards" DisplayName="Skilt/Wipeout under alle skilt" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSK$$WIPEOUT_SKILT</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="ALL_ShowName" DisplayName="Alle fag/Objektnavn">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE@OBJEKTNAVN</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU@OBJEKTNAVN</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO@OBJEKTNAVN</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH@OBJEKTNAVN</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA@OBJEKTNAVN</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEL@OBJEKTNAVN</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTTE@OBJEKTNAVN</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="ALL_ShowTag" DisplayName="Alle fag/Objekt-ID" DefaultOff="true">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE@OBJEKTID</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU@OBJEKTID</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO@OBJEKTID</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH@OBJEKTID</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA@OBJEKTID</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEL@OBJEKTID</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTTE@OBJEKTID</LayerSelection>
 </ShowLayer>
 <ShowLayer Name="ALL_ShowInfo" DisplayName="Alle fag/Objektinfo">
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTFE@OBJEKTINFO</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKU@OBJEKTINFO</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTKO@OBJEKTINFO</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEH@OBJEKTINFO</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTSA@OBJEKTINFO</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTEL@OBJEKTINFO</LayerSelection>
  <LayerSelection Type="PartialMatch" CaseSensitive="true">JBTTE@OBJEKTINFO</LayerSelection>
 </ShowLayer>
 <DisplayGaugeSettings>
  <Profiles>
   <Profile Name="Nye baner på fri linje">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>0.055</Y>
     </Point>
     <Point>
      <X>1.275</X>
      <Y>0.055</Y>
     </Point>
     <Point>
      <X>1.600</X>
      <Y>0.375</Y>
     </Point>
     <Point>
      <X>2.200</X>
      <Y>0.375</Y>
     </Point>
     <Point>
      <X>2.200</X>
      <Y>3.800</Y>
     </Point>
     <Point>
      <X>1.860</X>
      <Y>4.900</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>4.900</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="Nye baner på stasjon">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>0.055</Y>
     </Point>
     <Point>
      <X>1.275</X>
      <Y>0.055</Y>
     </Point>
     <Point>
      <X>1.600</X>
      <Y>0.375</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.375</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>2.200</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>2.200</X>
      <Y>3.800</Y>
     </Point>
     <Point>
      <X>1.860</X>
      <Y>4.900</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>4.900</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="A-85 på fri linje">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.280</Y>
     </Point>
     <Point>
      <X>1.550</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>3.440</Y>
     </Point>
     <Point>
      <X>1.740</X>
      <Y>4.100</Y>
     </Point>
     <Point>
      <X>1.040</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>4.800</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="A-85 på stasjon">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.280</Y>
     </Point>
     <Point>
      <X>1.550</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>1.740</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>1.740</X>
      <Y>1.120</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>1.120</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>3.440</Y>
     </Point>
     <Point>
      <X>1.740</X>
      <Y>4.100</Y>
     </Point>
     <Point>
      <X>1.040</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>4.800</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="A-96 på fri linje">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.280</Y>
     </Point>
     <Point>
      <X>1.550</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>3.440</Y>
     </Point>
     <Point>
      <X>1.620</X>
      <Y>4.590</Y>
     </Point>
     <Point>
      <X>1.040</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>4.800</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="A-96 på stasjon">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.280</Y>
     </Point>
     <Point>
      <X>1.550</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>1.740</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>1.740</X>
      <Y>1.120</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>1.120</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>3.440</Y>
     </Point>
     <Point>
      <X>1.620</X>
      <Y>4.590</Y>
     </Point>
     <Point>
      <X>1.040</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>4.800</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="A-96T på fri linje">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.280</Y>
     </Point>
     <Point>
      <X>1.550</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>3.440</Y>
     </Point>
     <Point>
      <X>1.620</X>
      <Y>4.590</Y>
     </Point>
     <Point>
      <X>0.695</X>
      <Y>4.900</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>4.900</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="A-96T på stasjon">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.280</Y>
     </Point>
     <Point>
      <X>1.550</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>1.740</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>1.740</X>
      <Y>1.120</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>1.120</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>3.440</Y>
     </Point>
     <Point>
      <X>1.620</X>
      <Y>4.590</Y>
     </Point>
     <Point>
      <X>1.620</X>
      <Y>4.590</Y>
     </Point>
     <Point>
      <X>0.695</X>
      <Y>4.900</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>4.900</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="A-C på fri linje">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.280</Y>
     </Point>
     <Point>
      <X>1.550</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>3.440</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>4.900</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>4.900</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="A-C på fri stasjon">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.000</Y>
     </Point>
     <Point>
      <X>1.450</X>
      <Y>0.280</Y>
     </Point>
     <Point>
      <X>1.550</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.380</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>1.740</X>
      <Y>0.760</Y>
     </Point>
     <Point>
      <X>1.740</X>
      <Y>1.120</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>1.120</Y>
     </Point>
     <Point>
      <X>2.120</X>
      <Y>3.440</Y>
     </Point>
     <Point>
      <X>1.680</X>
      <Y>4.900</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>4.900</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="E Netto-Trådhøyde-5.6">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>1.275</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>1.275</X>
      <Y>5.345</Y>
     </Point>
     <Point>
      <X>0.971</X>
      <Y>5.600</Y>
     </Point>
     <Point>
      <X>0.350</X>
      <Y>5.600</Y>
     </Point>
     <Point>
      <X>0.350</X>
      <Y>7.400</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>7.400</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="E Brutto-Trådhøyde-5.6m">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>1.425</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>1.425</X>
      <Y>5.500</Y>
     </Point>
     <Point>
      <X>1.130</X>
      <Y>5.835</Y>
     </Point>
     <Point>
      <X>0.585</X>
      <Y>5.835</Y>
     </Point>
     <Point>
      <X>0.585</X>
      <Y>7.800</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>7.800</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="E Netto-Trådhøyde-5.1m">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>1.275</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>1.275</X>
      <Y>4.845</Y>
     </Point>
     <Point>
      <X>0.971</X>
      <Y>5.100</Y>
     </Point>
     <Point>
      <X>0.350</X>
      <Y>5.100</Y>
     </Point>
     <Point>
      <X>0.350</X>
      <Y>6.900</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>6.900</Y>
     </Point>
    </HalfProfile>
   </Profile>
   <Profile Name="E Brutto-Trådhøyde-5.1">
    <HalfProfile>
     <Point>
      <X>0.000</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>1.425</X>
      <Y>4.800</Y>
     </Point>
     <Point>
      <X>1.425</X>
      <Y>5.000</Y>
     </Point>
     <Point>
      <X>1.130</X>
      <Y>5.335</Y>
     </Point>
     <Point>
      <X>0.585</X>
      <Y>5.335</Y>
     </Point>
     <Point>
      <X>0.585</X>
      <Y>7.300</Y>
     </Point>
     <Point>
      <X>0.000</X>
      <Y>7.300</Y>
     </Point>
    </HalfProfile>
   </Profile>
  </Profiles>
 </DisplayGaugeSettings>
 <Relations>
  <SourceSpace>sporveksel</SourceSpace>
  <Relation Name="Sporveksel-sporveksel kobling" AskForRelation="false" Color="20" Description="Relation for coupling one switch (turnout) to another.
				\n\nCoupled switches are switched as a couple, either motorized or manually.
				\nBoth must be in a controlled and compatible position for the couple to be in its controlled state.
				\nThe control circuitry may be internal to the actuators (motor drives) or be a sequence of keylocks." ForwardLuaName="rel_Switch_IsCoupledWith_Switch">
   <TargetSpace>sporveksel</TargetSpace>
   <RelatesTo Prompt="Er koblet med" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
  <Relation Name="EKV/DKV mekanisk sammenhengende tungesett" AskForRelation="false" Color="32" Description="Relation for mechanically connecting the tongues one one end of a double or single slip switch.
				\n\nThe tongues for both tracks will move simultaneously, driven by the same actuator.
				\nNote: We need this relation because the individual (2 or 4) tongues in a single/double slip switch are modeled in RailCOMPLETE as individual objects." ForwardLuaName="rel_Switch_HasTonguesBeingMechanicallyCoupledWithTonguesIn_Switch">
   <TargetSpace>sporveksel</TargetSpace>
   <RelatesTo Prompt="Har felles tungesett med" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
  <Relation Name="Sporveksel-sporsperre kobling" AskForRelation="false" Color="160" Description="Relation for coupling a switch (turnout) to a derailer.
				\n\nCoupled switch/derailer are switched as a couple, either motorized or manually. 
				\nBoth must be in a controlled and compatible position for the couple to be in its controlled state.
				\nThe control circuitry may be internal to the actuators (motor drives) or be a sequence of keylocks." ForwardLuaName="rel_Switch_IsCoupledWith_Derailer" ReverseLuaName="rel_Derailer_IsCoupledWith_Switch">
   <TargetSpace>sporsperre</TargetSpace>
   <RelatesTo Prompt="Er koblet med" WarnAtSaturation="true" Min="0" Max="1"/>
   <ReverseRelatesTo Prompt="Er koblet med" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
  <Relation Name="Sporveksel-skilt for bevegelig kryss" AskForRelation="false" AskForReverseRelation="false" Color="140" Description="Relation for associating a switch with movable point frog with its boards (0..3) signifying 'switch with movable point frog'." ForwardLuaName="rel_Switch_Has_BoardOfTypeMoveablePointFrog" ReverseLuaName="rel_BoardOfTypeMoveablePointFrog_AppliesTo_Switch">
   <TargetSpace>skilt</TargetSpace>
   <RelatesTo Prompt="Har" Min="0" Max="3" WarnAtSaturation="true"/>
   <ReverseRelatesTo Prompt="Er skilt for" Min="0" Max="1" WarnAtSaturation="true"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>sporvekseltunger</SourceSpace>
  <Relation Name="Sporvekseltunger" AskForRelation="true" Color="200" Description="Relation for associating the switch tongues to its switch." ForwardLuaName="rel_SwitchTongues_BelongTo_Switch" ReverseLuaName="rel_Switch_Has_SwitchTongues">
   <TargetSpace>sporveksel</TargetSpace>
   <RelatesTo Prompt="Er sporvekseltunger for" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Har" WarnAtSaturation="true" Min="1" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>oppkjørsbjelke</SourceSpace>
  <Relation Name="Oppkjørsbjelke" AskForRelation="true" Color="70" RelationLineScale="2" Description="Relation for associating a deflection bar with the axle counter it protects.
				\n\nSuch deflection bars are there to force the train-mounted snow clearing ploughshear upwards before it damages the rail-mounted axle counter sensor." ForwardLuaName="rel_DeflectionBar_Protects_AxleCounter" ReverseLuaName="rel_AxleCounter_IsProtectedBy_DeflectionBar">
   <TargetSpace>tellepunkt</TargetSpace>
   <RelatesTo Prompt="Beskytter" WarnAtSaturation="true" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Beskyttet av" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>kl-bryter</SourceSpace>
  <Relation Name="KL Bryteromstilling" AskForRelation="false" AskForReverseRelation="true" Color="32" RelationLineScale="10" Description="Relation for associating a high voltage switch with its actuator (a motor unit or a manual device)." ForwardLuaName="rel_HvSwitch_Has_HvSwitchActuator" ReverseLuaName="rel_HvSwitchActuator_Actuates_HvSwitch">
   <TargetSpace>manøvermaskin</TargetSpace>
   <RelatesTo Prompt="Omstilles av" Min="0" Max="1" WarnAtSaturation="true" NumberOfPromptsDuringInsertion="1"/>
   <ReverseRelatesTo Prompt="Omstiller" Min="1" Max="1" WarnAtSaturation="false" NumberOfPromptsDuringInsertion="1"/>
  </Relation>
  <Relation Name="KL Bryter mastetilhørighet" AskForRelation="true" AskForReverseRelation="false" Color="34" RelationLineScale="10" Description="Relation for associating a high voltage switch with the OCS pole it is installed on top of." ForwardLuaName="rel_HvSwitch_IsInstalledOn_OcsPole" ReverseLuaName="rel_OcsPole_IsInstallationTargetFor_HvSwitch">
   <TargetSpace>kl-mast</TargetSpace>
   <RelatesTo Prompt="Tilhører" Min="1" Max="1" WarnAtSaturation="true" NumberOfPromptsDuringInsertion="1"/>
   <ReverseRelatesTo Prompt="Har" Min="0" Max="inf" WarnAtSaturation="false" NumberOfPromptsDuringInsertion="1"/>
  </Relation>
  <Relation Name="KL Bryter høyspentledning-tilkobling" AskForRelation="true" AskForReverseRelation="true" Color="36" RelationLineScale="10" Description="Relation for associating a high voltage switch (a HV interrupter) to a high voltage conductor." ForwardLuaName="rel_HvSwitch_Interrupts_HvConductor" ReverseLuaName="rel_HvConductor_IsInterruptedBy_HvSwitch">
   <TargetSpace>høyspentledning</TargetSpace>
   <RelatesTo Prompt="Bryter for" Min="0" Max="2" WarnAtSaturation="true" NumberOfPromptsDuringInsertion="1"/>
   <ReverseRelatesTo Prompt="Brytes av" Min="0" Max="1" WarnAtSaturation="false" NumberOfPromptsDuringInsertion="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>forankring_på_mast</SourceSpace>
  <Relation Name="KL Forankring på mast - mastetilhørighet" AskForRelation="true" AskForReverseRelation="false" Color="254" Description="Relation for associating an anchoring console to the OCS pole it is installed on." ForwardLuaName="rel_AnchoringToOcsPole_IsInstalledOn_OcsPole" ReverseLuaName="rel_OcsPole_IsInstallationTargetFor_AnchoringToOcsPole">
   <TargetSpace>kl-mast</TargetSpace>
   <RelatesTo Prompt="Er forankring på" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Har" WarnAtSaturation="true" Min="0" Max="2"/>
  </Relation>
  <Relation Name="KL Forankring av avspenning/bardun/strever på mast" AskForRelation="true" AskForReverseRelation="true" Color="254" Description="Relation for associating an anchoring device on OCS pole to the guywire / spanner or wire tension balancer it anchors to the OCS pole." ForwardLuaName="rel_AnchoringToOcsPole_Anchors_GuyWireOrSpannerOrWtb" ReverseLuaName="rel_GuyWireOrSpannerOrWtb_IsAnchoredBy_AnchoringToOcsPole">
   <TargetSpace>avspenning</TargetSpace>
   <TargetSpace>kl-bardun</TargetSpace>
   <TargetSpace>kl-strever</TargetSpace>
   <RelatesTo Prompt="Er forankring_på_mast for" WarnAtSaturation="true" Min="1" Max="inf" NumberOfPromptsDuringInsertion="2"/>
   <ReverseRelatesTo Prompt="Har" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>bardun_fotplate</SourceSpace>
  <Relation Name="KL Bardunforankring mot bakken" AskForRelation="true" AskForReverseRelation="true" Color="254" Description="Relation for associating a guywire footplate to the guywire it anchors to the ground." ForwardLuaName="rel_GuyWireFootplate_Anchors_GuyWire" ReverseLuaName="rel_GuyWire_IsAnchoredBy_GuywireFootplate">
   <TargetSpace>kl-bardun</TargetSpace>
   <RelatesTo Prompt="Er bardun_fotplate for" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Har" WarnAtSaturation="true" Min="1" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>strever_fotplate</SourceSpace>
  <Relation Name="KL Streverforankring mot bakken" AskForRelation="true" AskForReverseRelation="true" Color="254" Description="Relation for associating an spanner footplate to the spanner it anchors to the ground." ForwardLuaName="rel_SpannerFootplate_Anchors_Spanner" ReverseLuaName="rel_Spanner_IsAnchoredBy_SpannerFootplate">
   <TargetSpace>kl-strever</TargetSpace>
   <RelatesTo Prompt="Er strever_fotplate for" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Har" WarnAtSaturation="true" Min="1" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>tunnelfeste</SourceSpace>
  <Relation Name="KL Forankring til tunnelfeste" AskForRelation="true" AskForReverseRelation="false" Color="254" Description="Relation for associating a tunnel wall (or ceiling) footplate to the wire tension balancer, guywire or spanner it anchors." ForwardLuaName="rel_TunnelFootplate_Anchors_GuyWireOrSpannerOrWtb" ReverseLuaName="rel_GuyWireOrSpannerOrWtb_IsAnchoredBy_TunnelFootplate">
   <TargetSpace>avspenning</TargetSpace>
   <TargetSpace>kl-bardun</TargetSpace>
   <TargetSpace>kl-strever</TargetSpace>
   <RelatesTo Prompt="Er tunnelfeste for" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Har" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>utligger</SourceSpace>
  <Relation Name="KL Utligger mastetilhørighet" AskForRelation="true" Color="200" Description="Relation for associating a cantilever to its OCS pole.
				\n\nAn OCS pole can maximum accomodate six cantilevers (in case it serves a double switch arrangement on each side of the pole)." ForwardLuaName="rel_Cantilever_BelongsTo_OcsPole" ReverseLuaName="rel_OcsPole_Has_Cantilever">
   <TargetSpace>kl-mast</TargetSpace>
   <RelatesTo Prompt="Tilhører" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Er kl-mast for" WarnAtSaturation="true" Min="0" Max="6"/>
  </Relation>
  <Relation Name="KL Utligger ledningstilhørighet" AskForRelation="true" Color="20" Description="Relation for associating a cantilever to the contact wire it holds." ForwardLuaName="rel_Cantilever_Holds_ContactWire" ReverseLuaName="rel_ContactWire_IsHeldBy_Cantilever">
   <TargetSpace>kontaktledning</TargetSpace>
   <RelatesTo Prompt="Er utligger for" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Er kontaktledning festet til" Min="0" Max="inf"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>utligger</SourceSpace>
  <SourceSpace>avspenning</SourceSpace>
  <Relation Name="KL Utligger- og avspenningsekvens" AskForRelation="true" AskForReverseRelation="true" Color="140" Description="Relation for associating a cantilever / wire tension balancer to its previous / following cantilever / wire tension balancer (serving the same contact wire).
				\nThe low-end wire tension balancer shall have no predecessor. The high-end wire tension balancer shall have no successor. The cantilevers in between the two wire tension balancers shall have one predecessor (wtb or cantilever) and one successor (wtb or cantilever)." ForwardLuaName="rel_CantileverOrWtb_HasPrevious_CantileverOrWtb" ReverseLuaName="rel_CantileverOrWtb_HasNext_CantileverOrWtb">
   <TargetSpace>utligger</TargetSpace>
   <TargetSpace>avspenning</TargetSpace>
   <RelatesTo Prompt="Forrige" WarnAtSaturation="true" Min="0" Max="1"/>
   <ReverseRelatesTo Prompt="Neste" WarnAtSaturation="false" Min="0" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>kontakttrådklemme</SourceSpace>
  <Relation Name="KL Kontakttrådklemme utliggertilhørighet" AskForRelation="true" AskForReverseRelation="false" Color="140" Description="Relation for associating a contact wire clamp with the cantilever it belongs to." ForwardLuaName="rel_OcsWireClamp_BelongsTo_Cantilever" ReverseLuaName="rel_Cantilever_Has_OcsWireClamp">
   <TargetSpace>utligger</TargetSpace>
   <RelatesTo Prompt="Tilhører" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Har" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
  <Relation Name="KL Kontakttrådklemme ledningstilhørighet" AskForRelation="false" AskForReverseRelation="true" Color="31" Description="Relation for associating a contact wire clamp with the contact wire it holds." ForwardLuaName="rel_OcsWireClamp_Holds_ContactWire" ReverseLuaName="rel_ContactWire_IsHeldBy_OcsWireClamp">
   <TargetSpace>kontaktledning</TargetSpace>
   <RelatesTo Prompt="Er kontakttrådklemme for" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Har" WarnAtSaturation="true" Min="0" Max="inf"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>seksjonsutliggerkonsoll</SourceSpace>
  <Relation Name="KL Seksjonsutliggerkonsoll mastetilhørighet" AskForRelation="true" Color="140" Description="Relation for associating a multi-cantilever console with the OCS pole it is installed on." ForwardLuaName="rel_MultiCantileverConsole_IsInstalledOn_OcsPole" ReverseLuaName="rel_OcsPole_IsInstallationTargetFor_MultiCantileverConsole">
   <TargetSpace>kl-mast</TargetSpace>
   <RelatesTo Prompt="Er seksjonsutliggerkonsoll på" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Er kl-mast med" WarnAtSaturation="true" Min="0" Max="2"/>
  </Relation>
  <Relation Name="KL Seksjonsutliggerkonsoll utliggertilhørighet" AskForRelation="true" Color="142" Description="Relation for associating a multi-cantilever console with the cantilevers it holds.
				\nNote that the cantilevers still belong to the OCS pole (this simplifies many Lua automation formulas).
				\nThe presence of a multi-cantilever console affects the physical placement of the cantilevers." ForwardLuaName="rel_MultiCantileverConsole_IsMountingSurfaceFor_Cantilever" ReverseLuaName="rel_Cantilever_IsMountedOn_MultiCantileverConsole">
   <TargetSpace>utligger</TargetSpace>
   <RelatesTo Prompt="Er seksjonsutliggerkonsoll for" WarnAtSaturation="true" Min="2" Max="2" NumberOfPromptsDuringInsertion="2"/>
   <ReverseRelatesTo Prompt="Er utligger festet til" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>avspenning</SourceSpace>
  <Relation Name="KL Avspenning ledning/linetilhørighet" AskForRelation="true" AskForReverseRelation="true" Color="20" Description="Relation for associating a wire tension balancer (be it weight, spring or fixed) with the contact wire or midpoint anchor line or high voltage cable it serves.)
				\nA contact wire is modeled in five parts, only the first and the last part relate to a wire tension balancer.
				\nMidpoint anchor lines are normally modeled as a single alignment with a wire tension balancer at each end.
				\nHigh voltage cables may consist of any number of cable parts connected by continuation objects. The start and the end shall relate to a wtb if the cable is suspended in free air. Cables in cable ducts or pipes should not be related to wtb's, of course." ForwardLuaName="rel_Wtb_Tensions_ContactWireOrMidpointAnchoringLineOrHvConductor" ReverseLuaName="rel_ContactWireOrMidpointAnchoringLineOrHvConductor_IsTensionedBy_Wtb">
   <TargetSpace>kontaktledning</TargetSpace>
   <TargetSpace>fixline</TargetSpace>
   <TargetSpace>høyspentledning</TargetSpace>
   <RelatesTo Prompt="Er avspenning for" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Er avspent av" Min="0" Max="3"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>fixpunkt</SourceSpace>
  <Relation Name="KL Fixpunkt utligger-låsing" AskForRelation="true" Color="210" Description="Relation for associating a midpoint anchor with the cantilever it locks sideways." ForwardLuaName="rel_MidpointAnchor_Locks_Cantilever" ReverseLuaName="rel_Cantilever_IsLockedBy_MidpointAnchor">
   <TargetSpace>utligger</TargetSpace>
   <RelatesTo Prompt="Låser" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Er utligger låst av" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
  <Relation Name="KL Fixpunkt fixlinetilhørighet" AskForRelation="true" Color="220" Description="Relation for associating a midpoint anchor with its midpoint anchoring line." ForwardLuaName="rel_MidpointAnchor_IsAnchoredBy_MidpointAnchoringLine" ReverseLuaName="rel_MidpointAnchoringLine_Anchors_MidpointAnchor">
   <TargetSpace>fixline</TargetSpace>
   <RelatesTo Prompt="Fixpunkt tilhører" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Fixline fastholder" WarnAtSaturation="true" Min="1" Max="1"/>
  </Relation>
  <Relation Name="KL Fiksering av kontaktledning" AskForRelation="true" Color="230" Description="Relation for associating a midpoint anchor with the contact wire it locks." ForwardLuaName="rel_MidpointAnchor_Locks_ContactWire" ReverseLuaName="rel_ContactWire_IsLockedBy_MidpointAnchor">
   <TargetSpace>kontaktledning</TargetSpace>
   <RelatesTo Prompt="Fikserer" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Er kontaktledning fiksert av" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>kl-mast</SourceSpace>
  <Relation Name="KL hengemast i åk" AskForRelation="{% if RcType == rctype_OcsDropArmUnderPortal %}true{% else %}false{% endif %}" AskForReverseRelation="false" Color="254" Description="Relation for associating an OCS drop arm with its OCS portal / gantry." ForwardLuaName="rel_OcsPole_IsDropArmUnder_OcsPortal" ReverseLuaName="rel_OcsPortal_IsDropArmSupportFor_OcsPole">
   <TargetSpace>åk</TargetSpace>
   <RelatesTo Prompt="Er hengemast festet i" Min="0" Max="1" WarnAtSaturation="true" NumberOfPromptsDuringInsertion="1"/>
   <ReverseRelatesTo Prompt="Er åk for hengemast -" Min="0" Max="inf" WarnAtSaturation="false" NumberOfPromptsDuringInsertion="2"/>
  </Relation>
  <Relation Name="KL mast/hengemast sekvens" AskForRelation="true" AskForReverseRelation="true" Color="120" Description="Relation for associating an OCS pole / drop arm to its previous / next OCS pole / drop arm. Multiple such relations should exist, one for each other OCS pole that holds a cantilever with a shared contact wire." ForwardLuaName="rel_OcsPole_HasPrevious_OcsPole" ReverseLuaName="rel_OcsPole_HasNext_OcsPole">
   <TargetSpace>kl-mast</TargetSpace>
   <RelatesTo Prompt="Forrige" WarnAtSaturation="false" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Neste" WarnAtSaturation="true" Min="0" Max="inf"/>
  </Relation>
  <Relation Name="KL åk-mast understøttelse" AskForRelation="false" AskForReverseRelation="true" Color="253" Description="Relation for associating an OCS portal (portal or gantry) with its supporting OCS pole(s)." ForwardLuaName="rel_OcsPole_IsSupportFor_OcsPortal" ReverseLuaName="rel_OcsPortal_IsSupportedBy_OcsPole">
   <TargetSpace>åk</TargetSpace>
   <RelatesTo Prompt="Er åk-mast for" WarnAtSaturation="true" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Er åk holdt oppe av" WarnAtSaturation="false" Min="0" Max="2" NumberOfPromptsDuringInsertion="2"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>kl-mast</SourceSpace>
  <SourceSpace>bardun_fotplate</SourceSpace>
  <SourceSpace>strever_fotplate</SourceSpace>
  <SourceSpace>tunnelfeste</SourceSpace>
  <Relation Name="KL Mast og forankring fundamenttilhørighet" AskForRelation="{% if RcType == 'JBTEH_MAS Hengemast i åk' %}false{% else %}true{% endif %}" AskForReverseRelation="true" Color="254" Description="Relation for associating an OCS pole or guywire/spanner anchoring footplate with a compatible foundation." ForwardLuaName="rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation" ReverseLuaName="rel_OcsFoundation_AppliesTo_OcsPoleOrAnchoringFootplate">
   <TargetSpace>kl-fundament</TargetSpace>
   <RelatesTo Prompt="Har" WarnAtSaturation="true" Min="0" Max="1" NumberOfPromptsDuringInsertion="1"/>
   <ReverseRelatesTo Prompt="Er kl-fundament for" WarnAtSaturation="true" Min="1" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>kl-annotering</SourceSpace>
  <Relation Name="KL Annotering av ledningsbytte" AskForRelation="true" Color="4" Description="Relation for annotating the changeover between two consecutive contact wires.
				\n\nThe annotation object produces a visible text, containing information about the type of changeover and the wires it applies to." ForwardLuaName="rel_OcsWireChangeAnnotation_AppliesTo_ContactWire" ReverseLuaName="rel_ContactWire_Has_OcsWireChangeAnnotation">
   <TargetSpace>kontaktledning</TargetSpace>
   <RelatesTo Prompt="Er KL-annotering for" Min="0" Max="2" NumberOfPromptsDuringInsertion="2"/>
   <ReverseRelatesTo Prompt="Har" Min="0" Max="2"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>apparatskap</SourceSpace>
  <Relation Name="Apparatskaptilhørighet" AskForReverseRelation="false" Color="20" Description="Relation for associating a wayside cabinet to various objects' wiring." ForwardLuaName="rel_Cabinet_HousesWiringConnectionsFor_Object" ReverseLuaName="rel_Object_HasWiringConnectionsHousedBy_Cabinet">
   <TargetSpace>signal</TargetSpace>
   <TargetSpace>NSS_balise</TargetSpace>
   <TargetSpace>ETCS_balise</TargetSpace>
   <TargetSpace>tellepunkt</TargetSpace>
   <TargetSpace>sporvekseldrivmaskin</TargetSpace>
   <TargetSpace>sporsperredrivmaskin</TargetSpace>
   <RelatesTo Prompt="Gjelder for" WarnAtSaturation="true" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Tilhører" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>avsporingsindikator</SourceSpace>
  <Relation Name="Signaler som settes i stopp" AskForRelation="true" Color="220" Description="Relation for associating a derailed axle indicator (trackmounted sensor) with the signal(s) it affects." ForwardLuaName="rel_DerailedAxleIndicator_SetsToStop_Signal" ReverseLuaName="rel_Signal_IsSetToStopBy_DerailedAxleIndicator">
   <TargetSpace>signal</TargetSpace>
   <RelatesTo Prompt="River" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Signal rives av" WarnAtSaturation="true" Min="0" Max="inf"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>signal</SourceSpace>
  <Relation Name="Forsignal" AskForRelation="false" Color="30" Description="Relation for associating a distant signal with its announced signal(s)." ForwardLuaName="rel_Signal_IsAnnouncedBy_Signal" ReverseLuaName="rel_Signal_Announces_Signal">
   <TargetSpace>signal</TargetSpace>
   <RelatesTo Prompt="Er forsignal for" WarnAtSaturation="true" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Er forsignalert av" WarnAtSaturation="true" Min="0" Max="inf"/>
  </Relation>
  <Relation Name="Togsporsignal" AskForRelation="false" Color="30" Description="Relation for associating a track signal with its main signal.
				\n\nA track signal acts as a placeholder, one per affected track, for a main (exit) signal being common to this and to neighbouring tracks." ForwardLuaName="rel_Signal_Has_TrackSignal" ReverseLuaName="rel_TrackSignal_AppliesTo_Signal">
   <TargetSpace>signal</TargetSpace>
   <RelatesTo Prompt="Er togsporsignal for" WarnAtSaturation="true" Min="0" Max="1"/>
   <ReverseRelatesTo Prompt="Har togsporsignal" WarnAtSaturation="true" Min="0" Max="inf"/>
  </Relation>
  <Relation Name="Fundamenttilhørighet" AskForReverseRelation="true" Color="254" Description="Relation for associating a signal with its signal foundation." ForwardLuaName="rel_Signal_Has_SignalFoundation" ReverseLuaName="rel_SignalFoundation_AppliesTo_Signal">
   <TargetSpace>signalfundament</TargetSpace>
   <RelatesTo Prompt="Har" WarnAtSaturation="true" Min="0" Max="1"/>
   <ReverseRelatesTo Prompt="Er fundament for" WarnAtSaturation="true" Min="1" Max="1" NumberOfPromptsDuringInsertion="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>tellepunkt</SourceSpace>
  <Relation Name="Akselteller ved signal" Color="140" Description="Relation for associating an axle counter to a signal." ForwardLuaName="rel_AxleCounter_AppliesTo_Signal" ReverseLuaName="rel_Signal_Has_AxleCounter">
   <TargetSpace>signal</TargetSpace>
   <RelatesTo Prompt="Tilhører" WarnAtSaturation="true" Min="0" Max="2"/>
   <ReverseRelatesTo Prompt="Er signal for" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
  <Relation Name="Akselteller markert av stolpe" Color="200" Description="Relation for associating an axle counter to a marker pole.
				\n\nSuch marker poles are essential during winter where track-mounted devices are hard to find under snow and ice." ForwardLuaName="rel_AxleCounter_IsLocatedAt_MarkerPole" ReverseLuaName="rel_MarkerPole_Locates_AxleCounter">
   <TargetSpace>stolpe</TargetSpace>
   <RelatesTo Prompt="Tilhører" WarnAtSaturation="true" Min="0" Max="1"/>
   <ReverseRelatesTo Prompt="Er stolpe for" Min="0" Max="inf"/>
  </Relation>
  <Relation Name="Tuningenhet for akselteller" AskForReverseRelation="true" Color="140" RelationLineScale="1" Description="Relation for associating an axle counter tuning unit with its axle counter(s)." ForwardLuaName="rel_AxleCounter_IsFedAndReadBy_AxleCounterTuningUnit" ReverseLuaName="rel_AxleCounterTuningUnit_FeedsAndReads_AxleCounter">
   <TargetSpace>akselteller_tuningenhet</TargetSpace>
   <RelatesTo Prompt="Har" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Er akselteller_tuningenhet for" WarnAtSaturation="true" Min="1" Max="2" NumberOfPromptsDuringInsertion="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>FTGS_forbinder</SourceSpace>
  <Relation Name="FTGS-forbinder ved signal" Color="140" Description="Relation for associating an FTGS S-bond with a signal." ForwardLuaName="rel_FtgsSbond_AppliesTo_Signal" ReverseLuaName="rel_Signal_Has_FtgsSbond">
   <TargetSpace>signal</TargetSpace>
   <RelatesTo Prompt="Tilhører" WarnAtSaturation="true" Min="0" Max="2"/>
   <ReverseRelatesTo Prompt="Er signal for" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
  <Relation Name="Tuningenhet for FTGS forbinder" AskForReverseRelation="true" Color="140" RelationLineScale="1" Description="Relation for associating an FTGS tuning unit with one or two FTGS S-bonds (or FTGS end-loops)." ForwardLuaName="rel_FtgsTuningUnit_FeedsAndReads_FtgsSbond" ReverseLuaName="rel_FtgsSbond_IsFedAndReadBy_FtgsTuningUnit">
   <TargetSpace>FTGS_tuningenhet</TargetSpace>
   <RelatesTo Prompt="Har" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Er FTGS_tuningenhet for" WarnAtSaturation="true" Min="1" Max="1" NumberOfPromptsDuringInsertion="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>sporvekseldrivmaskin</SourceSpace>
  <Relation Name="Sporvekseltilhørighet sporvekseldrivmaskin" AskForRelation="true" AskForReverseRelation="false" Color="220" Description="Relation for associating a point machine (switchblade/tongue motor) with its switch (turnout)." ForwardLuaName="rel_PointMachine_BelongsTo_Switch" ReverseLuaName="rel_Switch_Has_PointMachine">
   <TargetSpace>sporveksel</TargetSpace>
   <RelatesTo Prompt="Driver" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Har" Min="1" Max="9" WarnAtSaturation="true"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>sporsperredrivmaskin</SourceSpace>
  <Relation Name="Sporsperretilhørighet sporsperredrivmaskin" AskForRelation="true" Color="220" Description="Relation for associating a derailer machine (actuator / motor) with its switch (turnout)." ForwardLuaName="rel_DerailerMachine_BelongsTo_Derailer" ReverseLuaName="rel_Switch_Has_DerailerMachine">
   <TargetSpace>sporsperre</TargetSpace>
   <RelatesTo Prompt="Driver" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Har" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>lokalstiller</SourceSpace>
  <Relation Name="Objekttilhørighet lokalstiller" AskForRelation="true" Color="70" Description="Relation for associating a local control panel with its switch or derailer.
				\n\nIf the derailer or switch is coupled with another compatible device, then the local control panel will switch both." ForwardLuaName="rel_LocalControlPanel_Actuates_SwitchOrDerailer" ReverseLuaName="rel_SwitchOrDerailer_IsActuatedBy_LocalControlPanel">
   <TargetSpace>sporveksel</TargetSpace>
   <TargetSpace>sporsperre</TargetSpace>
   <RelatesTo Prompt="Omstiller" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Omstilles av" WarnAtSaturation="true" Min="0" Max="1"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>ETCS_balise</SourceSpace>
  <Relation Name="ETCS balisegruppe tilhørighet" AskForRelation="true" AskForReverseRelation="false" Color="50" Description="Relation for associating an ETCS balise to its ETCS data/information point (balise group)." ForwardLuaName="rel_EtcsBalise_BelongsTo_EtcsBaliseGroup" ReverseLuaName="rel_EtcsBaliseGroup_Contains_EtcsBalise">
   <TargetSpace>ETCS_balisegruppe</TargetSpace>
   <RelatesTo Prompt="Tilhører" Min="1" Max="1" NumberOfPromptsDuringInsertion="1"/>
   <ReverseRelatesTo Prompt="Inneholder" WarnAtSaturation="true" Min="1" Max="8" NumberOfPromptsDuringInsertion="2"/>
  </Relation>
  <Relation Name="ETCS balise telegramkoder tilhørighet (LEU)" AskForRelation="false" AskForReverseRelation="true" Color="60" Description="Relation for associating an ETCS balise to its ETCS telegram encoder (LEU - Lineside Electronic Unit)." ForwardLuaName="rel_EtcsBalise_IsControlledBy_EtcsLinesideElectronicUnit" ReverseLuaName="rel_EtcsLinesideElectronicUnit_Controls_EtcsBalise">
   <TargetSpace>ETCS_LEU</TargetSpace>
   <RelatesTo Prompt="Er styrt av" Min="0" Max="1" NumberOfPromptsDuringInsertion="1"/>
   <ReverseRelatesTo Prompt="Styrer" WarnAtSaturation="true" Min="1" Max="4" NumberOfPromptsDuringInsertion="1"/>
  </Relation>
  <Relation Name="ETCS telegramstyring" AskForRelation="true" Color="200" Description="Relation which links an ETCS balise group to objects providing information needed by its controller." ForwardLuaName="rel_EtcsBaliseGroup_ObtainsControlInformationFrom_Object" ReverseLuaName="rel_Object_ProvidesControlInformationTo_EtcsBaliseGroup">
   <TargetSpace>signal</TargetSpace>
   <TargetSpace>ertms_marker_board</TargetSpace>
   <TargetSpace>ertms_shunting_signal</TargetSpace>
   <TargetSpace>skilt</TargetSpace>
   <TargetSpace>stolpe</TargetSpace>
   <TargetSpace>sporveksel</TargetSpace>
   <RelatesTo Prompt="Henter styringsinformasjon fra" Min="0" Max="inf" NumberOfPromptsDuringInsertion="1"/>
   <ReverseRelatesTo Prompt="Avgir styringsinformasjon til" Min="0" Max="inf"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>ETCS_balisegruppe</SourceSpace>
  <Relation Name="Objekttilhørighet ETCS balisegruppe" AskForRelation="true" Color="120" Description="Relation for associating an ETCS balise group with a wayside object." ForwardLuaName="rel_EtcsBaliseGroup_AppliesTo_Object" ReverseLuaName="rel_Object_Has_EtcsBaliseGroup">
   <TargetSpace>signal</TargetSpace>
   <TargetSpace>ertms_marker_board</TargetSpace>
   <TargetSpace>ertms_shunting_signal</TargetSpace>
   <TargetSpace>skilt</TargetSpace>
   <TargetSpace>stolpe</TargetSpace>
   <TargetSpace>sporveksel</TargetSpace>
   <RelatesTo Prompt="Gjelder for" WarnAtSaturation="true" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Har" Min="0" Max="inf"/>
  </Relation>
  <Relation Name="ETCS lenkingskjede" Color="140" Description="Relation which links one ETCS balise group to its predecessor or successor in a linking chain.
				\n\nThe purpose of the linking chain is to allow the train to react safely if the linking distance has expired, within a system-dependent tolerance, without reaching the announced target object." ForwardLuaName="rel_EtcsBaliseGroup_LinksTo_EtcsBaliseGroup" ReverseLuaName="rel_EtcsBaliseGroup_IsLinkedToFrom_EtcsBaliseGroup">
   <TargetSpace>ETCS_balisegruppe</TargetSpace>
   <RelatesTo Prompt="Lenker til" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Er lenket til fra" Min="0" Max="inf"/>
  </Relation>
  <Relation Name="ETCS bremsekurve" Color="220" Description="Relation which associates an ETCS balise group announcing a braking curve with a balise group(s) at the target position(s)." ForwardLuaName="rel_EtcsBaliseGroup_HasBrakingCurveTargetIn_EtcsBaliseGroup" ReverseLuaName="rel_EtcsBaliseGroup_IsBrakingCurveTargetFor_EtcsBaliseGroup">
   <TargetSpace>ETCS_balisegruppe</TargetSpace>
   <RelatesTo Prompt="Har bremsekurve målpunkt i" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Er bremsekurve målpunkt for" Min="0" Max="inf"/>
  </Relation>
  <Relation Name="ETCS kodetabell tilhørighet" Color="70" Description="Relation which associates an ETCS balise group with its balise encoding table.
				\n\nThe balise encoding table constitutes the mapping from control informations to the telegrams to be displayed by the balise group." ForwardLuaName="rel_EtcsCodeTable_DependsOn_EtcsBaliseGroup" ReverseLuaName="rel_EtcsBaliseGroup_Affects_EtcsCodeTable">
   <TargetSpace>ETCS_kodetabell</TargetSpace>
   <RelatesTo Prompt="Tilhører" Min="0" Max="1"/>
   <ReverseRelatesTo Prompt="Inneholder" Min="1" Max="inf"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>NSS_balise</SourceSpace>
  <Relation Name="NSS balisegruppe tilhørighet" AskForRelation="true" AskForReverseRelation="false" Color="50" Description="Relation for associating a National Signalling System balise to its NSS data/information point (balise group)." ForwardLuaName="rel_NssBalise_BelongsTo_NssBaliseGroup" ReverseLuaName="rel_NssBaliseGroup_Contains_NssBalise">
   <TargetSpace>NSS_balisegruppe</TargetSpace>
   <RelatesTo Prompt="Tilhører" Min="1" Max="1" NumberOfPromptsDuringInsertion="1"/>
   <ReverseRelatesTo Prompt="Inneholder" WarnAtSaturation="true" Min="2" Max="4" NumberOfPromptsDuringInsertion="4"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>NSS_balisegruppe</SourceSpace>
  <Relation Name="NSS gruppeposisjon definert av" AskForRelation="true" AskForReverseRelation="true" Color="30" Description="Relation for obtaining the linear position of a National Signalling System balise group from one of its balises." ForwardLuaName="rel_NssBaliseGroup_HasPositionDeterminedBy_NssBalise" ReverseLuaName="rel_NssBalise_DeterminesPositionFor_NssBaliseGroup">
   <TargetSpace>NSS_balise</TargetSpace>
   <RelatesTo Prompt="Har posisjonsdefinerende" WarnAtSaturation="true" Min="1" Max="1"/>
   <ReverseRelatesTo Prompt="Definerer posisjon for" Min="0" Max="1"/>
  </Relation>
  <Relation Name="Objekttilhørighet NSS balisegruppe" AskForRelation="true" Color="120" Description="Relation for associating a National Signalling System balise group with a wayside object." ForwardLuaName="rel_NssBaliseGroup_AppliesTo_Object" ReverseLuaName="rel_Object_Has_NssBaliseGroup">
   <TargetSpace>signal</TargetSpace>
   <TargetSpace>skilt</TargetSpace>
   <TargetSpace>stolpe</TargetSpace>
   <TargetSpace>sporveksel</TargetSpace>
   <RelatesTo Prompt="Gjelder for" WarnAtSaturation="true" Min="1" Max="inf"/>
   <ReverseRelatesTo Prompt="Har" Min="0" Max="inf"/>
  </Relation>
  <Relation Name="NSS telegramstyring" AskForRelation="true" Color="200" Description="Relation which links a National Signalling System balise group to objects providing information needed by its controller." ForwardLuaName="rel_NssBaliseGroup_ObtainsControlInformationFrom_Object" ReverseLuaName="rel_Object_ProvidesControlInformationTo_NssBaliseGroup">
   <TargetSpace>signal</TargetSpace>
   <TargetSpace>skilt</TargetSpace>
   <TargetSpace>stolpe</TargetSpace>
   <TargetSpace>sporveksel</TargetSpace>
   <RelatesTo Prompt="Henter styringsinformasjon fra" Min="0" Max="inf" NumberOfPromptsDuringInsertion="1"/>
   <ReverseRelatesTo Prompt="Avgir styringsinformasjon til" Min="0" Max="inf"/>
  </Relation>
  <Relation Name="NSS lenkingskjede" Color="140" Description="Relation which links one National Signalling System balise group to its predecessor or successor in a linking chain.
				\n\nThe purpose of the linking chain is to allow the train to react safely if the linking distance has expired, within a system-dependent tolerance, without reaching the announced target object." ForwardLuaName="rel_NssBaliseGroup_LinksTo_NssBaliseGroup" ReverseLuaName="rel_NssBaliseGroup_IsLinkedToFrom_NssBaliseGroup">
   <TargetSpace>NSS_balisegruppe</TargetSpace>
   <RelatesTo Prompt="Lenker til" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Er lenket til fra" Min="0" Max="inf"/>
  </Relation>
  <Relation Name="NSS bremsekurve" Color="220" Description="Relation which associates a National Signalling System balise group announcing a braking curve with a balise group(s) at the target position(s)." ForwardLuaName="rel_NssBaliseGroup_HasBrakingCurveTargetIn_NssBaliseGroup" ReverseLuaName="rel_NssBaliseGroup_IsBrakingCurveTargetFor_NssBaliseGroup">
   <TargetSpace>NSS_balisegruppe</TargetSpace>
   <RelatesTo Prompt="Har bremsekurve målpunkt i" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Er bremsekurve målpunkt for" Min="0" Max="inf"/>
  </Relation>
  <Relation Name="NSS kodetabell tilhørighet" Color="70" Description="Relation which associates a National Signalling System balise group with its balise encoding table.
				\n\nThe balise encoding table constitutes the mapping from control informations to the telegrams to be displayed by the balise group." ForwardLuaName="rel_NssCodeTable_DependsOn_NssBaliseGroup" ReverseLuaName="rel_NssBaliseGroup_Affects_NssCodeTable">
   <TargetSpace>NSS_kodetabell</TargetSpace>
   <RelatesTo Prompt="Tilhører" Min="0" Max="1"/>
   <ReverseRelatesTo Prompt="Inneholder" Min="1" Max="inf"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>markør</SourceSpace>
  <Relation Name="Markør" AskForRelation="true" Color="4" Description="Relation for associating a Marker object with any type of object, from which it needs information." ForwardLuaName="rel_Marker_AppliesTo_Anything" ReverseLuaName="rel_Anything_Has_Marker">
   <TargetSpace>anything</TargetSpace>
   <RelatesTo Prompt="Er markør for" Min="0" Max="inf" NumberOfPromptsDuringInsertion="2"/>
   <ReverseRelatesTo Prompt="Har" Min="0" Max="inf"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>etikett</SourceSpace>
  <Relation Name="Etikett" AskForRelation="true" Color="4" Description="Relation for associating a Label object with any type of object, from which it needs information." ForwardLuaName="rel_Label_AppliesTo_Anything" ReverseLuaName="rel_Anything_Has_Label">
   <TargetSpace>anything</TargetSpace>
   <RelatesTo Prompt="Er etikett for" Min="0" Max="inf" NumberOfPromptsDuringInsertion="1"/>
   <ReverseRelatesTo Prompt="Har" Min="0" Max="inf"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>watch</SourceSpace>
  <Relation Name="Watch" AskForRelation="true" Color="70" Description="Relation for associating a Watch object with any type of object, from which it needs information." ForwardLuaName="rel_Watch_AppliesTo_Anything" ReverseLuaName="rel_Anything_Has_Watch">
   <TargetSpace>anything</TargetSpace>
   <RelatesTo Prompt="Er watch for" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Har" Min="0" Max="inf"/>
  </Relation>
 </Relations>
 <Relations>
  <SourceSpace>ballong</SourceSpace>
  <Relation Name="Ballong" AskForRelation="false" Color="70" Description="Relation for associating a balloon object with any type of object, from which it needs information." ForwardLuaName="rel_Balloon_RelatesTo_Anything" ReverseLuaName="rel_Anything_IsRelatedTo_Balloon">
   <TargetSpace>anything</TargetSpace>
   <RelatesTo Prompt="Er ballong med relasjon til" Min="0" Max="inf"/>
   <ReverseRelatesTo Prompt="Har relasjon til" Min="0" Max="inf"/>
  </Relation>
 </Relations>
 <PropertyCategory Name="Document" DisplayName="Dokument" Collapsed="false"/>
 <PropertyCategory Name="File" DisplayName="Fil" Collapsed="false"/>
 <PropertyCategory Name="External Data Files" DisplayName="Eksterne datafiler" Collapsed="false"/>
 <PropertyCategory Name="Patch" Collapsed="true"/>
 <PropertyCategory Name="2D Alignment Display Elevation" DisplayName="2D-linjer visningshøyde" Collapsed="false"/>
 <PropertyCategory Name="Basic" DisplayName="Grunnleggende" Collapsed="true"/>
 <PropertyOverride Name="id" Category="Basic"/>
 <PropertyOverride Name="RcType" Category="Basic"/>
 <PropertyOverride Name="TimeStamp" Category="Basic"/>
 <PropertyOverride Name="additionalName" Category="Basic"/>
 <PropertyOverride Name="lang" Category="Basic"/>
 <PropertyCategory Name="General" DisplayName="Generelt" Collapsed="false"/>
 <PropertyOverride Name="Variant" DisplayName="Variant" Category="General"/>
 <PropertyOverride Name="code" DisplayName="Kode" Category="General"/>
 <PropertyOverride Name="name" DisplayName="Objektnavn" Category="General"/>
 <PropertyOverride Name="Discipline" DisplayName="Fag" Category="General"/>
 <PropertyOverride Name="Stage" DisplayName="Fasekode XXxx-YYyy" Category="General"/>
 <PropertyOverride Name="description" DisplayName="Beskrivelse" Category="General"/>
 <PropertyCategory Name="Aligned object" DisplayName="Plassering langs linje" Collapsed="false"/>
 <PropertyOverride Name="Alignment" DisplayName="Egen linje" Category="Aligned object"/>
 <PropertyOverride Name="TargetAlignment" DisplayName="Avvikende / tilstøtende linje" Category="Aligned object"/>
 <PropertyOverride Name="ReferenceAlignment" DisplayName="Referanselinje" Category="Aligned object"/>
 <PropertyOverride Name="SideOfAlignment" DisplayName="Side av egen linje" Category="Aligned object"/>
 <PropertyOverride Name="dir" DisplayName="Retning" Category="Aligned object"/>
 <PropertyOverride Name="LineKilometerValue" DisplayName="Linjekilometer [km]" Category="Aligned object"/>
 <PropertyOverride Name="Mileage" DisplayName="Profil i egen linje, absolutt [m]" Category="Aligned object"/>
 <PropertyOverride Name="ReferenceMileage" DisplayName="Profil i referanselinje, absolutt [m]" Category="Aligned object"/>
 <PropertyOverride Name="DistanceAlong" DisplayName="Avstand fra start=0 langs egen linje [m]" Category="Aligned object"/>
 <PropertyOverride Name="LongitudinalOffset" DisplayName="Langsgående offset [m]" Category="Aligned object"/>
 <PropertyOverride Name="LateralOffset" DisplayName="Sideavsett fra egen linje [m]" Category="Aligned object"/>
 <PropertyOverride Name="VerticalOffset" DisplayName="Høyde over egen linje [m]" Category="Aligned object"/>
 <PropertyOverride Name="DistanceToAlignment" DisplayName="Avstand i 2D til egen linje [m]" Category="Aligned object"/>
 <PropertyCategory Name="Custom properties" DisplayName="Spesifikke egenskaper" Collapsed="false"/>
 <PropertyCategory Name="Model check" DisplayName="Modellsjekk" Collapsed="false"/>
 <PropertyCategory Name="Text Attributes" DisplayName="Tekstattributter" Collapsed="true"/>
 <PropertyCategory Name="Presentation" DisplayName="2D presentasjon" Collapsed="true"/>
 <PropertyOverride Name="SymbolMode" DisplayName="Symbolmodus" Category="Presentation"/>
 <PropertyOverride Name="DrawTail" DisplayName="Tegne halen" Category="Presentation"/>
 <PropertyOverride Name="DrawTailExtension" DisplayName="Forlenge halen" Category="Presentation"/>
 <PropertyOverride Name="SymbolFrame" DisplayName="Symbolramme" Category="Presentation"/>
 <PropertyOverride Name="MileageIncreasesTowardsLeft" DisplayName="Profilverdi stiger mot venstre" Category="Presentation"/>
 <PropertyCategory Name="CAD" DisplayName="CAD" Collapsed="true"/>
 <PropertyOverride Name="Color" DisplayName="Farge" Category="CAD"/>
 <PropertyOverride Name="Layer" DisplayName="Lag" Category="CAD"/>
 <PropertyOverride Name="Linetype" DisplayName="Linjetype" Category="CAD"/>
 <PropertyOverride Name="Lineweight" DisplayName="Linjevekt" Category="CAD"/>
 <PropertyOverride Name="GlobalWidth" DisplayName="Global linjebredde" Category="CAD"/>
 <PropertyCategory Name="3D" DisplayName="3D geometri" Collapsed="true"/>
 <PropertyOverride Name="geoCoord" DisplayName="Globale koordinater" Category="3D"/>
 <PropertyOverride Name="Layer3D" DisplayName="Resultat-lag" Category="3D"/>
 <PropertyCategory Name="2D Projection" DisplayName="2D projeksjon" Collapsed="true"/>
 <PropertyCategory Name="Local variables" DisplayName="Lokale variable" Collapsed="true"/>
 <PropertyOverride Name="Seq" DisplayName="Sekvensnummer" Category="Local variables"/>
 <PropertyOverride Name="Var0" Category="Local variables"/>
 <PropertyOverride Name="Var1" Category="Local variables"/>
 <PropertyOverride Name="Var2" Category="Local variables"/>
 <PropertyOverride Name="Var3" Category="Local variables"/>
 <PropertyOverride Name="Var4" Category="Local variables"/>
 <PropertyOverride Name="Var5" Category="Local variables"/>
 <PropertyOverride Name="Var6" Category="Local variables"/>
 <PropertyOverride Name="Var7" Category="Local variables"/>
 <PropertyOverride Name="Var8" Category="Local variables"/>
 <PropertyOverride Name="Var9" Category="Local variables"/>
 <PropertyCategory Name="Earthing" DisplayName="Jording" Collapsed="true"/>
 <PropertyCategory Name="Watch text" DisplayName="Watch tekst" Collapsed="true"/>
 <PropertyCategory Name="Relations" DisplayName="Relasjoner" Collapsed="true"/>
 <PropertyCategory Name="Attachment" DisplayName="Vedheng" Collapsed="true"/>
 <PropertyCategory Name="Sections" DisplayName="Seksjoner" Collapsed="true"/>
 <PropertyCategory Name="Formulas" DisplayName="Formler" Collapsed="true"/>
 <PropertyOverride Name="LuaExpressions" DisplayName="Lua uttrykk" Category="Formulas"/>
 <PropertyCategory Name="Misc" DisplayName="railML og annet" Collapsed="true"/>
 <PropertyOverride Name="model" DisplayName="railML modell" Category="Misc"/>
 <PropertyOverride Name="kind" DisplayName="railML avart" Category="Misc"/>
 <PropertyOverride Name="derailSide" DisplayName="Avsporingsside" Category="Misc"/>
 <PropertyCategory Name="Interlocking" DisplayName="Forrigling" Collapsed="true"/>
 <PropertyCategory Name="Alignment" Collapsed="true"/>
 <PropertyCategory Name="Main signal" DisplayName="railML hovedsignal" Collapsed="true"/>
 <PropertyCategory Name="Switch" DisplayName="railML sporveksel" Collapsed="true"/>
 <PropertyCategory Name="Connections" DisplayName="Forbindelser" Collapsed="true"/>
 <PropertyOverride Name="SwitchGeometry" DisplayName="Sporvekselgeometri" Category="Connections"/>
 <PropertyOverride Name="ConnectionCourse" DisplayName="Forbindelsesretning" Category="Connections"/>
 <PropertyOverride Name="ContinuingWithBegin" DisplayName="Påfølgende linje starter her" Category="Connections"/>
 <PropertyOverride Name="ExtendingFromEnd" DisplayName="Foregående linje ender her" Category="Connections"/>
 <LuaFunction Name="RC__CAD()" ReturnType="String" Description="Executes a CAD function whose name has been given as argument.
				\n(#TODO# Show complete list of CAD functions)
				\n
				\nExamples:
				\nRC__CAD().convertToPoint3D(x,y,z)
				\nRC__CAD().reversePoint3D(point)
				\nRC__CAD().createPolyline(pointTable)
				\nRC__CAD().createCircle(center, radius)
				\nRC__CAD().createLine(startPoint, endPoint)
				\nRC__CAD().createArc(startPoint, throughPoint, endPoint)
				\nRC__CAD().createArcAboutPoint(center, radius, StartAngle, EndAngle)
				\nRC__CAD().createHatch(blockName, entities)
				\nRC__CAD().getIntersectionPoints(entity1, entity2)
				\nRC__CAD().transformEntities(entities, transformationMatrix)
				\nRC__CAD().getBoundsFromEntities(entities)
				\nRC__CAD().getBoundsFromEntities(entities)
				\nRC__CAD().sortPointsAcendingByDistanceToPoint(point, pointTable)
				\nRC__CAD().sortPointsDecendingByDistanceToPoint(point, pointTable)
				\nRC__CAD().rotateEntityAboutZ(entity, angleDegrees, rotationCenter)
				\nRC__CAD().getPointAtDistanceAlongVector2D(startPoint, vector, distance)
				\nRC__CAD().createAttributeDefinition(tag, position, justify)
				\nRC__CAD().createMText(text, position, direction, textHeight, textStyleName, justify)
				\nRC__CAD().convertTransparency(transparencyValue)
				\nRC__CAD().createAndAddLayer(name, color, transparency, description)
				\nRC__CAD().createVLines(arrowPoint, anchorPoint, angle, length)
				
				\nRefer to the Lua source code in the DNA source folder on GitHub to know more about the above functions.
			">
  <Signature>function RC__CAD(String functionName)</Signature>
  <Formula>
			function RC__CAD(functionName)

				local cadFunctionTable = {}
				
				local _hatchPatternSlantedLines_ = "ANSI31"
				local _hatchPatternLosanges_ = "ANSI37"
				local _solidHatch_	= 0.03
				local _denseHatch_	= 1
				local _mediumHatch_	= 0.12
				local _lightHatch_	= 0.18
				local _sparseHatch_	= 0.36
				

				-- Converts any point to Point3D
				local function convertToPoint3D(point)
					return getPoint3D(point.X, point.Y, point.Z or 0)
				end
				cadFunctionTable["convertToPoint3D"] = convertToPoint3D
				
				
				
				-- Mirrors point3D about the origin
				local function reversePoint3D(point)
					return getPoint3D(-point.X, -point.Y, -point.Z)
				end
				cadFunctionTable["reversePoint3D"] = reversePoint3D
				
				
				
				-- Creates a Polyline given a table of points
				local function createPolyline(pointTable)
					local polyline = cadInterface.createCadEntity("DatabaseServices.Polyline", {})
					local index = 0
					for k, v in pairs(points) do
						polyline:AddVertexAt(index, cadInterface.createCadEntity("Geometry.Point2d", {v.X, v.Y}), 0, 0, 0)
						index = index + 1
					end
					polyline.Layer = "0"
					return polyline
				end
				cadFunctionTable["createPolyline"] = createPolyline
				
				
				
				-- Creates a circle given center and radius
				local function createCircle(center, radius)
					return cadInterface.createCadEntity("DatabaseServices.Circle", {cadInterface.createCadEntity("Geometry.Point3d", {center.X, center.Y, 0}), cadInterface.createCadEntity("Geometry.Vector3d", {0, 0, 1}), radius})
				end
				cadFunctionTable["createCircle"] = createCircle
				
				
				
				-- Creates a line given start and end points
				local function createLine(startPoint, endPoint)
					return cadInterface.createCadEntity("DatabaseServices.Line", {cadInterface.createCadEntity("Geometry.Point3d", {startPoint.X, startPoint.Y, endPoint.Z}), cadInterface.createCadEntity("Geometry.Point3d", {endPoint.X, endPoint.Y, endPoint.Z})})
				end
				cadFunctionTable["createLine"] = createLine
				
				
				
				-- Creates an arc using three points. Arcs must be drawn clockwise.
				local function createArc(startPoint, throughPoint, endPoint)
					local carc = nil
					local startPoint3d = cadInterface.createCadEntity("Geometry.Point3d", {startPoint.X, startPoint.Y, 0})
					local throughPoint3d = cadInterface.createCadEntity("Geometry.Point3d", {throughPoint.X, throughPoint.Y, 0})
					local endPoint3d = cadInterface.createCadEntity("Geometry.Point3d", {endPoint.X, endPoint.Y, 0})
					
					local someValue = startPoint3d:GetVectorTo(throughPoint3d):CrossProduct(throughPoint3d:GetVectorTo(endPoint3d)).Z
					
					--write("someValue: "..someValue.."\n")
					
					if startPoint3d:GetVectorTo(throughPoint3d):CrossProduct(throughPoint3d:GetVectorTo(endPoint3d)).Z > 0.0 then
						carc = cadInterface.createCadEntity("Geometry.CircularArc3d", {endPoint3d, throughPoint3d, startPoint3d})
						--write("Bolle\n")
					else
						carc = cadInterface.createCadEntity("Geometry.CircularArc3d", {startPoint3d, throughPoint3d, endPoint3d})
						--write("Brus\n")
					end
					
					local angle = carc.ReferenceVector:AngleOnPlane(cadInterface.createCadEntity("Geometry.Plane", {carc.Center, carc.Normal}))
					
					local arc = cadInterface.createCadEntity("DatabaseServices.Arc", {carc.Center, carc.Normal ,carc.Radius, carc.StartAngle + angle, carc.EndAngle + angle})
					
					return arc
				end
				cadFunctionTable["createArc"] = createArc
				
				
				
				-- Creates an arc in the plane 
				local function createArcAboutPoint(center, radius, StartAngle, EndAngle)
					local centerPoint = cadInterface.createCadEntity("Geometry.Point3d", {center.X, center.Y, 0})
					return cadInterface.createCadEntity("DatabaseServices.Arc", {centerPoint, radius, StartAngle, EndAngle})
				end
				cadFunctionTable["createArcAboutPoint"] = createArcAboutPoint
				
				
				
				-- Creates a hatch using the given entities as outermost loop and adds it to the block with the given name
				local function createHatch(blockName, entities)
					local hatch =  cadInterface.createCadEntity("DatabaseServices.Hatch", {})
					
					--hatch.Origin = createCadEntity("Geometry.Point3d", {origin.X, origin.Y, origin.Z})
					cadInterface.addEntitiesToBlock(blockName, {hatch})
					cadInterface.setEntityPropertiesWithTransaction(hatch, {["Associative"] = true})
					local ids = table.select(entities, function (x) return x.Id end)
					
					local objectIdCollection =  cadInterface.createCadEntity("DatabaseServices.ObjectIdCollection", {ids})
					
					cadInterface.runEntityMethodsWithTransaction(hatch, {["SetHatchPattern"] = {cadInterface.createCadEntity("DatabaseServices.HatchPatternType", {"PreDefined"}), _hatchPatternSlantedLines_}, ["AppendLoop"] = {cadInterface.createCadEntity("DatabaseServices.HatchLoopTypes", {"Outermost"}), objectIdCollection}})
					
					cadInterface.setEntityPropertiesWithTransaction(hatch, {["PatternSpace"] = _denseHatch_})
					
					local explodedEntities = cadInterface.explodeEntity(hatch)
				
					cadInterface.runEntityMethodsWithTransaction(hatch, {["Erase"] = {}})
					
					cadInterface.addEntitiesToBlock(blockName, explodedEntities)
				end
				cadFunctionTable["createHatch"] = createHatch
				
				
				
				-- Returns the intersection points between two entities
				local function getIntersectionPoints(entity1, entity2)
					local point3dCollection =  cadInterface.createCadEntity("Geometry.Point3dCollection", {})
					if type(entity2) ~= "table" then
						entity1:IntersectWith(entity2, cadInterface.createCadEntity("DatabaseServices.Intersect", {"OnBothOperands"}), point3dCollection, createObjectUsingReflection("System.IntPtr", {}):getTableValue(), createObjectUsingReflection("System.IntPtr", {}):getTableValue())
					else
						for k, entity in pairs(entity2) do
							entity1:IntersectWith(entity, cadInterface.createCadEntity("DatabaseServices.Intersect", {"OnBothOperands"}), point3dCollection, createObjectUsingReflection("System.IntPtr", {}):getTableValue(), createObjectUsingReflection("System.IntPtr", {}):getTableValue())
						end
					end
					local pointList = table.select(cadInterface.getObjectsFromCadCollection(point3dCollection), function (x) return getPoint3D(x.X, x.Y, x.Z) end)
					return pointList
				end
				cadFunctionTable["getIntersectionPoints"] = getIntersectionPoints
				
				
				
				-- Transform entities by a matrix
				local function transformEntities(entities, transformationMatrix)
					for k, entity in pairs(entities) do 
						entity:TransformBy(transformationMatrix)
					end
				end
				cadFunctionTable["transformEntities"] = transformEntities
				
				
				
				-- Get the bounds from a table of entities. Returned as table with keys "MinPoint" and "MaxPoint".
				local function getBoundsFromEntities(entities)
					local minY = math.huge
					local maxY = -math.huge
					local minX = math.huge
					local maxX = -math.huge
				
					for k, entity in pairs(entities) do
						local bounds = entity.Bounds
						minX = math.min(bounds.MinPoint.X, minX)
						minY = math.min(bounds.MinPoint.Y, minY)
						maxX = math.max(bounds.MaxPoint.X, maxX)
						maxY = math.max(bounds.MaxPoint.Y, maxY)
					end
				
					return {["MinPoint"] = getPoint3D(minX, minY), ["MaxPoint"] = getPoint3D(maxX, maxY)}
				end
				cadFunctionTable["getBoundsFromEntities"] = getBoundsFromEntities
				
				
				
				-- Get the distance between two points
				local function getDistanceBetweenPoints(point1, point2)
					return math.sqrt(((point2.X - point1.X)^2) + ((point2.Y - point1.Y)^2) + ((point2.Z - point1.Z)^2))
				end
				cadFunctionTable["getDistanceBetweenPoints"] = getDistanceBetweenPoints
				
				-- Sorts points acending by distance to a point
				local function sortPointsAcendingByDistanceToPoint(point, points)
					local pointTable = table.select(points, function (x) return {["distance"] = getDistanceBetweenPoints(x, point), ["point"] = x } end)
					table.sort(pointTable, function (x, y) return x.distance &lt; y.distance end)
					return pointTable:select(function (x) return x.point end)
				end
				cadFunctionTable["sortPointsAcendingByDistanceToPoint"] = sortPointsAcendingByDistanceToPoint
				
				
				
				-- Sorts points decending by distance to a point
				local function sortPointsDecendingByDistanceToPoint(point, points)
					local pointTable = table.select(points, function (x) return {["distance"] = getDistanceBetweenPoints(x, point), ["point"] = x } end)
					table.sort(pointTable, function (x, y) return x.distance > y.distance end)
					return pointTable:select(function (x) return x.point end)
				end
				cadFunctionTable["sortPointsDecendingByDistanceToPoint"] = sortPointsDecendingByDistanceToPoint
				
				
				
				-- Rotates an entity with an angle gicen in degrees and a rotation center
				local function rotateEntityAboutZ(entity, angleDegrees, rotationCenter)
					-- convert to Radians
					local angle = math.rad(angleDegrees)
					
					local rotationMatrix = runStaticMethodUsingReflection("Autodesk.AutoCAD.Geometry.Matrix3d", "Rotation", {angle, cadInterface.createCadEntity("Geometry.Vector3d", {0, 0, 1}), cadInterface.createCadEntity("Geometry.Point3d", {rotationCenter.X, rotationCenter.Y, rotationCenter.Z})})
				
					entity:TransformBy(rotationMatrix:getTableValue())
				end
				cadFunctionTable["rotateEntityAboutZ"] = rotateEntityAboutZ
				
				
				
				-- Get point at a distance along a 2D vector
				local function getPointAtDistanceAlongVector2D(startPoint, vector, distance)
					local unitVector = getPoint3D(vector.X/math.sqrt(vector.X^2 + vector.Y^2), vector.Y/math.sqrt(vector.X^2 + vector.Y^2))  
					return getPoint3D(startPoint.X + (unitVector.X * distance), startPoint.Y + (unitVector.Y * distance))
				end
				cadFunctionTable["getPointAtDistanceAlongVector2D"] = getPointAtDistanceAlongVector2D
				
				
				
				-- Creates an attributeDefinition
				local function createAttributeDefinition(tag, position, justify)
					local attributeDefinition = cadInterface.createCadEntity("DatabaseServices.AttributeDefinition", {})
					local attributePosition = cadInterface.createCadEntity("Geometry.Point3d", {position.X, position.Y, position.Z})
					
					attributeDefinition.Height = 2.5
					attributeDefinition.Tag = tag
					attributeDefinition.TextString = tag
					attributeDefinition.Justify = cadInterface.createCadEntity("DatabaseServices.AttachmentPoint", {justify or "MiddleCenter"})
				--	attributeDefinition.IsMTextAttributeDefinition = true
				--	attributeDefinition.LockPositionInBlock = false
					attributeDefinition.Position = attributePosition
					attributeDefinition.AlignmentPoint = attributePosition
					
					return attributeDefinition
				end
				cadFunctionTable["createAttributeDefinition"] = createAttributeDefinition
				
				
				
				local function createMText(text, position, direction, textHeight, textStyleName, justify)
					textHeight = textHeight or 1
					justify = justify or "MiddleLeft"
					textStyleName = textStyleName or "RC-STANDARD"
						
					local mText = cadInterface.createCadEntity("DatabaseServices.MText", {})
					mText.Contents = text
					mText.Location = cadInterface.createCadEntity("Geometry.Point3d", {position.X, position.Y, position.Z})
					mText.TextHeight = textHeight
					mText.Attachment = cadInterface.createCadEntity("DatabaseServices.AttachmentPoint", {justify})
					mText.TextStyleId = cadInterface.getTextStyleId(textStyleName)
					mText.Direction =  cadInterface.createCadEntity("Geometry.Vector3d", {direction.X, direction.Y, 0})
					return mText
				end
				cadFunctionTable["createMText"] = createMText
				
				
				
				-- Converts transparency
				local function convertTransparency(transparencyValue)
					return 255 * (100 - transparencyValue) / 100
				end
				cadFunctionTable["convertTransparency"] = convertTransparency
				
				
				
				-- Creates and adds a layer to the drawing
				local function createAndAddLayer(name, color, transparency, description)
					
					local layer =  cadInterface.createCadEntity("DatabaseServices.LayerTableRecord", {})
					layer.Name = name or getGUID()
					cadInterface.addLayers({layer})
					cadInterface.setEntityPropertiesWithTransaction(layer, {["Transparency"] = cadInterface.createCadEntity("Colors.Transparency", {convertTransparency(transparency or 0)}), ["Description"] = description or "", ["Color"] = cadInterface.getCadColor(color or "0")})
					
					return layer
				end
				cadFunctionTable["createAndAddLayer"] = createAndAddLayer
				
				
				
				-- Creates two lines in V Shape meeting at arrowPoint pointing away from anchorPoint
				local function createVLines(arrowPoint, anchorPoint, angle, length)
				
					local anchorVec = getPoint3D(anchorPoint.X - arrowPoint.X, anchorPoint.Y - arrowPoint.Y)
					local lineEndPoint = getPointAtDistanceAlongVector2D(arrowPoint, anchorVec, length)
				
					local line1 = createLine(arrowPoint, lineEndPoint)
					local line2 = createLine(arrowPoint, lineEndPoint)	
				
					rotateEntityAboutZ(line1, angle, arrowPoint)
					rotateEntityAboutZ(line2, -angle, arrowPoint)
					
					return line1, line2
				end
				cadFunctionTable["createVLines"] = createVLines
				
				return cadFunctionTable
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__createBlockBalloon()" ReturnType="String" Description="Creates a balloon (a.k.a. 'goose beak') 2D symbol and returns its block name. If the block already exists, nothing is added and the block name is returned.
				\n
				\nThe caller must provide the content of the balloon, a string that will be shown inside the ballon.
				\nTo define the symbol's appearance during the object insertion phase: after insertion, call with argument 'nil'.
				\nTo define the symbol's appearance after insertion, call with argument 'railwayObject'.
			">
  <Signature>function RC__createBlockBalloon(ballonObject)</Signature>
  <Formula>
			function RC__createBlockBalloon(balloonObject)
				
				basicCadFunctions = RC__CAD()
				
				local function getTextFrame(textHeight, textWidth)
					local ratio = textHeight/textWidth
				
					local circleRadius = textHeight*1.164 -- Original circle has radius 1.455 and text height is 1.25 1.455/1.25 = 1.164
					-- if ratio is greater than 0.5 create a circle
					if ratio > 0.5 then
						local circle = basicCadFunctions.createCircle(getPoint3D(0,0,0), circleRadius)  
						return { circle }
					end 
					
					-- if not create two arcs with lines between them
					local minY = -circleRadius
					local maxY =  circleRadius
					local leftArcStartX = -(textWidth/2) + circleRadius/1.5
					local leftArc = basicCadFunctions.createArc(getPoint3D(leftArcStartX, minY), getPoint3D(leftArcStartX - circleRadius, minY + circleRadius), getPoint3D(leftArcStartX, maxY))
					local rightArcStartX = (textWidth/2) - circleRadius/1.5
					local rightArc = basicCadFunctions.createArc(getPoint3D(rightArcStartX, minY), getPoint3D(rightArcStartX + circleRadius, minY + circleRadius), getPoint3D(rightArcStartX, maxY))
					local topLine = basicCadFunctions.createLine(getPoint3D(leftArcStartX, maxY), getPoint3D(rightArcStartX, maxY))
					local bottomLine = basicCadFunctions.createLine(getPoint3D(leftArcStartX, minY), getPoint3D(rightArcStartX, minY))
					return {leftArc, topLine, rightArc, bottomLine}
				end
				
				local function createTextWithFrame(text)
					local textHeight = 5
					-- The width of "0123456789" / 10 is 3.84 so avarage width of a number char is 0.96 when text height is 3.84.
					local width = utf8.len(tostring(text)) * 3.84
					local attDef = basicCadFunctions.createAttributeDefinition("BalloonContent", getPoint3D(0,0), "MiddleCenter")
					attDef.Height = textHeight
					attDef.TextString = "1"
					attDef.Color = "ByBlock"
					attDef.Transparency = cadInterface.createCadEntity("Colors.Transparency", {cadInterface.createCadEntity("Colors.TransparencyMethod", {"ByBlock"})})
					local entities = getTextFrame(textHeight, width)
					for k, entity in pairs(entities) do
						entity.Color = "ByBlock"
						entity.Transparency = cadInterface.createCadEntity("Colors.Transparency", {cadInterface.createCadEntity("Colors.TransparencyMethod", {"ByBlock"})})
					end
					table.insert(entities, attDef)
					local block = cadInterface.createBlock("NO-BN-RT-JBTFE_BLN-BALLONG-"..#tostring(text), entities, true)
				end
				
				-- This function should be readonly for use in all Lua contexts.
				local function getWidthOfBalloon(text, textHeight)
					-- The width of "0123456789" / 10 is 3.84 so average width of a number char is 0.96 when text height is 5.
					local width = utf8.len(tostring(text)) * 3.84
					
					local ratio = textHeight/width
				
					local circleRadius = textHeight*1.164 -- Original circle has radius 1.455 and text height is 1.25 1.455/1.25 = 1.164
					-- if ratio is greater than 0.5 create a circle
					if ratio > 0.5 then
						return circleRadius * 2
					end 
					
					local leftArcStartX = -(width/2) + circleRadius/1.5
					local rightArcStartX = (width/2) - circleRadius/1.5
					
					local leftX = leftArcStartX - circleRadius
					local rightX = rightArcStartX + circleRadius
					
					return (rightX - leftX)
				end


				local blockName = "NO-BN-RT-JBTFE_BLN-BALLONG-"..(balloonObject and #tostring(balloonObject.Content) or 1)
				if cadInterface.blockExist(blockName) then
					return blockName
				end
				createTextWithFrame((balloonObject and balloonObject.Content or "X"))
				return blockName
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__COPYRIGHT_STATEMENT()" ReturnType="String" Description="Returns a copyright statement concerning the current document's DNA.">
  <Signature>string RC__COPYRIGHT_STATEMENT()</Signature>
  <Formula>
			function RC__COPYRIGHT_STATEMENT()
				return 
					"============================================\n"..
					"  Copyright (c) 2015-2024 Railcomplete AS, Norway, NO916118503\n"..
					"  The NO-BN DNA is MIT licensed, publicly available on GitHub; see\n"..
					"  https://github.com/Railcomplete-AS/RailCOMPLETE-DNA-NO-BN\n"..
					"============================================\n"
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__DNA_VERSION()" ReturnType="String" Description="Returns the current document's DNAs unique version string. Also returns an info message contaning its alias name.">
  <Signature>string RC__DNA_VERSION()</Signature>
  <Formula>
			function RC__DNA_VERSION()
				--Deprecated code: return DocumentData.DnaIri:match("^(.-);.-$") .."-".. DocumentData.DnaIri:match(".+;(.+)$")
				return DocumentData.DnaIri,_info(DocumentData.DnaName)
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__LUA_VERSION()" ReturnType="String" Description="Returns the current RailCOMPLETE installation's Lua version.">
  <Signature>string RC__LUA_VERSION()</Signature>
  <Formula>
			function RC__LUA_VERSION()
				return _VERSION --A Lua environment constant.
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__toInt()" ReturnType="Int" Description="Returns an integer from an integer or floating-point input.">
  <Signature>int RC__toInt(double x)</Signature>
  <Formula>function RC__toInt(x) return string.format("%.0f",x) end</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__TextAttributePosition()" ReturnType="Vector2D" HideFromUser="false" Description="Returns a World Coordinate System offset vector in the current drawing scale for a text attribute. Input coordinates provide the acsX = lateral offset (positive to the right side of the object's alignment) and the acsY = longitudinal offset (positive in the direction of increasing mileages), both stated for drawing scale 1:1 (1:1000).">
  <Signature>{Double ACS.X,Double ACS.Y} RC__TextAttributePosition(Double LateralOffset = 0, Double LongitudinalOffset = 0)</Signature>
  <Formula>
			function RC__TextAttributePosition(LateralOffset, LongitudinalOffset)
				local scale = DocumentData.Document.Database.Cannoscale.Scale --CAD system's annotative scale
				LateralOffset = (LateralOffset or 0)/scale
				LongitudinalOffset = (LongitudinalOffset or 0)/scale
				return RC__getWcsVectorFromAcsVector((RightSided and 1 or -1) * LateralOffset, LongitudinalOffset)
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__TextAttributeRotation()" ReturnType="String" Description="Returns the rotation of the text element in the world coordinate system. The input argument specifies the angle between the tangent direction of the object axis and the axis of the text. The default value is -90 decimal degrees.">
  <Signature>DecimalDegrees RC__TextAttributeRotation(Double RelativeAngle = -90)</Signature>
  <Formula>
			function RC__TextAttributeRotation(RelativeAngle)
				return math.deg(AlignmentTangent) + (RelativeAngle or -90.0)
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getAngleFromDir()" ReturnType="Double" Description="Returns the angle in Decimal Degrees corresponding to the given direction [up | down | both | none | unknown]. 'Direction' and 'Rightsided' are optional arguments.">
  <Signature>Double RC__getAngleFromDir([LaxDirection Direction = InheritedDirection [, Boolean RightSided = false]])</Signature>
  <Formula>
			function RC__getAngleFromDir(d,rs)
				if d == nil then
					d = dir
					rs = RightSided
				elseif rs == nil then
					rs = false
				end
				if dir == 'up' then return 0
				elseif dir == 'down' then return 180
				elseif dir == 'both' then return rs and -90 or 90
				elseif dir == 'none' then return rs and 90 or -90 
				elseif dir == 'unknown' then return 45 
				else return 45, _info("Bad direction '"..d.."'.")
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getMileageFromRelatedObject()" ReturnType="Double" Description="Returns the mileage for the projection of the related object onto the calling object's own alignment. Source object is an optional argument.">
  <Signature>Double RC__getMileageFromRelatedObject(String RelationName, Reference SourceObject = this)</Signature>
  <Formula>
			function RC__getMileageFromRelatedObject(RelationName,Source)
				Source = Source or this
				if RelationName == nil then 
					return getPropertyValue("Mileage"),_warning, _info("Missing relation name in function call.")
				end
				local r,n = getRelatedObjects(RelationName,Source)
				if n == 0 then 
					return getPropertyValue("Mileage"), _info("Object has no visible relation of type '"..RelationName.."'.")
				elseif n == 1 then 
					return getAlignmentInfo(Source.Alignment.id, r[0].geocoord.X, r[0].geoCoord.Y).Mileage,
						_info("Mileage deduced from object '"..RC__identify(r[0]).."' related by '"..RelationName.."'.")
				else
					return getAlignmentInfo(Source.Alignment.id, r[0].geocoord.X, r[0].geoCoord.Y).Mileage,	_info("Mileage deduced from object '"..RC__identify(r[0]).."' related by '"..RelationName.."' (Note: more relations exist).")
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getLateralOffsetFromRelatedObject()" ReturnType="Double" Description="Returns the distance to alignment for the projection of the related object onto the calling object's own alignment. Source object is an optional argument.">
  <Signature>Double RC__getLateralOffsetFromRelatedObject(String RelationName, Reference SourceObject = this)</Signature>
  <Formula>
			function RC__getLateralOffsetFromRelatedObject(RelationName,Source)
				local r,n
				Source = Source or this
				if RelationName == nil then 
					return getPropertyValue("LateralOffset"),_warning, _info("Missing relation name in function call.")
				end
				r,n = getRelatedObjects(RelationName,Source)
				if n == 0 then 
					return getPropertyValue("LateralOffset"), _info("Object has no visible relation of type '"..RelationName.."'.")
				elseif n == 1 then 
					return getAlignmentInfo(Source.Alignment.id, r[0].geocoord.X, r[0].geoCoord.Y).DistanceToAlignment,
						_info("LateralOffset deduced from object '"..RC__identify(r[0]).."' related by '"..RelationName.."'.")
				else
					return getAlignmentInfo(Source.Alignment.id, r[0].geocoord.X, r[0].geoCoord.Y).DistanceToAlignment, _info("LateralOffset deduced from object '"..RC__identify(r[0]).."' related by '"..RelationName.."' (Note: more relations exist).")
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getVerticalOffsetFromRelatedObject()" ReturnType="Double" Description="Returns the relative elevation above for the projection of the related object onto the calling object's own alignment. Source object is an optional argument.">
  <Signature>Double RC__getVerticalOffsetFromRelatedObject(String RelationName, Reference SourceObject = this)</Signature>
  <Formula>
			function RC__getVerticalOffsetFromRelatedObject(RelationName,Source)
				local r,n
				Source = Source or this
				if RelationName == nil then 
					return getPropertyValue("VerticalOffset"),_warning, _info("Missing relation name in function call.")
				end
				r,n = getRelatedObjects(RelationName,Source)
				if n == 0 then 
					return getPropertyValue("VerticalOffset"), _info("Object has no visible relation of type '"..RelationName.."'.")
				elseif n == 1 then 
					return r[0].geoCoord.Z - getAlignmentInfo(Source.Alignment.id, r[0].geocoord.X, r[0].geoCoord.Y).Elevation,
						_info("VerticalOffset deduced from object '"..RC__identify(r[0]).."' related by '"..RelationName.."'.")
				else
					return r[0].geoCoord.Z - getAlignmentInfo(Source.Alignment.id, r[0].geocoord.X, r[0].geoCoord.Y).Elevation, _info("VerticalOffset deduced from object '"..RC__identify(r[0]).."' related by '"..RelationName.."' (Note: more relations exist).")
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getAngularOffsetFromRelatedObject()" ReturnType="Double" Description="Returns the angular offset for the projection of the related object onto the calling object's own alignment. Source object is an optional argument.">
  <Signature>Double RC__getAngularOffsetFromRelatedObject(String RelationName, Reference SourceObject = this)</Signature>
  <Formula>
			function RC__getAngularOffsetFromRelatedObject(RelationName,Source)
				local r,n
				Source = Source or this
				if RelationName == nil then 
					return getPropertyValue("AngularOffset"),_warning, _info("Missing relation name in function call.")
				end
				r,n = getRelatedObjects(RelationName,Source)
				if n == 0 then 
					return getPropertyValue("AngularOffset"), _info("Object has no visible relation of type '"..RelationName.."'.")
				elseif n == 1 then
					return r[0].AngularOffset + (r[0].AlignmentTangent - Source.AlignmentTangent) * 180.0/math.pi,
						_info("AngularOffset deduced from object '"..RC__identify(r[0]).."' related by '"..RelationName.."'.")
				else
					return r[0].AngularOffset + (r[0].AlignmentTangent - Source.AlignmentTangent) * 180.0/math.pi, _info("AngularOffset deduced from object '"..RC__identify(r[0]).."' related by '"..RelationName.."' (Note: more relations exist).")
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getDirFromRelatedObject()" ReturnType="Double" Description="Returns the direction (Dir) from related object. Source object is an optional argument.">
  <Signature>Double RC__getDirFromRelatedObject(String RelationName, Reference SourceObject = this)</Signature>
  <Formula>
			function RC__getDirFromRelatedObject(RelationName,Source)
				local r,n
				Source = Source or this
				if RelationName == nil then 
					return getPropertyValue("Dir"),_warning, _info("Missing relation name in function call.")
				end
				r,n = getRelatedObjects(RelationName,Source)
				if n == 0 then 
					return getPropertyValue("Dir"), _info("Object has no visible relation of type '"..RelationName.."'.")
				elseif n == 1 then
					return r[0].dir, _info("Direction (Dir) deduced from object '"..RC__identify(r[0]).."' related by '"..RelationName.."'.")
				else
					return r[0].dir, _info("Direction (Dir) deduced from object '"..RC__identify(r[0]).."' related by '"..RelationName.."' (Note: more relations exist).")
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getWcsVectorFromAcsVector()" ReturnType="String" Description="Converts an Alignment Coordinate System (ACS) 2D vector {acsX,acsY} = {LateralOffset,LongitudinalOffset} into a World Coordinate System (WCS) 2D vector. An angle in radians can be given instead of using the default, the object's own alignment's tangent direction.">
  <Signature>{Double,Double} RC__getWcsVectorFromAcsVector(acsX, acsY, AlongAxisWcsAngleInRadians = this.AlignmentTangent)</Signature>
  <Formula>
			function RC__getWcsVectorFromAcsVector(acsX,acsY,AlongAxisWcsAngleInRadians)
				--WCS = World Coordinate System, the CAD system's underlying absolute Cartesian coordinate system (XY-plane).
				--ACS = "Alignment Coordinate System", a basic RailCOMPLETE concept:
				--	Argument acsX = Lateral offset to the right, perpendicular to the object's alignment axis.
				--	Argument acsY = Along offset in the direction of increasing distAlong, along the object's alignment axis.
				--	Optional argument AlongAxisWcsAngleInRadians = angle in Decimal Degrees between WCS East (X-axis) and the alignment's tangent direction.
				local angle = AlongAxisWcsAngleInRadians or AlignmentTangent
				return  acsX*math.sin(angle) + acsY*math.cos(angle), -acsX*math.cos(angle) + acsY*math.sin(angle)
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__identify()" ReturnType="String" Description="Returns the object's name if non-empty, or its code if non-empty, otherwise returns its ID. Addresses the calling object if no object reference is given.">
  <Signature>String RC__identify(Reference obj = this)</Signature>
  <Formula>
			function RC__identify(obj)
				obj = obj or this
				if type(obj) ~= "userdata" then
					return "ERROR: RC__identify() called with a bad argument type '"..type(obj).."', an objRef was expected."
				end
				local objName = obj:getPropertyValue("name")
				local objCode = obj:getPropertyValue("code")
				local objId = obj:getPropertyValue("id")
				if objName ~= nil and objName ~= "" then return objName
				elseif objCode ~= nil and objCode  ~= "" then return objCode
				else return tostring(objId)
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__isNan()" ReturnType="Boolean" Description="Returns true if input value is NaN (not a number), otherwise returns false.">
  <Signature>Boolean RC__isNan(Double value)</Signature>
  <Formula>function RC__isNan(x) return x ~= x end</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__sub()" ReturnType="String" Description="Returns a substring of the input string, starting with its i-th multibyte letter and ending with its j-th multibyte letter (the built-in Lua method sub() will treat a string just as an array of individual bytes). By default, i=1 and j=i.">
  <Signature>String RC__sub(String s [,Int i [,Int j]])</Signature>
  <Formula>
			function RC__sub(s,i,j)
				return s, _info("*** Function RC__sub(String s [,Int i [,Int j]]) has not been implemented yet"),_warning
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="RC__round()" ReturnType="String" Description="Rounds floating point input x to p [-6..6] decimal places. Default precision is 0 decimals.">
  <Signature>Double RC__round(Double x, Int p = 0)</Signature>
  <Formula>
			function RC__round(x,p) 
				if math.abs(x) == math.huge then return x end --plus/minus Inf
				if p == nil then p = 0 end
				p = math.floor(p)
				if p &lt; -6 or p &gt; 6 then
					return "Precision ["..p.."] must be from -6 to 6, cannot format value ["..x.."]",_warning
				else
					x = string.format("%."..p.."f",x)
				end
				return tonumber(x)
			end
       </Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getNearestSnapDistance()" ReturnType="String" Description="Returns nearest multiple of step size. Default step size is 3. E.g., '4.51' => '6' and '-7.49' => '-6'.">
  <Signature>Double RC__getNearestSnapDistance(Double x, Double stepSize = 3])</Signature>
  <Formula>
			function RC__getNearestSnapDistance(x,stepSize) 
				if stepSize == nil then 
					if x == nil then
						return RightSided and 1e-3 or -1e-3,_warning
					else
						stepSize = 3
					end
				end
				stepSize = math.floor(math.abs(stepSize))
				if stepSize == 0 then
					return RightSided and 1e-3 or -1e-3
				else
					local y = stepSize * math.floor((x / stepSize) + 0.5)
					return y == 0 and (RightSided and 1e-3 or -1e-3) or y
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__isMemberOf()" ReturnType="Boolean" Description="Returns true if table/collection/dictionary contains item. The item may be part of a numbered Lua sequence {2,3,5,7,11} or a value in a key/value pair {x=1,y=1,z=2,t=3,u=5}. Advice: When looking for objects, look for its id property item.id (a text string) rather than an object reference, as objects may be relocated in memory for each Lua execution.">
  <Signature>Boolean RC__isMemberOf(Table t, Item item)</Signature>
  <Formula>
			function RC__isMemberOf(t,item)
				if type(t) == "table" then
					-- A genuine Lua table, convert it to RailCOMPLETE/C# collection object (deleting the keys from key/value pairs):
					t = getCollectionFromTable(t)
				end
				--Collections respond correctly to the '.Count' attribute:
				for i = 0, t.Count-1 do
					if type(item) == "string" or type(item) == "number" then
						if t[i] == item then
							return true
						end
					elseif item.id then
						if t[i].id == item.id then
							return true
						end
					end
				end
				return false
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__SortedNumberCollection()" ReturnType="Table" Description="Returns a sorted table (indexed 1,2,...).">
  <Signature>table RC__SortedNumberCollection(table t)</Signature>
  <Formula>
			function RC__SortedNumberCollection(t)
				local u,v,n,i,j,k,lo
				if t == nil then return nil,_error end
				if type(t) ~= type({}) then return '***',_warning end
				t = getCollectionFromTable(t)
				--Insertion sort, ok for small tables. TODO: Implement QuickSort for larger tables.
				u = {}
				v = {}
				n = 0
				while t[n+1] do
					n = n + 1
					table.insert(u,t[n])
				end		
				for i = 1, n do
					lo = math.huge
					for j = 1, n-i+1 do
						if u[j] &lt; lo then 
							lo = u[j]
							k = j 
						end
					end
					table.insert(v,table.remove(u,k)) --insert smallest number from u into v
				end
				return v
			end 
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getDistance2D()" ReturnType="Double" Description="Returns the Euclidian distance in the XY plane between inputs p1 and p2 (point objects or Point3D), each being geoCoord or table {['X']=x,['Y']=y}. p2 is by default the calling object. Z's are ignored.">
  <Signature>Double RC__getDistance2D(Point p1, Point p2 = this)</Signature>
  <Formula>
			function RC__getDistance2D(p1,p2) 
				local x1,x2,y1,y2
				if p1 == nil then 
					return 0,_warning --bad args
				elseif p2 == nil then
					p2 = this
				end
				if p1.geoCoord then 
					--Ordinary RailwayPlacedObject:
					x1 = p1.geoCoord.X
					y1 = p1.geoCoord.Y
				elseif p1.X then 
					--Point3D:
					x1 = p1.X
					y1 = p1.Y
				else
					return 0,_warning, _info("First point has no X coordinate.")
				end
				if p2.geoCoord then 
					--Ordinary RailwayPlacedObject:
					x2 = p2.geoCoord.X
					y2 = p2.geoCoord.Y
				elseif p2.X then
					--Point3D:
					x2 = p2.X
					y2 = p2.Y
				else
					return 0,_warning, _info("Second point has no X coordinate.")
				end
				return math.sqrt((x2-x1)^2 + (y2-y1)^2)
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getDistance3D()" ReturnType="Double" Description="Returns the Euclidian distance in XYZ space between inputs p1 and p2 (point objects or Point3D), each being geoCoord or table {['X']=x,['Y']=y,['Z']=z}. p2 is by default the calling object. Z's are 0 if missing.">
  <Signature>Double RC__getDistance3D(Point p1, Point p2 = this)</Signature>
  <Formula>
			function RC__getDistance3D(p1,p2) 
				local x1,x2,y1,y2,z1,z2
				-- This code will work both for railML geoCoord entities and for tables using "X", "Y" and "Z" as indices. 
				if p1 == nil then
					return 0,_warning --bad args
				elseif p2 == nil then
					p2 = this
				end
				if p1.geoCoord then 
					x1 = p1.geoCoord.X
					y1 = p1.geoCoord.Y
					z1 = p1.geoCoord.Z
				elseif p1.X then 
					x1 = p1.X
					y1 = p1.Y
					z1 = p1.Z == nil and 0 or p1.Z
				else
					return 0,_warning, _info("First point has no X coordinate.")
				end
				if p2.geoCoord then 
					x2 = p2.geoCoord.X
					y2 = p2.geoCoord.Y
					z2 = p2.geoCoord.Z
				elseif p2.X then 
					x2 = p2.X
					y2 = p2.Y
					z2 = p2.Z == nil and 0 or p2.Z
				else
					return 0,_warning, _info("Second point has no X coordinate.")
				end
				return math.sqrt((x2-x1)^2 + (y2-y1)^2 + (z2-z1)^2)
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getAreasOfVariant()" ReturnType="Collection of RcArea" Description="Returns a count and a collection of visible areas of the given variant, enclosing the object.">
  <Signature>{Int, Collection of RcArea} RC__getAreasOfVariant(String areaVariantName, String guidString = this.Id)</Signature>
  <Formula>
			function RC__getAreasOfVariant(areaVariantName, guidString)
				local obj = guidString and getObjectFromId(guidString) or this
				local areas = obj.RcArea:filter(function (x) return x:isVisible() and x.Variant:match(areaVariantName) end)
				return areas.Count,areas
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="RC__getOcpStationReference()" ReturnType="ObjRef" Description="Returns an object reference for the current Operation Control Point (OCP) area, or nil if not contained in any (visible) OCP area.">
  <Signature>ObjRef RC__getOcpStationReference()</Signature>
  <Formula>
			function RC__getOcpStationReference()
				local OcpAreas = RcArea:filter(function (x) return x:isVisible() and x.Variant:lower():match("ocp") end)
				return getCollectionLength(OcpAreas) == 0 and "" or OcpAreas[0] --a GUID string.
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="RC__scale()" ReturnType="{Double,Double}" HideFromUser="false" Description="Scales a 2D vector intended for 1:1 drawing scale into the corresponding vector for the current drawing scale.">
  <Signature>{Double,Double} RC__scale(Double LateralOffset = 0, Double LongitudinalOffset = 0)</Signature>
  <Formula>
			function RC__scale( LateralOffset, LongitudinalOffset )
				local scale = DocumentData.Document.Database.Cannoscale.Scale --CAD system's annotative scale
				LateralOffset = (LateralOffset or 0)/scale
				LongitudinalOffset = (LongitudinalOffset or 0)/scale
				local wcsX,wcsY = RC__getWcsVectorFromAcsVector(LateralOffset,LongitudinalOffset)
				return { SymbolOffset.X + wcsX, SymbolOffset.Y + wcsY }
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="RC__assessDerogation()" ReturnType="Enumeration" Description="Checks object model check attributes for warnings and errors, sets the derogation state accordingly to [ Normed | Deviating | Requested | Granted].">
  <Signature>Enumeration RC__assessDerogation()</Signature>
  <Formula>
			function RC__assessDerogation()
				--The Derogation state variable influences the SymbolFrame function.
				--Warnings do not affect the derogation state, only errors do:
				local errors = LuaExpressions:filter(function(x) return x.IsModelCheck and x.Symbol == "_error" end)
				local d = getPropertyValue("Derogation") --Read property, do not refresh the entire object
				if errors.Count == 0 then
					if d == "DEVIATING" then
						return "NORMED" --Problem has disappeared
					else
						return d --No change if already manually set
					end
				else
					if d == "REQUESTED" or d == "GRANTED" then
						return d --No change if already manually set
					else
						return "DEVIATING" --Change state to warn user that a fix or a derogation is needed
					end
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_mileageIncreasesTowardsLeft()" ReturnType="String" Description="Returns 'true' if, and only if, the alignment's local tangent direction of the calling point object has kilometration increasing towards left in the current User Coordinate System. Use the context menu's 'RailCOMPLETE Screen Orientation' to set a new UCS, then refresh the affected point objects.">
  <Signature>String NOBN_com_mileageIncreasesTowardsLeft()</Signature>
  <Formula>
			function NOBN_com_mileageIncreasesTowardsLeft()
				local acsYaxisTangent = getAlignmentInfo().Tangent
				local acsYaxisWcsAngle = math.deg(math.atan(acsYaxisTangent.Y,acsYaxisTangent.X))
				local cs = DocumentData.Document.Editor.CurrentUserCoordinateSystem.CoordinateSystem3d
				local ucsXaxisWcsAngle = math.deg(math.atan(cs.Xaxis.Y,cs.Xaxis.X))
				local diffAngModulo360 = (acsYaxisWcsAngle - ucsXaxisWcsAngle) % 360
				return diffAngModulo360 &gt; 90 and diffAngModulo360 &lt; 270
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_setStage()" ReturnType="String" Description="Returns the object's layer's 'stageEntry-stageExit' pattern (two 4-digit numbers 'XXxx-YYyy'). See also command RC-ManageStagesUsingLayerNames.">
  <Signature>String NOBN_com_setStage()</Signature>
  <Formula>
			function NOBN_com_setStage()
				local lay = tostring(getPropertyValue("Layer"))
				local stageIn,stageOut = lay:match(".+(%d%d%d%d)%-(%d%d%d%d).*")
				local msg = "You may delete this formula and enter a stage entry-exit pattern (XXxx-YYyy) instead"
				if stageIn and stageOut then
					return string.format("%04d-%04d",stageIn,stageOut),_info(msg)
				else
					return "Layer name contains no stage entry-exit pattern (XXxx-YYyy)",_info(msg)
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_setLayer()" ReturnType="String" Description="Returns a layer name (property 'Layer') of the form &lt;original layername&gt;_XXxx-YYyy' where 'XXxx' means 'enters at the onset of construction stage XX.xx' and 'YYyy' means 'exits at the onset of construction stage YY.yy'. 'XXxx' and 'YYyy' are four-digit integers, where XXxx must be strictly lower than YYyy. Stage '0000' represents the existing situation at project start. Stage '9999' represents the project's final configuration. The text string 'XXxx-YYyyyy' is copied from property 'Stage' if a valid pattern 'XXxx-YYyy' is found there. If 'Stage' does not contain a valid stage pattern, then the layer name is left unchanged and a warning is displayed together with the layer name. See also property 'Stage'.">
  <Signature>String NOBN_com_setLayer()</Signature>
  <Formula>
			function NOBN_com_setLayer()
				--Look for typical typos, 5 digits or more in either of XXxx, YYyy:
				local lay = getPropertyValue("Layer")
				local s = tostring(Stage)
				local XXxx1,YYyy1 = s:match("^.*(%d%d%d%d%d)%-(%d%d%d%d).*$")
				local XXxx2,YYyy2 = s:match("^.*(%d%d%d%d)%-(%d%d%d%d%d).*$")
				local XXxx3,YYyy3 = s:match("^.*(%d%d%d%d%d)%-(%d%d%d%d%d).*$")
				if (XXxx1 and YYyy1) or (XXxx2 and YYyy2) or (XXxx3 and YYyy3) then
					return _error, lay, 
						_info("ERROR - No valid stage encoding in the format 'XXxx-YYyyy' (four and four digits with hyphen in between) found in the Stage property of the object '"..Stage.."'.")
				end
			
				local XXxx,YYyy = s:match("^.*(%d%d%d%d)%-(%d%d%d%d).*$")
				if XXxx and YYyy then
					if XXxx &lt;= YYyy then
						return _ok, string.format("%s_%04d-%04d",RcType:sub(1,9),XXxx,YYyy),
							_info("OK - The layer name of the object is derived from the RcType of the object '"..RcType.."' and the construction stage encoding (Stage)'"..Stage.."'.")
					else
						return _error, lay, 
							_info(string.format("ERROR - Stage-entry XXxx=%04d must be greater in real terms than stage-exit YYyy=%04d, retrieved from the stage encoding of the object (Stage), '%s'.", XXxx,YYyy,Stage))
					end
				else
					if s:match("%w*") or s == "" then
						return _noSymbol, lay,
							_info("INFO - Enter the stage encoding (XXxx-YYyy) to create layer names based on RC type (RcType) and stage encoding (Stage) properties.")
					else
						return _warning, lay,
							_info("WARNING - The stage encoding '"..Stage.."' does not have a valid format 'XXxx-YYyy' - no stage code has been added to the layer name of the object.")
					end
				end
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_getOcpCode()" ReturnType="String" Description="Returns the code property for the Operation / Control Point (OCP) area surrounding the given object.">
  <Signature>String NOBN_com_getOcpCode(ObjRef obj = this)</Signature>
  <Formula>
			function NOBN_com_getOcpCode(obj)
				obj = obj or this
				local OcpAreas = obj.RcArea:filter(function (x) return x:isVisible() and x.Variant:lower():match("ocp") end)
				local n = getCollectionLength(OcpAreas)
				if n == 0 then 
					return "",_info("UNFINISHED - No OCP area enclosing the object."),_unfinished
				elseif n == 1 then
					return OcpAreas[0].code,_noSymbol
				else
					return "?",_info("WARNING - Multiple OCP areas are enclosing the object ["..RC__identify(OcpAreas[0])..", "..RC__identify(OcpAreas[1]).." ...]."),_warning
				end
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_getEtcsRegionCode()" ReturnType="String" Description="Returns the 'Code' property of the ETCS area surrounding the specified object.">
  <Signature>String NOBN_sig_getEtcsRegionCode(ObjRef obj = this)</Signature>
  <Formula>
			function NOBN_sig_getEtcsRegionCode(obj)
				obj = obj or this
				local EtcsAreas = obj.RcArea:filter(function (x) return x:isVisible() and x.Variant:match("ETCS%-Bereich %(NID_C%)") end)
				local n = getCollectionLength(EtcsAreas)
				if n == 0 then 
					return "",_info("UNVOLLSTÄNDIG - Es gibt keine ETCS-Bereich, die das Objekt umgibt."),_unfinished
				elseif n == 1 then
					return EtcsAreas[0].code,_nosymbol
				else
					return "?",_info("WARNUNG - Mehrere ETCS-Bereiche umgeben das Objekt ["..RC__identify(OcpAreas[0])..", "..RC__identify(EtcsAreas[1]).." ...]."),_warning
				end
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_setSymbolFrame()" ReturnType="String" Description="Checks the object's modelcheck attributes for status symbols such as warnings and errors and turns on the corresponding symbol frame ([no frame]/_unfinished/_warning/_error).">
  <Signature>String NOBN_com_setSymbolFrame()</Signature>
  <Formula>
			function NOBN_com_setSymbolFrame()
				-- More symbol frame types may be available - see the appropriate Style Definitions file.
				local language = 2 -- 1:English, 2:Norwegian, 3:French, 4:German
				local frames = { 
					HISTORIC	= { "Historic",				"Historic",				"Historique",			"Historisch"			},
					UNFINISHED	= { "Unfinished",			"Unfinished",			"Incomplet",			"Unvollständig"			},
					WARNING		= { "Warning",				"Warning",				"Avertissement",		"Warnung"				},
					ERROR		= { "Error",				"Error",				"Erreur",				"Fehler"				},
					REQUESTED	= { "Requested",			"Requested",			"Demandée",				"Nachgefragt"			},
					GRANTED		= { "Granted",				"Granted",				"Accordée",				"Zugesagt"				},
					SECTION_TAG	= { "section",				"avsnitt",				"zone",					"Abschnitt"				},
					SEGMENT_TAG = { "Segment",				"Segment",				"Segment",				"Segment"				},
					SECTION		= { "SymbolFrame-R2.75",	"Symbolramme-R2.75",	"",						""						},
					SEGMENT		= { "SymbolFrame-R2.75",	"Symbolramme-R2.75",	"CadreSymbole-R2.75",	"Symbolrahmen-R2.75"	}
				}
				--Priority: Show HISTORIC then UNFINISHED then ERROR then WARNING then OTHERs then NO_FRAME
				-- By convention, historic layers have names starting with a double 'at' character '@@':
				if (tostring(Layer):sub(1,2) == '@@') then
					return frames.HISTORIC[language]
				end
			
				--Check code and name for keywords:
				--(inhibit evaluation of 'code' and 'name', since RC will not allow us to nest Lua calls too deep, 5 levels max)
				local thisCode = getPropertyValue("code")
				local thisName = getPropertyValue("name")
			
				local t = frames["UNFINISHED"][language]
				if tostring(thisCode):upper():match(t:upper()) or tostring(thisName):upper():match(t:upper()) then 
					return t
				end
			
				t = frames["WARNING"][language]
				if tostring(thisCode):upper():match(t:upper()) or tostring(thisName):upper():match(t:upper()) then 
					return t
				end
			
				t = frames["ERROR"][language]
				if tostring(thisCode):upper():match(t:upper()) or tostring(thisName):upper():match(t:upper()) then 
					return t
				end

				--Then scan the modelchecks for unfished items, warnings or errors - but suppress the symbolframe if a derogation
				--has been requested or has been granted:
				local modelChecks = LuaExpressions:filter(function(x) return x.IsModelCheck end)
				if (modelChecks:filter(function(x) return x.Symbol == "_unfinished" end).Count &gt; 0) then
					return frames.UNFINISHED[language]
				elseif Derogation == "REQUESTED" then return frames.REQUESTED[language]
				elseif Derogation == "GRANTED" then return frames.GRANTED[language]
				elseif (modelChecks:filter(function(x) return x.Symbol == "_error" end).Count &gt; 0) then
					return frames.ERROR[language] --Deviating, no derogation requested or granted
				elseif (modelChecks:filter(function(x) return x.Symbol == "_warning" end).Count &gt; 0) then
					return frames.WARNING[language] --Deviating, no derogation requested or granted
				else
					--do nothing, fall through to next check
				end
			
				--Then scan the various relations and their cardinalities to check for unsatisfied minimum requirements:
				local ss = Relations.SourceSpace
				local rel = Relations.ObjectRelations
				local nRel = getCollectionLength(rel)
				for i = 0,nRel-1 do
					local r = rel[i]
					--[[
						Example - object is a high voltage switch (Norw: Bryter)
						r = this.Relations.Objectrelations
						r.RelationPromptText			rel_HvSwitch_Has_HvSwitchActuator
						r.Relation.RelatesTo.Min		0
						r.Relations						Collection is empty (no forward relation exists)
						r.ReverseRelationPromptText		rel_HvSwitchActuator_Actuates_HvSwitch
						r.Relation.ReverseRelatesTo.Min	1
						r.ReverseRelations				Name-of-related-object(1 reverse relation found)
					--]]
					--[[
						Note: We might have relation prompt texts such as "Is xyzzy for xyzzy_charger/multi_xyxxz/buzzer",
						or just "Is xyzzy for multi_xyxxz", or just "Is xyzzy for buzzer". Don't accept partial word match.
						I.e., our search pattern must be followed by either slash '/' or end-of-line '$'.
						Also, we must start by substitution of all '-' with '%-', since '-' is a special character for match().
					--]]
					local ss1 = ss:gsub("%-","%%-").."/" 
					local ss2 = ss:gsub("%-","%%-").."$"
					local t1 = (r.ReverseRelationPromptText:match(ss1) == ss)
					local t2 = (r.ReverseRelationPromptText:match(ss2) == ss)
					--if true then return "Someone points to me = ".. ((t1 or t2) and "Yes" or "No") end
					if t1 or t2 then
						local nForward = getCollectionLength(r.Relations)
						local minForward = r.Relation.RelatesTo.Min
						--if true then return nRel,i,"---",nForward,minForward,r.RelationPromptText,"---",nReverse,minReverse,r.ReverseRelationPromptText end
						if nForward &lt; minForward then return frames.UNFINISHED[language] end
					end
			
					local t3 = (r.RelationPromptText:match(ss1) == ss)
					local t4 = (r.RelationPromptText:match(ss2) == ss)
					--if true then return "I point to someone = ".. ((t3 or t4) and "Yes" or "No") end
					if t3 or t4 then
						local nReverse = getCollectionLength(r.ReverseRelations)
						local minReverse = r.Relation.ReverseRelatesTo.Min
						--if true then return nRel,i,"---",nForward,minForward,r.RelationPromptText,"---",nReverse,minReverse,r.ReverseRelationPromptText end
						if nReverse &lt; minReverse then return frames.UNFINISHED[language] end
					end
				end
			
				--Now, look for derogations or else look for unsatisfied modelchecks:
				modelChecks = LuaExpressions:filter(function(x) return x.IsModelCheck end)
				if Derogation == "REQUESTED" then return frames.REQUESTED[language]
				elseif Derogation == "GRANTED" then return frames.GRANTED[language]
				elseif (modelChecks:filter(function(x) return x.Symbol == "_error" end).Count &gt; 0) then
					return frames.ERROR[language] --Deviating, no derogation requested or granted
				elseif (modelChecks:filter(function(x) return x.Symbol == "_warning" end).Count &gt; 0) then
					return frames.WARNING[language] --Deviating, no derogation requested or granted
				elseif (modelChecks:filter(function(x) return x.Symbol == "_unfinished" end).Count &gt; 0) then
					return frames.UNFINISHED[language]
				else
					--do nothing, fall through to next check
				end
			
				--If no problems remain, go on to show 'normal behaviour' frame for objects that feature a frame:
				--Deal with axle counter special section objects (the layer name will depend on the DNA in use):
				if RcType:upper():match(frames.SECTION_TAG[language]:upper()) then 
					return frames.SECTION[language]
				end
			
				--Deal with characteristic point special section objects (the layer name will depend on the DNA in use):
				if RcType:upper():match(frames.SEGMENT_TAG[language]:upper()) then 
					return frames.SEGMENT[language]
				end
			
				--Nothing recognised:
				return "" --no frame
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_getLabelItem1()" ReturnType="String" Description="Returns the ReferenceMileage, formated as Km.&lt;value&gt;, for the label's own insertion point.">
  <Signature>String NOBN_com_getLabelItem1()</Signature>
  <Formula>
			function NOBN_com_getLabelItem1()
				return "Km."..NOBN_trk_toKm(ReferenceMileage,3)
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_getLabelItem2()" ReturnType="String" Description="Returns a list consisting of the Code for each item related to the label (labels can relate to anything).">
  <Signature>String NOBN_com_getLabelItem2()</Signature>
  <Formula>
			function NOBN_com_getLabelItem2()
				local s = rel_Label_AppliesTo_Anything
				local r,n = getRelatedObjects(s)
				if n == 0 then
					return "UNFINISHED - Relate with '"..s.."'."
				else
					local t = "("..r[0].code
					for i = 1, n-1 do
						t = t..", "..r[i].code
					end
					return t..")"
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_getLabelItem3()" ReturnType="String" Description="Returns the reference alignment's 'code' property for the label itself (not for a related item).">
  <Signature>String NOBN_com_getLabelItem3()</Signature>
  <Formula>
			function NOBN_com_getLabelItem3()
				return "(Ref. "..ReferenceAlignment.code..")"
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_assistAssignEarthingAlignment()" ReturnType="AlignmentRef" Description="Suggests an earthing alignment reference for an object, based on its RcType, its Variant and its surroundings. The function assumes that rails of RcType '&quot;..rctype_InnerRailAndInsulation..&quot;' are present and have been divided already into insulated and non-insulated sections.">
  <Signature>AlignmentRef NOBN_com_assistAssignEarthingAlignment([ObjRef obj])</Signature>
  <Formula>
			function NOBN_com_assistAssignEarthingAlignment(obj)
				--TODO: Consider replacing "Red/Green" filter with a downwards search for track insulation with railML property 'left', 'right', 'both', 'none' (in associated track).
				if obj == nil then obj = this end
			
				--Gauge tolerance when looking for rails belonging to the same track:
				local gaugeTolerance = 0.030 --[m]
				--If not too far away, we prefer a dedicated earth rail over double insulated track, where you should consider not earthing to both rails:
				local railDistanceTolerance = 6.000  --[m]
			
				if EarthingMethod == "None" then 
					return
			
				elseif EarthingMethod == "Unknown" then 
					return _info("UNFINISHED - Earthing method is Unknown, cannot deduce EarthingAlignment.")
					
				elseif EarthingMethod == "Rail" then
					local r = getNearbyAlignments(obj, rctype_InnerRailAndInsulation):filter(function (x) return x:getPropertyValue("Color"):upper() == "RED" end)
					local d
					if getAlignmentInfo(r[0].id,obj).NormalProjectionExists then
						--Find distance sideways to closest insulated rail:
						d = getAlignmentInfo(r[0].id,obj).DistanceToAlignment
					else
						--No normal projection exists onto insulated rail, so look for  distance to closest start/end of closest insulated rail:
						d = math.min(RC__getDistance2D(r[0].RcAlignment.StartPoint,obj),RC__getDistance2D(r[0].RcAlignment.EndPoint,obj))
					end
					if math.abs(d) &lt;= railDistanceTolerance then
						--If distance to insulated rail is reasonably short, then use it now...
						return r[0]
					else 
						--...otherwise, check if the two closest *un*insulated rails belong to the same track, asuuming both are (through use of impedances) carrying return current:
						--Btw, this proceudre fails if the object is between two tracks where insulated rail distances are just above the tolerance, so that the two closest 
						--return rails belong to two *different* railway tracks.
						r = getNearbyAlignments(rctype_InnerRailAndInsulation):filter(function (x) return getAlignmentInfo(x.id).NormalProjectionExists and x.color:upper() == "GREEN" end)
						local d0 = getAlignmentInfo(r[0].id,obj).DistanceToAlignment
						local d1 = getAlignmentInfo(r[1].id,obj).DistanceToAlignment
						if math.abs(math.abs(d0-d1) - r[0].AlignmentSystem.AlignmentGauge) &lt; gaugeTolerance then
							--Pick closest un-insulated rail, although it is 'bad taste' if we thereby end up
							--with objects earthed to both rails within one double-insulated track circuit:
							return r[0]
						else
							return _info("Search for nearby rails suitable for protective earthing failed (i.e., rails of type '"..rctype_InnerRailAndInsulation.."', carrying return current).")
						end
					end
			
				elseif EarthingMethod == "Wire" then 
					local r = getNearbyAlignments(obj, rctype_EarthingConductor)
					return r[0]
					
				elseif EarthingMethod == "Object" then 
					--Just return - and let similar Lua code for the 'EarthingObject' reference property do the job:
					return _noSymbol
				end
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_assistAssignEarthingObject()" ReturnType="ObjectRef" Description="Suggests an earthing object reference for an object, based on its RcType, its Variant and its surroundings. The function assumes that there is an object nearby that can offer protective earth.">
  <Signature>AlignmentRef NOBN_com_assistAssignEarthingObject([ObjRef obj])</Signature>
  <Formula>
			function NOBN_com_assistAssignEarthingObject(obj)
				if obj == nil then obj = this end
				local earthingConnectionMaxLength = 10 --[m]
			
				if obj.EarthingMethod == "None" then 
					return _noSymbol
				
				elseif obj.EarthingMethod == "Unknown" then 
					return _noSymbol, _info("UNFINISHED - Earthing method is Unknown, cannot deduce EarthingObject.")
				
				elseif obj.EarthingMethod == "Rail" then
					return _noSymbol
				
				elseif obj.EarthingMethod == "Wire" then 
					return _noSymbol
				
				elseif obj.EarthingMethod == "Object" then 
					local npo = getNearbyPointObjects2D(earthingConnectionMaxLength,obj):filter
						(function (x)
							local em = x:getPropertyValue("EarthingMethod")
							local ea = x:getPropertyValue("EarthingAlignment")
							local eo = x:getPropertyValue("EarthingAlignment")
							return 
								((em == 'Rail' or em == 'Wire') and (ea and ea ~= obj))
								or
								((em == 'Object') and (eo and eo ~= obj))
						end)
					if getCollectionLength(npo) &gt; 0 then
						return npo[0]
					else 
						return _noSymbol,_error, _info("UNFINISHED - Earthing method is Object, but no suitable earth providing objects found.")
					end
					
				else
					-- Should not happen
					return nil, _info("ERROR - Bad Earthing Method.")
				end
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_assignEarthingLabelColor()" ReturnType="String" Description="Assigns the color for the permanent marking tag attached to earthing connector, deduced from the object's discipline.">
  <Signature>String NOBN_com_assignEarthingLabelColor([ObjRef obj])</Signature>
  <Formula>
			function NOBN_com_assignEarthingLabelColor(obj)
				obj = obj or this
				if     obj.Discipline == "Felles"						then return "7" --White
				elseif obj.Discipline == "Underbygning"					then return "7" --White
				elseif obj.Discipline == "Overbygning"					then return "7" --White
				elseif obj.Discipline == "Kontaktledning"				then return "1" --Red
				elseif obj.Discipline == "Signal"						then return "3" --Green
				elseif obj.Discipline == "Tele"							then return "2" --Yellow
				elseif obj.Discipline == "Lavspent"						then return "5" --Blue
				elseif obj.Discipline == "Skilt"						then return "7" --White
				else 
					return _error, "ERROR - Uncrecognized discipline ["..obj.Discipline.."]."
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_assistAssignEarthingLabelText()" ReturnType="String" Description="Suggests an earthing alignment label text for an object, based on its RcType, its Variant and its surroundings. The function assumes that the object already has a defined EarthingMethod and EarthingAlignment/EarthingObject.">
  <Signature>String NOBN_com_assistAssignEarthingLabelText([ObjRef obj])</Signature>
  <Formula>
			function NOBN_com_assistAssignEarthingLabelText(obj)
				if obj == nil then obj = this end
				if obj.EarthingMethod == "None" then 
					return ""
				elseif obj.EarthingMethod == "Object" then
					return RC__identify(obj.EarthingObject).." / "..RC__identify(obj)
				elseif obj.EarthingMethod == "Wire" then 
					return RC__identify(obj.EarthingAlignment).." / "..RC__identify(obj)
				elseif obj.EarthingMethod == "Rail" then 
					return RC__identify(obj.EarthingAlignment).." / "..RC__identify(obj)
				elseif obj.EarthingMethod == "Unknown" then 
					return "(?)".." / "..RC__identify(obj)
				else
					return _error, "ERROR - Bad Earthing Method ["..obj.EarthingMethod.."]."
				end
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_assistAssignEarthingPosBias()" ReturnType="Double" Description="Suggests an earthing alignment pos bias for an object, based on its earthing method and its surroundings. A non-zero bias moves the 'earthing landing point' along the earthing alignment.">
  <Signature>Double NOBN_com_assistAssignEarthingPosBias([ObjRef obj])</Signature>
  <Formula>
			function NOBN_com_assistAssignEarthingPosBias(obj)
				if obj == nil then obj = this end
				local offset = 1
				if obj.EarthingMethod == "Rail" then
					if getAlignmentInfo(obj.EarthingAlignment.id).NormalProjectionExists then
						return 0
					else 
						--Move earth connection a little past insulation along insulated rail's tangent direction (at start or end of rail): 
						local ps = obj.EarthingAlignment.RcAlignment.StartPoint
						local pe = obj.EarthingAlignment.RcAlignment.EndPoint
						local ds = RC__getDistance2D(ps,obj)
						local de = RC__getDistance2D(pe,obj)
						if ds &lt; de then
							local u = obj.EarthingAlignment.RcAlignment.StartTangent
							return ((ps.X-geoCoord.X)*u.X + (ps.Y-geoCoord.Y)*u.Y) &gt; 0 and offset or -offset 
						else
							local u = obj.EarthingAlignment.RcAlignment.EndTangent
							return ((ps.X-geoCoord.X)*u.X + (ps.Y-geoCoord.Y)*u.Y) &gt; 0 and offset or -offset 
						end
					end
				end
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_toKm()" ReturnType="String" Description="Converts input x [m] into mileage [km] with precision p (0..6), default precision is 3. E.g., 462371.637 => 462.372.">
  <Signature>Double NOBN_trk_toKm(Double x [, Int p])</Signature>
  <Formula>
			function NOBN_trk_toKm(x,p) 
				p = type(p) == "number" and math.floor(p) or 3
				if (x == nil) or (x ~= x) or (x == "") then
					--Note: x ~= x if and only if x is NaN (not-a-number)
					return 0, _warning
				end
				if p &lt; 0 or p &gt; 6 then
					return x,_info("Precision ["..p.."] must be from 0 to 6, cannot format value ["..x.."]"),_warning
				else
					return string.format("%."..p.."f", math.floor((x + 0.5*10^(3-p)) * 10^(p-3)) * 10^(-p) )
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getNearestEntireKm()" ReturnType="String" Description="Returns object's reference mileage's whole km when also half km is to be shown, e.g., 461.749 => 461 (half km is 5) and 461.750 => 462 (half km is 0).">
  <Signature>Int NOBN_trk_getNearestEntireKm([RailwayPlacedObject obj])</Signature>
  <Formula>
			function NOBN_trk_getNearestEntireKm(obj)
				obj = obj or this
				return math.floor(math.floor((obj:getPropertyValue("ReferenceMileage")/500)+.5)/2)
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getNearestEntireKm2()" ReturnType="String" Description="Returns object's reference mileage's whole km when the half km is not to be shown, e.g., 461.499 => 461 and 461.500 => 462.">
  <Signature>Int NOBN_trk_getNearestEntireKm2([RailwayPlacedObject obj])</Signature>
  <Formula>
			function NOBN_trk_getNearestEntireKm2(obj)
				obj = obj or this
				return math.floor(math.floor(obj:getPropertyValue("ReferenceMileage")/1000 + 0.5))
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getNearestHalfKm()" ReturnType="String" Description="Returns object's reference mileage's half km (0 or 5), e.g., 461.750 => 0 (whole km is 461) and 462.372 => 5 (whole km is 462).">
  <Signature>Int NOBN_trk_getNearestHalfKm([RailwayPlacedObject obj])</Signature>
  <Formula>
			function NOBN_trk_getNearestHalfKm(obj)
				obj = obj or this
				return (math.floor((obj:getPropertyValue("ReferenceMileage")/500)+0.5)%2)*5
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getNearestHectometricSnap()" ReturnType="String" Description="Returns object's reference mileage's nearest whole hectometer.\n\nNote: The ReferenceMileage value may be rounded to a value outside the alignment. In that case the Hectometer symbol will be dropped at a non-integer multiple of 100m.">
  <Signature>Int NOBN_trk_getNearestHectometricSnap([RailwayPlacedObject obj])</Signature>
  <Formula>
			function NOBN_trk_getNearestHectometricSnap(obj)
				obj = obj or this
				return 100 * ((50 + obj:getPropertyValue("ReferenceMileage")) // 100)
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getNearestKilometricSnap()" ReturnType="String" Description="Returns object's reference mileage's nearest whole kilometer.">
  <Signature>Int NOBN_trk_getNearestKilometricSnap([RailwayPlacedObject obj])</Signature>
  <Formula>
			function NOBN_trk_getNearestKilometricSnap(obj)
				obj = obj or this
				return 1000 * ((500 + obj:getPropertyValue("ReferenceMileage")) // 1000)
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getLiftFromCant()" ReturnType="Double" Description="Returns a track-bound object's Z-coordinate offset above the gradient curve [m], consistent with own alignment's local cant. If called from an alignment object, the reserved identifier '_position' must be provided as an input argument.">
  <Signature>Double NOBN_trk_getLiftFromCant([_position])</Signature>
  <Formula>
			function NOBN_trk_getLiftFromCant(where)
				--If called to express e.g. sleepers and rails for a 3D alignment, then '_position' is provided by RC as 'where', sampled along the alignment.
				--'where' is a data structure, if present, consisting of .Pos and .Ref
				local ai
				if where == nil then
					-- can be called from point objects:
					ai = getAlignmentInfo()
				else
					-- can be called from anywhere, including an alignment, as a sampled formula:
					ai = getAlignmentInfo(where)
				end
				local cg, lwc, dta
				if RcAlignment == nil then 
					-- 'this' is a point object:
					cg = Alignment.AlignmentSystem.CantGauge
					lwc = Alignment.AlignmentSystem.LiftWithCant
					dta = DistanceToAlignment
				else 
					-- 'this' is an alignment:
					cg = AlignmentSystem.CantGauge
					lwc = AlignmentSystem.LiftWithCant
					dta = 0.0 --DistanceToAlignment
				end
				if not lwc then 
					return 0.0, _info("Alignment system does not lift with cant.")
				end
				local c = ai.Cant
				if c == nil or RC__isNan(c) then
					return 0.0, _info("UNFINISHED - No cant data in alignment, assuming zero cant.")
				elseif c == 0 then
					return 0.0
				else
					-- Cant is measured in millimeter superelevation
					-- Ask alignment system whether cant leads to lift or not:
					local h = c/1000.0 --[m]
					local msg
					if h &gt; cg then 
						h = cg - 0.001 -- Almost 90 degrees roll...
						msg = "Cant truncated to max, "..RC__round(1000*h).." mm."
					else
						msg = RC__round(1000*h).." mm cant."
					end
					local railSeparationXY = math.sqrt(cg^2 - h^2)
					if h == 0.0 then
						return 0.0, _info(msg)
					else
						local cr = ai.CantRotation
						if cr == "CCW" then
							-- Right rail lifted above left rail
							return h/2 + h/2 * dta / (railSeparationXY / 2)
						elseif cr == "CW" then
							-- Left rail lifted above right rail
							return h/2 - h/2 * dta / (railSeparationXY / 2)
						else
							return 0.0,_error, _info("Bad cant rotation direction ["..ai.CantRotation.."], assuming zero lift.")
						end
					end
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getLateralOffsetFromCantAndTrackPlaneDistance()" ReturnType="Double" Description="Returns a track-bound object's 2D distance to the alignment axis (IFC:gradient curve) as a function of its track plane distance to own model insertion axis. 'TrackPlaneDistance' is by default set to half of the rail separation (track gauge). If called from an alignment object, the reserved identifier '_position' holding a {Pos, Ref} must be provided as an input argument.">
  <Signature>Double NOBN_trk_getLateralOffsetFromCantAndTrackPlaneDistance([Double TrackPlaneDistance [,_position]])</Signature>
  <Formula>
			function NOBN_trk_getLateralOffsetFromCantAndTrackPlaneDistance(TrackPlaneDistance,where)
				local cg
				if RcAlignment == nil then 
					-- 'this' is a point object:
					cg = Alignment.AlignmentSystem.CantGauge
				else 
					-- 'this' is an alignment:
					cg = AlignmentSystem.CantGauge
				end
				if TrackPlaneDistance == nil then
					--No specific distance as input, use side of track and place on rail:
					TrackPlaneDistance = RightSided and cg/2.0 or -cg/2.0
				end
				--If called to express e.g. sleepers and rails for a 3D alignment, then '_position' is provided by RC as 'where', sampled along the alignment.
				--'where' is a data structure, if present, consisting of .Pos and .Ref
				local ai
				if where == nil then
					-- Assume function has been called from a point object:
					ai = getAlignmentInfo()
				else
					ai = getAlignmentInfo(where)
				end
				local g = ai.Gradient
				local h = ai.Cant/1000.0
				if RC__isNan(h) then 
					return TrackPlaneDistance, _info("No cant data in alignment, assuming zero cant.")
				else
					-- Scale track plane distance to alignment with effect of cant:
					return TrackPlaneDistance * math.sqrt(1 - (h/cg)^2)
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getRollFromCant()" ReturnType="Double" Description="Returns a track-bound object's sideways roll [Decimal Degrees], consistent with own alignment's local cant and object direction up/down. If called from an alignment object, the reserved identifier '_position' must be provided as an input argument.">
  <Signature>Double NOBN_trk_getRollFromCant([_position])</Signature>
  <Formula>
			function NOBN_trk_getRollFromCant(where)
				--If called to express e.g. sleepers and rails for a 3D alignment, then '_position' is provided by RC as 'where', sampled along the alignment.
				--'where' is a data structure, if present, consisting of .Pos and .Ref
				local ai
				if where == nil then
					-- Assume function was called from a point object:
					ai = getAlignmentInfo()
				else
					-- can be called from anywhere, including an alignment, as a sampled formula:
					ai = getAlignmentInfo(where)
				end
				local cg
				if RcAlignment == nil then 
					-- 'this' is a point object:
					cg = Alignment.AlignmentSystem.CantGauge
				else 
					-- 'this' is an alignment:
					cg = AlignmentSystem.CantGauge
				end
				local c = ai.Cant
				if c == nil or RC__isNan(c) then
					return 0.0, _info("UNFINISHED - No cant data in alignment, assuming zero cant.")
				elseif c == 0 then
					return 0.0
				else
					-- Cant is measured in millimeter superelevation, with rotation clockwise or counterclockwise in the track's direction
					-- Assume that only one rail is lifted at a time.
					local h = c/1000.0
					local cr = tostring(ai.CantRotation)
					if cr:upper() == "CW" then
						return math.asin(h/cg)*(180/math.pi)
					elseif cr:upper() == "CCW" then 
						return -math.asin(h/cg)*(180/math.pi)
					else
						return 90.0,_error, _info("Bad cant rotation data ["..ai.CantRotation.."], assuming 90 degrees roll as a visual warning.")
					end
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_getRollFromCantInterpretedAsDecimalDegrees()" ReturnType="Double" Description="Returns a roll angle deduced from an alignment's cant, where Cant is interpreted as decimal degrees and CW/CCW.">
  <Signature>Double NOBN_com_getRollFromCantInterpretedAsDecimalDegrees([_position])</Signature>
  <Formula>
			function NOBN_com_getRollFromCantInterpretedAsDecimalDegrees(where)
				--If called to express e.g. a road, or OCS wire clamps or sweeping a contact wire, then '_position' is provided by RC, sampled along the alignment.
				local ai
				if where == nil then
					ai = getAlignmentInfo()
				else
					ai = getAlignmentInfo(where)
				end
				local angleInDecimalDegrees = ai.Cant --  NB! Cant is interpreted as decimal degrees CW/CCW.
				if (RC__isNan(angleInDecimalDegrees)) then
					return 0, _info("UNFINISHED - No cant (to be interpreted as an angle in decimal degrees) data in non-track alignment, assuming zero cant.")
				elseif angleInDecimalDegrees == 0 then
					return 0
				else
					-- Cant is measured in millimeter superelevation, with rotation clockwise or counterclockwise in the track's direction
					-- Assume that only one rail is lifted at a time.
					local cr = tostring(ai.CantRotation or "No data")
					if  cr:upper() == "CW" then
						return angleInDecimalDegrees
					elseif cr:upper() == "CCW" then 
						return -angleInDecimalDegrees
					else
						return 90.0,_error, _info("Bad cant rotation data ["..cr.."], assuming 90 degrees roll as a visual warning.")
					end
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getPitchFromGradient()" ReturnType="Double" Description="Returns a track-bound object's pitch [decimal degrees], consistent with own alignment's local gradient, and object orientation up/down/both/none. If called from an alignment object, the reserved identifier '_position' must be provided as an input argument.">
  <Signature>Double NOBN_trk_getPitchFromGradient([_position])</Signature>
  <Formula>
			function NOBN_trk_getPitchFromGradient(where)
				--If called to express e.g. sleepers and rails for a 3D alignment, then '_position' is provided by RC, sampled along the alignment.
				local g
				if where == nil then
					g = getAlignmentInfo().Gradient
				else
					g = getAlignmentInfo(where).Gradient 
				end
				if RC__isNan(g) then
					return 0.0, _info("UNFINISHED - No gradient data in alignment, assuming zero gradient.")
				else
					return math.deg(math.atan(g/1000))
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getYawFromDir()" ReturnType="Double" Description="Returns the 3D rotation of an object [Decimal Degrees] according to its orientation ('dir' property up/down/none/both) and its lateral position in relation to the axis, in the direction of increasing PKs. If a 'rotation' argument [DD] is supplied, its value will be added to the base angle [0|90|180|270] corresponding to the 'dir' property and the side of the object's axis. If no 'rotation' argument has been supplied, the intrinsic 'AngularOffset' property [DD] will be added to the basic rotation. Objects which do not feature the 'dir' property will return 0.">
  <Signature>Double NOBN_trk_getYawFromDir([Double rotation])</Signature>
  <Formula>
			function NOBN_trk_getYawFromDir(rotation)
				local d = getPropertyValue("dir") --Strip off _symbol and _info() if any, get just the plain string value
				if d == nil then return 0 end
				if rotation == nil and AngularOffset == nil then
					-- No argument given, and no standard property 'AngularOffset' exists for the current object
					if d == 'up' then
						return 0.0
					elseif d == 'down' then
						return 180.0
					elseif d == 'both' then
						return RightSided and -90.0 or 90.0
					elseif d == 'none' then
						return RightSided and 90.0 or -90.0
					else --d == unknown':
						return 45.0,_warning, _info("EnableDirectionSetting is 'unknown', cannot compute yaw, assuming 45 degrees as a visual warning.")
					end
				else
					--Modify 'dir' with extra rotation:
					if rotation == nil then
						--No arg given, use object's own AngularOffset:
						rotation = AngularOffset
					else 
						if math.abs(rotation) &lt; 4e-4 then 
							rotation = 0.0 --remove small inaccuracies
						end
					end
					if d == 'up' then
						return rotation, _info("'up' with "..rotation.." degrees extra rotation.")
					elseif d == 'down' then
						return 180.0+rotation, _info("'down' with "..rotation.." degrees extra rotation.")
					elseif d == 'both' then
						return (RightSided and -90.0 or 90.0) + rotation, _info("'both' with "..rotation.." degrees extra rotation.")
					elseif d == 'none' then
						return (RightSided and 90.0 or -90.0) + rotation, _info("'none' with "..rotation.." degrees extra rotation.")
					else --d == unknown':
						return 45.0,_warning, _info("The basic direction is 'unknown', cannot compute yaw, assuming 45 degrees as a visual warning .")
					end
				end
			end
		</Formula>
 </LuaFunction>
 <FoulingPointSetting Name="1 Ny bane, tog/*" MaxSearchLength="200" LuaFunctionName="NOBN_trk_getFoulingPointDistanceNewTrain" FoulingPointGraphicsType="0" SetAsDefault="true"/>
 <FoulingPointSetting Name="2 Ny bane, skift/skift" MaxSearchLength="200" LuaFunctionName="NOBN_trk_getFoulingPointDistanceNewShunting" FoulingPointGraphicsType="1"/>
 <FoulingPointSetting Name="3 Eks. bane, tog/*" MaxSearchLength="200" LuaFunctionName="NOBN_trk_getFoulingPointDistanceExistingTrain" FoulingPointGraphicsType="2"/>
 <FoulingPointSetting Name="4 Eks. bane, skift/skift" MaxSearchLength="200" LuaFunctionName="NOBN_trk_getFoulingPointDistanceExistingShunting" FoulingPointGraphicsType="3"/>
 <LuaFunction Name="NOBN_trk_getFoulingPointDistanceNewTrain()" ReturnType="Double" Description="Returns fouling point distance for new line's switch when one or both legs carry train traffic." HideFromUser="false">
  <Signature>Double NOBN_trk_getFoulingPointDistanceNewTrain(foulingPointCandidate,path1,path2,path1IsLeftOfPath2)</Signature>
  <Formula>
			function NOBN_trk_getFoulingPointDistanceNewTrain(foulingPointCandidate,path1,path2,path1IsLeftOfPath2)
				return math.max(4.000, 2.120 + 1.700 + 0.100 + NOBN_trk_getFoulingPointLocalContribution(foulingPointCandidate,path1,path2,path1IsLeftOfPath2))
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getFoulingPointDistanceNewShunting()" ReturnType="Double" Description="Returns fouling point distance for new line's switch when no legs carry train traffic." HideFromUser="false">
  <Signature>Double NOBN_trk_getFoulingPointDistanceNewShunting(foulingPointCandidate,path1,path2,path1IsLeftOfPath2)</Signature>
  <Formula>
			function NOBN_trk_getFoulingPointDistanceNewShunting(foulingPointCandidate,path1,path2,path1IsLeftOfPath2)
				return math.max(4.000, 2.120 + 1.700 - 0.100 + NOBN_trk_getFoulingPointLocalContribution(foulingPointCandidate,path1,path2,path1IsLeftOfPath2))
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getFoulingPointDistanceExistingTrain()" ReturnType="Double" Description="Returns fouling point distance for existing line's switch when one or both legs carry train traffic." HideFromUser="false">
  <Signature>Double NOBN_trk_getFoulingPointDistanceExistingTrain(foulingPointCandidate,path1,path2,path1IsLeftOfPath2)</Signature>
  <Formula>
			function NOBN_trk_getFoulingPointDistanceExistingTrain(foulingPointCandidate,path1,path2,path1IsLeftOfPath2)
				return math.max(0.000, 2.120 + 1.700 + 0.100 + NOBN_trk_getFoulingPointLocalContribution(foulingPointCandidate,path1,path2,path1IsLeftOfPath2))
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getFoulingPointDistanceExistingShunting()" ReturnType="Double" Description="Returns fouling point distance for existing line's switch when no legs carry train traffic." HideFromUser="false">
  <Signature>Double NOBN_trk_getFoulingPointDistanceExistingShunting(foulingPointCandidate,path1,path2,path1IsLeftOfPath2)</Signature>
  <Formula>
			function NOBN_trk_getFoulingPointDistanceExistingShunting(foulingPointCandidate,path1,path2,path1IsLeftOfPath2)
				return math.max(0.000, 2.120 + 1.700 - 0.100 + NOBN_trk_getFoulingPointLocalContribution(foulingPointCandidate,path1,path2,path1IsLeftOfPath2))
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getFoulingPointLocalContribution()" ReturnType="Double" Description="Returns the extra coach separation needed due to local curvatures (Kinner=81/2R, Kouter=63/2R) and to local cants (2.3*SignficantCantDifference)." HideFromUser="false">
  <Signature>Double NOBN_trk_getFoulingPointLocalContribution(foulingPointCandidate,path1,path2,path1IsLeftOfPath2)</Signature>
  <Formula>
			function NOBN_trk_getFoulingPointLocalContribution(
				foulingPointCandidate,	--Point2d: a candidate fouling point, from which we will calculate the instantaneous required FP separation.
				path1,					--RailwayPath: a structure containing a list of AlignmentIntervals, which is an interval on an alignment represented by the alignment's ObjectId, two positions, and a direction.
				path2,					--RailwayPath: a structure containing a list of AlignmentIntervals.
				path1IsLeftOfPath2		--Boolean: true iff path1 is to the left of path2 when vieweing the switch from the WCS positive Z axis, looking into the tip-of-tongues.
			)
			
				function Kinner(R) 
					--First term of a Taylor series, b^2/2r, assuming b=9 meter (standard Bane NOR assumption for halfAxleSeparation)
					--See \OneDrive - Railcomplete AS\V\I - Issues\Attachments\2020-03-17 Taylor series expansion for RC-DisplayEnvelope (issue #6338)
					return 81.0 / (2*R)
				end

				function Kouter(R)
					--First term of a Taylor series, (2bc+c^2)/2r, assuming b=9 as for Kinner() and c=3 meter (standard Bane NOR assumption for tail/nose extension from end/nose axle)
					--See \OneDrive - Railcomplete AS\V\I - Issues\Attachments\2020-03-17 Taylor series expansion for RC-DisplayEnvelope (issue #6338)
					return 63.0 / (2*R)
				end

				--Retrieve alignment geometry info:
				local path1Info = getAlignmentInfo(foulingPointCandidate.X, foulingPointCandidate.Y, path1)
				local path2Info = getAlignmentInfo(foulingPointCandidate.X, foulingPointCandidate.Y, path2)
				local t1 = path1Info.Segment.Type 
				local t2 = path2Info.Segment.Type 
				local cw1 = (path1Info.SignedRadius &gt; 0) --CW (true) or not CW (false)
				local cw2 = (path2Info.SignedRadius &gt; 0) --CW (true) or not CW (false)
				local r1 = math.abs(path1Info.SignedRadius) --Note: Reading path1Info.Radius fails for clothoids
				local r2 = math.abs(path2Info.SignedRadius) --Note: Reading path2Info.Radius fails for clothoids

				--Deduce contributions from inner/outer curves:
				local curveContribution = 0.0
				if path1IsLeftOfPath2 then
					if t1 ~= "Straight" then curveContribution = curveContribution + (cw1 and Kouter(r1) or Kinner(r1)) end
					if t2 ~= "Straight" then curveContribution = curveContribution + (cw2 and Kinner(r2) or Kouter(r2)) end
				else
					--path1 is right of path2
					if t1 ~= "Straight" then curveContribution = curveContribution + (cw1 and Kinner(r1) or Kouter(r1)) end
					if t2 ~= "Straight" then curveContribution = curveContribution + (cw2 and Kouter(r2) or Kinner(r2)) end
				end
											
				--Retrieve alignment superelevation info [mm], convert to [m]:
				local c1 = RC__isNan(path1Info.Cant) and 0.0 or path1Info.Cant/1000.0
				local c2 = RC__isNan(path2Info.Cant) and 0.0 or path2Info.Cant/1000.0
				local cr1 = path1Info.CantRotation == nil and "CW" or path1Info.CantRotation --Treat as "CW" if no cant present
				local cr2 = path2Info.CantRotation == nil and "CW" or path2Info.CantRotation --Treat as "CW" if no cant present

				--Deduce contributions from cant, checking whether the cants lean 'net' towards each other or not.
				local cantContribution = 0.0
				if path1IsLeftOfPath2 then 
					if cr1 == "CW" and cr2 == "CCW" then cantContribution = 2.3 * (c1+c2) --both leaning towards each other
					elseif cr1 == "CW" and cr2 == "CW" then cantContribution = 2.3 * math.max(0,c1-c2) --both leaning to the right
					elseif cr1 == "CCW" and cr2 == "CCW" then cantContribution = 2.3 * math.max(0,c2-c1) --both leaning to the left
					elseif cr1 == "CCW" and cr2 == "CW" then cantContribution = 0.0 --both leaning away from each other
					else return 98.0 --error
					end
				else
					--path1 is right of path2
					if cr1 == "CW" and cr2 == "CCW" then cantContribution = 0.0 --both leaning away from each other
					elseif cr1 == "CW" and cr2 == "CW" then cantContribution = 2.3 * math.max(0,c2-c1) --both leaning to the right
					elseif cr1 == "CCW" and cr2 == "CCW" then cantContribution = 2.3 * math.max(0,c1-c2) --both leaning to the left
					elseif cr1 == "CCW" and cr2 == "CW" then cantContribution = 2.3 * (c1+c2) --both leaning towards each other
					else return 99.0 --error
					end
				end

				return curveContribution + cantContribution
			end
		</Formula>
 </LuaFunction>
 <PositionToolSettings Name="NOBN_PositionToolSettings">
  <PositionToolTextLines>
   <OwnAlignmentNameOrCodeOrId OrderPriority="30" PositionToolFormatLuaFunctionName="NOBN_trk_PositionTransient_Set_Alignment_Own"/>
   <ReferenceAlignmentNameOrCodeOrId OrderPriority="29" PositionToolFormatLuaFunctionName="NOBN_trk_PositionTransient_Set_Alignment_Ref"/>
   <OwnAlignmentDistanceToAlignment OrderPriority="20" PositionToolFormatLuaFunctionName="NOBN_trk_PositionTransient_Set_Distance_Own"/>
   <OwnAlignmentOffset OrderPriority="19" PositionToolFormatLuaFunctionName="NOBN_trk_PositionTransient_Set_Offset_Own"/>
   <OwnAlignmentElevation OrderPriority="3" PositionToolFormatLuaFunctionName="NOBN_trk_PositionTransient_Set_Elevation_Own"/>
   <OwnAlignmentMileage OrderPriority="2" PositionToolFormatLuaFunctionName="NOBN_trk_PositionTransient_Set_Mileage_Own"/>
   <OwnAlignmentPos OrderPriority="1" PositionToolFormatLuaFunctionName="NOBN_trk_PositionTransient_Set_Pos_Own"/>
   <ReferenceAlignmentOffset OrderPriority="19" PositionToolFormatLuaFunctionName="NOBN_trk_PositionTransient_Set_Offset_Ref"/>
   <ReferenceAlignmentElevation OrderPriority="3" PositionToolFormatLuaFunctionName="NOBN_trk_PositionTransient_Set_Elevation_Ref"/>
   <ReferenceAlignmentMileage OrderPriority="2" PositionToolFormatLuaFunctionName="NOBN_trk_PositionTransient_Set_Mileage_Ref"/>
   <ReferenceAlignmentPos OrderPriority="1" PositionToolFormatLuaFunctionName="NOBN_trk_PositionTransient_Set_Pos_Ref"/>
  </PositionToolTextLines>
 </PositionToolSettings>
 <LuaFunction Name="NOBN_trk_PositionTransient_Set_Alignment_Own()" ReturnType="String" HideFromUser="false" Description="Returns a formatted string containing the current own alignment and the mileage increase direction, to be displayed by the position tool. When RC uses the function, then RC provides the required input 'positionToolInfo' which contains 'OwnAlignment' [AlignmentReferece] which is the current Own Alignment picked up by the CAD cursor, plus 'MileageIncreasesTowardsLeft' [Boolean] which tells whether the own alignment's Mileage Increases Towards Left as viewed on the user's computer screen. Note: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Alignment_Own'.">
  <Signature>String NOBN_trk_PositionTransient_Set_Alignment_Own(PositionToolInfo positionToolInfo)</Signature>
  <Formula>
		function NOBN_trk_PositionTransient_Set_Alignment_Own(positionToolInfo)
			local oa = RC__identify(positionToolInfo.OwnAlignment)
			if positionToolInfo.OwnMileageIncreasesTowardsLeft then 
				return "Own: &lt;&lt;&lt; "..oa --prefix own alignment with left angle bracket
			else
				return "Own: "..oa.." &gt;&gt;&gt;" --postfix own alignment with right angle brackets
			end
		end
	</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_PositionTransient_Set_Alignment_Ref()" ReturnType="String" HideFromUser="false" Description="Returns a formatted string containing the current reference alignment and the mileage increase direction, to be displayed by the position tool. When RC uses the function, then RC provides the required input 'positionToolInfo' which contains 'RefAlignment' [AlignmentReferece] which is the current Reference Alignment picked up by the CAD cursor, plus 'MileageIncreasesTowardsLeft' [Boolean] which tells whether the reference alignment's Mileage Increases Towards Left as viewed on the user's computer screen. Note: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Alignment_Ref'.">
  <Signature>String NOBN_trk_PositionTransient_Set_Alignment_Ref(PositionToolInfo positionToolInfo)</Signature>
  <Formula>
		function NOBN_trk_PositionTransient_Set_Alignment_Ref(positionToolInfo)
			local ra = RC__identify(positionToolInfo.RefAlignment)
			if positionToolInfo.RefMileageIncreasesTowardsLeft then 
				return "Ref: &lt;&lt;&lt; "..ra --prefix reference alignment with left angle bracket
			else
				return "Ref:  "..ra.." &gt;&gt;&gt;" --postfix reference alignment with right angle brackets
			end
		end
	</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_PositionTransient_Set_Distance_Own()" ReturnType="String" HideFromUser="false" Description="Returns a formatted string containing the current CAD cursor's distance to own alignment, to be displayed by the position tool. When RC uses the function, then RC provides the required input 'positionToolInfo' which contains 'Value' [Double] [m] which is the horizontal Distance (lateral offset) from the CAD cursor to the current Own alignment. Note: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Distance_Own'.">
  <Signature>String NOBN_trk_PositionTransient_Set_Distance_Own(PositionToolInfo positionToolInfo)</Signature>
  <Formula>
		function NOBN_trk_PositionTransient_Set_Distance_Own(positionToolInfo)
			local od = positionToolInfo.Value
			return string.format("Own/Distance %.03f",od)
		end 
	</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_PositionTransient_Set_Distance_Ref()" ReturnType="String" HideFromUser="false" Description="Returns a formatted string containing the current CAD cursor's distance to the current reference alignment, to be displayed by the position tool. When RC uses the function, then RC provides the required input 'positionToolInfo' which contains 'Value' [Double] [m] which is the horizontal Distance (lateral offset) from the CAD cursor to the current Reference alignment. Note: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Distance_Own'.">
  <Signature>String NOBN_trk_PositionTransient_Set_Distance_Ref(PositionToolInfo positionToolInfo)</Signature>
  <Formula>
		function NOBN_trk_PositionTransient_Set_Distance_Ref(positionToolInfo)
			local rd = positionToolInfo.Value
			return string.format("Ref/Distance %.03f",rd)
		end 
	</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_PositionTransient_Set_Elevation_Own()" ReturnType="String" HideFromUser="false" Description="Returns a formatted string containing the current CAD cursor's elevation as measured in own alignment, to be displayed by the position tool. When RC uses the function, then RC provides the required input 'positionToolInfo' which contains 'Value' [Double] [m] which is the Elevation (vertical profile Z value) measured in Own alignment where the CAD cursor's projection is. Note: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Elevation_Own'.">
  <Signature>String NOBN_trk_PositionTransient_Set_Elevation_Own(PositionToolInfo positionToolInfo)</Signature>
  <Formula>
		function NOBN_trk_PositionTransient_Set_Elevation_Own(positionToolInfo)
			local oe = positionToolInfo.Value
			return oe and string.format("Own/Elevation %.03f",oe) or "Own/Elevation (no data)"
		end
	</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_PositionTransient_Set_Elevation_Ref()" ReturnType="String" HideFromUser="false" Description="Returns a formatted string containing the current CAD cursor's elevation as measured in the current reference alignment, to be displayed by the position tool. When RC uses the function, then RC provides the required input 'positionToolInfo' which contains 'Value' [Double] which is the Elevation (vertical profile Z value) measured in Reference alignment where the CAD cursor's projection is. Note: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Elevation_Ref'.">
  <Signature>String NOBN_trk_PositionTransient_Set_Elevation_Ref(PositionToolInfo positionToolInfo)</Signature>
  <Formula>
		function NOBN_trk_PositionTransient_Set_Elevation_Ref(positionToolInfo)
			local re = positionToolInfo.Value
			return re and string.format("Ref/Elevation %.03f",re) or  "Ref/Elevation (no data)"
		end
	</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_PositionTransient_Set_Mileage_Own()" ReturnType="String" HideFromUser="false" Description="Returns a formatted string containing the current CAD cursor's chainage (mileage, kilometrage) as measured along own alignment, to be displayed by the position tool. The own mileage is the result of an initial start mileage plus the distance along measured from start of alignmment up to the cursor's projection onto it, adjusted by possible chain breaks along the own alignment. Mileage information can be inspected and adjusted from the Alignment Manager tool. When RC uses the function, then RC provides the required input 'positionToolInfo' which contains 'Value' [Double] [m] which is the mileage measured along the Own alignment where the CAD cursor's projection is. Note: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Mileage_Own'.">
  <Signature>String NOBN_trk_PositionTransient_Set_Mileage_Own(PositionToolInfo positionToolInfo)</Signature>
  <Formula>
		function NOBN_trk_PositionTransient_Set_Mileage_Own(positionToolInfo)
			local om = positionToolInfo.Value
			return string.format("Own/Profile(abs) %.06f km",om/1000)
		end
	</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_PositionTransient_Set_Mileage_Ref()" ReturnType="String" HideFromUser="false" Description="Returns a formatted string containing the current CAD cursor's chainage (mileage, kilometrage) as measured along the current reference alignment, to be displayed by the position tool. The reference mileage is the result of an initial start mileage plus the distance along measured from start of the reference alignmment up to the cursor's projection onto it, adjusted by possible chain breaks along the reference alignment. Mileage information can be inspected and adjusted from the Alignment Manager tool. When RC uses the function, then RC provides the required input 'positionToolInfo' which contains 'Value' [Double] [m] which is the mileage measured along the Reference alignment where the CAD cursor's projection is. Note: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Mileage_Ref'.">
  <Signature>String NOBN_trk_PositionTransient_Set_Mileage_Ref(PositionToolInfo positionToolInfo)</Signature>
  <Formula>
		function NOBN_trk_PositionTransient_Set_Mileage_Ref(positionToolInfo)
			local rm = positionToolInfo.Value
			return string.format("Ref/Km(abs) %.06f km",rm/1000)
			--TODO:Remove this absolute address presentation (uses comma) if or when relative is made possible (uses plus-sign).
			--TODO: Adapt a *relative* address presentation when mileage referents have been added to RC:
			--return string.format("Km.%s+%05.01f",closestPrecedingReferentName,distanceInRefAlignmentToClosestPrecedingReferentPlusItsStationValue)
		end
	</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_PositionTransient_Set_Pos_Own()" ReturnType="String" HideFromUser="false" Description="Returns a formatted string containing the current CAD cursor's reference alignment's DistanceAlong as measured along the current reference alignment, to be displayed by the position tool. The Reference Pos is the distance along the centreline of the reference alignment's horizontal geometry, measured from start position '0' of the reference alignmment up to the cursor's projection onto the horizontal geometry, unaffected by possible chain breaks. Position information can be inspected and adjusted from the Alignment Manager tool. When RC uses the function, then RC provides the required input 'positionToolInfo' which contains 'Value' [Double] [m] which is the Pos measured along the Reference alignment where the CAD cursor's projection is. Note: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Pos_Ref'.">
  <Signature>String NOBN_trk_PositionTransient_Set_Pos_Own(PositionToolInfo positionToolInfo)</Signature>
  <Formula>
		function NOBN_trk_PositionTransient_Set_Pos_Own(positionToolInfo)
			local op = positionToolInfo.Value
			return string.format("Own/Pos %.03f m",op)
		end
	</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_PositionTransient_Set_Pos_Ref()" ReturnType="String" HideFromUser="false" Description="Returns a formatted string containing the current CAD cursor's reference alignment's DistanceAlong as measured along the current reference alignment, to be displayed by the position tool. The Reference Pos is the distance along the centreline of the reference alignment's horizontal geometry, measured from startPos=0 of the reference alignmment up to the cursor's projection onto it, unaffected by possible chain breaks. Position information can be inspected and adjusted from the Alignment Manager tool. When RC uses the function, then RC provides the required input 'positionToolInfo' which contains 'Value' [Double] [m] which is the Pos measured along the Reference alignment where the CAD cursor's projection is. Note: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Pos_Ref'.">
  <Signature>String NOBN_trk_PositionTransient_Set_Pos_Ref(PositionToolInfo positionToolInfo)</Signature>
  <Formula>
		function NOBN_trk_PositionTransient_Set_Pos_Ref(positionToolInfo)
			local rp = positionToolInfo.Value
			return string.format("Ref/Pos %.03f m",rp)
		end
	</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_chkNumberOfOcpAreas()" ReturnType="String" Description="Model check assessing the number of (visible) Operation / Control Point (OCP) areas that the object belongs to.">
  <Signature>String NOBN_com_chkNumberOfOcpAreas()</Signature>
  <Formula>
			function NOBN_com_chkNumberOfOcpAreas()
				local areas = RcArea:filter(function(x) return x.RcType == rctype_OcpArea end)
				if (areas.Count == 0) then
					return "0: UNFINISHED - Object does not belong to any Operation / Control area (OCP). Create an Rc-Area of type 'OCP' around the object."
					-- NB: Just return a text, then leave it to the object's setSymbolFrame formula to define whether an '_unfinished' frame should be shown or not.
				elseif (areas.Count == 1) then 
					return _ok, areas[0].code..": OK - Object belongs to just one Operation / Control (OCP) area."
				else 
					return _warning, areas.Count..": WARNING - Object belongs to several Operation / Control (OCP) areas."
				end
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_triggerNeighbourObjectModelchecks()" ReturnType="String" Description="Triggers modelchecking in all neighbour objects of the specified object type.">
  <Signature>NOBN_com_triggerNeighbourObjectModelchecks(String objectType)</Signature>
  <Formula>
			function NOBN_com_triggerNeighbourObjectModelchecks(objectType)
				if type(objectType) ~= "string" then
					return 0,{}, _info("ERROR - Bad object type '"..objectType.."'.")
				end
				if Alignment == nil then
					--Cannot do graph search without alignments:
					return 0,{}, _info("UNFINISHED - Missing own alignment.")
				end
				local prev = getDownObjectsWithPaths(objectType)
				local succ = getUpObjectsWithPaths(objectType)
				local all = getUnionOfCollections({prev,succ}) --all is now a collection of tuples {Object,Path}
				local n = getCollectionLength(all)
				local t = {}
				for i = 0,n-1 do
					table.insert(t,all[i].Object)
				end
				return n,t, _info(n.." items of "..objectType.." have been modelchecked.")
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_chkDistanceToClosestNeighbour()" ReturnType="String" Description="Checks distance to the closest neighbouring object of the specified object type in the specified search direction [ up | down ]. Error if below the specified error threshold, warning if below the specified warning threshold.">
  <Signature>String NOBN_com_chkDistanceToClosestNeighbour(String objectType, Double errorThreshold, Double warningThreshold, Dir searchDir)</Signature>
  <Formula>
			function NOBN_com_chkDistanceToClosestNeighbour(objectType,errorThreshold,warningThreshold,searchDir)
				if searchDir ~= "up" and searchDir ~= "down" then
					return "ERROR - Bad search direction '"..searchDir.."' - must be either 'up' or 'down'.",_error
				end
				if type(errorThreshold) ~= "number" or type(warningThreshold) ~= "number" or errorThreshold &lt; 0 or warningThreshold &lt;= errorThreshold then
					return "ERROR - Thresholds must be numbers such that 0 &lt; errorThreshold &lt; warningThreshold.",_error
				end
				if type(objectType) ~= "string" then
					return "ERROR - Object type must be a string containing the object type's 'RcType' property.",_error
				end
				if Alignment == nil then
					return "UNFINISHED - Missing own alignment.",_error
				end
				local closest = (searchDir == "down") and getDownObject(objectType) or getUpObject(objectType)
				if closest == nil then
					return "OK - No "..objectType:sub(10).." within reach in the '"..searchDir.."' direction.",_ok
				end
				local dist = getDistance(closest)
				local t = string.format("%.3f", dist)
				if dist &lt; errorThreshold then 
					return string.format("%.03f: ERROR - %s '%s' too close in '%s' direction, outside tolerance %0.3f m.",
						dist,objectType:sub(10),RC__identify(closest),searchDir,errorThreshold),_error
				elseif dist &lt; warningThreshold then 
					return string.format("%.03f: WARNING - %s '%s' close in '%s' direction, but within tolerance %0.3f m.",
						dist,objectType:sub(10),RC__identify(closest),searchDir,errorThreshold),_warning
				else
					return string.format("%.03f: OK - %s '%s' is nearest in '%s' direction, farther away than tolerance %0.3f m.",
						dist,objectType:sub(10),RC__identify(closest),searchDir,errorThreshold),_ok
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_chkConnectionAlignmentCompatibility()" ReturnType="String" Description="Checks that own alignment type and target alignment type are compatible at a connection.">
  <Signature>String NOBN_com_chkConnectionAlignmentCompatibility()</Signature>
  <Formula>
			function NOBN_com_chkConnectionAlignmentCompatibility()
				if Alignment == nil then
					return "UNFINISHED - Missing own alignment."
				end
				if RcType == rctype_OcsIsolator then
					local compatibility = { 
						{ a="Kontaktledning, avspenningsline", ta={"Kontaktledning, kjørbar", "Kontaktledning, ikke kjørbar", "Kontaktledning, avspenningsline", "-"}},
						{ a="Kontaktledning, kjørbar", ta={"Kontaktledning, avspenningsline"}},
						{ a="Kontaktledning, ikke kjørbar", ta={"Kontaktledning, avspenningsline"}},
						{ a="Fixline", ta={"Fixline","-"}},
						{ a="Bardun", ta={"Bardun","-"}}
					}
					local v1 = Alignment.Variant
					local v2 = TargetAlignment and TargetAlignment.Variant or "-"
					for i = 1,5 do
						if compatibility[i].a == v1 then
							if RC__isMemberOf(compatibility[i].ta,v2) then
								return v1.."/"..v2..": OK - Alignment types and variants are compatible ",_ok
							end
						end
					end
					return v1.."/"..v2..": ERROR - Incompatible adjacent alignment types / variants.",_error
				else
					if TargetAlignment == nil then return "UNFINISHED - Missing target alignment." end
					if TargetAlignment and Alignment.id == TargetAlignment.id then 
						return Alignment.RcType.."/"..TargetAlignment.RcType..": ERROR - Target alignment object cannot be the same as own alignment object.",_error
					end
					if TargetAlignment.RcType ~= Alignment.RcType then
						return Alignment.RcType.."/"..TargetAlignment.RcType..": ERROR - Target alignment type must be same as own alignment type ("..Alignment.RcType..").",_error
					else
						return Alignment.RcType.."/"..TargetAlignment.RcType..": OK - Alignment types are compatible.",_ok
					end
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_com_chkConnectionContinuity()" ReturnType="String" Description="Checks that alignments are well-positioned where they meet (in the XY-plane).">
  <Signature>String NOBN_com_chkConnectionContinuity()</Signature>
  <Formula>
			function NOBN_com_chkConnectionContinuity()
				local tol = 0.030 -- meter
				if Alignment == nil then
					return "UNFINISHED - Missing own alignment."
				end
				if RcType ~= rctype_OcsIsolator and TargetAlignment == nil then
					return "UNFINISHED - Missing target alignment."
				end

				local delta

				if RcType == rctype_OcsIsolator then 
					if TargetAlignment == nil then
						return "-: OK – Object does not act as a connection (being too far from any potential target alignment).",_ok
					elseif TargetAlignment and Alignment.id == TargetAlignment.id then 
						return "-: OK - This object type accepts that target alignment is same as own alignment.",_ok
					else
						local p1, p2
						if ExtendingFromEnd then 
							p1 = Alignment.RcAlignment.EndPoint
						else
							p1 = Alignment.RcAlignment.StartPoint
						end 
						if ContinuingWithBegin then
							p2 = TargetAlignment.RcAlignment.StartPoint
						else 
							p2 = TargetAlignment.RcAlignment.EndPoint
						end
						delta = RC__getDistance2D(p1,p2)
					end

				elseif RcType == rctype_TrackContinuation or RcType == rctype_HighVoltageConductorContinuation or RcType == rctype_ContactWireContinuation then
					local p1, p2
					if ExtendingFromEnd then 
						p1 = Alignment.RcAlignment.EndPoint
					else
						p1 = Alignment.RcAlignment.StartPoint
					end 
					if ContinuingWithBegin then
						p2 = TargetAlignment.RcAlignment.StartPoint
					else 
						p2 = TargetAlignment.RcAlignment.EndPoint
					end
					delta = RC__getDistance2D(p1,p2)

				elseif RcType == rctype_Switch then
					if not getAlignmentInfo().NormalProjectionExists then
						return Alignment.code..": WARNING - Connection object has no projection onto its own alignment (cannot compute mileage).",_warning
					end
					local p1 = getAlignmentInfo().Point --Projection of stock rail joint onto own alignment (2D)
					local d1 = RC__getDistance2D(p1,TargetAlignment.RcAlignment.StartPoint)
					local d2 = RC__getDistance2D(p1,TargetAlignment.RcAlignment.EndPoint)
					delta = d1 &lt; d2 and d1 or d2

				elseif RcType == rctype_SwitchCrossing then
					-- Check that both alignments pass, i.e. none of them should have a continuation exactly at the crossing's position
					if not getAlignmentInfo(Alignment.id).NormalProjectionExists then
						return "ERROR: Crossing is outside Own Alignment - move crossing or extend own alignment.",_error
					elseif not getAlignmentInfo(TargetAlignment.id).NormalProjectionExists then
						return "ERROR: Crossing is outside Target Alignment - move crossing or extend target alignment.",_error
					else
						delta = RC__getDistance2D(getAlignmentInfo().Point:getAlignmentInfo(TargetAlignment.id).Point) --p projection (in XY-plane) onto both alignments
						if (delta &lt; tol/2) then
							return string.format("%.03f",delta) .. ": OK – Crossing is close to both alignments where they cross, within 50% of tolerance " .. string.format("%.03f", tol).." m.",_ok
						elseif (delta &lt; tol) then
							return string.format("%.03f",delta) .. ": WARNING – Crossing should be moved closer to where alignments cross, but is still within tolerance " .. string.format("%.03f", tol).." m.",_warning
						else
							return string.format("%.03f",delta) .. ": ERRROR – Crossing is placed too far away from where alignments cross, outside tolerance " .. string.format("%.03f", tol).." m.",_error
						end
					end

				else
					return RcType..": ERROR - Bad connection object type",_error
				end
				
				if (delta &lt; tol/2) then
					return string.format("%.03f",delta) .. ": OK – Alignments meet at connection within 50% of tolerance " .. string.format("%.03f", tol).." m.",_ok
				elseif (delta &lt; tol) then
					return string.format("%.03f",delta) .. ": WARNING – Alignments should be closer at connection, but are still within tolerance " .. string.format("%.03f", tol).." m.",_warning
				else
					return string.format("%.03f",delta) .. ": ERROR: Alignments are too far apart at connection, outside tolerance " .. string.format("%.03f", tol).." m.",_error end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_chkConnectionTangentMatch()" ReturnType="String" Description="Checks that alignment tangents (directions) match where they meet (in the XY-plane).">
  <Signature>String NOBN_trk_chkConnectionTangentMatch()</Signature>
  <Formula>
			function NOBN_trk_chkConnectionTangentMatch()
				local tol = 1.0  -- decimal degrees (Deutsche Bahn allegedly allows 1 degree in discontinuities)
				local maxNumber = 20 -- 2:(maxNumber*2) is the steepest crossing that we will classify as a crossing and not as an engineering error
				if Alignment == nil then
					return "UNFINISHED - Missing own alignment."
				end
				if RcType ~= rctype_OcsIsolator and TargetAlignment == nil then
					return "UNFINISHED - Missing target alignment."
				end

				local delta, crossingNumber

				if RcType == rctype_OcsIsolator and TargetAlignment == nil then
					return "-: OK – Object does not act as a connection (being too far from any potential target alignment).",_ok
			
				elseif RcType == rctype_TrackContinuation 
				or RcType == rctype_HighVoltageConductorContinuation 
				or RcType == rctype_ContactWireContinuation 
				or RcType == rctype_OcsIsolator
				then
					local t1, t2
					if ExtendingFromEnd then 
						t1 = math.deg(Alignment.RcAlignment.HorizontalGeometry.EndDir)
					else
						t1 = math.deg(Alignment.RcAlignment.HorizontalGeometry.Segments[0].StartDir)
					end 
					if ContinuingWithBegin then
						t2 = math.deg(TargetAlignment.RcAlignment.HorizontalGeometry.Segments[0].StartDir)
					else
						t2 = math.deg(TargetAlignment.RcAlignment.HorizontalGeometry.EndDir)
					end
					delta = ((90 + t2 - t1) % 180) - 90 --decimal degrees difference (alignments may be counterdirected)
					if (math.abs(delta) &lt; tol / 2) then
						return string.format("%.03f",delta) .. ": OK - Tangents match within 50% of tolerance +/- " .. string.format("%.03f", tol).." degrees.",_ok
					elseif (math.abs(delta) &lt; tol) then
						return string.format("%.03f",delta) .. ": WARNING – Tangents match, but close to tolerance +/- " ..
							string.format("%.03f", tol).." degrees.",_warning
					else
						return string.format("%.03f",delta) .. ": ERROR – Tangents are too different, outside tolerance +/- " .. string.format("%.03f", tol).." degrees.",_error
					end
			
				elseif RcType == rctype_Switch then
					if not getAlignmentInfo().NormalProjectionExists then
						return Alignment.code..": WARNING - Connection object has no projection onto its own alignment (cannot compute mileage).",_warning
					end
					local p1 = getAlignmentInfo().Point --Projection of stock rail joint onto own alignment (2D)
					local d1 = RC__getDistance2D(p1,TargetAlignment.RcAlignment.StartPoint)
					local d2 = RC__getDistance2D(p1,TargetAlignment.RcAlignment.EndPoint)
					local t1 = math.deg(math.atan(getAlignmentInfo().Tangent.Y, getAlignmentInfo().Tangent.X)) -- Can disregard Tangent.Z here, since only relative zize Y:X matters
					local t2
					if d1 &lt; d2 then
						t2 = math.deg(TargetAlignment.RcAlignment.HorizontalGeometry.StartDir)
					else
						t2 = math.deg(TargetAlignment.RcAlignment.HorizontalGeometry.EndDir)
					end
					delta = ((90 + t2 - t1) % 180) - 90 --decimal degrees difference (alignments may be counterdirected)
					if (math.abs(delta) &lt; tol / 2) then
						return string.format("%.03f",delta) .. ": OK - Tangents match within 50% of tolerance +/- " .. string.format("%.03f", tol).." degrees.",_ok
					elseif (math.abs(delta) &lt; tol) then
						return string.format("%.03f",delta) .. ": WARNING – Tangents match, but close to tolerance +/- " ..
							string.format("%.03f", tol).." degrees.",_warning
					else
						return string.format("%.03f",delta) .. ": ERROR – Tangents are too different, outside tolerance +/- " .. string.format("%.03f", tol).." degrees.",_error
					end
			
				elseif RcType == rctype_SwitchCrossing then
					if not getAlignmentInfo().NormalProjectionExists then
						return Alignment.code..": WARNING - Connection object has no projection onto its own alignment (cannot compute mileage).",_warning
					end
					if not getAlignmentInfo(TargetAlignment.id).NormalProjectionExists then
						return TargetAlignment.code..": WARNING - Connection object has no projection onto its target alignment (cannot compute mileage).",_warning
					end
					-- Can disregard Tangent.Z here, since only relative size Y:X matters:
					local t1 = math.atan(getAlignmentInfo().Tangent.Y, getAlignmentInfo().Tangent.X) * (180/math.pi)
					local t2 = math.deg(math.atan(getAlignmentInfo(TargetAlignment.id).Tangent.Y, getAlignmentInfo(TargetAlignment.id).Tangent.X))
			
					local x_1_9 = math.deg(math.atan(1/9)) -- Single or double slip 1:9 point
					local x_1_12 = math.deg(math.atan(1/12)) -- Single or double slip 1:12 point
					local x_2_9 = 2*math.deg(math.atan(1/9)) -- Crossing between four 1:9 switches in parallel tracks
					local x_2_12 = 2*math.deg(math.atan(1/12)) -- Crossing between four 1:12 switches in parallel tracks
			
					delta = math.abs(((90 + t2 - t1) % 180) - 90) --decimal degrees difference (alignments may be counterdirected)
					local d_1_9 = delta - x_1_9
					local d_1_12 = delta - x_1_12
					local d_2_9 = delta - x_2_9
					local d_2_12 = delta - x_2_12
					crossingNumber = 1/math.tan(math.abs(math.rad(delta))) --Add the angles between each track to the centerline between the tracks
				
					-- If angle is close to 1:9 or 1:12 then the crossing is probably part of an Englishman (EKW, DKW), and not a crossing:
					if math.abs(d_1_12) &lt; tol then 
						if math.abs(d_1_12) &lt; (tol / 2) then 
							return string.format("%.03f (1:%.03f): OK - Crossing tangents match 1:12 within 50%% of tolerance +/- %.03f degrees.", 
								d_1_12, 1/math.tan(math.rad(delta)), tol),_ok
						else 
							return string.format("%.03f (1:%.03f): WARNING – Crossing tangents match 1:12, but close to tolerance +/- %.03f degrees.", 
								d_1_12, 1/math.tan(math.rad(delta)), tol),_warning
						end
					elseif math.abs(d_1_9) &lt; tol then 
						if math.abs(d_1_9) &lt; (tol / 2) then 
							return string.format("%.03f (1:%.03f): OK - Crossing tangents match 1:9 within 50%% of tolerance +/- %.03f degrees.",
								d_1_9, 1/math.tan(math.rad(delta)), tol),_ok
						else 
							return string.format("%.03f (1:%.03f): WARNING – Crossing tangents match 1:9, but close to tolerance +/- %.03f degrees.",
								d_1_9, 1/math.tan(math.rad(delta)), tol),_warning
						end
			
					-- A standard crossing matches two symmetrical pairs of 1:9 or 1:12 switches (here called '2_9' and '2_12'):
					elseif math.abs(d_2_12) &lt; tol then 
						if math.abs(d_2_12) &lt; (tol / 2) then 
							return string.format("%.03f (2:%.03f): OK - Crossing tangents match 2:12 within 50%% of tolerance +/- %.03f degrees.", 
								d_2_12, 1/math.tan(math.rad(delta/2)), tol),_ok
						else
							return string.format("%.03f (2:%.03f): WARNING – Crossing tangents match 2:12, but close to tolerance +/- %.03f degrees.", 
								d_2_12, 1/math.tan(math.rad(delta/2)), tol),_warning
						end
					elseif math.abs(d_2_9) &lt; tol then 
						if math.abs(d_2_9) &lt; (tol / 2) then 
							return string.format("%.03f (2:%.03f): OK - Crossing tangents match 2:9 within 50%% of tolerance +/- %.03f degrees.",
								d_2_9, 1/math.tan(math.rad(delta/2)), tol),_ok
						else 
							return string.format("%.03f (2:%.03f): WARNING – Crossing tangents match 2:9, but close to tolerance +/- %.03f degrees.",
								d_2_9, 1/math.tan(math.rad(delta/2)), tol),_warning
						end
			
					elseif crossingNumber &gt;= maxNumber then 
						return string.format("%.03f (1:%.01f): ERROR - Crossing tangents are close to being parallel, check for engineering or measurement errors.",
							delta, crossingNumber),_error
			
					else
						return string.format("%.03f (1:%.01f): WARNING – Crossing tangents do not fit 1:9, 1:12, 2:9 or 2:12 (single slip / double slip / 4 switches) within tolerance %.03f degrees", 
							delta, 1/(2*math.tan(math.rad(delta/2))), tol),_warning
					end
				
				else 
					return RcType..": ERROR - Bad connection object type",_error
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_chkConnectionElevationMatch()" ReturnType="String" Description="Checks that alignment elevations (Z-coordinate) match at the connection.">
  <Signature>String NOBN_trk_chkConnectionElevationMatch()</Signature>
  <Formula>
			function NOBN_trk_chkConnectionElevationMatch()
				local tol = 0.030  -- meter
				if Alignment == nil then
					return "UNFINISHED - Missing own alignment."
				end
				if RcType ~= rctype_OcsIsolator and TargetAlignment == nil then
					return "UNFINISHED - Missing target alignment."
				end

				local delta, z1, z2

				if RcType == rctype_OcsIsolator and TargetAlignment == nil then
					return "-: OK – Object does not act as a connection (being too far from any potential target alignment).",_ok
			
				elseif RcType == rctype_TrackContinuation 
				or RcType == rctype_HighVoltageConductorContinuation 
				or RcType == rctype_ContactWireContinuation 
				or RcType == rctype_OcsIsolator
				then
					if ExtendingFromEnd then 
						z1 = Alignment.RcAlignment.EndPoint.Z
					else
						z1 = Alignment.RcAlignment.StartPoint.Z
					end 
					if ContinuingWithBegin then
						z2 = TargetAlignment.RcAlignment.StartPoint.Z
					else 
						z2 = TargetAlignment.RcAlignment.EndPoint.Z
					end
					delta = z2 - z1 -- meter difference in elevations at connection
			
				elseif RcType == rctype_Switch then
					if not getAlignmentInfo().NormalProjectionExists then
						return Alignment.code..": WARNING - Connection object has no projection onto its own alignment (cannot compute mileage).",_warning
					end
					local p1 = getAlignmentInfo().Point		--The projection of the StockRailJoint onto its own alignment
					local d1 = RC__getDistance2D(TargetAlignment.RcAlignment.StartPoint,p1)
					local d2 = RC__getDistance2D(TargetAlignment.RcAlignment.EndPoint,p1)
					z1 = p1.Z 							--TopOfRail where StockRailJoint is projected onto own alignment
					if d1 &lt; d2 then
						z2 = TargetAlignment.RcAlignment.StartPoint.Z
					else
						z2 = TargetAlignment.RcAlignment.EndPoint.Z
					end
			
				elseif RcType == rctype_SwitchCrossing then
					if not getAlignmentInfo().NormalProjectionExists then
						return Alignment.code..": WARNING - Connection object has no projection onto its own alignment (cannot compute mileage).",_warning
					end
					if not getAlignmentInfo(TargetAlignment.id).NormalProjectionExists then
						return TargetAlignment.code..": WARNING - Connection object has no projection onto its target alignment (cannot compute mileage).",_warning
					end
					z1 = getAlignmentInfo().Elevation
					z2 = getAlignmentInfo(TargetAlignment.id).Elevation
				
				else 
					return RcType..": ERROR - Bad connection object type",_error
				end
				if RC__isNan(z1) then z1 = 0 end
				if RC__isNan(z2) then z2 = 0 end
				delta = z2 - z1 -- meter difference in elevations at connection
				if (math.abs(delta) &lt; tol / 2) then
					return string.format("%.03f (%.03f / %.03f)",delta,z1,z2) .. ": OK - Elevations match within 50% of tolerance +/- " .. string.format("%.03f", tol).." m.",_ok
				elseif (math.abs(delta) &lt; tol) then
					return string.format("%.03f (%.03f / %.03f)",delta,z1,z2) .. ": WARNING – Elevations match, but close to tolerance +/- " .. string.format("%.03f", tol).." m.",_warning
				else
					return string.format("%.03f (%.03f / %.03f)",delta,z1,z2) .. ": ERROR – Elevations are too different, outside tolerance +/- " .. string.format("%.03f", tol).." m.",_error
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_chkConnectionGradientMatch()" ReturnType="String" Description="Checks the continuity of gradient through the connection.">
  <Signature>NOBN_trk_chkConnectionGradientMatch()</Signature>
  <Formula>
			function NOBN_trk_chkConnectionGradientMatch()
				local tol = 1.0  -- o/oo (per mille, elevation change per thousand meters running length)
				if Alignment == nil then
					return "UNFINISHED - Missing own alignment."
				end
				if RcType ~= rctype_OcsIsolator and TargetAlignment == nil then
					return "UNFINISHED - Missing target alignment."
				end

				local t, t1, t2, g1, g2, p1, delta

				if RcType == rctype_OcsIsolator and TargetAlignment == nil then
						return "-: OK – Object does not act as a connection (being too far from any potential target alignment).",_ok
			
				elseif RcType == rctype_TrackContinuation 
				or RcType == rctype_HighVoltageConductorContinuation 
				or RcType == rctype_ContactWireContinuation 
				or RcType == rctype_OcsIsolator
				then
					--find gradient in o/oo from the tangent vector at the alignment's ends, where there ends are closest
					if ExtendingFromEnd then 
						t = Alignment.RcAlignment.EndTangent
						g1 = 1000*math.atan(t.Z, math.sqrt(t.X^2 + t.Y^2))
						t1 = math.deg(Alignment.RcAlignment.HorizontalProfile.EndDir)
					else
						t = Alignment.RcAlignment.StartTangent
						g1 = 1000*math.atan(t.Z, math.sqrt(t.X^2 + t.Y^2))
						t1 = math.deg(Alignment.RcAlignment.HorizontalProfile.Segments[0].StartDir)
					end 
					if ContinuingWithBegin then
						t = TargetAlignment.RcAlignment.StartTangent
						g2 = 1000*math.atan(t.Z, math.sqrt(t.X^2 + t.Y^2))
						t2 = math.deg(TargetAlignment.RcAlignment.HorizontalProfile.Segments[0].StartDir)
					else 
						t = TargetAlignment.RcAlignment.EndTangent
						g2 = 1000*math.atan(t.Z, math.sqrt(t.X^2 + t.Y^2))
						t2 = math.deg(TargetAlignment.RcAlignment.HorizontalProfile.EndDir)
					end
			
				elseif RcType == rctype_Switch then
					if not getAlignmentInfo().NormalProjectionExists then
						return Alignment.code..": WARNING - Connection object has no projection onto its own alignment (cannot compute mileage).",_warning
					end
			
					--Own alignment's gradient and direction at stock rail joint:
					t = getAlignmentInfo().Tangent
					g1 = 1000*math.atan(t.Z, math.sqrt(t.X^2 + t.Y^2))
					t1 = math.deg(math.atan(t.Y,t.X))
			
					--Target alignment's gradient and direction where branch track takes off from own alignment:
					p1 = getAlignmentInfo().Point --The projection of the StockRailJoint onto its own alignment
					d1 = RC__getDistance2D(TargetAlignment.RcAlignment.StartPoint,p1)
					d2 = RC__getDistance2D(TargetAlignment.RcAlignment.EndPoint,p1)
					if d1 &lt; d2 then
						t = TargetAlignment.RcAlignment.StartTangent
						g2 = 1000 * math.atan(t.Z, math.sqrt(t.X^2 + t.Y^2))
						t2 = math.deg(math.atan(t.Y, t.X))
					else
						t = TargetAlignment.RcAlignment.EndTangent
						g2 = 1000 * math.atan(t.Z, math.sqrt(t.X^2 + t.Y^2))
						t2 = math.deg(math.atan(t.Y, t.X))
					end
			
				else 
					return RcType.." : ERROR - Incorrect connection object type.",_error
				end
			
				-- Return o/oo difference in gradients at connection:
				if math.cos(math.rad(t2-t1)) &lt; 0 then
					-- Opposite mileage directions, let alignment 1 (the own alignment for the switch) be the leading direction:
					g2 = (-g2)
				end
				delta = g2 - g1
				if (math.abs(delta) &lt; tol / 2) then
					return string.format("%.03f (%.03f / %.03f)",delta,g1,g2) .. ": OK - Gradients match within 50% of tolerance +/- " .. string.format("%.03f", tol).." o/oo.",_ok
				elseif (math.abs(delta) &lt; tol) then
					return string.format("%.03f (%.03f / %.03f)",delta,g1,g2) .. ": WARNING – Gradients match, but close to tolerance +/- " .. string.format("%.03f", tol).." o/oo.",_warning
				else 
					return string.format("%.03f (%.03f / %.03f)",delta,g1,g2) .. ": ERROR – Gradients are too different, outside tolerance +/- " .. string.format("%.03f", tol).." o/oo.",_error
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_chkConnectionCantMatch()" ReturnType="String" Description="Checks the cant (superelevation) continuity through the connection.">
  <Signature>NOBN_trk_chkConnectionCantMatch()</Signature>
  <Formula>
			function NOBN_trk_chkConnectionCantMatch()
				local tol = 0.010  -- cant (superelevation) [m]
				local msg = ""
				if Alignment == nil then
					return "UNFINISHED - Missing own alignment."
				end
				if RcType ~= rctype_OcsIsolator and TargetAlignment == nil then
					return "UNFINISHED - Missing target alignment."
				end

				local delta, z1, z2

				if RcType == rctype_OcsIsolator and TargetAlignment == nil then
					return "-: OK – Object does not act as a connection (being too far from any potential target alignment).",_ok
			
				elseif RcType == rctype_TrackContinuation 
				or RcType == rctype_HighVoltageConductorContinuation 
				or RcType == rctype_ContactWireContinuation 
				or RcType == rctype_OcsIsolator
				then
					local p1, p2
					if ExtendingFromEnd then
						p1 = Alignment.RcAlignment.EndPoint
					else
						p1 = Alignment.RcAlignment.StartPoint
					end 
					if ContinuingWithBegin then
						p2 = TargetAlignment.RcAlignment.StartPoint
					else 
						p2 = TargetAlignment.RcAlignment.EndPoint
					end
					z1 = getAlignmentInfo(p1).Cant
					z2 = getAlignmentInfo(TargetAlignment.id,p2).Cant
				
				elseif RcType == rctype_Switch then
					if not getAlignmentInfo().NormalProjectionExists then
						return Alignment.code..": WARNING - Connection object has no projection onto its own alignment (cannot compute mileage).",_warning
					end
					local p1 = getAlignmentInfo().Point		--The projection of the StockRailJoint onto its own alignment
					local d1 = RC__getDistance2D(TargetAlignment.RcAlignment.StartPoint,p1)
					local d2 = RC__getDistance2D(TargetAlignment.RcAlignment.EndPoint,p1)
					z1 = getAlignmentInfo().Cant
					if d1 &lt; d2 then
						z2 = getAlignmentInfo(TargetAlignment.id,TargetAlignment.RcAlignment.StartPoint).Cant		
					else
						z2 = getAlignmentInfo(TargetAlignment.id,TargetAlignment.RcAlignment.EndPoint).Cant			
					end
			
				else 
					return RcType..": ERROR - Bad connection object type",_error
				end
			
				if RC__isNan(z1) then z1 = 0 end
				if RC__isNan(z2) then z2 = 0 end
				delta = z2 - z1 -- difference [mm] in superelevations at connection
				-- Presentation in meters:
				--TODO: Check all combinations of CW, CCW and track directions
				delta = delta/1000
				if (math.abs(delta) &lt; tol / 2) then
					return string.format("%.03f (%.03f / %.03f)",delta,z1,z2) .. ": OK - Cants match within 50% of tolerance +/- " .. string.format("%.03f", tol).." m.",_ok
				elseif (math.abs(delta) &lt; tol) then
					return string.format("%.03f (%.03f / %.03f)",delta,z1,z2) .. ": WARNING – Cants match, but close to tolerance +/- " .. string.format("%.03f", tol).." m.",_warning
				else
					return string.format("%.03f (%.03f / %.03f)",delta,z1,z2) .. ": ERROR – Cants are too different, outside tolerance +/- " .. string.format("%.03f", tol).." m.",_error
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_chkConnectionGradientAndCantMatch()" ReturnType="String" Description="Checks the cant (superelevation) continuity through the connection.">
  <Signature>NOBN_trk_chkConnectionGradientAndCantMatch(callingProperty)</Signature>
  <Formula>
			function NOBN_trk_chkConnectionGradientAndCantMatch(CallingProperty)
				-- 'CallingProperty' ["Var0" | "Var1"] identifies the intended custom property where the result is to be returned (since this function does not know otherwise who is calling)
				local tol = 0.300  -- Decimal degrees
				local msg = "" -- to be returned with _info(msg)
				if Alignment == nil then
					return "UNFINISHED - Missing own alignment."
				end
				if TargetAlignment == nil then
					return "UNFINISHED - Missing target alignment."
				end

				local delta

				if RcType == rctype_SwitchCrossing then
					if not getAlignmentInfo().NormalProjectionExists then
						return Alignment.code..": WARNING - Connection object has no projection onto its own alignment (cannot compute mileage).",_warning
					end
					if not getAlignmentInfo(TargetAlignment.id).NormalProjectionExists then
						return TargetAlignment.code..": WARNING - Connection object has no projection onto its target alignment (cannot compute mileage).",_warning
					end
					-- Get info about the projections of the Crossing onto its own / its target alignment
					local a1 = getAlignmentInfo() --own alignment
					local a2 = getAlignmentInfo(TargetAlignment.id) --target alignment
			
					-- Crossing's projection onto own and target alignments [3D vector {X,Y,Z}]:
					local p1 = a1.Point						
					local p2 = a2.Point
					
					-- Alignments' tangential, normalized, vectors at projection points [3D vector {X,Y,Z}]:
					local t1 = getAlignmentInfo().Tangent
					local t2 = getAlignmentInfo(TargetAlignment.id).Tangent
					if t1 == nil or t2 == nil then
						return "UNFINISHED - Missing elevation data, cannot compute normal vector(s)."
					end
			
					-- Alignment direction phi wrt WCS East [rad]:
					local phi1 = math.atan(a1.Tangent.y,a1.Tangent.x)
					local phi2 = math.atan(a2.Tangent.y,a2.Tangent.x)
					
					-- JigSymbolAppearance angle rho ("rholl"...) theta (zenith angles) due to cant [rad] (roll with cant):
					local h1 = a1.Cant/1000.0
					local h2 = a2.Cant/1000.0
					if RC__isNan(h1) and RC__isNan(h2) then 
						msg = "UNFINISHED -  Missing cant data in both alignments, assuming zero cant."
					elseif RC__isNan(h1) then 
						msg = "UNFINISHED -  Missing cant data in own alignment, assuming zero cant."
					elseif RC__isNan(h2) then 
						msg = "UNFINISHED -  Missing cant data in crossing (target) alignment, assuming zero cant."
					end
					-- 'this' is a point object:
					local cg = Alignment.AlignmentSystem.CantGauge
					local tcg = TargetAlignment.AlignmentSystem.CantGauge
					if tcg ~= cg then
						return ": ERROR - cant gauges are not identical in the two alignments: "..string.format("%.3f / %.3f",cg,tcg),_error
					end
					local rho1, rho2
					if RC__isNan(h1) then 
						h1 = 0.0
						rho1 = 0.0
					else
						rho1 = math.asin((a1.CantRotation=="CCW" and h1 or -h1) / cg) 
					end
					if RC__isNan(h2) then
						h2 = 0.0
						rho2 = 0.0
					else
						rho2 = math.asin((a2.CantRotation=="CCW" and h2 or -h2) / cg) 
					end
					
					-- Rotation angle theta ('thilt'...) around the Alignment Coordinate System Y-axis (perp to track direction), Z pointing straight up (pitch with gradient)
					local theta1 = math.atan(t1.z,math.sqrt(t1.x^2+t1.y^2)) 
					local theta2 = math.atan(t2.z,math.sqrt(t2.x^2+t2.y^2)) 
			
					--Start with normal vector (0,0,1)
					local n = {x="0.0",y="0.0",z="1.0"}
			
					--Then, apply zenith angle rho (roll) in the coordinate system where the 'x' axis points along the track direction:
					local u1 = {x="0.0",y="0.0",z="0.0"}
					u1.x = 0.0
					u1.y = math.cos(rho1)*n.y - math.sin(rho1)*n.z
					u1.z = math.sin(rho1)*n.y + math.cos(rho1)*n.z
			
					local u2 = {x="0.0",y="0.0",z="0.0"}
					u2.x = 0.0
					u2.y = math.cos(rho2)*n.y - math.sin(rho2)*n.z
					u2.z = math.sin(rho2)*n.y + math.cos(rho2)*n.z
			
					--Then, pitch the rolled normal vector with theta (tilt) around the second axis in the same axis system (perpendicular to the track direction):
					local v1 = {x="0.0",y="0.0",z="0.0"}
					v1.x = math.cos(theta1)*u1.x - math.sin(theta1)*u1.z
					v1.y = u1.y
					v1.z = math.sin(theta1)*u1.x + math.cos(theta1)*u1.z
				
					local v2 = {x="0.0",y="0.0",z="0.0"}
					v2.x = math.cos(theta2)*u2.x - math.sin(theta2)*u2.z
					v2.y = u2.y
					v2.z = math.sin(theta2)*u2.x + math.cos(theta2)*u2.z
						
					--Finally, express vectors in WCS coordinates, i.e rotate by phi (the forward direction in the WCS XY plane) around the WCS Z axis:
					local w1 = {x="0.0",y="0.0",z="0.0"}
					w1.x = math.cos(phi1)*v1.x - math.sin(phi1)*v1.y
					w1.y = math.sin(phi1)*v1.x + math.cos(phi1)*v1.y 
					w1.z = v1.z 
				
					local w2 = {x="0.0",y="0.0",z="0.0"}
					w2.x = math.cos(phi2)*v2.x - math.sin(phi2)*v2.y 
					w2.y = math.sin(phi2)*v2.x + math.cos(phi2)*v2.y 
					w2.z = v2.z
				
					--Assert normalized vectors:
					local d1 = math.sqrt(w1.x^2+w1.y^2+w1.z^2)
					if math.abs(d1-1.000) &gt; 4e-4 then
						return RC__round(d1,3)..": ERROR - w1 not unit vector.",_error
					end 
					local d2 = math.sqrt(w2.x^2+w2.y^2+w2.z^2)
					if math.abs(d2-1.000) &gt; 4e-4 then
						return RC__round(d2,3)..": ERROR - w2 not unit vector.",_error
					end 
					
					--Find 3D angle between normal vectors (knowing that cos(delta) = (w1.w2)/(|w1|*|w2|) - and both vectors are already of length 1. 
					delta = math.acos(w1.x*w2.x + w1.y*w2.y + w1.z*w2.z) * 180/math.pi 
			
					if (CallingProperty == "Var1") then
						return string.format("delta= %.04f",delta)
						..string.format(", rho= %.04f / %.04f",math.deg(rho1),math.deg(rho2))
						..string.format(", theta= %.04f / %.04f",math.deg(theta1),math.deg(theta2))
						..string.format(", phi= %.04f / %.04f",math.deg(phi1),math.deg(phi2))
					end
			
					if (CallingProperty == "Var2") then
						return string.format("N=(%.04f,%.04f,%.04f) / (%.04f,%.04f,%.04f)",
						-math.cos(phi1)*math.sin(theta1)*math.cos(rho1) + math.sin(phi1)*math.sin(rho1),
						-math.sin(phi1)*math.sin(theta1)*math.cos(rho1) - math.cos(phi1)*math.sin(rho1),
						math.cos(theta1)*math.cos(rho1),
						-math.cos(phi2)*math.sin(theta2)*math.cos(rho2) + math.sin(phi2)*math.sin(rho2),
						-math.sin(phi2)*math.sin(theta2)*math.cos(rho2) - math.cos(phi2)*math.sin(rho2),
						math.cos(theta2)*math.cos(rho2)
						)
					end
					
				else 
					return RcType..": ERROR - Bad connection object type",_error, _info(msg)
				end
			
				if (math.abs(delta) &lt; tol / 2.0) then
					return string.format("%.03f",delta) .. ": OK - Normal vectors match within 50% of tolerance +/- " .. string.format("%.03f",tol).." degrees.",_ok, _info(msg)
				elseif (math.abs(delta) &lt; tol) then
					return string.format("%.03f",delta) .. ": WARNING – Normal vectors match, but close to tolerance +/- " .. string.format("%.03f",tol).." degrees.",_warning, _info(msg)
				else
					return string.format("%.03f",delta) .. ": ERROR – Normal vectors are too different, outside tolerance +/- " .. string.format("%.03f",tol).." degrees.",_error, _info(msg) end
			end		
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getSwitchLabelItem1()" ReturnType="String" Description="Returns the Fouling Point and Stock Rail joint reference mileages for a related switch.">
  <Signature>String NOBN_trk_getSwitchLabelItem1([Boolean MileageIncreasesTowardsLeft])</Signature>
  <Formula>
			function NOBN_trk_getSwitchLabelItem1(MileageIncreasesTowardsLeft)
				if MileageIncreasesTowardsLeft == nil then 
					MileageIncreasesTowardsLeft = false
				end
				local s = rel_Label_AppliesTo_Anything
				local r,n = getRelatedObjects(s)
				if n == 0 then
					return "UNFINISHED - Relate with '"..s.."'.",_unfinished
				else
					local v = r[0]
					if v.RcType ~= rctype_Switch then
						return "Bad related object type ["..v.RcType.."], "..rctype_Switch.." was expected",_warning
					end
					local srjrm = v.ReferenceMileage --Stock rail joint reference mileage
					local fp = getFoulingPoints(v)
					if getCollectionLength(fp) == 0 then	
						return "Km. "..NOBN_trk_toKm(srjrm).." (fant ikke Mid)",_warning
					else 
						local fprm = fp[0].Branch1.ReferenceMileage  --Fouling point reference mileage
						if srjrm &lt; fprm then 
							if MileageIncreasesTowardsLeft then
								return "Km."..NOBN_trk_toKm(fprm).."/"..NOBN_trk_toKm(srjrm)
							else
								return "Km."..NOBN_trk_toKm(srjrm).."/"..NOBN_trk_toKm(fprm)
							end
						else
							if MileageIncreasesTowardsLeft then
								return "Km."..NOBN_trk_toKm(srjrm).."/"..NOBN_trk_toKm(fprm)
							else
								return "Km."..NOBN_trk_toKm(fprm).."/"..NOBN_trk_toKm(srjrm)
							end
						end
					end
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getSwitchLabelItem2()" ReturnType="String" Description="Returns the related switch's name.">
  <Signature>String NOBN_trk_getSwitchLabelItem2([Boolean MileageIncreasesTowardsLeft])</Signature>
  <Formula>
			function NOBN_trk_getSwitchLabelItem2(MileageIncreasesTowardsLeft)
				if MileageIncreasesTowardsLeft == nil then 
					MileageIncreasesTowardsLeft = false
				end
				local s = rel_Label_AppliesTo_Anything
				local r,n = getRelatedObjects(s)
				if n == 0 then
					return "UNFINISHED - Relate with '"..s.."'.",_unfinished
				else
					local v = r[0]
					if v.RcType ~= rctype_Switch then
						return "Bad related object type ["..v.RcType.."], "..rctype_Switch.." was expected",_warning
					end
					local srjrm = v.ReferenceMileage --Stock rail joint reference mileage
					local fp = getFoulingPoints(v)
					if getCollectionLength(fp) == 0 then	
						return "SS"..v.code.." (fant ikke Mid)",_warning
					else
						local fprm = fp[0].Branch1.ReferenceMileage  --Fouling point reference mileage
						if srjrm &lt; fprm then 
							if MileageIncreasesTowardsLeft then
								return "Mid/SS".." "..v.code
							else
								return "SS/Mid".." "..v.code
							end
						else
							if MileageIncreasesTowardsLeft then
								return "SS/Mid".." "..v.code
							else
								return "Mid/SS".." "..v.code
							end
						end
					end
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getSwitchLabelItem3()" ReturnType="String" Description="Returns the switch's reference alignment code.">
  <Signature>String NOBN_trk_getSwitchLabelItem3()</Signature>
  <Formula>
			function NOBN_trk_getSwitchLabelItem3()
				local s = rel_Label_AppliesTo_Anything
				local r,n = getRelatedObjects(s)
				if n == 0 then
					return "UNFINISHED - Relate with '"..s.."'.",_unfinished
				else
					local v = r[0]
					if v.RcType ~= rctype_Switch then
						return "Bad related object type ["..v.RcType.."], "..rctype_Switch.." was expected",_warning
					end
					return "(Ref. "..v.ReferenceAlignment.code..")"
				end
			end
		</Formula>
 </LuaFunction>
 <ObjectType DataType="RailCOMPLETELabel" Class="RailwayPlacedObject" LuaName="rctype_Label" Name="JBTFE_DIV Etikett" Layer="JBTFE_ETIKETTER" Color="ByLayer" Group="Felles/Etiketter">
  <RelationSpace>etikett</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="A-1-0-VLB-018">
   <Variant Name="A-1-0-VLB-018"/>
   <Variant Name="A-1-0-VLT-018"/>
   <Variant Name="A-1-0-VRB-018"/>
   <Variant Name="A-1-0-VRT-018"/>
   <Variant Name="B-1-0-HLB-018"/>
   <Variant Name="B-1-0-HLT-018"/>
   <Variant Name="B-1-0-HRB-018"/>
   <Variant Name="B-1-0-HRT-018"/>
   <Variant Name="C-1-0-HLB-025"/>
   <Variant Name="C-1-0-HLT-025"/>
   <Variant Name="C-1-0-HRB-025"/>
   <Variant Name="C-1-0-HRT-025"/>
   <Variant Name="C-1-1-HLB-025-018"/>
   <Variant Name="C-1-1-HLT-025-018"/>
   <Variant Name="C-1-1-HRB-025-018"/>
   <Variant Name="C-1-1-HRT-025-018"/>
   <Variant Name="C-1-2-HLB-025-018"/>
   <Variant Name="C-1-2-HLT-025-018"/>
   <Variant Name="C-1-2-HRB-025-018"/>
   <Variant Name="C-1-2-HRT-025-018"/>
   <Variant Name="D-1-1-HLB-025-018"/>
   <Variant Name="D-1-1-HLT-025-018"/>
   <Variant Name="D-1-1-HRB-025-018"/>
   <Variant Name="D-1-1-HRT-025-018"/>
   <Variant Name="D-1-2-HLB-025-018"/>
   <Variant Name="D-1-2-HLT-025-018"/>
   <Variant Name="D-1-2-HRB-025-018"/>
   <Variant Name="D-1-2-HRT-025-018"/>
  </Variants>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RC__getNearestSnapDistance(getPropertyValue("LateralOffset"),5)</Formula>
  </LuaExpression>
  <LuaExpression Name="ReferenceMileage">
   <Formula>
				local s = rel_Label_AppliesTo_Anything
				local r,n = getRelatedObjects(s)
				if n == 0 then 
					return getPropertyValue("ReferenceMileage"), _info("UNFINISHED - Relate with '"..s.."'.")
				else
					return r[0].ReferenceMileage
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="LabelItem1">
   <Formula>NOBN_com_getLabelItem1()</Formula>
  </LuaExpression>
  <LuaExpression Name="LabelItem2">
   <Formula>NOBN_com_getLabelItem2()</Formula>
  </LuaExpression>
  <LuaExpression Name="LabelItem3">
   <Formula>NOBN_com_getLabelItem3()</Formula>
  </LuaExpression>
  <InsertPointObject DisplayName="Etikett A" Name="A-1-0-VRB-018" DisplayBlockName="NO-BN-2D-JBTFE_ETI-ETIKETT-A-1-0-VRB-018-{{SymbolMode}}">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Etikett B" Name="B-1-0-HLT-018" DisplayBlockName="NO-BN-2D-JBTFE_ETI-ETIKETT-B-1-0-HRB-018-{{SymbolMode}}">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Etikett C" Name="C-1-0-HLT-025" DisplayBlockName="NO-BN-2D-JBTFE_ETI-ETIKETT-C-1-0-HRB-025-{{SymbolMode}}">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Etikett C (2 linjer)" Name="C-1-1-HLT-025-018" DisplayBlockName="NO-BN-2D-JBTFE_ETI-ETIKETT-C-1-0-HRB-025-{{SymbolMode}}">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Etikett D" Name="D-1-1-HRB-025-018" DisplayBlockName="NO-BN-2D-JBTFE_ETI-ETIKETT-D-1-1-HRB-025-018-{{SymbolMode}}">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Etikett D (3 linjer)" Name="D-1-2-HRB-025-018" DisplayBlockName="NO-BN-2D-JBTFE_ETI-ETIKETT-D-1-2-HRB-025-018-{{SymbolMode}}">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_ETI-ETIKETT-A-1-0-VLB-018" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="true" AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTFE_ETI-ETIKETT
				{% if    Variant == 'A-1-0-VLB-018' %}A-1-0-VLB-018
				{% elsif Variant == 'A-1-0-VLT-018' %}A-1-0-VLT-018
				{% elsif Variant == 'A-1-0-VRB-018' %}A-1-0-VRB-018
				{% elsif Variant == 'A-1-0-VRT-018' %}A-1-0-VRT-018
			
				{% elsif Variant == 'B-1-0-HLB-018' %}B-1-0-HLB-018
				{% elsif Variant == 'B-1-0-HLT-018' %}B-1-0-HLT-018
				{% elsif Variant == 'B-1-0-HRB-018' %}B-1-0-HRB-018
				{% elsif Variant == 'B-1-0-HRT-018' %}B-1-0-HRT-018

				{% elsif Variant == 'C-1-0-HLB-025' %}C-1-0-HLB-025
				{% elsif Variant == 'C-1-0-HLT-025' %}C-1-0-HLT-025
				{% elsif Variant == 'C-1-0-HRB-025' %}C-1-0-HRB-025
				{% elsif Variant == 'C-1-0-HRT-025' %}C-1-0-HRT-025

				{% elsif Variant == 'C-1-1-HLB-025-018' %}C-1-1-HLB-025-018
				{% elsif Variant == 'C-1-1-HLT-025-018' %}C-1-1-HLT-025-018
				{% elsif Variant == 'C-1-1-HRB-025-018' %}C-1-1-HRB-025-018
				{% elsif Variant == 'C-1-1-HRT-025-018' %}C-1-1-HRT-025-018

				{% elsif Variant == 'C-1-2-HLB-025-018' %}C-1-2-HLB-025-018
				{% elsif Variant == 'C-1-2-HLT-025-018' %}C-1-2-HLT-025-018
				{% elsif Variant == 'C-1-2-HRB-025-018' %}C-1-2-HRB-025-018
				{% elsif Variant == 'C-1-2-HRT-025-018' %}C-1-2-HRT-025-018

				{% elsif Variant == 'D-1-1-HLB-025-018' %}D-1-1-HLB-025-018
				{% elsif Variant == 'D-1-1-HLT-025-018' %}D-1-1-HLT-025-018
				{% elsif Variant == 'D-1-1-HRB-025-018' %}D-1-1-HRB-025-018
				{% elsif Variant == 'D-1-1-HRT-025-018' %}D-1-1-HRT-025-018

				{% elsif Variant == 'D-1-2-HLB-025-018' %}D-1-2-HLB-025-018
				{% elsif Variant == 'D-1-2-HLT-025-018' %}D-1-2-HLT-025-018
				{% elsif Variant == 'D-1-2-HRB-025-018' %}D-1-2-HRB-025-018
				{% elsif Variant == 'D-1-2-HRT-025-018' %}D-1-2-HRT-025-018
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="T01">
    <Value>{{LabelItem1}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="T02">
    <Value>{{LabelItem2}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="T03">
    <Value>{{LabelItem3}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic"></SymbolDefinition>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableUserdefined" Name="JBTFE_DIV Brukerdefinert tabell" Layer="JBTFE_TABELLER" Color="ByLayer" Group="Felles/Brukerdefinert tabell">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Brukerdefinert">
   <Variant Name="Brukerdefinert"/>
  </Variants>
  <InsertTable Name="Brukerdefinert" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Brukerdefinert</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>false</LuaFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <Font>RC-STANDARD</Font>
    <TitleTextHeight>5</TitleTextHeight>
    <HeaderTextHeight>3.5</HeaderTextHeight>
    <DataTextHeight>2.5</DataTextHeight>
    <VerticalCellMargin>1.0</VerticalCellMargin>
    <HorizontalCellMargin>1.0</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <TableFormat>Standard</TableFormat>
    <Columns>
     <ColumnSpecification>
      <Headers/>
      <Width>50</Width>
      <Data>Name</Data>
      <Title>Navn</Title>
      <Sort/>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers/>
      <Width>50</Width>
      <Data>string.format("Km.%.3f",ReferenceMileage/1000)</Data>
      <Title>Km eget spor</Title>
      <Sort>Ascending</Sort>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>10272f0b-a413-49f6-bd6a-b520ea345d97</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableWaysideBoards" Name="JBTFE_DIV Skiltplantabell" Layer="JBTFE_TABELLER" Color="ByLayer" Group="Felles/Skiltplantabeller">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Skiltplan tabell (tverrfaglig trafikkskiltplan)">
   <Variant Name="Skiltplan tabell (tverrfaglig trafikkskiltplan)"/>
   <Variant Name="Arbeidsområder"/>
   <Variant Name="Stasjonsskilt (publikumsskilting)"/>
   <Variant Name="Rømningsskilt i tunnel"/>
   <Variant Name="Høyspenningsfare på KL-master"/>
  </Variants>
  <InsertTable Name="Skiltplan tabell" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Skiltplan tabell</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilter></ObjectManagerFilter>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>false</LuaFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <TitleTextHeight>12</TitleTextHeight>
    <HeaderTextHeight>10</HeaderTextHeight>
    <DataTextHeight>8</DataTextHeight>
    <VerticalCellMargin>1.5</VerticalCellMargin>
    <HorizontalCellMargin>1.5</HorizontalCellMargin>
    <BlockScale>5</BlockScale>
    <MinRowHeight>3</MinRowHeight>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <TableFormat>Standard</TableFormat>
    <Columns>
     <ColumnSpecification>
      <Headers/>
      <Width>30</Width>
      <Data>if (alignment.type ~= "mainTrack" or alignment.mainDir == "down") and (dir == "up" or dir == "both") then 
	pri = 2000
elseif (alignment.type ~= "mainTrack" or alignment.mainDir == "down") and (dir == "down" or dir == "both") then  
	pri = 3000
elseif (alignment.type == "mainTrack" and alignment.mainDir == "up") and (dir == "up" or dir == "both") then  
	pri = 0
elseif (alignment.type == "mainTrack" and alignment.mainDir == "up") and (dir == "down") then  
	pri = 1000
else 
	pri = -1,_warning
end 

local function is(pattern)
	if Variant == nil then 
		return false
	else 
		return string.match(Variant,pattern)
	end
end

--Signal prioritering
if is("60") then delta = 0
elseif is("62") then delta = 1
elseif is("101") then delta = 2
elseif is("refleks") then delta = 3
elseif is("102") then delta = 4
elseif is("68C") then delta = 5
elseif is("72") then delta = 6

--Hastighetsskilt
elseif is("68A") or is("68B") then delta = 7
elseif is("68F") then delta = 8
elseif is("68G") then delta = 9
elseif is("68D") then delta = 10
elseif is("69") then delta = 11

--Toglengdeskilt
elseif is("74") then delta = this.trainLength
else delta = 40
end

return pri + delta</Data>
      <Title>Pri</Title>
      <Sort>Ascending</Sort>
      <Guid>be5a9dbd-24ed-4eca-8694-c8bc64016af4</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Banestrekning</Title>
       </Header>
       <Header>
        <Title>XXXX</Title>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title>Stedsreferanse</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>string.format("%3d %03d",ReferenceMileage/1000,(ReferenceMileage+0.5)%1000) --No period, avoid AutoCAD interpretation</Data>
      <Title>Posisjon skilt (km)</Title>
      <Sort>Ascending</Sort>
      <Guid>b92803e9-ec1a-485e-848b-2c512ce4a309</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Banestrekning</Title>
       </Header>
       <Header>
        <Title>XXXX</Title>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title>Stedsreferanse</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>local s = rel_Object_Has_NssBaliseGroup
						local a, n = getRelatedObjects(s)
if n == 0 then
	return " "
else
	if a[0].Variant == "Repeterbalisegruppe" then
		target=a[0].Relations[rel_NssBaliseGroup_ObtainsControlInformationFrom_Object][0]
				
	elseif a[0].Variant == "Hastighetsbalisegruppe" then
		target=a[0].Relations[rel_NssBaliseGroup_HasBrakingCurveTargetIn_NssBaliseGroup][0].Relations[rel_NssBaliseGroup_HasPositionDeterminedBy_NssBalise][0]
	else
		target = a[0].Relations[rel_NssBaliseGroup_HasPositionDeterminedBy_NssBalise][0]
	end
	dif=target.ReferenceMileage-a[0].Relations[rel_NssBaliseGroup_HasPositionDeterminedBy_NssBalise][0].ReferenceMileage
	d = math.floor(dif + 0.5)
	if d == 0 then
		return " "
	else
		return math.abs(d)
	end
end</Data>
      <Title>Avstand merke [m]</Title>
      <Sort/>
      <Guid>343c68ed-38b2-49de-aef9-5359fe321add</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title>Fall</Title>
       </Header>
      </Headers>
      <Width>50</Width>
      <Data>local a,d
local s = rel_Object_Has_NssBaliseGroup
local r, n = getRelatedObjects(s)
if n == 0 then 
	return " "
else
	a = r[0].Relations[rel_NssBaliseGroup_HasBrakingCurveTargetIn_NssBaliseGroup]			--Assume that start item has only one target item
	--First, find distance
	d = math.abs(a:distance())
	if (d == 0) then return " "	end
	--Second, find difference in elevation above sea level:
	t1 = getAlignmentInfo(this)
	t2 = getAlignmentInfo(a[0])
	local e1 = t1.Elevation
	local e2 = t2.Elevation
	local g1 = t1.Gradient
	local g2 = t2.Gradient

	if (tostring(dir) == "down") then
		g1 = -g1
		g2 = -g2
	elseif (tostring(dir) ~= "up") then
		return "*ERROR - bad direction*"
	end
		
	local g3 = (e2 - e1) / d * 1000
	
	-- Reduce info if gradients at each end are nearly identical to the average gradient: 
	if (math.abs(g2-g1) &lt; .01) and (math.abs(g3-g1) &lt; .01) then
		if(g3 &lt; 0) then return string.format("%.01f",-g3) end
	else 
		if (g1 &lt; 0) then return string.format("%.1f",-g1) end
	end
end
</Data>
      <Title>I kjøre- retn. [o/oo]</Title>
      <Sort/>
      <Guid>7eeee3be-c021-461d-a91e-56ee876b1257</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title>Skilt</Title>
       </Header>
       <Header>
        <Title>Øvrige spor</Title>
       </Header>
      </Headers>
      <Width>70</Width>
      <Data>if (alignment.type ~= "mainTrack" or alignment.mainDir == "down") and (dir == "up" or dir == "both") then 
	return getInvertedBlockImage(false,false,true,3)
end </Data>
      <Title>I km-retn.</Title>
      <Sort/>
      <Guid>9df3e927-ae52-4c1e-be75-fdeee7876f95</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title>Skilt</Title>
       </Header>
       <Header>
        <Title>Øvrige spor</Title>
       </Header>
      </Headers>
      <Width>70</Width>
      <Data>if (alignment.type ~= "mainTrack" or alignment.mainDir == "down") and (dir == "down") then  
	return getInvertedBlockImage(false,false,true,3)
end </Data>
      <Title>Mot km-retn.</Title>
      <Sort/>
      <Guid>b178d976-32be-4886-b30c-5a1c6b27a788</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title>Skilt</Title>
       </Header>
       <Header>
        <Title>Hovedspor</Title>
       </Header>
      </Headers>
      <Width>70</Width>
      <Data>if (alignment.type == "mainTrack" and alignment.mainDir == "up") and (dir == "up" or dir == "both") then  
	return getInvertedBlockImage(false,false,true,3)
end</Data>
      <Title>I km-retn.</Title>
      <Sort/>
      <Guid>694da97b-ad25-46e1-ae9c-3f4927febb72</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title/>
       </Header>
       <Header>
        <Title>Skilt</Title>
       </Header>
       <Header>
        <Title>Hovedspor</Title>
       </Header>
      </Headers>
      <Width>70</Width>
      <Data>if (alignment.type == "mainTrack" and alignment.mainDir == "up") and (dir == "down") then  
	return getInvertedBlockImage(false,false,true,3)
end </Data>
      <Title>Mot km-retn.</Title>
      <Sort/>
      <Guid>96431658-43eb-4e9a-ad75-adbb1efe6f72</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Dokumentnummer:</Title>
       </Header>
       <Header>
        <Title>Revisjon:</Title>
       </Header>
       <Header>
        <Title>Dato</Title>
       </Header>
       <Header>
        <Title/>
       </Header>
      </Headers>
      <Width>350</Width>
      <Data>local s0 = ""
local s1 = ""
local s5 = ""
if Variant then s0 = Variant else s0 = "" end
if (attachment == nil) then
	s1 = ""
	s5 = ""
else
	if getCollectionLength(Relations[rel_Object_Has_NssBaliseGroup]) == 0 then
	
		--TODO: Bruk heller getCollectionLength(Relations[rel_MarkerPole_Locates_AxleCounter] &gt; 0 etc
		if Variant:match("64E") and Relations[rel_MarkerPole_Locates_AxleCounter] and Relations[rel_MarkerPole_Locates_AxleCounter][0] then
			s1 = "\nTilhører \t\t"..Relations[rel_MarkerPole_Locates_AxleCounter][0].RcType
			
		elseif Variant:match("68") or Variant:match("64E") or Variant:match("Signal 60") then
			obj = getNearbyPointObjects2D(15)
			s1 = " "
			for i = 0,obj.Count-1 do
				if obj[i].Variant:match("balisegruppe") or obj[i].RcType:match("sporingsindikator")  then
					if obj[i].Relations[rel_NssBaliseGroup_HasBrakingCurveTargetIn_NssBaliseGroup] then
						if obj[i].Relations[rel_NssBaliseGroup_HasBrakingCurveTargetIn_NssBaliseGroup].Count ~= 0 then 
							s1 = "\nTilhører \t\t"..obj[i].name.." med målpunkt i NSS_balisegruppe "..obj[i].Relations[rel_NssBaliseGroup_HasBrakingCurveTargetIn_NssBaliseGroup][0].name
							break
						else 
							s1 = "\nTilhører \t\t"..obj[i].name
							break
						end
					end
				elseif obj[i].RcType:match("Telle") and Variant:match("64E") then
					s1 = "\nTilhører \t\t"..obj[i].RcType
					break
				end	
			end
		else
			s1 = " "
		end
		
		if Variant:match("kryss") then
			obj = getNearbyPointObjects2D(10)
			s1 = " "
			for i = 0,obj.Count-1 do
				if obj[i].RcType:match("veksel") then
					s1="\nTilhører \t\t".."V."..tostring(obj[i].code)
					break
				elseif obj[i].RcType:match("Drivmaskin") then
					Cd = tostring(obj[i].name)
					place = string.find(Cd,"%.")
					s1 = "\nTilhører \t\t".."V."..string.sub(Cd,1,place-1)	
					break
				end				
			end
		end	
		
	else 
		if Relations[rel_Object_Has_NssBaliseGroup][0].Relations[rel_NssBaliseGroup_HasBrakingCurveTargetIn_NssBaliseGroup] then
			if Relations[rel_Object_Has_NssBaliseGroup][0].Relations[rel_NssBaliseGroup_HasBrakingCurveTargetIn_NssBaliseGroup].Count ~= 0 then 
				s1 = "\nTilhører \t\t"..Relations[rel_Object_Has_NssBaliseGroup][0].name.." med målpunkt i NSS_balisegruppe "..Relations[rel_Object_Has_NssBaliseGroup][0].Relations[rel_NssBaliseGroup_HasBrakingCurveTargetIn_NssBaliseGroup][0].name
			end
		else
			s1 = "\nTilhører \t\t"..Relations[rel_Object_Has_NssBaliseGroup][0].name
		end
	end
	
	if (Attachment.Variant == nil) then 
		s5 = ""
	elseif Attachment.RcType:match("SPB") then
		s5 = "\nMontert på \t\t"..this.Attachment.Variant
	elseif Attachment.RcType:match("SA%-SIG") then
		s5="\nMontert på \t\t"..tostring(Attachment.name)
	else
		obj= getNearbyPointObjects2D(10)
		for i=0,obj.Count-1 do
			if obj[i].RcType:match("SA%-SIG") and not this.RcType:match("Signal 68") then
				s5="\nMontert på \t\t"..tostring(obj[i].name)
				break
			elseif obj[i].RcType:match("SPB") then
				s5="\nMontert på \t\t"..tostring(obj[i].Variant)
				break
			else
				s5 = "\nMontert på \t\t"..this.Attachment.Variant				
			end				
		end		
			
	end
end
return s0..s1..s5
</Data>
      <Title>Anmerkning</Title>
      <Sort/>
      <Guid>089c3e0b-5fd8-44ce-8e86-9dc08934f5ec</Guid>
      <Alignment>MiddleLeft</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Dokumentnummer:</Title>
       </Header>
       <Header>
        <Title>Revisjon:</Title>
       </Header>
       <Header>
        <Title>Dato</Title>
       </Header>
       <Header>
        <Title/>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>return Alignment.name</Data>
      <Title>Spor</Title>
      <Sort>Ascending</Sort>
      <Guid>88a08f68-05ba-4e5c-a7b6-4ed8d281a731</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Dokumentnummer:</Title>
       </Header>
       <Header>
        <Title>Revisjon:</Title>
       </Header>
       <Header>
        <Title>Dato:</Title>
       </Header>
       <Header>
        <Title/>
       </Header>
      </Headers>
      <Width>50</Width>
      <Data>d = math.abs(DistanceToAlignment)
if d &lt; 1.8 then return "Bad dist: "..d  --less than this and the poor sign/board will be hit by a train  
elseif RightSided then return "Høyre"
else return "Venstre" 
end</Data>
      <Title>Side av spor</Title>
      <Sort/>
      <Guid>0352ae4c-7592-4694-9a4f-5a154ef4fbea</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Dokumentnummer:</Title>
       </Header>
       <Header>
        <Title>Revisjon:</Title>
       </Header>
       <Header>
        <Title>Dato</Title>
       </Header>
       <Header>
        <Title/>
       </Header>
      </Headers>
      <Width>25</Width>
      <Data>local function is(pattern)
	if Variant == nil then return false
	else return string.match(Variant,pattern)
	end
end

if is("68") or is("69") or is("74")		then return "SO"
elseif is("64A") 						then return "SE"
elseif is("64B") or is("65") 			then return "E"
elseif is("63") or is("75") 			then return "O"
elseif is("kjedebrudd") 				then return "SO"
elseif is("bevegelig kryss") 			then return "SO"
else
	return "S"
end</Data>
      <Title>Fag</Title>
      <Sort/>
      <Guid>549bdf1f-00d5-43dd-99a4-c079f24ac2c4</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Dokumentnummer:</Title>
       </Header>
       <Header>
        <Title>Revisjon:</Title>
       </Header>
       <Header>
        <Title>Dato</Title>
       </Header>
       <Header>
        <Title/>
       </Header>
      </Headers>
      <Width>90</Width>
      <Data>FDVBaneDataObjektID</Data>
      <Title>BaneData ID</Title>
      <Sort/>
      <Guid>204f9496-eefb-4c67-9a4d-1fdf83e6b0d4</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>b92803e9-ec1a-485e-848b-2c512ce4a309</string>
     <string>88a08f68-05ba-4e5c-a7b6-4ed8d281a731</string>
     <string>be5a9dbd-24ed-4eca-8694-c8bc64016af4</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableTrackDesign" Name="JBTFE_DIV Sporprosjekteringstabell" Layer="JBTFE_TABELLER" Color="ByLayer" Group="Overbygning/Sporprosjekteringstabeller">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Track data overview">
   <Variant Name="Track data overview"/>
   <Variant Name="Track connectivity"/>
  </Variants>
  <InsertTable Name="Track data overview" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Track data overview</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilter></ObjectManagerFilter>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>RcType == rctype_Track</LuaFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <TitleTextHeight>5</TitleTextHeight>
    <HeaderTextHeight>3.5</HeaderTextHeight>
    <DataTextHeight>2.5</DataTextHeight>
    <VerticalCellMargin>1</VerticalCellMargin>
    <HorizontalCellMargin>1</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <MinRowHeight>3</MinRowHeight>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <VerticalNumbering>
     <Enabled>true</Enabled>
     <IsVertical>true</IsVertical>
     <Location>Left</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </VerticalNumbering>
    <HorizontalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>false</IsVertical>
     <Location>Bottom</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </HorizontalNumbering>
    <TableFormat>Standard</TableFormat>
    <Font>RC-STANDARD</Font>
    <Columns>
     <ColumnSpecification>
      <Guid>c493578d-b4dc-48fe-8af8-c55a96dc0556</Guid>
      <Headers>
       <Header Name="General"/>
       <Header Name="Object Type"/>
      </Headers>
      <Width>40</Width>
      <Sort>Ascending</Sort>
      <Alignment>MiddleCenter</Alignment>
      <Data>RcType</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Headers>
       <Header Name="General"/>
       <Header Name="Track name"/>
      </Headers>
      <Width>100</Width>
      <Sort>Ascending</Sort>
      <Alignment>MiddleCenter</Alignment>
      <Data>name</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>36dd2219-d127-489f-a924-69c8d4d0c885</Guid>
      <Headers>
       <Header Name="General"/>
       <Header Name="Horizontal length [m]"/>
      </Headers>
      <Width>40</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",RcAlignment.EndMileage-RcAlignment.StartMileage)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>2dffb58b-f6a6-457b-98df-e2ffb37a285f</Guid>
      <Headers>
       <Header Name="General"/>
       <Header Name="Direction of increasing mileage (assuming fairly horizontal tracks in current UCS)"/>
      </Headers>
      <Width>40</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>
-- Compare the X-coordinates (0 decimal degrees = East) for start and end of alignment in current User Coordinate System:
o = DocumentData.Document.Database.Ucsorg
u = DocumentData.Document.Database.Ucsxdir
ang = math.atan(u.y,u.x)
p = RcAlignment.StartPoint
u1x =  (p.x-o.x)*math.cos(ang) + (p.y-o.y)*math.sin(ang)
--u1y = -(p.x-o.x)*math.sin(ang) + (p.y-o.y)*math.cos(ang)
p = RcAlignment.EndPoint
u2x =  (p.x-o.x)*math.cos(ang) + (p.y-o.y)*math.sin(ang)
--u2y = -(p.x-o.x)*math.sin(ang) + (p.y-o.y)*math.cos(ang)
return string.format("%s",u2x-u1x > 0 and "Right" or "Left")					
					</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>0bf10925-d101-482f-be0b-dfbe2239b92d</Guid>
      <Headers>
       <Header Name="Start"/>
       <Header Name="Mileage [km]"/>
      </Headers>
      <Width>40</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>NOBN_trk_toKm(RcAlignment.StartMileage,6)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>aaa10872-cf3a-4246-8889-0acb9f79275e</Guid>
      <Headers>
       <Header Name="Start"/>
       <Header Name="Tangent direction [WCS decimal degrees (East=0, positive=CCW)]"/>
      </Headers>
      <Width>40</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>
						ang = (360 + math.atan(RcAlignment.StartTangent.Y,RcAlignment.StartTangent.X)*180/math.pi) % 360 
						if ang > 180 then ang = ang - 360 end
						return string.format("%.03f",ang)
					</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>f90bb4a3-6c04-4d52-ada9-e1bd55a76c1b</Guid>
      <Headers>
       <Header Name="Start"/>
       <Header Name="Gradient [o/oo]"/>
      </Headers>
      <Width>40</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>x = RcAlignment.StartTangent.x
y = RcAlignment.StartTangent.y
z = RcAlignment.StartTangent.z
g = 1000 * math.sqrt(z^2 / (x^2 + y^2))
return string.format("%.03f",g)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>446b7aaf-02ea-45f4-8276-a4fab794ef67</Guid>
      <Headers>
       <Header Name="End"/>
       <Header Name="Mileage [km]"/>
      </Headers>
      <Width>40</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>NOBN_trk_toKm(RcAlignment.EndMileage,6)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>cb9d1988-966c-437c-bc84-7e0564e0a83f</Guid>
      <Headers>
       <Header Name="End"/>
       <Header Name="Tangent direction [WCS decimal degrees (East=0)]"/>
      </Headers>
      <Width>40</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>
						ang = (360 + math.atan(RcAlignment.EndTangent.Y,RcAlignment.EndTangent.X)*180/math.pi) % 360 
						if ang > 180 then ang = ang - 360 end
						return string.format("%.03f",ang)
					</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>9a7d4f86-aa8a-4381-8070-27fc3f12c35e</Guid>
      <Headers>
       <Header Name="End"/>
       <Header Name="Gradient [o/oo]"/>
      </Headers>
      <Width>40</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>x = RcAlignment.EndTangent.x
y = RcAlignment.EndTangent.y
z = RcAlignment.EndTangent.z
g = 1000 * math.sqrt(z^2 / (x^2 + y^2))
return string.format("%.03f",g)</Data>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>c493578d-b4dc-48fe-8af8-c55a96dc0556</string>
     <string>71b321ec-4bc3-493d-974b-2b01236d720c</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
  <InsertTable Name="Track connectivity" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <ColumnSelectionSelf>true</ColumnSelectionSelf>
    <ColumnSelectionFromMasterTable>false</ColumnSelectionFromMasterTable>
    <Title>Track connectivity - Drawing2</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilter/>
    <ObjectManagerFilterList/>
    <ObjectTypeBrowser>false</ObjectTypeBrowser>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>RcType == rctype_TrackContinuation or RcType == rctype_SwitchCrossing or RcType == rctype_Switch</LuaFilter>
    <UseDataSetFilter>false</UseDataSetFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <TitleTextHeight>5</TitleTextHeight>
    <HeaderTextHeight>3.5</HeaderTextHeight>
    <DataTextHeight>2.5</DataTextHeight>
    <VerticalCellMargin>1</VerticalCellMargin>
    <HorizontalCellMargin>1</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <MinRowHeight>3</MinRowHeight>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <VerticalNumbering>
     <Enabled>true</Enabled>
     <IsVertical>true</IsVertical>
     <Location>Left</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </VerticalNumbering>
    <HorizontalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>false</IsVertical>
     <Location>Bottom</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </HorizontalNumbering>
    <TableFormat>Standard</TableFormat>
    <Font>RC-STANDARD</Font>
    <Columns>
     <ColumnSpecification>
      <Guid>c493578d-b4dc-48fe-8af8-c55a96dc0556</Guid>
      <Headers>
       <Header Name="Object Type"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>Ascending</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>RcType</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>d96a44c9-cc91-493e-9571-4a66279993fd</Guid>
      <Headers>
       <Header Name="Nr"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>Ascending</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>RC__identify()</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Headers>
       <Header Name="Own / Target Alignment Name"/>
      </Headers>
      <Width>100</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>alignment.name .. " -&gt; " ..TargetAlignment.name</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Headers>
       <Header Name="Own alignment mileage"/>
      </Headers>
      <Width>50</Width>
      <HideColumn>false</HideColumn>
      <SortOption>Ascending</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("Km.%.06f",Mileage/1000)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>2bbb04e3-a9c8-4b4e-91ec-cf73511c0af4</Guid>
      <Headers>
       <Header Name="Reference alignment"/>
      </Headers>
      <Width>100</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>getAlignmentInfo(getAlignmentInfo().ReferenceAlignmentId).AlignmentName</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>a9d3e94b-917a-4eb3-b82f-fdbc11784728</Guid>
      <Headers>
       <Header Name="Reference mileage"/>
      </Headers>
      <Width>50</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("Km.%.06f",ReferenceMileage/1000)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>0bf10925-d101-482f-be0b-dfbe2239b92d</Guid>
      <Headers>
       <Header Name="Continuity check"/>
      </Headers>
      <Width>150</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>msg = mc_Continuity
									return msg:lower():match("ok") and "OK" or msg</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>446b7aaf-02ea-45f4-8276-a4fab794ef67</Guid>
      <Headers>
       <Header Name="Elevation check"/>
      </Headers>
      <Width>150</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>msg = mc_Elevation
									return msg:lower():match("ok") and "OK" or msg</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>cb9d1988-966c-437c-bc84-7e0564e0a83f</Guid>
      <Headers>
       <Header Name="Tangent check"/>
      </Headers>
      <Width>150</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>msg = mc_Tangent
									return msg:lower():match("ok") and "OK" or msg</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>9a7d4f86-aa8a-4381-8070-27fc3f12c35e</Guid>
      <Headers>
       <Header Name="Gradient check"/>
      </Headers>
      <Width>150</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>if RcType:lower():match("sporveksel$") or RcType:lower():match("sporfortsettelse$") then 
										msg = mc_Gradient
									elseif RcType:lower():match("sporkryss$") then
										msg = mc_GradientAndCant
									else
										msg = "(Model check not found)"
									end
									return msg:lower():match("ok") and "OK" or msg
															</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>e7136c50-9d71-474c-a7d5-0806c2c4d13c</Guid>
      <Headers>
       <Header Name="Cant check"/>
      </Headers>
      <Width>150</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>
											if RcType:lower():match("sporveksel$") or RcType:lower():match("sporfortsettelse$") then 
												msg = mc_Cant
											elseif RcType:lower():match("sporkryss$") then
												msg = mc_GradientAndCant
											else
												msg = "(Model check not found)"
											end
											return msg:lower():match("ok") and "OK" or msg
										</Data>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>c493578d-b4dc-48fe-8af8-c55a96dc0556</string>
     <string>d96a44c9-cc91-493e-9571-4a66279993fd</string>
     <string>10272f0b-a413-49f6-bd6a-b520ea345d97</string>
    </SortOrder>
    <NewColumnWidth xsi:nil="true"/>
   </TableSpecification>
  </InsertTable>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableSwitches" Name="JBTFE_DIV Sporvekseltabell" Layer="JBTFE_TABELLER" Color="ByLayer" Group="Overbygning/Sporvekseltabeller">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Sporvekseltabell (enkel)">
   <Variant Name="Sporvekseltabell (enkel)"/>
   <Variant Name="Sporvekseltabell (detaljert)"/>
   <Variant Name="Sporvekseltabell (detaljert, med drivmaskiner)"/>
  </Variants>
  <InsertTable Name="Sporvekseltabell (enkel)" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Sporvekseltabell</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilter></ObjectManagerFilter>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>RcType == rctype_Switch</LuaFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <Font>RC-STANDARD</Font>
    <TitleTextHeight>5</TitleTextHeight>
    <HeaderTextHeight>3.5</HeaderTextHeight>
    <DataTextHeight>2.5</DataTextHeight>
    <VerticalCellMargin>1.5</VerticalCellMargin>
    <HorizontalCellMargin>1.5</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <TableFormat>Standard</TableFormat>
    <Columns>
     <ColumnSpecification>
      <Headers/>
      <Width>60</Width>
      <Data>Name</Data>
      <Title>Navn</Title>
      <Sort/>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers/>
      <Width>60</Width>
      <Data>NOBN_trk_toKm(ReferenceMileage,3)</Data>
      <Title>Km</Title>
      <Sort>Ascending</Sort>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers/>
      <Width>60</Width>
      <Data>getInvertedBlockImage()</Data>
      <Title>2D symbol</Title>
      <Sort/>
      <Guid>d762837b-7200-46a2-8e90-ca7b8d257ccb</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>10272f0b-a413-49f6-bd6a-b520ea345d97</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
  <InsertTable Name="Sporvekseltabell (detaljert)" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Sporvekseltabell (detaljert)</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilter></ObjectManagerFilter>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>RcType == rctype_Switch</LuaFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <Font>RC-STANDARD</Font>
    <TitleTextHeight>5</TitleTextHeight>
    <HeaderTextHeight>3.5</HeaderTextHeight>
    <DataTextHeight>2.5</DataTextHeight>
    <VerticalCellMargin>1.5</VerticalCellMargin>
    <HorizontalCellMargin>1.5</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <TableFormat>Standard</TableFormat>
    <Columns>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Sporveksel</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>Name</Data>
      <Title>Navn</Title>
      <Sort/>
      <Guid>11312c48-34c1-4926-a944-5e3db2acc053</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Sporveksel</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>Tag</Data>
      <Title>Objekt-ID</Title>
      <Sort/>
      <Guid>9f4e777c-d7ae-41f0-b833-5a41333c6700</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Sporveksel</Title>
       </Header>
      </Headers>
      <Width>20</Width>
      <Data>code</Data>
      <Title>Spv. nr.</Title>
      <Sort>Ascending</Sort>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Sporveksel</Title>
       </Header>
      </Headers>
      <Width>80</Width>
      <Data>Variant</Data>
      <Title>Variant</Title>
      <Sort/>
      <Guid>4471f8ed-9d27-49f8-8268-a6ec892ffc35</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Sporveksel</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>if (Dir == "up") then
    return "Stigende Km"
else
    return "Synkende Km"
end</Data>
      <Title>Retning</Title>
      <Sort/>
      <Guid>f666b8a7-c054-4d7c-b430-7af861b9e669</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Sporveksel</Title>
       </Header>
      </Headers>
      <Width>30</Width>
      <Data>if (SwitchGeometry == "left") then 
	return "V"
elseif (SwitchGeometry == "right") then
	return "H"
else
	return "???",_warning
end	</Data>
      <Title>Avvik</Title>
      <Sort/>
      <Guid>51712f0c-3731-4403-aff2-74ba7c027bca</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Sporveksel</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>getInvertedBlockImage()</Data>
      <Title>Symbol</Title>
      <Sort/>
      <Guid>d762837b-7200-46a2-8e90-ca7b8d257ccb</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Signalanlegg</Title>
       </Header>
      </Headers>
      <Width>80</Width>
      <Data>SwitchControlAndLocking</Data>
      <Title>Styring og kontroll</Title>
      <Sort/>
      <Guid>ba4ca159-9a7b-49a0-a5c0-8724928c04ec</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Signalanlegg</Title>
       </Header>
      </Headers>
      <Width>30</Width>
      <Data>
						local s = rel_Switch_IsCoupledWith_Switch
						local r, n = getRelatedObjects(s)
						if n == 0 then
							return "-"
						else
							return r[0].code
						end
					</Data>
      <Title>Koblet med</Title>
      <Sort/>
      <Guid>fa730a31-6e44-4088-bba8-5800add006c9</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Kilometrering (ift best. spor)</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>ReferenceAlignment.code</Data>
      <Title>Best. spor</Title>
      <Sort/>
      <Guid>854751e2-f04e-4498-8ec9-1e4c169fe30c</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Kilometrering (ift best. spor)</Title>
       </Header>
      </Headers>
      <Width>35</Width>
      <Data>NOBN_trk_toKm(ReferenceMileage,3)</Data>
      <Title>Km SS (i ref. spor)</Title>
      <Sort>Ascending</Sort>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Kilometrering (ift best. spor)</Title>
       </Header>
      </Headers>
      <Width>35</Width>
      <Data>NOBN_trk_toKm(NOBN_trk_getFoulingPointReferenceMileage(getObjectFromId(id)),3)</Data>
      <Title>Km Mid</Title>
      <Sort/>
      <Guid>e737d99a-ab83-4ccf-905b-b8aa9c0f3503</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Profilering (ift eget spor)</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>Alignment.code</Data>
      <Title>Eget spor</Title>
      <Sort/>
      <Guid>5e391291-6606-4394-b065-465f26837190</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Profilering (ift eget spor)</Title>
       </Header>
      </Headers>
      <Width>35</Width>
      <Data>NOBN_trk_toKm(Mileage,6)</Data>
      <Title>Profil SS</Title>
      <Sort/>
      <Guid>2c751b6d-9494-4316-8a01-1f0fecc9b396</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Profilering (ift eget spor)</Title>
       </Header>
      </Headers>
      <Width>35</Width>
      <Data>NOBN_trk_toKm(NOBN_trk_getFoulingPointMileage(),6)</Data>
      <Title>Profil Mid</Title>
      <Sort/>
      <Guid>d27510a5-48e8-4a25-8eeb-6434fcc8f31b</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>10272f0b-a413-49f6-bd6a-b520ea345d97</string>
     <string>71b321ec-4bc3-493d-974b-2b01236d720c</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
  <InsertTable Name="Sporvekseltabell (detaljert, med drivmaskiner)" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Sporvekseltabell (detaljert)</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilter/>
    <ObjectManagerFilterList/>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>RcType == rctype_Switch</LuaFilter>
    <UseDataSetFilter>false</UseDataSetFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <TitleTextHeight>10</TitleTextHeight>
    <HeaderTextHeight>5</HeaderTextHeight>
    <DataTextHeight>3</DataTextHeight>
    <VerticalCellMargin>1.5</VerticalCellMargin>
    <HorizontalCellMargin>1.5</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <MinRowHeight>3</MinRowHeight>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <VerticalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>true</IsVertical>
     <Location>Left</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </VerticalNumbering>
    <HorizontalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>false</IsVertical>
     <Location>Bottom</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </HorizontalNumbering>
    <TableFormat>Standard</TableFormat>
    <Font>RC-STANDARD</Font>
    <Columns>
     <ColumnSpecification>
      <Guid>11312c48-34c1-4926-a944-5e3db2acc053</Guid>
      <Headers>
       <Header Name="Sporveksel"/>
       <Header Name="Navn"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>Name</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>9f4e777c-d7ae-41f0-b833-5a41333c6700</Guid>
      <Headers>
       <Header Name="Sporveksel"/>
       <Header Name="Objekt-ID"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>Tag</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Headers>
       <Header Name="Sporveksel"/>
       <Header Name="Spv. nr."/>
      </Headers>
      <Width>20</Width>
      <Sort>Ascending</Sort>
      <Alignment>MiddleCenter</Alignment>
      <Data>code</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>4471f8ed-9d27-49f8-8268-a6ec892ffc35</Guid>
      <Headers>
       <Header Name="Sporveksel"/>
       <Header Name="Variant"/>
      </Headers>
      <Width>80</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>Variant</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>f666b8a7-c054-4d7c-b430-7af861b9e669</Guid>
      <Headers>
       <Header Name="Sporveksel"/>
       <Header Name="Retning"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>if (Dir == "up") then
					return "Stigende Km"
				else
					return "Synkende Km"
				end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>51712f0c-3731-4403-aff2-74ba7c027bca</Guid>
      <Headers>
       <Header Name="Sporveksel"/>
       <Header Name="Avvik"/>
      </Headers>
      <Width>30</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>if (SwitchGeometry == "left") then 
					return "V"
				elseif (SwitchGeometry == "right") then
					return "H"
				else
					return "???",_warning
				end	</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>d762837b-7200-46a2-8e90-ca7b8d257ccb</Guid>
      <Headers>
       <Header Name="Sporveksel"/>
       <Header Name="Symbol"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>getInvertedBlockImage()</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>ba4ca159-9a7b-49a0-a5c0-8724928c04ec</Guid>
      <Headers>
       <Header Name="Signalanlegg"/>
       <Header Name="Styring og kontroll"/>
      </Headers>
      <Width>80</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>SwitchControlAndLockingEnumTable = 
					{
						Rm = {	  
							"Remote controlled, machine locked",
							"Sentralstilt, maskinlåst"
						},
						Rl = {
							"Remote controlled, keylocked for left switch leg train movements", 
							"Sentralstilt, kontrollåst V"
						},
						Rr = {	
							"Sentralstilt, kontrollåst H",
							"Remote controlled, keylocked for right switch leg train movements"
						},
						Rb = {
							"Remote controlled, keylocked for both right and left switch leg train movements",
							"Sentralstilt, kontrollåst HV"
						},
						Pl = {
							"Pushbutton controlled, keylocked for left switch leg train movements",
							"Trykknapp, kontrollåst V"
						},
						Pr = {
							"Pushbutton controlled, keylocked for right switch leg train movements",
							"Trykknapp, kontrollåst H"
						},
						Pb = {
							"Pushbutton controlled, keylocked for both right and left switch leg train movements",
							"Trykknapp, kontrollåst HV"
						},
						Pn = {
							"Pushbutton controlled, not interlocked",
							"Trykknapp, uforriglet"
						},
						Hl = {
							"Hand operated (hand thrown), keylocked for left switch leg train movements",
							"Kastelodd, kontrollåst V"
						},
						Hr = {
							"Hand operated (hand thrown), keylocked for right switch leg train movements",
							"Kastelodd, kontrollåst H"
						},
						Hb = {
							"Hand operated (hand thrown), keylocked for both right and left switch leg train movements (one at a time)",
							"Kastelodd, kontrollåst HV"
						},
						Hn = {
							"Hand operated (hand thrown), not interlocked",
							"Kastelodd, uforriglet"
						}
					}
				
				culture = 2 --Norwegian
				return SwitchControlAndLockingEnumTable[SwitchControlAndLocking][culture]</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>fa730a31-6e44-4088-bba8-5800add006c9</Guid>
      <Headers>
       <Header Name="Signalanlegg"/>
       <Header Name="Koblet med"/>
      </Headers>
      <Width>30</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>
										local s = rel_Switch_IsCoupledWith_Switch
										local r, n = getRelatedObjects(s)
										if n == 0 then
											return "-"
										else
											return r[0].code
										end
									</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Headers>
       <Header Name="Referansespor"/>
       <Header Name="Km SS (i ref. spor)"/>
      </Headers>
      <Width>35</Width>
      <Sort>Ascending</Sort>
      <Alignment>MiddleCenter</Alignment>
      <Data>NOBN_trk_toKm(ReferenceMileage,3)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>e737d99a-ab83-4ccf-905b-b8aa9c0f3503</Guid>
      <Headers>
       <Header Name="Referansespor"/>
       <Header Name="Km Mid"/>
      </Headers>
      <Width>35</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>NOBN_trk_toKm(NOBN_trk_getFoulingPointReferenceMileage(getObjectFromId(id)),3)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>854751e2-f04e-4498-8ec9-1e4c169fe30c</Guid>
      <Headers>
       <Header Name="Referansespor"/>
       <Header Name="Ref. spor"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>ReferenceAlignment.code</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>2c751b6d-9494-4316-8a01-1f0fecc9b396</Guid>
      <Headers>
       <Header Name="Eget spor"/>
       <Header Name="PEL SS (i eget spor)"/>
      </Headers>
      <Width>35</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>NOBN_trk_toKm(Mileage,6)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>d27510a5-48e8-4a25-8eeb-6434fcc8f31b</Guid>
      <Headers>
       <Header Name="Eget spor"/>
       <Header Name="PEL Mid"/>
      </Headers>
      <Width>35</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>NOBN_trk_toKm(NOBN_trk_getFoulingPointMileage(),6)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5e391291-6606-4394-b065-465f26837190</Guid>
      <Headers>
       <Header Name="Eget spor"/>
       <Header Name="Eget spor"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>Alignment.code</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>53cad9b3-26c3-4409-a57f-0a7aa5489538</Guid>
      <Headers>
       <Header Name="Drivmaskiner"/>
       <Header Name="Antall drivmaskiner på tunge"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>function analyzePointMachines(sw)
					sw = sw and this
					if sw.RcType ~= rctype_Switch then 
						return {	ntm="?", tms="?", tmt="?", nfm="?", fms="?", fmt="?" }
					end
					local s = rel_Switch_Has_PointMachine
					pointMachines, N = getRelatedObjects(s)
					
					--Split between tongue machine and point frog (swing nose) machine for reasonable length pointMachines:
					minDistanceFromStockRailJointToFrog = 20
					
					-- Init:
					nTongueMachines = 0
					nFrogMachines = 0
					nLeftTongueMachines = 0
					nRightTongueMachines = 0
					nLeftFrogMachines = 0
					nRightFrogMachines = 0
					tongueMachineType = ""
					frogMachineType = ""
					
					for i = 0,N-1 do
						if RC__getDistance2D(this,pointMachines[i]) &lt; minDistanceFromStockRailJointToFrog then
							nTongueMachines = nTongueMachines + 1
							if pointMachines[i].LeftSided then nLeftTongueMachines = nLeftTongueMachines + 1 end
							if pointMachines[i].RightSided then nRightTongueMachines = nRightTongueMachines + 1 end
							tongueMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						else
							nFrogMachines = nFrogMachines + 1
							if pointMachines[i].LeftSided then nLeftFrogMachines = nLeftFrogMachines + 1 end
							if pointMachines[i].RightSided then nRightFrogMachines = nRightFrogMachines + 1 end
							frogMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						end	
					end
					
					if nLeftTongueMachines * nRightTongueMachines &gt; 0 then
						tongueMachineSide = "(varierer)"
					elseif nLeftTongueMachines &gt; 0 then
						tongueMachineSide = "Venstre"
					elseif nRightTongueMachines &gt; 0 then
						tongueMachineSide = "Høyre"
					else
						tongueMachineSide = "-"
					end
					
					if nLeftFrogMachines * nRightFrogMachines &gt; 0 then
						frogMachineSide = "(varierer)"
					elseif nLeftFrogMachines &gt; 0 then
						frogMachineSide = "Venstre"
					elseif nRightFrogMachines &gt; 0 then
						frogMachineSide = "Høyre"
					else
						frogMachineSide = "-"
					end
					return {	ntm=nTongueMachines, tms=tongueMachineSide, tmt=tongueMachineType, 
								nfm=nFrogMachines, fms=frogMachineSide, fmt=frogMachineType
							}
				end
				
				return analyzePointMachines(this).ntm</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>0e40c3d7-060b-4ada-a238-fbae9f11c9b2</Guid>
      <Headers>
       <Header Name="Drivmaskiner"/>
       <Header Name="Tungemaskiner side av spor"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>function analyzePointMachines(sw)
					sw = sw and this
					if sw.RcType ~= rctype_Switch then 
						return {	ntm="?", tms="?", tmt="?", nfm="?", fms="?", fmt="?" }
					end
					
					local s = rel_Switch_Has_PointMachine
					pointMachines, N = getRelatedObjects(s)
					
					--Split between tongue machine and point frog (swing nose) machine for reasonable length pointMachines:
					minDistanceFromStockRailJointToFrog = 20
					
					-- Init:
					nTongueMachines = 0
					nFrogMachines = 0
					nLeftTongueMachines = 0
					nRightTongueMachines = 0
					nLeftFrogMachines = 0
					nRightFrogMachines = 0
					tongueMachineType = ""
					frogMachineType = ""
					
					for i = 0,N-1 do
						if RC__getDistance2D(this,pointMachines[i]) &lt; minDistanceFromStockRailJointToFrog then
							nTongueMachines = nTongueMachines + 1
							if pointMachines[i].LeftSided then nLeftTongueMachines = nLeftTongueMachines + 1 end
							if pointMachines[i].RightSided then nRightTongueMachines = nRightTongueMachines + 1 end
							tongueMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						else
							nFrogMachines = nFrogMachines + 1
							if pointMachines[i].LeftSided then nLeftFrogMachines = nLeftFrogMachines + 1 end
							if pointMachines[i].RightSided then nRightFrogMachines = nRightFrogMachines + 1 end
							frogMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						end	
					end
					
					if nLeftTongueMachines * nRightTongueMachines &gt; 0 then
						tongueMachineSide = "(varierer)"
					elseif nLeftTongueMachines &gt; 0 then
						tongueMachineSide = "Venstre"
					elseif nRightTongueMachines &gt; 0 then
						tongueMachineSide = "Høyre"
					else
						tongueMachineSide = "-"
					end
					
					if nLeftFrogMachines * nRightFrogMachines &gt; 0 then
						frogMachineSide = "(varierer)"
					elseif nLeftFrogMachines &gt; 0 then
						frogMachineSide = "Venstre"
					elseif nRightFrogMachines &gt; 0 then
						frogMachineSide = "Høyre"
					else
						frogMachineSide = "-"
					end
					return {	ntm=nTongueMachines, tms=tongueMachineSide, tmt=tongueMachineType, 
								nfm=nFrogMachines, fms=frogMachineSide, fmt=frogMachineType
							}
				end
				
				return analyzePointMachines(this).tms</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>358063ad-bcdf-4630-afc8-ece21fb55ffd</Guid>
      <Headers>
       <Header Name="Drivmaskiner"/>
       <Header Name="Tungemaskiner type"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>function analyzePointMachines(sw)
					sw = sw and this
					if sw.RcType ~= rctype_Switch then 
						return {	ntm="?", tms="?", tmt="?", nfm="?", fms="?", fmt="?" }
					end
					
					local s = rel_Switch_Has_PointMachine
					pointMachines, N = getRelatedObjects(s)
					
					--Split between tongue machine and point frog (swing nose) machine for reasonable length pointMachines:
					minDistanceFromStockRailJointToFrog = 20
					
					-- Init:
					nTongueMachines = 0
					nFrogMachines = 0
					nLeftTongueMachines = 0
					nRightTongueMachines = 0
					nLeftFrogMachines = 0
					nRightFrogMachines = 0
					tongueMachineType = ""
					frogMachineType = ""
					
					for i = 0,N-1 do
						if RC__getDistance2D(this,pointMachines[i]) &lt; minDistanceFromStockRailJointToFrog then
							nTongueMachines = nTongueMachines + 1
							if pointMachines[i].LeftSided then nLeftTongueMachines = nLeftTongueMachines + 1 end
							if pointMachines[i].RightSided then nRightTongueMachines = nRightTongueMachines + 1 end
							tongueMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						else
							nFrogMachines = nFrogMachines + 1
							if pointMachines[i].LeftSided then nLeftFrogMachines = nLeftFrogMachines + 1 end
							if pointMachines[i].RightSided then nRightFrogMachines = nRightFrogMachines + 1 end
							frogMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						end	
					end
					
					if nLeftTongueMachines * nRightTongueMachines &gt; 0 then
						tongueMachineSide = "(varierer)"
					elseif nLeftTongueMachines &gt; 0 then
						tongueMachineSide = "Venstre"
					elseif nRightTongueMachines &gt; 0 then
						tongueMachineSide = "Høyre"
					else
						tongueMachineSide = "-"
					end
					
					if nLeftFrogMachines * nRightFrogMachines &gt; 0 then
						frogMachineSide = "(varierer)"
					elseif nLeftFrogMachines &gt; 0 then
						frogMachineSide = "Venstre"
					elseif nRightFrogMachines &gt; 0 then
						frogMachineSide = "Høyre"
					else
						frogMachineSide = "-"
					end
				
					return {	ntm=nTongueMachines, tms=tongueMachineSide, tmt=tongueMachineType, 
								nfm=nFrogMachines, fms=frogMachineSide, fmt=frogMachineType
							}
				end
				
				return analyzePointMachines(this).tmt</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>9d1c5df3-ee27-492f-9809-d73dbaf75501</Guid>
      <Headers>
       <Header Name="Drivmaskiner"/>
       <Header Name="Antall drivmaskiner på krysset"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>function analyzePointMachines(sw)
					sw = sw and this
					if sw.RcType ~= rctype_Switch then 
						return {	ntm="?", tms="?", tmt="?", nfm="?", fms="?", fmt="?" }
					end
					
					local s = rel_Switch_Has_PointMachine
					pointMachines, N = getRelatedObjects(s)
					
					--Split between tongue machine and point frog (swing nose) machine for reasonable length pointMachines:
					minDistanceFromStockRailJointToFrog = 20
					
					-- Init:
					nTongueMachines = 0
					nFrogMachines = 0
					nLeftTongueMachines = 0
					nRightTongueMachines = 0
					nLeftFrogMachines = 0
					nRightFrogMachines = 0
					tongueMachineType = ""
					frogMachineType = ""
					
					for i = 0,N-1 do
						if RC__getDistance2D(this,pointMachines[i]) &lt; minDistanceFromStockRailJointToFrog then
							nTongueMachines = nTongueMachines + 1
							if pointMachines[i].LeftSided then nLeftTongueMachines = nLeftTongueMachines + 1 end
							if pointMachines[i].RightSided then nRightTongueMachines = nRightTongueMachines + 1 end
							tongueMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						else
							nFrogMachines = nFrogMachines + 1
							if pointMachines[i].LeftSided then nLeftFrogMachines = nLeftFrogMachines + 1 end
							if pointMachines[i].RightSided then nRightFrogMachines = nRightFrogMachines + 1 end
							frogMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						end	
					end
					
					if nLeftTongueMachines * nRightTongueMachines &gt; 0 then
						tongueMachineSide = "(varierer)"
					elseif nLeftTongueMachines &gt; 0 then
						tongueMachineSide = "Venstre"
					elseif nRightTongueMachines &gt; 0 then
						tongueMachineSide = "Høyre"
					else
						tongueMachineSide = "-"
					end
					
					if nLeftFrogMachines * nRightFrogMachines &gt; 0 then
						frogMachineSide = "(varierer)"
					elseif nLeftFrogMachines &gt; 0 then
						frogMachineSide = "Venstre"
					elseif nRightFrogMachines &gt; 0 then
						frogMachineSide = "Høyre"
					else
						frogMachineSide = "-"
					end
				
					return {	ntm=nTongueMachines, tms=tongueMachineSide, tmt=tongueMachineType, 
								nfm=nFrogMachines, fms=frogMachineSide, fmt=frogMachineType
							}
				end
				
				return analyzePointMachines(this).nfm</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>c10f5dea-1295-4482-9c85-886c02244d63</Guid>
      <Headers>
       <Header Name="Drivmaskiner"/>
       <Header Name="Kryssmaskiner side av spor"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>function analyzePointMachines(sw)
					sw = sw and this
					if sw.RcType ~= rctype_Switch then 
						return {	ntm="?", tms="?", tmt="?", nfm="?", fms="?", fmt="?" }
					end
					
					local s = rel_Switch_Has_PointMachine
					pointMachines, N = getRelatedObjects(s)
					
					--Split between tongue machine and point frog (swing nose) machine for reasonable length pointMachines:
					minDistanceFromStockRailJointToFrog = 20
					
					-- Init:
					nTongueMachines = 0
					nFrogMachines = 0
					nLeftTongueMachines = 0
					nRightTongueMachines = 0
					nLeftFrogMachines = 0
					nRightFrogMachines = 0
					tongueMachineType = ""
					frogMachineType = ""
					
					for i = 0,N-1 do
						if RC__getDistance2D(this,pointMachines[i]) &lt; minDistanceFromStockRailJointToFrog then
							nTongueMachines = nTongueMachines + 1
							if pointMachines[i].LeftSided then nLeftTongueMachines = nLeftTongueMachines + 1 end
							if pointMachines[i].RightSided then nRightTongueMachines = nRightTongueMachines + 1 end
							tongueMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						else
							nFrogMachines = nFrogMachines + 1
							if pointMachines[i].LeftSided then nLeftFrogMachines = nLeftFrogMachines + 1 end
							if pointMachines[i].RightSided then nRightFrogMachines = nRightFrogMachines + 1 end
							frogMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						end	
					end
					
					if nLeftTongueMachines * nRightTongueMachines &gt; 0 then
						tongueMachineSide = "(varierer)"
					elseif nLeftTongueMachines &gt; 0 then
						tongueMachineSide = "Venstre"
					elseif nRightTongueMachines &gt; 0 then
						tongueMachineSide = "Høyre"
					else
						tongueMachineSide = "-"
					end
					
					if nLeftFrogMachines * nRightFrogMachines &gt; 0 then
						frogMachineSide = "(varierer)"
					elseif nLeftFrogMachines &gt; 0 then
						frogMachineSide = "Venstre"
					elseif nRightFrogMachines &gt; 0 then
						frogMachineSide = "Høyre"
					else
						frogMachineSide = "-"
					end
					
					return {	ntm=nTongueMachines, tms=tongueMachineSide, tmt=tongueMachineType, 
								nfm=nFrogMachines, fms=frogMachineSide, fmt=frogMachineType
							}
				end
				
				return analyzePointMachines(this).fms</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>a6fa869f-6967-49b5-9c1b-92f205a644f2</Guid>
      <Headers>
       <Header Name="Drivmaskiner"/>
       <Header Name="Kryssmaskiner type"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>function analyzePointMachines(sw)
					sw = sw and this
					if sw.RcType ~= rctype_Switch then 
						return {	ntm="?", tms="?", tmt="?", nfm="?", fms="?", fmt="?" }
					end
					
					local s = rel_Switch_Has_PointMachine
					pointMachines, N = getRelatedObjects(s)
					
					--Split between tongue machine and point frog (swing nose) machine for reasonable length pointMachines:
					minDistanceFromStockRailJointToFrog = 20
					
					-- Init:
					nTongueMachines = 0
					nFrogMachines = 0
					nLeftTongueMachines = 0
					nRightTongueMachines = 0
					nLeftFrogMachines = 0
					nRightFrogMachines = 0
					tongueMachineType = ""
					frogMachineType = ""
					
					for i = 0,N-1 do
						if RC__getDistance2D(this,pointMachines[i]) &lt; minDistanceFromStockRailJointToFrog then
							nTongueMachines = nTongueMachines + 1
							if pointMachines[i].LeftSided then nLeftTongueMachines = nLeftTongueMachines + 1 end
							if pointMachines[i].RightSided then nRightTongueMachines = nRightTongueMachines + 1 end
							tongueMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						else
							nFrogMachines = nFrogMachines + 1
							if pointMachines[i].LeftSided then nLeftFrogMachines = nLeftFrogMachines + 1 end
							if pointMachines[i].RightSided then nRightFrogMachines = nRightFrogMachines + 1 end
							frogMachineType = pointMachines[i].Variant -- Overwrite previous, if any
						end	
					end
					
					if nLeftTongueMachines * nRightTongueMachines &gt; 0 then
						tongueMachineSide = "(varierer)"
					elseif nLeftTongueMachines &gt; 0 then
						tongueMachineSide = "Venstre"
					elseif nRightTongueMachines &gt; 0 then
						tongueMachineSide = "Høyre"
					else
						tongueMachineSide = "-"
					end
					
					if nLeftFrogMachines * nRightFrogMachines &gt; 0 then
						frogMachineSide = "(varierer)"
					elseif nLeftFrogMachines &gt; 0 then
						frogMachineSide = "Venstre"
					elseif nRightFrogMachines &gt; 0 then
						frogMachineSide = "Høyre"
					else
						frogMachineSide = "-"
					end
					
					return {	ntm=nTongueMachines, tms=tongueMachineSide, tmt=tongueMachineType, 
								nfm=nFrogMachines, fms=frogMachineSide, fmt=frogMachineType
							}
				end
				
				return analyzePointMachines(this).fmt</Data>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>10272f0b-a413-49f6-bd6a-b520ea345d97</string>
     <string>71b321ec-4bc3-493d-974b-2b01236d720c</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableHorizontalGeometry" Name="JBTFE_DIV Horisontaltrasétabell" Layer="JBTFE_TABELLER" Color="ByLayer" Group="Overbygning/Datautveksling">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Horisontaltrasétabell">
   <Variant Name="Horisontaltrasétabell"/>
  </Variants>
  <InsertTable Name="Horisontaltrasétabell" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <ColumnSelectionSelf>true</ColumnSelectionSelf>
    <ColumnSelectionFromMasterTable>false</ColumnSelectionFromMasterTable>
    <LuaPreviewAutoExecute>false</LuaPreviewAutoExecute>
    <LuaPreviewRowSelectionSearchFilter/>
    <Title>Horisontaltrasétabell - 2022-10-28_000 KO-HOT og KO-VET tabeller</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilter/>
    <ObjectManagerFilterList/>
    <ObjectTypeBrowser>false</ObjectTypeBrowser>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>RcType == rctype_HorizontalGeometryVertex</LuaFilter>
    <UseDataSetFilter>false</UseDataSetFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <TitleTextHeight>5</TitleTextHeight>
    <HeaderTextHeight>3.5</HeaderTextHeight>
    <DataTextHeight>2.5</DataTextHeight>
    <VerticalCellMargin>1</VerticalCellMargin>
    <HorizontalCellMargin>1</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <MinRowHeight>3</MinRowHeight>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <VerticalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>true</IsVertical>
     <Location>Left</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </VerticalNumbering>
    <HorizontalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>false</IsVertical>
     <Location>Bottom</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </HorizontalNumbering>
    <TableFormat>Standard</TableFormat>
    <Font>RC-STANDARD</Font>
    <Columns>
     <ColumnSpecification>
      <Guid>e30f54fb-1e8b-4c95-bfdd-dd533e0d15cb</Guid>
      <Headers>
       <Header Name="Objekt"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>BaneNORBaneDataID</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>bef4d979-bacb-4911-a8a7-80635b4a0312</Guid>
      <Headers>
       <Header Name="Beskrivelse"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>str = "Horisontaltrasé, " .. (Name == "_" and "Start/Slutt")
if ocpRef then str = str .. ", " .. getObjectFromId(ocpRef).name end
return str</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>044b867a-6d52-4df6-891b-fda8ab99697a</Guid>
      <Headers>
       <Header Name="Tilhører objekt"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>Ascending</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>Alignment.code</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>a308c405-7a08-47f0-9062-30327102216e</Guid>
      <Headers>
       <Header Name="Tilhører lokasjon"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"TODO"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>fb7dd975-d756-43c7-b114-8473aeecedfa</Guid>
      <Headers>
       <Header Name="Navn/nr"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>if Variant == "(Linje start/slutt)" then
	if pos &lt;= Alignment.RcAlignment.HorizontalGeometry.Length/2 then
		return "RL start"
	else
		return "RL slutt"
	end
else
	return name
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>0deca630-a561-414b-8d7b-21caffb5b285</Guid>
      <Headers>
       <Header Name="Idriftssatt dato"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"TODO"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>1e743431-5cf0-47b9-b23e-4aba12d5654b</Guid>
      <Headers>
       <Header Name="Profil(fra) [km]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.06f",Mileage/1000)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Headers>
       <Header Name="Km(fra) [km]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>Ascending</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",ReferenceMileage/1000)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>76d50cbf-7dde-41dc-9485-2de6e15df812</Guid>
      <Headers>
       <Header Name="Side(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"Senter"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5ed3a550-2ff2-4371-a588-efaa021f2e53</Guid>
      <Headers>
       <Header Name="Sportype(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>s = RcSection:filter(function(x) return x.RcType == "FE%-DIV Sporbruk" end)
if getCollectionLength(s) == 0 then
	return "Ukjent"
else
	return s[0].Variant
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>0f52b60a-38bb-40a0-9d96-54f317f6ef1d</Guid>
      <Headers>
       <Header Name="Spornr(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>Alignment.code</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5e8302d5-af4c-4446-aea4-143f4d648e36</Guid>
      <Headers>
       <Header Name="Avst/Spormidt(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>0</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>e28acf01-34e6-4a79-9b31-8b7fc26d6be0</Guid>
      <Headers>
       <Header Name="Eier"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"Bane NOR"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>fc15f89b-676d-4a62-a0c6-4ff124763b52</Guid>
      <Headers>
       <Header Name="Nord(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",geoCoord.Y)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>8df53a42-bed9-4667-a761-440c46a5197b</Guid>
      <Headers>
       <Header Name="Øst(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",geoCoord.X)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5f2711e2-0b3c-485f-8ea0-376ab81cef28</Guid>
      <Headers>
       <Header Name="Høyde(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",geoCoord.Z)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>2e3d26fe-2da8-4495-9570-06159653e2af</Guid>
      <Headers>
       <Header Name="Dokumentreferanse"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"TODO"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>fa469762-6685-482f-b3b3-10b31d5f6589</Guid>
      <Headers>
       <Header Name="Serienr."/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"TODO"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Headers>
       <Header Name="Trasépunkt"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>if Variant == "(Linje start/slutt)" then
	if pos &lt;= Alignment.RcAlignment.HorizontalGeometry.Length/2 then
		return "RL start"
	else
		return "RL slutt"
	end
else
	return name
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>3b27856d-3955-4cb8-b54e-9d43504244fb</Guid>
      <Headers>
       <Header Name="Kurveradius [m]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>ai = getAlignmentInfo()
if ai.Segment.Type ~= "Curve" then
	return "-"
else
	return ai.CurveRadius == math.huge and ai.CurveRadius or string.format("%.03f", ai.CurveRadius) --CurveRadius is unsigned
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>ef6c1bb3-82c0-40aa-b3a7-9291375d5a15</Guid>
      <Headers>
       <Header Name="Overhøyde [mm]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.0f", RC__isNan(getAlignmentInfo().Cant) and 0 or getAlignmentInfo().Cant)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5035e780-fad1-4702-b9ad-511753fa60ef</Guid>
      <Headers>
       <Header Name="Overgangskurvens lengde [m]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>if Variant ~= "OB" then return "-" end
ai = getAlignmentInfo()
if ai and ai.NearestHorizontalVertex then
	if ai.NearestHorizontalVertex.Item1.Type == "Clothoid" then
		return string.format("%.03f", ai.NearestHorizontalVertex.Item1.Length)
	elseif ai.NearestHorizontalVertex.Item2.Type == "Clothoid" then
		return string.format("%.03f", ai.NearestHorizontalVertex.Item2.Length)
	else
		return "?"
	end
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>d26d4f01-0cef-4c8d-bd72-ecadde152216</Guid>
      <Headers>
       <Header Name="Høyde [m]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"TODO"</Data>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>044b867a-6d52-4df6-891b-fda8ab99697a</string>
     <string>10272f0b-a413-49f6-bd6a-b520ea345d97</string>
    </SortOrder>
    <NewColumnWidth xsi:nil="true"/>
   </TableSpecification>
  </InsertTable>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableVerticalProfile" Name="JBTFE_DIV Vertikaltrasétabell" Layer="JBTFE_TABELLER" Color="ByLayer" Group="Overbygning/Datautveksling">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Vertikaltrasétabell">
   <Variant Name="Vertikaltrasétabell"/>
  </Variants>
  <InsertTable Name="Vertikaltrasétabell" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <ColumnSelectionSelf>true</ColumnSelectionSelf>
    <ColumnSelectionFromMasterTable>false</ColumnSelectionFromMasterTable>
    <LuaPreviewAutoExecute>false</LuaPreviewAutoExecute>
    <LuaPreviewRowSelectionSearchFilter/>
    <Title>Brukerdefinert - 2022-10-28_000 KO-HOT og KO-VET tabeller</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilter/>
    <ObjectManagerFilterList/>
    <ObjectTypeBrowser>false</ObjectTypeBrowser>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>RcType == rctype_VerticalProfileVertex</LuaFilter>
    <UseDataSetFilter>false</UseDataSetFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <TitleTextHeight>5</TitleTextHeight>
    <HeaderTextHeight>3.5</HeaderTextHeight>
    <DataTextHeight>2.5</DataTextHeight>
    <VerticalCellMargin>1</VerticalCellMargin>
    <HorizontalCellMargin>1</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <MinRowHeight>3</MinRowHeight>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <VerticalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>true</IsVertical>
     <Location>Left</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </VerticalNumbering>
    <HorizontalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>false</IsVertical>
     <Location>Bottom</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </HorizontalNumbering>
    <TableFormat>Standard</TableFormat>
    <Font>RC-STANDARD</Font>
    <Columns>
     <ColumnSpecification>
      <Guid>e30f54fb-1e8b-4c95-bfdd-dd533e0d15cb</Guid>
      <Headers>
       <Header Name="Objekt"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>BaneNORBaneDataID</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>bef4d979-bacb-4911-a8a7-80635b4a0312</Guid>
      <Headers>
       <Header Name="Beskrivelse"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>str = "Vertikaltrase, " .. (name ~= "" and name or "Start/Sutt)")
if ocpRef then
	str = str .. ", " .. getObjectFromId(ocpRef).name
end
return str</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>76b87e66-27ed-427a-93e7-b8ee66cb9827</Guid>
      <Headers>
       <Header Name="Tilhører objekt"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>Ascending</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>Alignment.code</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>86b27289-9419-4ecc-8d4a-2e3da3f8fe9f</Guid>
      <Headers>
       <Header Name="Tilhører lokasjon"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"TODO"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>e25d4b1c-aa3e-42ab-98c6-cfafa7233448</Guid>
      <Headers>
       <Header Name="Navn/nr"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>if name == "(Linje start/slutt)" then
	if pos &lt;= Alignment.RcAlignment.HorizontalGeometry.Length/2 then
		return "Linje start"
	else
		return "Linje slutt"
	end
else
	return name
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>ac22abc1-b59e-4457-825b-896afd9a7a46</Guid>
      <Headers>
       <Header Name="Idriftssatt dato"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"TODO"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>7169b1a9-7a4a-4f4c-ad7f-4c2cd78542f8</Guid>
      <Headers>
       <Header Name="Profil(fra) [km]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>return string.format("%.06f",Mileage/1000)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Headers>
       <Header Name="Km(fra) [km]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>Ascending</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>refId = getAlignmentInfo().ReferenceAlignmentId
rm = getAlignmentInfo(refId).Mileage
return rm and string.format("%.03f",rm/1000) or ""</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>76d50cbf-7dde-41dc-9485-2de6e15df812</Guid>
      <Headers>
       <Header Name="Side(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"Senter"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5ed3a550-2ff2-4371-a588-efaa021f2e53</Guid>
      <Headers>
       <Header Name="Sportype(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>trackUsages = RcSection:filter(function(x) return x.RcType == "Sporbruk" end)
if getCollectionLength(trackUsages) &gt; 0 then
	return trackUsages[0].Variant
else
	return "Ukjent"
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>0f52b60a-38bb-40a0-9d96-54f317f6ef1d</Guid>
      <Headers>
       <Header Name="Spornr(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>Alignment.code</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5e8302d5-af4c-4446-aea4-143f4d648e36</Guid>
      <Headers>
       <Header Name="Avst/Spormidt(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>0</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>e28acf01-34e6-4a79-9b31-8b7fc26d6be0</Guid>
      <Headers>
       <Header Name="Eier"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"Bane NOR"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>fc15f89b-676d-4a62-a0c6-4ff124763b52</Guid>
      <Headers>
       <Header Name="Nord(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",geoCoord.Y)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>8df53a42-bed9-4667-a761-440c46a5197b</Guid>
      <Headers>
       <Header Name="Øst(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",geoCoord.X)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5f2711e2-0b3c-485f-8ea0-376ab81cef28</Guid>
      <Headers>
       <Header Name="Høyde(fra)"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",geoCoord.Z)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>2e3d26fe-2da8-4495-9570-06159653e2af</Guid>
      <Headers>
       <Header Name="Dokumentreferanse"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"TODO"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>fa469762-6685-482f-b3b3-10b31d5f6589</Guid>
      <Headers>
       <Header Name="Serienr."/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>"TODO"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Headers>
       <Header Name="Trasépunkt"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>if name == "(Linje start/slutt)" then
	if pos &lt;= Alignment.RcAlignment.HorizontalGeometry.Length/2 then
		return "Linje start"
	else
		return "Linje slutt"
	end
else
	return name
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>3b27856d-3955-4cb8-b54e-9d43504244fb</Guid>
      <Headers>
       <Header Name="Kurveradius [m]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f", getAlignmentInfo().NearestVerticalVertex.Radius)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>ef6c1bb3-82c0-40aa-b3a7-9291375d5a15</Guid>
      <Headers>
       <Header Name="Tangentlengde [m]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",getAlignmentInfo().NearestVerticalVertex.Length)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5035e780-fad1-4702-b9ad-511753fa60ef</Guid>
      <Headers>
       <Header Name="Tangenthøyde [m]"/>
      </Headers>
      <Width>50</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",
	getAlignmentInfo().NearestVerticalVertex.VerticalCurveEnd.Elevation
	- getAlignmentInfo().NearestVerticalVertex.VerticalCurveStart.Elevation)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5057f2f8-f3a1-4088-b09d-e771854752e8</Guid>
      <Headers>
       <Header Name="Nord"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",geoCoord.Y)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>de8b2e56-0399-416a-b414-6334d9cfb492</Guid>
      <Headers>
       <Header Name="Øst"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.03f",geoCoord.X)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>69e97ff0-6a59-49ff-aad9-128da3a2f848</Guid>
      <Headers>
       <Header Name="Høyde [m]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>if Variant == "SE1" then
	return string.format("%.03f",getAlignmentInfo().NearestVerticalVertex.VerticalCurveStart.Elevation)
elseif Variant == "SE2" then
	return string.format("%.03f",getAlignmentInfo().NearestVerticalVertex.VerticalCurveEnd.Elevation)
else
	return ""
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>d26d4f01-0cef-4c8d-bd72-ecadde152216</Guid>
      <Headers>
       <Header Name="Profil SE1 [Km]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>ai = getAlignmentInfo()
if ai.NearestVerticalVertex.VerticalCurveStart.Mileage then
	return string.format("%.06f",ai.NearestVerticalVertex.VerticalCurveStart.Mileage / 1000)
else
	return ""
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>8157325e-542a-4044-b254-e21d5229adaa</Guid>
      <Headers>
       <Header Name="SE 1 Stigning  [o/oo]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>ai = getAlignmentInfo()
if ai.NearestVerticalVertex.VerticalCurveStart.Gradient and not RC__isNan(ai.NearestVerticalVertex.VerticalCurveStart.Gradient) then
	return string.format("%.02f",ai.NearestVerticalVertex.VerticalCurveStart.Gradient)
else
	return ""
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>68515a3a-70d2-408b-8acb-d2191ca1f040</Guid>
      <Headers>
       <Header Name="Profil SE2 [Km]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>ai = getAlignmentInfo()
if ai.NearestVerticalVertex.VerticalCurveEnd.Mileage then
	return string.format("%.06f",ai.NearestVerticalVertex.VerticalCurveEnd.Mileage / 1000)
else
	return ""
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>90f19c72-7061-4e9a-9e72-601e9124d9bc</Guid>
      <Headers>
       <Header Name="SE 2 Stigning [o/oo]"/>
      </Headers>
      <Width>40</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>ai = getAlignmentInfo()
if ai.NearestVerticalVertex.VerticalCurveEnd.Gradient and not RC__isNan(ai.NearestVerticalVertex.VerticalCurveEnd.Gradient) then
	return string.format("%.02f",ai.NearestVerticalVertex.VerticalCurveEnd.Gradient)
else
	return ""
end</Data>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>76b87e66-27ed-427a-93e7-b8ee66cb9827</string>
     <string>10272f0b-a413-49f6-bd6a-b520ea345d97</string>
    </SortOrder>
    <NewColumnWidth xsi:nil="true"/>
   </TableSpecification>
  </InsertTable>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableOcsPoles" Name="JBTFE_DIV KL-tabell" Layer="JBTFE_TABELLER" Color="ByLayer" Group="Elektro Høyspent/Kontaktledningstabeller">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Mastetabell 1">
   <Variant Name="Mastetabell 1"/>
   <Variant Name="Mastetabell 2"/>
   <Variant Name="Utliggere"/>
   <Variant Name="Ledninger"/>
   <Variant Name="Barduner"/>
   <Variant Name="Isolatorer"/>
  </Variants>
  <InsertTable Name="Mastetabell 1" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Mastetabell for kontaktledningsanlegg</Title>
    <IncludeTitle>true</IncludeTitle>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>
					RcType:sub(1,9) == "JBTEH_MAS" 
					or RcType == rctype_TunnelWallFixing 
					or RcType == rctype_WireTensioningBalancer
					or RcType == rctype_MidpointAnchor
				</LuaFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <Font>RC-STANDARD</Font>
    <TitleTextHeight>3.5</TitleTextHeight>
    <HeaderTextHeight>2.5</HeaderTextHeight>
    <DataTextHeight>1.8</DataTextHeight>
    <VerticalCellMargin>1</VerticalCellMargin>
    <HorizontalCellMargin>1</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>270</WrapDepth>
    <WrapSpacing>10</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>true</RepeatHeaders>
    <TableFormat>Standard</TableFormat>
    <Columns>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Mast</Title>
       </Header>
      </Headers>
      <Width>20</Width>
      <Data>tostring(Name:gsub("eksisterende","eks."))</Data>
      <Title>Nr</Title>
      <Sort>Ascending</Sort>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Mast</Title>
       </Header>
      </Headers>
      <Width>20</Width>
      <Data>string.format("%.03f",Mileage/1000)</Data>
      <Title>Profil\Peget spor</Title>
      <Sort>Ascending</Sort>
      <Guid>630b8470-4cee-4f85-875f-9634b9076eef</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Mast</Title>
       </Header>
      </Headers>
      <Width>20</Width>
      <Data>string.format("%.01f",Spanlength)</Data>
      <Title>Spenn-\Plengde</Title>
      <Sort/>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Mast</Title>
       </Header>
      </Headers>
      <Width>20</Width>
      <Data>
							if (string.find(Variant:lower(),"hengemast")) then 
								if (string.find(OcsPoleCrossSection,"Ø120")) then
									s = "HGM Ø120" 
								elseif (string.find(OcsPoleCrossSection,"100x100")) then
									s = "HGM" 
								elseif (string.find(OcsPoleCrossSection,"100x150")) then
									s = "HGM" 
								elseif (string.find(OcsPoleCrossSection,"100x200")) then
									s = "HGM" 
								else
									s = "Ukjent Masteprofil ["..OcsPoleCrossSection.."]",_warning
								end
								return s
							else
								return OcsPoleCrossSection
							end
						</Data>
      <Title>Mastetype</Title>
      <Sort/>
      <Guid>eb169134-3c23-4575-8073-fa8da33a13a7</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Mast</Title>
       </Header>
      </Headers>
      <Width>20</Width>
      <Data>-- "Mastens stilling" betyr egentlig "mastesymbol med utligger".
--
--   Nedenfor vil "*" bety enten O = gittermast, X = hengemast, 8 = bjelkemast G = GMB-mast
--
--   *-   Enkel utligger til høyre side i økende km-retning
--  -*    Enkel utligger til venstre side i økende km-retning
--   *=   Dobbel utligger til høyre side i økende km-retning
--  =*    Dobbel utligger til venstre side i økende km-retning
--
-- Kombinasjoner er tillatt - enkel/dobbel til begge sider.
--

local symbol = "*"
if Variant:lower():match("henge") then 
	symbol = "X"
elseif Variant:lower():match("gmb") then -- 2019-05-05 CLFEY foreslår 'G' for GMB-master.
	symbol = "G"
elseif Variant:lower():match("b%-mast") or Variant:lower():match("h%-mast") then 
	symbol = "O"
elseif Variant:lower():match("bjelke") then 
	symbol = "8"
else
	return "Ukjent Variant ["..Variant.."].",_warning

if (getCollectionLength(Relations[rel_OcsPole_Has_Cantilever]) == 0) then
	return "Har ikke utligger",_warning
elseif (getCollectionLength(Relations[rel_OcsPole_Has_Cantilever]) == 1) then
	if (this.DistanceToAlignment - Relations[rel_OcsPole_Has_Cantilever][0].DistanceToAlignment &gt; 0) then
		return "-"..symbol
	else 
		return symbol.."-"
	end
else
	--getCollectionLength(Relations[rel_OcsPole_Has_Cantilever]) &gt; 1
	return "Har ikke laget formel for multiple utliggere",_warning
end</Data>
      <Title>Retning</Title>
      <Sort/>
      <Guid>5eeb2da8-04be-46f2-82a8-e33d3de50004</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Mast</Title>
       </Header>
      </Headers>
      <Width>20</Width>
      <Data>string.format("%.02f",getAlignmentInfo().DistanceToAlignment)</Data>
      <Title>CL mast\PCL spor</Title>
      <Sort/>
      <Guid>f3d18f52-4971-46a6-a83b-0e834c0ea2f3</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Utligger</Title>
       </Header>
      </Headers>
      <Width>15</Width>
      <Data>Relations[rel_OcsPole_Has_Cantilever][0].Variant</Data>
      <Title>System</Title>
      <Sort/>
      <Guid>c8b4a51f-3670-449c-8819-a1c47fba8d09</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Utligger</Title>
       </Header>
      </Headers>
      <Width>15</Width>
      <Data>Relations[rel_OcsPole_Has_Cantilever][0].StaggerDisplay</Data>
      <Title>Sikk-\Psakk</Title>
      <Sort/>
      <Guid>9c80dade-86df-4959-acd4-cd03be48c176</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Spor</Title>
       </Header>
      </Headers>
      <Width>30</Width>
      <Data>Alignment.code</Data>
      <Title>Nr</Title>
      <Sort/>
      <Guid>94bca7ee-e084-48c4-8129-42573b7b259c</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Spor</Title>
       </Header>
      </Headers>
      <Width>15</Width>
      <Data>
							r = getAlignmentInfo().CurveRadius
							if r == math.huge then 
								return "RL"
							else 
								if math.abs(r) > 5e5 then 
									return "RL"
								else
									if getAlignmentInfo().CurveRotation:upper() == "CCW" then
										return string.format(".%0f",r)
									else
										return string.format("%.0f",-r)
									end
								end
							end
						</Data>
      <Title>Kurve-\Pradius</Title>
      <Sort/>
      <Guid>861ae53f-c887-4774-86c2-122e8369dd8c</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Spor</Title>
       </Header>
      </Headers>
      <Width>20</Width>
      <Data>local c = getAlignmentInfo().Cant
							if (RC__isNan(c)) then
								return "-"
							else
								return string.format("%.0f",c)
							end
						</Data>
      <Title>OH</Title>
      <Sort/>
      <Guid>1378d22d-c88d-41c9-a54b-96db95d2d3c4</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bestemmende spor</Title>
       </Header>
      </Headers>
      <Width>30</Width>
      <Data>ReferenceAlignment.code</Data>
      <Title>Nr</Title>
      <Sort/>
      <Guid>74af20b1-7ec9-4ec6-85b6-7e8bda973470</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bestemmende spor</Title>
       </Header>
      </Headers>
      <Width>20</Width>
      <Data>string.format("%d %.0d",ReferenceMileage/1000,10*(ReferenceMileage%1000))</Data>
      <Title>Km.</Title>
      <Sort/>
      <Guid>5c76f0af-f694-4c2b-b22d-378169c7fdf3</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bestemmende spor</Title>
       </Header>
      </Headers>
      <Width>20</Width>
      <Data>string.format("%.02f",getAlignmentInfo(getObjectFromId(ReferenceAlignment)).DistanceToAlignment)</Data>
      <Title>CL mast\PCL spor</Title>
      <Sort/>
      <Guid>87fda45d-6ea8-465c-9994-907106a84c16</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Av-\Pspenning</Title>
       </Header>
      </Headers>
      <Width>20</Width>
      <Data>"uferdig"</Data>
      <Title>Avsp.</Title>
      <Sort/>
      <Guid>d2a36cb1-b7cb-4c8e-8a87-671ca9cabfe7</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers/>
      <Width>50</Width>
      <Data/>
      <Title>Merknader</Title>
      <Sort/>
      <Guid>0b9b2747-97b6-46de-ba8b-31d4d400faf9</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>630b8470-4cee-4f85-875f-9634b9076eef</string>
     <string>71b321ec-4bc3-493d-974b-2b01236d720c</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
  <InsertTable Name="Kontaktledningsmaster" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Kontaktledningsmaster</Title>
    <IncludeTitle>true</IncludeTitle>
    <ColumnSelectionSelf>true</ColumnSelectionSelf>
    <ColumnSelectionFromMasterTable>false</ColumnSelectionFromMasterTable>
    <LuaPreviewAutoExecute>false</LuaPreviewAutoExecute>
    <LuaPreviewRowSelectionSearchFilter/>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilterList/>
    <ObjectTypeBrowser>false</ObjectTypeBrowser>
    <EnableLuaFilter>false</EnableLuaFilter>
    <LuaFilter>--[[
	Tabell for kontaktledningsmaster
	--------------------------------
	Catenary OCS pole table
	
	2022-05-10_003 CLFEY Created (based on earlier version).
	2022-06-07_004 CLFEY Removed the fixpoint from the collection of WTBs, if present
	2022-06-08_005 CLFEY Added power interrupters to the comment field. NB each interrupter must be
						located within 25 cm from its OCS pole.
	2022-06-09_006 CLFEY Re-written column code for OCS pole height
	2022-06-14_007 CLFEY/SINBRE Adapted to multiple spanlengths.
	2022-06-16_008 CLFEY/RAGBER/SINBRE Column "Avspenning" now tackles multiple WTBs at one cantilever's
						OCS pole. Also tackles other WTBs at one WTB's pole.
	2022-06-21_009 CLFEY Increased tolerance 'tol' in the "Avspenning" column from 1.0 to 1.2, to accept
						WTB's for AT conductors drawn at distance 1.0 from center OCS pole.
	2022-06-23_010 CLFEY Introduced a second tolerance and checking for a midpoint anchor ('fixpunkt')
						close to the tip of a cantilever (CantileverLength in plan view, disregarding cant).

	Find wire parts with a name that matches the pattern 'XX-YYY' stated in the table's 'Var0' property.
	Then list all OCS poles inside the area stated as the table's 'Area' property, having a role
	for the contact wire in question.
	
	It is expected that the wire tension balancers (wtb1 and wtb2) connect to wire parts 'a' and 'e'.
	It is expected that the one or two cantilevers (cnt) connect to wire parts 'b' and 'd'.
	It is expected that the bulk of cantilevers (cnt) connect to wire part 'c'.
	It is expected that the wtb's for the midpoint anchor connect to wire part 'f'.
	It is expected that the midpoint anchor belongs to the track but has a relation to wire part 'c'.
	
	All wire parts must be of the form 'XX-YYYx' where x is 'a' to 'e'.
	In addition, there will be midtpoint anchor lines (fixline) name as 'XX-YYYf', suffix 'f'.
--]]


--Abbreviations:
--	cow		contact wire
--	gwy		guywire (spanner)
--	pol		OCS pole, all types, including also drop arms from portal or from tunnel ceiling
--	fun		OCS pole foundation, guywire or spanner foundation
--	cnt		cantilever
--	mal		midpoint anchor line
--  map		midpoint anchor point
--	wtb		wire tension balancer [avspenning]

ContactWireRcType				= rctype_ContactWire 
MidpointAnchorRcType			= rctype_WireTensioningBalancer
MidPointAnchorVariant			= "Fixpunkt"
relCowCntFittedToCantilever		= "Festet til utligger"
relCowWtbHasWireTensionBalancer	= "Har avspenning"

-- Find all wire parts present in the table's dedicated area, with the wire part number as stated in Var0:
-- Ignore the midpoint anchoring lines.
contactWireParts = DocumentData.ObjectCollection:filter(
	function (x)
		return x.RcType == ContactWireRcType
			and (x.code:match("(%d+%-%d+)") == Var0) -- 'XX-YYY'
			and not (x.code:match("%d+%-%d+(%a)") == 'f') -- ignore all 'XX-YYYf' - the midpoint anchor lines
			and x:isVisible()
	end)
nContactWireParts = getCollectionLength(contactWireParts)

-- For each wire part, add its cantilevers and wtbs:
items = {}  --The empty collection (safe Lua coding).
for i=0,nContactWireParts-1 do
	wireTensionBalancers = getRelatedObjects(relCowWtbHasWireTensionBalancer,contactWireParts[i])
	wireTensionBalancers = wireTensionBalancers:filter(function (x) return not x.Variant:upper():match("FIX") end) --Remove the fixpoint (concerns DNA 2021.a)
	cantilevers = getRelatedObjects(relCowCntFittedToCantilever,contactWireParts[i])
	items = getUnionOfCollections({items,wireTensionBalancers,cantilevers})
end

return items</LuaFilter>
    <UseDataSetFilter>true</UseDataSetFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <TitleTextHeight>1.6</TitleTextHeight>
    <HeaderTextHeight>1.3</HeaderTextHeight>
    <DataTextHeight>1.3</DataTextHeight>
    <VerticalCellMargin>0.15</VerticalCellMargin>
    <HorizontalCellMargin>0.15</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <MinRowHeight>1</MinRowHeight>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>270</WrapDepth>
    <WrapSpacing>10</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>true</RepeatHeaders>
    <VerticalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>true</IsVertical>
     <Location>Left</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </VerticalNumbering>
    <HorizontalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>false</IsVertical>
     <Location>Bottom</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </HorizontalNumbering>
    <TableFormat>Standard</TableFormat>
    <Font>ISOCP</Font>
    <Columns>
     <ColumnSpecification>
      <Guid>f1f18abb-27b1-4628-9b2f-d386b18f3229</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="ObjektID"/>
      </Headers>
      <Width>13</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
if RcType == rctype_Cantilever then
	m=Relations[rel_Cantilever_BelongsTo_OcsPole][0]
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]	
	
	end
else
	return "Unrecognized RcType"
end

return tostring(m.BaneNORBaneDataID)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Nr"/>
      </Headers>
      <Width>8</Width>
      <HideColumn>false</HideColumn>
      <SortOption>Ascending</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
if RcType == rctype_Cantilever then
	m=Relations[rel_Cantilever_BelongsTo_OcsPole][0]
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]	
	end
else
	return "Unrecognized RcType"
end

return tostring(m.name)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>630b8470-4cee-4f85-875f-9634b9076eef</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Profil\PRef. spor\P[km]"/>
      </Headers>
      <Width>8</Width>
      <HideColumn>false</HideColumn>
      <SortOption>Ascending</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
if RcType == rctype_Cantilever then
	m=Relations[rel_Cantilever_BelongsTo_OcsPole][0]
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]	
	
	end
else
	return "Unrecognized RcType"
end

return string.format("%.03f",m.ReferenceMileage/1000)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Spenn-\Plengde\P[m]"/>
      </Headers>
      <Width>8</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.1
p1 = "L%d+%-%d+"
p2 = "%-(%d+%.%d)%-"

relCntCowCantileverForContactWire	= "Utligger for kontaktledning"
relWtbCowWtbForContactWire			= "Avspenner kontaktledning"

if RcType == rctype_Cantilever then
	pole = Relations[rel_Cantilever_BelongsTo_OcsPole][0]

elseif RcType == rctype_WireTensioningBalancer then
	if dir:lower() == "down" then
		return ""
	else
		poles = getUnionOfCollections({
					getNearbyPointObjects2D(tol,rctype_OcsDropArmForBridgeOrTunnel),
					getNearbyPointObjects2D(tol,rctype_OcsPole),
					getNearbyPointObjects2D(tol,rctype_OcsDropArmUnderPortal),
					getNearbyPointObjects2D(tol,rctype_TunnelWallFixing)
				})
		if getCollectionLength(poles) == 0 then return "No OCS pole found near WTB "..this.code end
		pole = poles[0]
	end
else
	return "Bad object type ["..this.RcType.."]."
end

wireNames = {}
for match in (pole.SpanlengthDisplay):gmatch(p1) do
	table.insert(wireNames,match)
end
wireNames = getCollectionFromTable(wireNames)
nWires = getCollectionLength(wireNames)
	
spanLengths = {}
for match in (pole.SpanlengthDisplay):gmatch(p2) do
	table.insert(spanLengths,match)
end
spanLengths = getCollectionFromTable(spanLengths)

if nWires == 0 then
	--The OCS pole had just one spanlength mentioned:
	return string.format("%.01f",spanLengths[0])
else
	--Find the spanlength corresponding to this cantilever's contact wire:
	for i = 0,nWires-1 do
		if RcType == rctype_Cantilever then
			rCow,nCow = getRelatedObjects(relCntCowCantileverForContactWire)
		elseif RcType == rctype_WireTensioningBalancer then
			rCow,nCow = getRelatedObjects(relWtbCowWtbForContactWire)
		else
			return _error,"Bad RcType ["..RcType.."]."
		end
		if nCow == 0 then return "Cantilever/WTB "..this.name.." has no contact wire" end
		if rCow[0].name == wireNames[i] then
			return string.format("%.01f",spanLengths[i])
		end
	end
end

return string.format("%.01f",poles[0].Spanlength)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>eb169134-3c23-4575-8073-fa8da33a13a7</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Type"/>
      </Headers>
      <Width>8</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
if RcType == rctype_Cantilever then
	m=Relations[rel_Cantilever_BelongsTo_OcsPole][0]
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]	
	
	end
else
	return "Unrecognized RcType"
end

if (string.find(m.Variant,"Hengemast")) then 
	if (string.find(m.OcsPoleCrossSection,"Ø120")) then
		s = "HGM" 
	elseif (string.find(m.OcsPoleCrossSection,"100x100")) then
		s = "HGM" 
	elseif (string.find(m.OcsPoleCrossSection,"100x150")) and m.Var4 == "Kun fiktivt punkt for avspenning" then
		s = "Fiktiv" 
		elseif (string.find(m.OcsPoleCrossSection,"100x150")) and m.Var4 ~= "Kun fiktivt punkt for avspenning" then
		s = "HGM" 
	elseif (string.find(m.OcsPoleCrossSection,"200x100")) then
		s = "HGM" 
	elseif (string.find(m.OcsPoleCrossSection,"100x200")) then
		s = "HGM" 
	else
		s = "Ukjent Masteprofil ["..m.OcsPoleCrossSection.."]",_warning
	end
	
	return s
end	
if m.RcType == rctype_TunnelWallFixing then
return "TF"
end
if m.RcType == rctype_OcsPole and m.Var3 == "HE260M" then 
	return "HEM260"
	elseif m.RcType == rctype_OcsPole then
	return tostring(m.OcsPoleCrossSection:gsub("eksisterende","eks."))
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>59f1642a-0cbf-4c5f-9c66-11831e8ffce1</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Høyde\P[m]"/>
      </Headers>
      <Width>6</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
if RcType == rctype_Cantilever then
	return Relations[rel_Cantilever_BelongsTo_OcsPole][0].OcsPoleHeight/1000 --[m] OCS pole height

elseif RcType == rctype_WireTensioningBalancer then
	a = getNearbyPointObjects2D(tol, rctype_OcsPole)
	b = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)
	c = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)
	poles = getUnionOfCollections({a,b,c})
	n = getCollectionLength(poles)
	if n == 0 then
		return "No OCS pole found within "..tol".. m from WTB "..code
	elseif n == 1 then
		return poles[0].OcsPoleHeight/1000 --[m] OCS pole height
	else
		--n &gt;= 2
		return "More than one OCS pole found within "..tol.." m from WTB "..code
	end

else
	return "Unexpected RC type ["..RcType.."] for object "..code
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5eeb2da8-04be-46f2-82a8-e33d3de50004</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Retning"/>
      </Headers>
      <Width>8</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>-- "Mastens stilling" betyr egentlig "mastesymbol med utligger".
--
--   Nedenfor vil "*" bety enten O = gittermast, X = hengemast, 8 = bjelkemast G = GMB-mast
--
--   *-   Enkel utligger til høyre side i økende km-retning
--  -*    Enkel utligger til venstre side i økende km-retning
--   *=   Dobbel utligger til høyre side i økende km-retning
--  =*    Dobbel utligger til venstre side i økende km-retning
--
-- Kombinasjoner er tillatt - enkel/dobbel til begge sider.
--
tol = 0.25
if RcType == rctype_Cantilever then
	m=Relations[rel_Cantilever_BelongsTo_OcsPole][0]
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0 then
m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0 then
m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]
else
	return "Unrecognized RcType"
	end
else
	return "Unrecognized RcType"
end

local symbol = "*"
if m.Variant:match("Henge") ~= nil then 
	symbol = "X"
elseif m.Variant:match("GMB") ~= nil then -- 2019-05-05 CLFEY foreslår 'G' for GMB-master. NB! Test på 'GMB' før 'B-mast'  
	symbol = "G"
elseif m.Variant:match("B%-mast") ~= nil or Variant:match("H%-mast") ~= nil then 
	symbol = "O"
elseif m.Variant:match("Bjelke") ~= nil then 
	symbol = "8"
else
	return "Ukjent Variant ["..Variant.."].",_warning
end
if (getCollectionLength(m.Relations[rel_OcsPole_Has_Cantilever]) == 0) then
	return symbol,_warning -- Har ikke utligger
elseif (getCollectionLength(m.Relations[rel_OcsPole_Has_Cantilever]) == 1) then
	if (m.DistanceToAlignment - m.Relations[rel_OcsPole_Has_Cantilever][0].DistanceToAlignment &gt; 0) then
		return "-"..symbol
	else 
		return symbol.."-"
	end
elseif (getCollectionLength(m.Relations[rel_OcsPole_Has_Cantilever]) == 2) then
	distKL=m.DistanceToAlignment	--KLmast avstand til spor
	distU1=m.Relations[rel_OcsPole_Has_Cantilever][0].DistanceToAlignment  	--Utligger1 avstand til spor
	distU2=m.Relations[rel_OcsPole_Has_Cantilever][1].DistanceToAlignment	--Utligger2 avstand til spor
	
	if distU1 &gt; 0 and distU2 &gt; 0 then
		return "="..symbol
	elseif distU1 &lt; 0 and distU2 &lt; 0 then
		return symbol.."="
	else 
		return "-"..symbol.."-"
	end

elseif (getCollectionLength(m.Relations[rel_OcsPole_Has_Cantilever]) == 3) then
	distKL=m.DistanceToAlignment	--KLmast avstand til spor
	distU1=m.Relations[rel_OcsPole_Has_Cantilever][0].DistanceToAlignment  	--Cantilever 1 distance to alignment
	distU2=m.Relations[rel_OcsPole_Has_Cantilever][1].DistanceToAlignment	--Cantilever 2 distance to alignment
	distU3=m.Relations[rel_OcsPole_Has_Cantilever][2].DistanceToAlignment	--Cantilever 3 distance to alignment
	
	if 	   distU1 &gt; 0 and distU2 &gt; 0 and distU3 &gt; 0 then 	return "≡"..symbol
	
	elseif distU1 &lt; 0 and distU2 &gt; 0 and distU3 &gt; 0 then 	return "="..symbol.."-"
	elseif distU1 &gt; 0 and distU2 &lt; 0 and distU3 &gt; 0 then 	return "="..symbol.."-"
	elseif distU1 &gt; 0 and distU2 &gt; 0 and distU3 &lt; 0 then 	return "="..symbol.."-"
	
	elseif distU1 &gt; 0 and distU2 &gt; 0 and distU3 &lt; 0 then 	return "-"..symbol.."="
	elseif distU1 &lt; 0 and distU2 &gt; 0 and distU3 &gt; 0 then 	return "-"..symbol.."="
	
	elseif distU1 &lt; 0 and distU2 &lt; 0 and distU3 &lt; 0 then 	return symbol.."≡"
	
	else 
		return "???: "..distU1.."/"..distU2.."/"..distU3.."/".."≡"..symbol --"-"..symbol.."-"
	end	
	
	
elseif (getCollectionLength(m.Relations[rel_OcsPole_Has_Cantilever]) == 4) then
	return "="..symbol.."="

else
	--Non-standard combinations of four or more:
	return "Har ikke laget formel for fire utliggere i 1/3 eller 3/1 konfigurasjon (eller fem og fler).",_warning
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>f3d18f52-4971-46a6-a83b-0e834c0ea2f3</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="CL mast\PCL spor\P[m]"/>
      </Headers>
      <Width>8</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol=0.25

if RcType == rctype_Cantilever then
	m=Relations[rel_Cantilever_BelongsTo_OcsPole][0]
	return string.format("%.02f",RC__getLateralOffsetFromRelatedObject(rel_Cantilever_BelongsTo_OcsPole))
	
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]	
	
		
	end 
	return string.format("%.02f",m.DistanceToAlignment)
else
	return "Unrecognized RcType"
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>c8b4a51f-3670-449c-8819-a1c47fba8d09</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Kth\P[m]"/>
      </Headers>
      <Width>4</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
	  
if RcType == rctype_Cantilever then
	return string.format("%.02f",ContactWireHeight)

elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
		m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
	elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
		m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
	elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
		m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
	elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
		m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]	
	end
	return Var1

else
	return "Unrecognized RcType"
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>38e72479-9999-457e-8c95-6620093eb48a</Guid>
      <Headers>
       <Header Name="Fundament"/>
       <Header Name="ObjektID"/>
      </Headers>
      <Width>13</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
if RcType == rctype_Cantilever then
	m = getRelatedObjects(rel_Cantilever_BelongsTo_OcsPole)[0]:getRelatedObjects(rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation)[0]
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
		m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]:getRelatedObjects(rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation)[0]
	elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
		m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]:getRelatedObjects(rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation)[0]
	elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
		m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]:getRelatedObjects(rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation)[0]
	elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
		m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]:getRelatedObjects(rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation)[0]
	end
else
	return "Unrecognized RcType"
end

return m.BaneNORBaneDataID</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>9c80dade-86df-4959-acd4-cd03be48c176</Guid>
      <Headers>
       <Header Name="Fundament"/>
       <Header Name="Type"/>
      </Headers>
      <Width>17</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>if RcType == rctype_WireTensioningBalancer then

  if getNearbyPointObjects2D(0.5,rctype_OcsPole)[0].Relations[rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation][0].Variant == "Boret KL-fundament, Ø555-191x374xM36" then
return "Boret KL-fund. Ø555"
end

if getNearbyPointObjects2D(0.5,rctype_OcsPole)[0].Relations[rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation][0].Variant == "Spesial KL-fundament" then
return "Spesial KL-fund."
end

elseif RcType == rctype_Cantilever then
if Relations[rel_Cantilever_BelongsTo_OcsPole][0].Relations[rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation][0].Variant == "Boret KL-fundament, Ø555-191x374xM36" then
return "Boret KL-fund. Ø555"
end
if Relations[rel_Cantilever_BelongsTo_OcsPole][0].Relations[rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation][0].Variant == "Spesial KL-fundament" then
return "Spesial KL-fund."
end
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>94bca7ee-e084-48c4-8129-42573b7b259c</Guid>
      <Headers>
       <Header Name="Spor"/>
       <Header Name="Nr"/>
      </Headers>
      <Width>8</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
if RcType == rctype_Cantilever then
	return Alignment.name
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]	
	
	end
else
	return "Unrecognized RcType"
end
return m.Alignment.name</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>861ae53f-c887-4774-86c2-122e8369dd8c</Guid>
      <Headers>
       <Header Name="Spor"/>
       <Header Name="Kurve-\Pradius\P[m]"/>
      </Headers>
      <Width>8</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
if RcType == rctype_Cantilever then
	m=Relations[rel_HvSwitrel_Cantilever_BelongsTo_OcsPolech_IsInstalledOn_OcsPole][0]
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]	
	end
else
	return "Unrecognized RcType"
end

r = m:getAlignmentInfo().CurveRadius
	if math.abs(r) &gt; 5e5 then 
		return "RL"
	else
		if m:getAlignmentInfo().CurveRotation:upper() == "CCW" then
			return string.format("%.0f",-r)
		else
			return string.format("%.0f",r)
	end
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>1378d22d-c88d-41c9-a54b-96db95d2d3c4</Guid>
      <Headers>
       <Header Name="Spor"/>
       <Header Name="OH\P[mm]"/>
      </Headers>
      <Width>8</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
if RcType == rctype_Cantilever then
	m=Relations[rel_Cantilever_BelongsTo_OcsPole][0]
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]		
	
	end
else
	return "Unrecognized RcType"
end

local c = m:getAlignmentInfo().Cant

if (RC__isNan(c)) then
	return "0"
else
	return string.format("%.0f",c)
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>2894213c-f022-4435-8d46-efbcb0bb4b36</Guid>
      <Headers>
       <Header Name="Spor"/>
       <Header Name="Ref.spor.\Pnr"/>
      </Headers>
      <Width>8</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
if RcType == rctype_Cantilever then
	return Alignment.name
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]	
	
	end
else
	return "Unrecognized RcType"
end
return m.ReferenceAlignment.name</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>f2d682aa-7a03-46f2-9f09-aaa1302771fe</Guid>
      <Headers>
       <Header Name="Andre konstruksjoner"/>
       <Header Name="Bardun retn."/>
      </Headers>
      <Width>8</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
--m=Relations[rel_Cantilever_BelongsTo_OcsPole][0] --Do not use this construct here
if RcType == rctype_Cantilever then
	m=Relations[rel_Cantilever_BelongsTo_OcsPole][0]
elseif RcType == rctype_WireTensioningBalancer then
	if getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmForBridgeOrTunnel)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsPole)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsPole)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_OcsDropArmUnderPortal)[0]	
elseif getCollectionLength(getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)) &gt; 0.5 then
m = getNearbyPointObjects2D(tol, rctype_TunnelWallFixing)[0]	
	
	end
else
	return "Unrecognized RcType"
end

if (m.RcType == rctype_OcsPole  or m.RcType == rctype_OcsDropArmForBridgeOrTunnel)
then
	vpil = "←" --"\8592"
	opil = "↑"--"\8593"
	hpil = "→" --"\8594"
	npil = "↓"--"\8595"
	ba = m:getNearbyAlignments(rctype_GuyWire):
		filter(function  (x) return x.Variant:lower() == "bardun" and RC__getDistance2D(x.rcalignment.startpoint) &lt; 1.0 end )
	nb = m:getCollectionLength(ba)
	--if true then return nb,ba end
	t = m:getNearbyAlignments()
	tgt = m:getAlignmentInfo(t[0].id).Tangent
	--if true then return tgt end
	sporvinkel = math.atan(tgt.Y, tgt.X) * 180.0/math.pi 
	--if true then return sporvinkel end
	first = true
	for i = 0, nb-1 do
		s = first and "" or s..", "
		b = ba[i]
		pe = b.RcAlignment.EndPoint
		bf = m:getNearbyPointObjects2D(tol, "JBTEH_BAF Bardun fotplate", pe)[0]
		--if true then return bf end
		tgb= b.RcAlignment.StartTangent
		--if true then return tgb end
		bardunvinkel = math.atan(tgb.Y, tgb.X) * 180.0/math.pi
		--if true then return bardunvinkel end
		vinkel = bardunvinkel - sporvinkel
		if vinkel &lt; -180 then vinkel = vinkel + 360 end
		if vinkel &gt; 180 then vinkel = vinkel - 360 end
		hkurve = vinkel &gt; 50 and vinkel &lt; 130
		vkurve = vinkel &lt; -50 and vinkel &gt; -130
		medrettet = vinkel &gt; -25 and vinkel &lt; 25
		motrettet = vinkel &lt; -155 or vinkel &gt; 155
		--if true then return vinkel,bf.Variant, end
		--if true then return sporvinkel, bardunvinkel, vinkel, hkurve, vkurve medrettet, motrettet end
		if (vkurve or hkurve or medrettet or motrettet) == false then 
			return "Feil, ulovlig bardunvinkel ("..vinkel..")"
	  	end
		if hkurve and bf.Variant == "Bardunfeste fotplate, enkel" then s = s..vpil
		elseif vkurve and bf.Variant == "Bardunfeste fotplate, enkel" then s = s..hpil
		elseif motrettet and bf.Variant == "Bardunfeste fotplate, enkel" then s = s..opil
		elseif motrettet and bf.Variant == "Bardunfeste fotplate, dobbel" then s = s..opil..opil
		elseif medrettet and bf.Variant == "Bardunfeste fotplate, enkel"  then s = s..npil
		elseif medrettet and bf.Variant == "Bardunfeste fotplate, dobbel" then s = s..npil..npil
		else
			return bf.variant --"Feil skal ikke skje" -- Har ingen Bardun
		end
		first = false
	end
	return s
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>d2a36cb1-b7cb-4c8e-8a87-671ca9cabfe7</Guid>
      <Headers>
       <Header Name="Andre konstruksjoner"/>
       <Header Name="Avspenning"/>
      </Headers>
      <Width>16</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol1 = 1.2 --[m] Enough to find an AutoTransformer conductor being hand-drawn at a distance &lt;= 1.2 from the center of its OCS pole.
tol2 = 0.5 --[m] Enough to find the OCS pole holding a midpoint anchor at the tip of its cantilever (for DNA version 2021.a).
dnaIri = DocumentData.DnaIri:match(".+;(.d+.%a)$")

if RcType == rctype_WireTensioningBalancer then
	poles = getUnionOfCollections({
			getNearbyPointObjects2D(tol1,rctype_OcsDropArmForBridgeOrTunnel),
			getNearbyPointObjects2D(tol1,rctype_OcsPole),
			getNearbyPointObjects2D(tol1,rctype_OcsDropArmUnderPortal),
			getNearbyPointObjects2D(tol1,rctype_TunnelWallFixing)
		})
	nPoles = getCollectionLength(poles)
	if nPoles == 0 then return "No OCS pole found near WTB "..this.code end
	wtb = getNearbyPointObjects2D(tol,rctype_WireTensioningBalancer,poles[0])

elseif RcType == rctype_Cantilever then
	--Look for wire tension balancers at the same OCS pole:
	rPoles,nPoles = getRelatedObjects(rel_Cantilever_BelongsTo_OcsPole)
	wtbs = getNearbyPointObjects2D(tol1,rctype_WireTensioningBalancer,rPoles[0]) --we know there must be an OCS pole here

	--Look for a midpoint anchor at the extremity of the cantilever:
	p1 = getPoint3D(this.geoCoord.X, this.geoCoord.Y)
	--Add vector from insertion point of cantilever to its tip (as seen in the OCS plan view, i.e. disregarding cant), in WCS coordinates:
	t = getAlignmentInfo(this.Alignment.id,p1).Tangent
	tg = math.atan(t.Y,t.X)
	U = getPoint3D(RC__getWcsVectorFromAcsVector(DistanceToAlignment &lt; 0 and CantileverLength or -CantileverLength, 0, tg)) --Vector pointing along the cantilever
	tipOfCantilever = getVectorSum(p1,U)
	mpas = getNearbyPointObjects2D(tol2,rctype_WireTensioningBalancer,tipOfCantilever) --collection of MPA(s), if any

	--Make a joint collection of WTBs plus a potential MPA at the same OCS pole:
	wtb = getUnionOfCollections({wtbs,mpas})

else
	return "Unrecognized RcType ["..RcType.."]."
end

t = ""
nWtb = getCollectionLength(wtb)
for i = 0, nWtb-1 do
	if i == 0 then
		t = wtb[0].name
	else
		t = t..", "..wtb[i].name
	end
end

return t</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>0b9b2747-97b6-46de-ba8b-31d4d400faf9</Guid>
      <Headers>
       <Header Name="Merknader"/>
      </Headers>
      <Width>25</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
if RcType == rctype_Cantilever then
	m = Relations[rel_Cantilever_BelongsTo_OcsPole][0]

elseif RcType == rctype_WireTensioningBalancer then
	if getNearbyPointObjects2D(tol,rctype_OcsPole)[0] == nil
		and getNearbyPointObjects2D(tol,rctype_TunnelWallFixing)[0] == nil
		and getNearbyPointObjects2D(tol,rctype_OcsDropArmForBridgeOrTunnel)[0] == nil 
		then
			m = getNearbyPointObjects2D(tol,rctype_OcsDropArmUnderPortal)[0]
	
	elseif getNearbyPointObjects2D(tol,rctype_OcsDropArmUnderPortal)[0] == nil
		and getNearbyPointObjects2D(tol,rctype_TunnelWallFixing)[0] == nil
		and getNearbyPointObjects2D(tol,rctype_OcsDropArmForBridgeOrTunnel)[0] == nil
		then
			m = getNearbyPointObjects2D(tol,rctype_OcsPole)[0]

	elseif getNearbyPointObjects2D(tol,rctype_OcsDropArmUnderPortal)[0] == nil
		and getNearbyPointObjects2D(tol,rctype_OcsPole)[0] == nil
		and getNearbyPointObjects2D(tol,rctype_OcsDropArmForBridgeOrTunnel)[0] == nil
		then
			m = getNearbyPointObjects2D(tol,rctype_TunnelWallFixing)[0]
		
	elseif getNearbyPointObjects2D(tol,rctype_OcsDropArmUnderPortal)[0] == nil
		and getNearbyPointObjects2D(tol,rctype_OcsPole)[0] == nil
		and getNearbyPointObjects2D(tol,rctype_TunnelWallFixing)[0] == nil 
		then
			m = getNearbyPointObjects2D(tol,rctype_OcsDropArmForBridgeOrTunnel)[0]	
	end

else
	return "Unexpected RcType ["..RcType.."]"
end

spanner = getNearbyAlignments(m, rctype_Spanner):filter(
	function (x)
		return m:RC__getDistance2D(x.RcAlignment.HorizontalGeometry.StartPoint) &lt; tol
	end)
nSpanner = getCollectionLength(spanner)
interrupter = getNearbyPointObjects2D(m,tol,rctype_HvSwitch)
nInterrupter = getCollectionLength(interrupter)

if m.RcType == rctype_OcsPole and m.Relations[rel_OcsPole_IsSupportFor_OcsPortal][0] then
	tPortal = m.Relations[rel_OcsPole_IsSupportFor_OcsPortal][0].name
elseif m.RcType == rctype_OcsDropArmUnderPortal and m.Relations[rel_OcsPole_IsDropArmUnder_OcsPortal][0] then
	tPortal = m.Relations[rel_OcsPole_IsDropArmUnder_OcsPortal][0].name
else
	tPortal = ""
end

tSpanner = ""
for i = 0,nSpanner-1 do
	tSpanner = tSpanner..(i == 0 and "Strever " or ", ")..spanner[i].code
end

tInterrupter = ""
for i = 0,nInterrupter-1 do
	tInterrupter = tInterrupter..(i == 0 and "Bryter " or ", ")..interrupter[i].code
end

if m.Variant:match("eksisterende") then
	return "Eks. mast "..tPortal.." "..tSpanner.." "..m.Var4..""..tInterrupter
else
	return ""..tPortal.." "..tSpanner.." "..m.Var4..""..tInterrupter
end</Data>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>630b8470-4cee-4f85-875f-9634b9076eef</string>
     <string>71b321ec-4bc3-493d-974b-2b01236d720c</string>
    </SortOrder>
    <NewColumnWidth xsi:nil="true"/>
   </TableSpecification>
  </InsertTable>
  <InsertTable Name="Mastetabell 2" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Mastetabell</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilterList/>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>RcType:sub(1,9) == "JBTEH_MAS" and isVisible() == true</LuaFilter>
    <UseDataSetFilter>false</UseDataSetFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <TitleTextHeight>3.5</TitleTextHeight>
    <HeaderTextHeight>2.5</HeaderTextHeight>
    <DataTextHeight>1.8</DataTextHeight>
    <VerticalCellMargin>1</VerticalCellMargin>
    <HorizontalCellMargin>1</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <MinRowHeight>3</MinRowHeight>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>270</WrapDepth>
    <WrapSpacing>10</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>true</RepeatHeaders>
    <VerticalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>true</IsVertical>
     <Location>Left</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </VerticalNumbering>
    <HorizontalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>false</IsVertical>
     <Location>Bottom</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </HorizontalNumbering>
    <TableFormat>Standard</TableFormat>
    <Font>RC-STANDARD</Font>
    <Columns>
     <ColumnSpecification>
      <Guid>ebeae652-c017-4e38-bd24-c31a859dd006</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Nr"/>
      </Headers>
      <Width>15</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>Name</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Spenn-\Plengde [m]"/>
      </Headers>
      <Width>20</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>(Spanlength == 0 and "" or string.format("%.01f",Spanlength))..(Spanlength2 == 0 and "" or string.format("/%.01f",Spanlength2))</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>eb169134-3c23-4575-8073-fa8da33a13a7</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Mastetype"/>
      </Headers>
      <Width>20</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>if (string.find(Variant,"Hengemast")) then 
												if (string.find(OcsPoleCrossSection,"Ø120")) then
													s = "HGM Ø120" 
												elseif (string.find(OcsPoleCrossSection,"100x100")) then
													s = "HGM" 
												elseif (string.find(OcsPoleCrossSection,"150x100")) then
													s = "HGM" 
												elseif (string.find(OcsPoleCrossSection,"200x100")) then
													s = "HGM" 
												else
													s = "Ukjent Masteprofil ["..OcsPoleCrossSection.."]",_warning
												end
												return s
											else
												return tostring(OcsPoleCrossSection:gsub("eksisterende","eks."))
											end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>cc20a186-debe-4ea2-954f-f7be1f77b7fe</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Åk"/>
      </Headers>
      <Width>10</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>local s = rel_OcsPole_IsSupportFor_OcsPortal
				local h = rel_OcsPole_IsDropArmUnder_OcsPortal
				local r,n = getRelatedObjects(s)
				local b,t = getRelatedObjects(h)
				
				if n == 0 and t == 0 then
					return ""
				elseif n&gt;0 then
					return r[0].code
				elseif t&gt;0 then
					return b[0].code
				end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5eeb2da8-04be-46f2-82a8-e33d3de50004</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="Retning"/>
      </Headers>
      <Width>10</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>--[[
    Mastetabell/Retning (Norw).
    ---------------------------
    2023-10-10 CLFEY Added code to handle up to 3 cantilevers on each side of mast. 6 total.

	Below, "*" means either O = OCS lattice pole, X = droparm, 8 = H- or I-beam G = "Gardermobanen" type pole.
	
	  *-   Single cantilever on the right side in the direction of increasing mileages.
	 -*    Single cantilever on the left side in the direction of increasing mileages.
	  *=   Double cantilever on the right side in the direction of increasing mileages.
	 =*    Double cantilever on the left side in the direction of increasing mileages.
	
	Combinations are allowed - single/double to both sides.

--]]

rel_OcsPole_Has_Cantilever = "Er kl-mast for utligger"
pol = this
if pol.Variant:match("Henge") then polSymbol = "X"
elseif pol.Variant:match("GMB") then polSymbol = "G"
elseif pol.Variant:match("B%-mast") or Variant:match("H%-mast") then polSymbol = "O"
elseif pol.Variant:match("Bjelke") then polSymbol = "8"
else return "Unknown Variant ["..Variant.."].",_warning
end

cnt,nCnt = pol:getRelatedObjects(rel_OcsPole_Has_Cantilever)
nLeft = 0
for i = 0,nCnt-1 do
	if cnt[i].LeftSided then nLeft = nLeft + 1 end
end 

cntSymbol = {"","-","=","="}
if math.max(nLeft,nCnt-nLeft) &gt; 3 then
    return string.format("(%d)%s(%d)",nCnt-nLeft,polSymbol,nLeft),_warning
else
    return string.format("%s%s%s",cntSymbol[1+nCnt-nLeft],polSymbol,cntSymbol[1+nLeft])
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>f3d18f52-4971-46a6-a83b-0e834c0ea2f3</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="CL mast\PCL spor [m]"/>
      </Headers>
      <Width>15</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.02f",getAlignmentInfo().DistanceToAlignment)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>be125708-f0f2-484a-8a30-0bf4f5ef351d</Guid>
      <Headers>
       <Header Name="Mast"/>
       <Header Name="BaneData ID"/>
      </Headers>
      <Width>25</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>FDVBaneDataObjektID</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>000c2d2c-237b-4553-9d80-abbc643c9a95</Guid>
      <Headers>
       <Header Name="Utligger"/>
       <Header Name="Kth [m]"/>
      </Headers>
      <Width>15</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>cnt,nCnt = getRelatedObjects(rel_OcsPole_Has_Cantilever)
for i = 0,nCnt-1 do
	s = cnt[i].ContactWireHeight
	t = t and t.."/"..s or s
end
return t or ""</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>8c81f720-43ed-4520-a78f-19410c849895</Guid>
      <Headers>
       <Header Name="Utligger"/>
       <Header Name="Sh [m]"/>
      </Headers>
      <Width>15</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>cnt,nCnt = getRelatedObjects(rel_OcsPole_Has_Cantilever)
for i = 0,nCnt-1 do
	s = cnt[i].SystemHeight
	t = t and t.."/"..s or s
end
return t or ""</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>00e2d0b2-3318-4838-93bd-7528d83478b2</Guid>
      <Headers>
       <Header Name="Utligger"/>
       <Header Name="Sikk\PSakk [m]"/>
      </Headers>
      <Width>15</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>local s = rel_OcsPole_Has_Cantilever
					local r,n = getRelatedObjects(s)
				
				if n == 0 or isVisible(r[0]) == false then 
					return ""
				elseif n == 1 then
					return r[0].Stagger
				elseif n == 2 then	
				return r[0].Stagger.."/"..r[1].Stagger
				end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>94bca7ee-e084-48c4-8129-42573b7b259c</Guid>
      <Headers>
       <Header Name="Eget spor"/>
       <Header Name="Nr"/>
      </Headers>
      <Width>15</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>Alignment.code</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>630b8470-4cee-4f85-875f-9634b9076eef</Guid>
      <Headers>
       <Header Name="Eget spor"/>
       <Header Name="PEL [km]"/>
      </Headers>
      <Width>15</Width>
      <Sort>Ascending</Sort>
      <Alignment>MiddleCenter</Alignment>
      <Data>NOBN_trk_toKm(Mileage)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>861ae53f-c887-4774-86c2-122e8369dd8c</Guid>
      <Headers>
       <Header Name="Eget spor"/>
       <Header Name="Kurve-\Pradius [m]"/>
      </Headers>
      <Width>15</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>
							r = getAlignmentInfo().CurveRadius
							if r == math.huge then 
								return "RL"
							else 
								if math.abs(r) > 5e5 then 
									return "RL"
								else
									if getAlignmentInfo().CurveRotation:upper() == "CCW" then
										return string.format(".%0f",r)
									else
										return string.format("%.0f",-r)
									end
								end
							end
					</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>1378d22d-c88d-41c9-a54b-96db95d2d3c4</Guid>
      <Headers>
       <Header Name="Eget spor"/>
       <Header Name="OH [mm]"/>
      </Headers>
      <Width>10</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>local c = getAlignmentInfo().Cant
											if (RC__isNan(c)) then
												return "-"
											else
												return string.format("%.0f",c)
											end
										</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>74af20b1-7ec9-4ec6-85b6-7e8bda973470</Guid>
      <Headers>
       <Header Name="Bestemmende spor"/>
       <Header Name="Nr"/>
      </Headers>
      <Width>15</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>ReferenceAlignment.code</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>5c76f0af-f694-4c2b-b22d-378169c7fdf3</Guid>
      <Headers>
       <Header Name="Bestemmende spor"/>
       <Header Name="Km. [km]"/>
      </Headers>
      <Width>10</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>--string.format("%.03f",ReferenceMileage/1000,10*(ReferenceMileage%1000))
				NOBN_trk_toKm(ReferenceMileage)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>87fda45d-6ea8-465c-9994-907106a84c16</Guid>
      <Headers>
       <Header Name="Bestemmende spor"/>
       <Header Name="CL mast\PCL spor [m]"/>
      </Headers>
      <Width>15</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%.02f",getAlignmentInfo(getObjectFromId(ReferenceAlignment)).DistanceToAlignment)</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>57a7dcc0-e348-4e8a-a6db-542f7c13ce67</Guid>
      <Headers>
       <Header Name="Eks.spor"/>
       <Header Name="Km [km]"/>
      </Headers>
      <Width>20</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>r = string.format("%.03f", (Mileage+1483.104)/1000)
				return "\\C10;"..r</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>d2a36cb1-b7cb-4c8e-8a87-671ca9cabfe7</Guid>
      <Headers>
       <Header Name="Av-\Pspenning"/>
       <Header Name="Avsp."/>
      </Headers>
      <Width>20</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>
				tol = 0.25
				if RcType == rctype_OcsPole then
					vpil = "←" --"\8592"
					opil = "↑"--"\8593"
					hpil = "→" --"\8594"
					npil = "↓"--"\8595"
					ba = getNearbyAlignments(rctype_GuyWire):
						filter(function  (x) return x.Variant:lower() == "bardun" and RC__getDistance2D(x.rcalignment.startpoint) &lt; 1.0 end )
					nb = getCollectionLength(ba)
					--if true then return nb,ba end
					t = getNearbyAlignments()
					tgt= getAlignmentInfo(t[0].id).Tangent
					--if true then return tgt end
					sporvinkel = math.atan(tgt.Y, tgt.X) * 180.0/math.pi 
					--if true then return sporvinkel end
					first = true
					for i = 0, nb-1 do
						s = first and "" or s..", "
						b = ba[i]
						pe = b.RcAlignment.EndPoint
						bf = getNearbyPointObjects2D(tol, "JBTEH_BAF Bardun fotplate", pe)[0]
						--if true then return bf end
						tgb= b.RcAlignment.StartTangent
						--if true then return tgb end
						bardunvinkel = math.atan(tgb.Y, tgb.X) * 180.0/math.pi
						--if true then return bardunvinkel end
						vinkel = bardunvinkel - sporvinkel
						if vinkel &lt; -180 then vinkel = vinkel + 360 end
						if vinkel &gt; 180 then vinkel = vinkel - 360 end
						hkurve = vinkel &gt; 50 and vinkel &lt; 130
						vkurve = vinkel &lt; -50 and vinkel &gt; -130
						medrettet = vinkel &gt; -25 and vinkel &lt; 25
						motrettet = vinkel &lt; -155 or vinkel &gt; 155
						--if true then return vinkel,bf.Variant, end
						--if true then return sporvinkel, bardunvinkel, vinkel, hkurve, vkurve medrettet, motrettet end
						if (vkurve or hkurve or medrettet or motrettet) == false then 
							return "Feil, ulovlig bardunvinkel ("..vinkel..")"
						end
						if hkurve and bf.Variant:lower():match("enkel") then s = s..vpil
						elseif vkurve and bf.Variant:lower():match("enkel") then s = s..hpil
						elseif motrettet and bf.Variant:lower():match("enkel") then s = s..opil
						elseif motrettet and bf.Variant:lower():match("dobbel") then s = s..opil..opil
						elseif medrettet and bf.Variant:lower():match("enkel")  then s = s..npil
						elseif medrettet and bf.Variant:lower():match("dobbel") then s = s..npil..npil
						else
							return _error, "ERROR - cannot deduce symbol for variant '"..bf.Variant.."'."
						end
						first = false
					end
					return s
				end					</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>0b9b2747-97b6-46de-ba8b-31d4d400faf9</Guid>
      <Headers>
       <Header Name="Merknader"/>
      </Headers>
      <Width>50</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>tol = 0.25
				avspenning = getNearbyAlignments("JBTEH_KLO Kontaktledningsoppheng"):filter(
					function (x) 
						return x.Variant:lower() == "bardun" and RC__getDistance2D(x.RcAlignment.startpoint) &lt; tol
					end)
				strever = getNearbyAlignments("JBTEH_KLO Kontaktledningsoppheng"):filter(
					function (x) 
						return x.Variant:lower() == "strever" and RC__getDistance2D(x.RcAlignment.startpoint) &lt; tol
					end)
					
				fix = {}
				local cantilevers = Relations[rel_OcsPole_Has_Cantilever]
				if getCollectionLength(cantilevers) &gt; 0 then
					local midpointAnchors, nMidpointAnchors = cantilevers[0]:getRelatedObjects(rel_Cantilever_IsLockedBy_MidpointAnchor)
					if nMidpointAnchors &gt; 0 then
						fix = midpointAnchors[0]:getRelatedObjects(rel_MidpointAnchor_IsAnchoredBy_MidpointAnchoringLine)
					end
				end
				
				--Deprecated methods:
				--fix = getNearbyPointObjects2D(5,rctype_WireTensioningBalancer)
				--fix = getRelatedObjects(rel_OcsPole_Has_Cantilever)[0]:getRelatedObjects(rel_Cantilever_IsLockedBy_MidpointAnchor)[0]
				ta = avspenning and RC__identify(avspenning[0]) or ""
				ts = strever and RC__identify(strever[0]) or ""
				tf = fix and RC__identify(fix[0]) or ""

				t = {}
				if BaneNORBeskrivelse ~= "" then table.insert(t, BaneNORBeskrivelse) end
				if avspenning.Count ~= 0 then table.insert(t, ta) end
				if strever.Count ~= 0 then table.insert(t, ts) end
				if fix.Count ~= nil then table.insert(t, tf) end
				
				--s = ""
				--if #t == 1 then
				--	s = t[1]
				--elseif #t &gt;= 1 then
				--	for i = 1,#t do s = s..", "..t[i] end
				--	string.gsub(s,)
				--end
				
				s = ""
				first = true
				for i = 1,#t do
					if not first then s = s..", " else first = false end
					s = s..t[i]
				end
				return s
				
				--return Relations[rel_OcsPole_Has_Cantilever][0].Relations["Har kontaktledningsoppheng"][0].Variant == "fixline" --Sjekk navn</Data>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>630b8470-4cee-4f85-875f-9634b9076eef</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableEarthing" Name="JBTFE_DIV Jordingstabell" Layer="JBTFE_TABELLER" Group="Elektro Høyspent/Jordingstabeller">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Jordingstabell">
   <Variant Name="Jordingstabell"/>
  </Variants>
  <InsertTable Name="Jordingstabell" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Jordingstabell [angi tegningsnummer her]</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilter>JBTEH_MAS KL-mast</ObjectManagerFilter>
    <ObjectManagerFilterList>
     <string>JBTEH_MAS KL-mast</string>
     <string>JBTEH_MAS KL-mast</string>
    </ObjectManagerFilterList>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>--CLFEY 2020-03-01 EARTHING TABLE - Based on the 'Lieråsen-Brakerøya' project for Bane NOR.
--Make one copy of this table for each layout. Edit Lua changes in master table.
--Associate each table with the area capturing the objects to be included in the table.
--
--This table definition relies on the following Lua functions to be contained in the DNA:
--    RC__identify(xyzzy)                        : Returns object xyzzy's  name if present, or code if present, or guid.
--    NOBN_trk_toKm(ReferenceMileage)                 : Returns a string with ref. mileage as km with 3 decimals (meter precision).
--    r,n = getRelatedObjects(s) : Returns Relations[s]:filter(function (x) return x:isVisible() end) and the size of that collection.
--
RcType == rctype_EarthingConductor
or
(
	EarthingMethod == "Wire" or 
	(EarthingMethod == "Rail" or EarthingMethod == "Track") or --(prepared for future change to enum value from 'Rail' to 'Track')
	EarthingMethod == "Object"
	--Ignore those with 'None' and 'Unknown'.
)
and 
(
	--Replace with your project's min/max mileages for this table, if mileage limits are required.
	ReferenceMileage &gt;= 0 and
	ReferenceMileage &lt;= math.huge
)</LuaFilter>
    <UseDataSetFilter>false</UseDataSetFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <TitleTextHeight>3.5</TitleTextHeight>
    <HeaderTextHeight>2.5</HeaderTextHeight>
    <DataTextHeight>1.8</DataTextHeight>
    <VerticalCellMargin>0.5</VerticalCellMargin>
    <HorizontalCellMargin>1</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <MinRowHeight>1</MinRowHeight>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <VerticalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>true</IsVertical>
     <Location>Left</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </VerticalNumbering>
    <HorizontalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>false</IsVertical>
     <Location>Bottom</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </HorizontalNumbering>
    <TableFormat>Standard</TableFormat>
    <Font>RC-STANDARD</Font>
    <Columns>
     <ColumnSpecification>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Headers>
       <Header Name="Spor / Jordleder"/>
       <Header Name="Km Ref.spor [angi refspor her]"/>
      </Headers>
      <Width>20</Width>
      <Sort>Ascending</Sort>
      <Alignment>MiddleCenter</Alignment>
      <Data>if RcAlignment == nil then
	-- Point object:
	return NOBN_trk_toKm(ReferenceMileage)
else
	return "-"
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Headers>
       <Header Name="Spor / Jordleder"/>
       <Header Name="Tilhører"/>
      </Headers>
      <Width>30</Width>
      <Sort>Ascending</Sort>
      <Alignment>MiddleCenter</Alignment>
      <Data>if RcType == rctype_EarthingConductor then
	return code
	
elseif EarthingMethod == "Wire" then
	if EarthingAlignment == nil then
		return "Missing PE wire"
	else
		return RC__identify(EarthingAlignment)
	end

elseif EarthingMethod == "Rail" or EarthingMethod == "Track" then --(prepared for future change to enum value from 'Rail' to 'Track')
	if EarthingAlignment == nil then
		return "Missing track"
	else
		return EarthingAlignment.code
	end
	
elseif EarthingMethod == "Object" then
	if EarthingObject == nil then
		return "Missing PE object"
	else
		return RC__identify(EarthingObject)
	end
	
elseif EarthingMethod == "None" or EarthingMethod == "Unknown" then
	--(Should have been filtered out already)
	return "PE not required"

else
	return "*** Bad EarthingMethod ["..tostring(EarthingMethod).."]."
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>32998746-0c24-4ac9-a9fe-6f23dedadb2e</Guid>
      <Headers>
       <Header Name="Spor / Jordleder"/>
       <Header Name="Side"/>
      </Headers>
      <Width>15</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>--Earth wires are alignments, so assume that they have each been related to a marker placed on the wire, to extract side-of-track etc.
if RcAlignment == nil then 
	obj = this --Point object
else
	s = rel_Anything_Has_Marker
	r,n = getRelatedObjects(s)
	if n == 0 then
		return "-"
	else 
		obj = r[0]
	end
end
return obj.Leftsided and "Venstre" or "Høyre"</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>c862d114-307a-4c93-ab16-b6437fb24902</Guid>
      <Headers>
       <Header Name="Objekt"/>
      </Headers>
      <Width>70</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>--There may be a need to show the earthing of object types for which RC does not have a specific model yet. 
--These objects are to be represented by RcType 'Watch' objects and will present them selves as 'Diverse'.
t = RcType:sub(8)
if t == "Watch" then 
	return "Diverse"
else
	return t.." / "..(Variant == nil and "" or Variant)
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>e9394aa0-e916-4405-8943-4fad9acab949</Guid>
      <Headers>
       <Header Name="Driftsmerking"/>
      </Headers>
      <Width>70</Width>
      <Sort>Ascending</Sort>
      <Alignment>MiddleCenter</Alignment>
      <Data>RC__identify()</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>289d4be1-1319-4c1c-a970-dba62aca2493</Guid>
      <Headers>
       <Header Name="Merkeskilt"/>
       <Header Name="På jordleder"/>
      </Headers>
      <Width>60</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>if RcType == rctype_EarthingConductor then
	return "Skinne / "..RC__identify()
else 
	return EarthingLabelText
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>63762ea8-c3cb-4325-b360-d8983eafb1cb</Guid>
      <Headers>
       <Header Name="Merkeskilt"/>
       <Header Name="Farge"/>
      </Headers>
      <Width>20</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>--Translate from English if needed:
if EarthingLabelColor == "Red" then return "Rød"
elseif EarthingLabelColor == "Green" then return "Grønn"
elseif EarthingLabelColor == "White" then return "Hvit"
elseif EarthingLabelColor== "Blue" then return "Blå"
elseif EarthingLabelColor == "Yellow" then return "Gul"
elseif RcType == rctype_EarthingConductor then return "Rød"
else return EarthingLabelColor
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>1e6313b6-5ae6-478b-8449-17375bf6df8e</Guid>
      <Headers>
       <Header Name="Jordet til"/>
       <Header Name="Venstre skinne"/>
      </Headers>
      <Width>20</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>if EarthingMethod == "Rail" and LeftSided then
	return "X"
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>6790c4e6-642a-46da-9417-21687b497b8e</Guid>
      <Headers>
       <Header Name="Jordet til"/>
       <Header Name="Høyre skinne"/>
      </Headers>
      <Width>20</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>if EarthingMethod == "Rail" and RightSided then
	return "X"
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>43d5b0a0-e8d1-4a9f-8385-cafb3d1c92bb</Guid>
      <Headers>
       <Header Name="Jordet til"/>
       <Header Name="Langsående jordleder"/>
      </Headers>
      <Width>20</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>if EarthingMethod == "Wire" then
	return "X"
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>7437388b-b08d-4605-b461-b5429d3f6292</Guid>
      <Headers>
       <Header Name="Koblet via"/>
      </Headers>
      <Width>70</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>if RcType == rctype_EarthingConductor then
	return "Direkte til skinne"

elseif EarthingMethod == "Rail" then 
	return "Direkte til skinne"

elseif EarthingMethod == "Wire" then 
	return "Direkte til langsgående jordleder"

elseif EarthingMethod == "Object" then
	return "Jordet via "..RC__identify(EarthingObject)

else
	return "?"
end</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>0dec4ab1-4196-4142-8497-b0d4916f0f9e</Guid>
      <Headers>
       <Header Name="Fag"/>
      </Headers>
      <Width>25</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>Discipline</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>b7236c2b-cfce-4af4-a0b2-e99fb66653ad</Guid>
      <Headers>
       <Header Name="Merknader"/>
      </Headers>
      <Width>35</Width>
      <Sort/>
      <Alignment>MiddleCenter</Alignment>
      <Data>s = rel_OcsPole_IsSupportFor_OcsPortal
r,n = getRelatedObjects(s)
if n &gt; 0 then
	return "Tilhører åk "..r[0].code
else 
	return ""
end</Data>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>71b321ec-4bc3-493d-974b-2b01236d720c</string>
     <string>e9394aa0-e916-4405-8943-4fad9acab949</string>
     <string>10272f0b-a413-49f6-bd6a-b520ea345d97</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableFoundations" Name="JBTFE_DIV Fundamenttabell" Layer="JBTFE_TABELLER" Group="Underbygning/Fundamenttabeller">
  <RelationSpace>tabell</RelationSpace>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <Variants DefaultValue="Fundamenter">
   <Variant Name="Fundamenter"/>
   <Variant Name="Skiltfester"/>
  </Variants>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableCableDucts" Name="JBTFE_DIV Føringsveitabell" Layer="JBTFE_TABELLER" Group="Underbygning/Føringsveitabeller">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Trekkerør">
   <Variant Name="Trekkekummmer"/>
   <Variant Name="Rørkryss"/>
   <Variant Name="Trekkerør"/>
   <Variant Name="Kabelkanaler"/>
  </Variants>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableSignals" Name="JBTFE_DIV Signaltabell" Layer="JBTFE_TABELLER" Color="ByLayer" Group="Signal/Signaltabeller">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Signaltabell Hovedsignaler">
   <Variant Name="Signaltabell Enkel"/>
   <Variant Name="Signaltabell Byggetoleranser"/>
   <Variant Name="Signaltabell Hovedsignaler"/>
   <Variant Name="Signaltabell Frittstående forsignaler"/>
   <Variant Name="Signaltabell Frittstående dvergsignaler"/>
   <Variant Name="Signaltabell Frittstående formsignaler"/>
  </Variants>
  <InsertTable Name="Signaltabell Enkel" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Signaltabell (begrenset)</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilter></ObjectManagerFilter>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>RcType == rctype_Signal</LuaFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <Font>RC-STANDARD</Font>
    <TitleTextHeight>12</TitleTextHeight>
    <HeaderTextHeight>10</HeaderTextHeight>
    <DataTextHeight>8</DataTextHeight>
    <VerticalCellMargin>1.5</VerticalCellMargin>
    <HorizontalCellMargin>1.5</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <TableFormat>Standard</TableFormat>
    <Columns>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Signalinformasjon</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>if name:match("Rep") then return "Rep.Hs"
elseif (MainSignal ~= "-") then return "Hovedsignal"
elseif (DistantSignal ~= "-") then return "Forsignal"
elseif (DwarfSignal ~= "-") then return "Dvergsignal"
else return "Ukjent signaltype",_warning
end</Data>
      <Title>Signaltype</Title>
      <Sort>Descending</Sort>
      <Guid>225851ac-3c72-4fb9-880f-9cd04c77bbc8</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Signalinformasjon</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>if dir == "down" then
	return "Synkende km"
elseif dir == "up" then
	return "Stigende km"
else
	return "Ukjent retning ["..dir.."]",_warning
end</Data>
      <Title>Retning</Title>
      <Sort>Ascending</Sort>
      <Guid>0bad5f0f-eb7f-4516-957a-5768e6f4e1c5</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Signalinformasjon</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>name</Data>
      <Title>Navn</Title>
      <Sort>Ascending</Sort>
      <Guid>600a9562-51e1-4e46-bfb1-9e807bd20025</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Signalinformasjon</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>if (Sight == 0) then
	return "(ikke angitt)"
else
	return Sight
end</Data>
      <Title>Siktkrav [m]</Title>
      <Sort/>
      <Guid>d57eb1d7-427b-4a4e-b1fc-1b281c6ff7bd</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Spor</Title>
       </Header>
      </Headers>
      <Width>80</Width>
      <Data>NOBN_trk_toKm(ReferenceMileage,3)</Data>
      <Title>Km i ref.spor</Title>
      <Sort>Ascending</Sort>
      <Guid>330ae8a5-3643-4624-8aba-fcd86e60940e</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Eget spor</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>ReferenceAlignment.code</Data>
      <Title>Referanse- spor</Title>
      <Sort/>
      <Guid>294be7d2-4067-49c5-ada9-c5df1eec6d35</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Eget spor</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>Alignment.code</Data>
      <Title>Eget spor</Title>
      <Sort/>
      <Guid>5ddd8bf2-8dc5-4d1a-92e4-851dd8ee1190</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Plassering</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>local dirIsUp = (dir == "up")
local dirIsDown = (dir == "down")
--
if (dirIsUp and RightSided) then
	return "Høyre"
elseif (dirIsUp and LeftSided) then
	return "Venstre"
elseif (dirIsDown and RightSided) then 
	return "Venstre"
elseif (dirIsDown and LeftSided) then
	return "Høyre"
else
	return "Feil: Ukjent dir ["..dir.."]"
end</Data>
      <Title>Side av spor i kjøre- retningen</Title>
      <Sort/>
      <Guid>aabae339-be76-4cd7-acc2-3e658bd9b637</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Plassering</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>if (getAlignmentInfo().CurveType == "Straight") then
	return "-"
else
	return math.floor(getAlignmentInfo().CurveRadius+0.5)
end</Data>
      <Title>Kurveradius [m]</Title>
      <Sort/>
      <Guid>7aa6f1c4-3d65-4dfe-9d4e-2efc53adc742</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Plassering</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>if (getAlignmentInfo().CurveType == "Straight") then
	return "Rettspor" 
elseif (getAlignmentInfo().CurveRotation:upper() == "CCW") then
	return "Venstrekurve" 
elseif (getAlignmentInfo().CurveRotation:upper() == "CW") then
	return "Høyrekurve"
	else return "Feil i kurverotasjon [" .. tostring(getAlignmentInfo().CurveRotation) .. "]",_warning
end
						</Data>
      <Title>Høyre / venstre kurve (Oslo i ryggen)</Title>
      <Sort/>
      <Guid>aca992ac-7a86-4558-80e0-1638c189741f</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Plassering</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>if (getAlignmentInfo().CurveType == "Straight") then
	return "Rettspor"
else
	if (getAlignmentInfo().CurveRotation:upper() == "CCW") then
		if (LeftSided) then
			return "Innerkurve"
		else	
			return "Ytterkurve"
		end
	else
		if (RightSided) then
			return "Innerkurve"
		else	
			return "Ytterkurve"
		end
	end
end</Data>
      <Title>Innerkurve / ytterkurve</Title>
      <Sort/>
      <Guid>9948125f-4ec5-4e90-901b-2b51c9b577e6</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bygging</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>local s = ""
local first = true
if (MainSignal ~= "-") then 
	s = MainSignal
	first = false
end 
if (DistantSignal ~= "-") then 
	if (first) then s = "Fs" else s = s.."-Fs" end 
	first = false
end 
if (DwarfSignal ~= "-") then 
	if (first) then s = "Ds" else s = s.."-Ds" end
	first = false
end
if (HighShuntingSignal ~= "-") then 
	if (first) then s = "Z" else s = s.."-Z" end		
	first = false
end 
if (PositionLamp ~= "-") then
	if (first) then s = "MKs" else s = s.."-MKs" end		
	first = false
end
if (CautiousDrivingSignal == "Ja") then
	if (first) then s = "FKs" else s = s.."-FKs" end		
	first = false
end
if (LineSignal ~= "-") then 
	if (first) then s = "Ls" else s = s.."-Ls" end		
	first = false
end
if (OpticalSpeedSignal == "Ja") then 
	if (first) then s = "Hast" else s = s.."-Hast" end		
	first = false
end 
return s</Data>
      <Title>Bestykning</Title>
      <Sort/>
      <Guid>1ebe9384-18d8-407b-8aff-74eca20f9286</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bygging</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>getInvertedBlockImage()</Data>
      <Title>2D symbol</Title>
      <Sort/>
      <Guid>ec4d6960-bb43-4150-9cd4-c873d9080532</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>225851ac-3c72-4fb9-880f-9cd04c77bbc8</string>
     <string>0bad5f0f-eb7f-4516-957a-5768e6f4e1c5</string>
     <string>330ae8a5-3643-4624-8aba-fcd86e60940e</string>
     <string>600a9562-51e1-4e46-bfb1-9e807bd20025</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
  <InsertTable Name="Signaltabell (detaljert)" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Signaltabell (detaljert)</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilter></ObjectManagerFilter>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>RcType == rctype_Signal</LuaFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <Font>RC-STANDARD</Font>
    <TitleTextHeight>5</TitleTextHeight>
    <HeaderTextHeight>3.5</HeaderTextHeight>
    <DataTextHeight>2.5</DataTextHeight>
    <VerticalCellMargin>1.5</VerticalCellMargin>
    <HorizontalCellMargin>1.5</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <TableFormat>Standard</TableFormat>
    <Columns>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Signaltabell Byggetoleranser</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>if name:lower():match("rep") then 
	return "Rep.Hs"
elseif (MainSignal ~= "-") then 
	return "Hovedsignal"
elseif (DistantSignal ~= "-") then
	return "Forsignal"
elseif (DwarfSignal ~= "-") then
	return "Dvergsignal"
else
	return "Ukjent signaltype",_warning
end</Data>
      <Title>Signaltype</Title>
      <Sort>Descending</Sort>
      <Guid>225851ac-3c72-4fb9-880f-9cd04c77bbc8</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Signalinformasjon</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>if dir == "down" then
	return "Synkende km"
elseif dir == "up" then
	return "Stigende km"
else
	return "Feil: Ukjent retning ["..dir.."]",_warning
end</Data>
      <Title>Retning</Title>
      <Sort>Ascending</Sort>
      <Guid>0bad5f0f-eb7f-4516-957a-5768e6f4e1c5</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Signalinformasjon</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>name</Data>
      <Title>Navn</Title>
      <Sort>Ascending</Sort>
      <Guid>600a9562-51e1-4e46-bfb1-9e807bd20025</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Signalinformasjon</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>if (Sight == 0) then
	return "(ikke angitt)"
else
	return Sight
end</Data>
      <Title>Siktkrav [m]</Title>
      <Sort/>
      <Guid>d57eb1d7-427b-4a4e-b1fc-1b281c6ff7bd</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Eget spor</Title>
       </Header>
      </Headers>
      <Width>80</Width>
      <Data>NOBN_trk_toKm(ReferenceMileage,3)</Data>
      <Title>Km i ref.spor</Title>
      <Sort>Ascending</Sort>
      <Guid>330ae8a5-3643-4624-8aba-fcd86e60940e</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Eget spor</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>ReferenceAlignment.code</Data>
      <Title>Referanse- spor</Title>
      <Sort/>
      <Guid>294be7d2-4067-49c5-ada9-c5df1eec6d35</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Eget spor</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>Alignment.code</Data>
      <Title>Eget spor</Title>
      <Sort/>
      <Guid>5ddd8bf2-8dc5-4d1a-92e4-851dd8ee1190</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Plassering</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>
							local dirIsUp = (dir == "up")
							local dirIsDown = (dir = "down")
							--
							if (dirIsUp and RightSided) then
								return "Høyre"
							elseif (dirIsUp and LeftSided) then
								return "Venstre"
							elseif (dirIsDown and RightSided) then 
								return "Venstre"
							elseif (dirIsDown and LeftSided) then
								return "Høyre"
							else
								return "Feil: Ukjent dir ["..dir.."]"
							end
						</Data>
      <Title>Side av spor i kjøre- retningen</Title>
      <Sort/>
      <Guid>aabae339-be76-4cd7-acc2-3e658bd9b637</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Plassering</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>string.format("%4g",math.abs(DistanceToAlignment))</Data>
      <Title>Avstand til eget spors CL [m]</Title>
      <Guid>f8d14542-afa2-4a2b-bc57-ad91df773157</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Plassering</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>
							if (getAlignmentInfo().CurveType == "Straight") then
								return "-"
							else
								return math.floor(getAlignmentInfo().CurveRadius+0.5)
							end
						</Data>
      <Title>Kurveradius [m]</Title>
      <Sort/>
      <Guid>7aa6f1c4-3d65-4dfe-9d4e-2efc53adc742</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Plassering</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>
							if (getAlignmentInfo().CurveType == "Straight") then
								return "Rettspor" 
							elseif (getAlignmentInfo().CurveRotation:upper() == "CCW") then
								return "Venstrekurve" 
							elseif (getAlignmentInfo().CurveRotation:upper() == "CW") then 
								return "Høyrekurve"
								else return "Feil i kurverotasjon ["..tostring(getAlignmentInfo().CurveRotation).."]",_warning
							end
						</Data>
      <Title>Høyre / venstre kurve (Oslo i ryggen)</Title>
      <Sort/>
      <Guid>aca992ac-7a86-4558-80e0-1638c189741f</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Plassering</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>if (getAlignmentInfo().CurveType == "Straight") then
								return "Rettspor"
							else
								if (getAlignmentInfo().CurveRotation:upper() == "CCW") then
									if (LeftSided) then
										return "Innerkurve"
									else	
										return "Ytterkurve"
									end
								else
									if (RightSided) then
										return "Innerkurve"
									else	
										return "Ytterkurve"
									end
								end
							end
						</Data>
      <Title>Innerkurve / ytterkurve</Title>
      <Sort/>
      <Guid>9948125f-4ec5-4e90-901b-2b51c9b577e6</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bygging</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>
							if (getAlignmentInfo().CurveType == "Straight") then
								return 0
							else
								r = getAlignmentInfo().CurveRadius
								if (getAlignmentInfo().CurveRotation:upper() == "CW") then
									--clockwise
									if (RightSided) then
										--Innerkurve
										k = 81000/(2*r)
									else	
										--Ytterkurve
										k = 63000/(2*r)
									end
								else
									--counterclockwise
									if (LeftSided) then
										--Innerkurve
										k = 81000/(2*r)
									else	
										--Ytterkurve
										k = 63000/(2*r)
									end
								end
								return math.floor(k+0.5)
							end
						</Data>
      <Title>Kurveutslag         Ki / Ky [mm]</Title>
      <Sort/>
      <Guid>dd7266c0-bde1-499e-a1bd-4d647ec71144</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Plassering</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>
							oh = math.floor(getAlignmentInfo().Cant + 0.5)
							if (RC__isNan(oh)) then
								return "(mangler overhøyde)"
							else
								return oh
							end
						</Data>
      <Title>Overhøyde [mm]</Title>
      <Sort/>
      <Guid>571d4332-2a54-4b50-b0cf-f6ff489269d7</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bygging</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>oh35 = math.floor(getAlignmentInfo().Cant * (3500/1500) + 0.5)
if (RC__isNan(oh35)) then
	return "(ukjent overhøyde)"
else
	return oh35
end</Data>
      <Title>Overhøyde- utslag i 3.5m høyde [mm]</Title>
      <Sort/>
      <Guid>bd49b1af-86e1-4668-ba19-eda7a0418425</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bygging</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>local k,s,r
if (getAlignmentInfo().CurveType == "Straight") then
	return 0
else
	oh35 = math.floor(getAlignmentInfo().Cant * (3500/1500) + 0.5)
	r = getAlignmentInfo().CurveRadius
	if (getAlignmentInfo().CurveRotation:upper() == "CW") then
		--clockwise
		if (RightSided) then
			--Innerkurve
			k = 81000/(2*r)
			s = 1.0
		else	
			--Ytterkurve
			k = 63000/(2*r)
			s = -1.0
		end
	else
		--counterclockwise
		if (LeftSided) then
			--Innerkurve
			k = 81000/(2*r)
			s = 1.0
		else	
			--Ytterkurve
			k = 63000/(2*r)
			s = -1.0
		end
	end
	if (RC__isNan(oh35)) then
		return "(mangler overhøyde)"
	else
		return math.floor(k + s*oh35 + .5)
	end
end</Data>
      <Title>Utslag mot signalet i 3.5m høyde [mm]</Title>
      <Sort/>
      <Guid>5c223d26-335c-441e-baa7-6999d778782e</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bygging</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>local k,s,r
if (getAlignmentInfo().CurveType == "Straight") then
	return math.abs(DistanceToAlignment)
else
	oh35 = math.floor(getAlignmentInfo().Cant * (3500/1500) + 0.5)
	r = getAlignmentInfo().CurveRadius
	if (getAlignmentInfo().CurveRotation:upper() == "CW") then
		--clockwise
		if (RightSided) then
			--Innerkurve
			k = 81000/(2*r)
			s = 1
		else	
			--Ytterkurve
			k = 63000/(2*r)
			s = -1
		end
	else
		--counterclockwise
		if (LeftSided) then
			--Innerkurve
			k = 81000/(2*r)
			s = 1
		else	
			--Ytterkurve
			k = 63000/(2*r)
			s = -1
		end
	end
	if (RC__isNan(oh35)) then
		return "(mangler overhøyde)"
	else
		return math.abs(math.floor(100*(DistanceToAlignment + (k + s*oh35)/1000) + 0.5)/100)
	end
end</Data>
      <Title>Margin til stikningspunkt [m]</Title>
      <Sort/>
      <Guid>e5f1ad8b-090e-4be7-8dcf-cee6d795ca1c</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bygging</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>local s = ""
local first = true
if (MainSignal ~= "-") then 
	s = MainSignal
	first = false
end 
if (DistantSignal ~= "-") then 
	if (first) then s = "Fs" else s = s.."-Fs" end 
	first = false
end 
if (DwarfSignal ~= "-") then 
	if (first) then s = "Ds" else s = s.."-Ds" end
	first = false
end
if (PositionLamp ~= "-") then
	if (first) then s = "MKs" else s = s.."-MKs" end		
	first = false
end
if (CautiousDrivingSignal ~= "-") then
	if (first) then s = "FKs" else s = s.."-FKs" end		
	first = false
end
if (LineSignal ~= "-") then 
	if (first) then s = "Ls" else s = s.."-Ls" end		
	first = false
end
if (OpticalSpeedSignal ~= "-") then 
	if (first) then s = "Hast" else s = s.."-Hast" end		
	first = false
end 
if (HighShuntingSignal ~= "-") then 
	if (first) then s = "Z" else s = s.."-Z" end		
	first = false
end 
return s</Data>
      <Title>Bestykning</Title>
      <Sort/>
      <Guid>1ebe9384-18d8-407b-8aff-74eca20f9286</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bygging</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>getInvertedBlockImage()</Data>
      <Title>2D symbol</Title>
      <Sort/>
      <Guid>ec4d6960-bb43-4150-9cd4-c873d9080532</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers>
       <Header>
        <Title>Bygging</Title>
       </Header>
      </Headers>
      <Width>60</Width>
      <Data>get3DBlockImage(2)</Data>
      <Title>3D modell</Title>
      <Sort/>
      <Guid>565acdf6-c46b-44bd-bc72-e876121667d1</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>225851ac-3c72-4fb9-880f-9cd04c77bbc8</string>
     <string>0bad5f0f-eb7f-4516-957a-5768e6f4e1c5</string>
     <string>330ae8a5-3643-4624-8aba-fcd86e60940e</string>
     <string>600a9562-51e1-4e46-bfb1-9e807bd20025</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
  <InsertTable Name="Signaltabell Hovedsignaler" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <Title>Signaltabell Hovedsignaler</Title>
    <IncludeTitle>true</IncludeTitle>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>RcType == rctype_Signal and MainSignal ~= "-"</LuaFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <Font>RC-STANDARD</Font>
    <TitleTextHeight>12</TitleTextHeight>
    <HeaderTextHeight>10</HeaderTextHeight>
    <DataTextHeight>8</DataTextHeight>
    <VerticalCellMargin>1.5</VerticalCellMargin>
    <HorizontalCellMargin>1.5</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <TableFormat>Standard</TableFormat>
    <Columns>
     <ColumnSpecification>
      <Headers/>
      <Width>60</Width>
      <Data>Name</Data>
      <Title>Navn</Title>
      <Sort/>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers/>
      <Width>60</Width>
      <Data>NOBN_trk_toKm(ReferenceMileage,3)</Data>
      <Title>Km (ref)</Title>
      <Sort>Ascending</Sort>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
     <ColumnSpecification>
      <Headers/>
      <Width>60</Width>
      <Data>getInvertedBlockImage()</Data>
      <Title>2D symbol</Title>
      <Sort/>
      <Guid>d762837b-7200-46a2-8e90-ca7b8d257ccb</Guid>
      <Alignment>MiddleCenter</Alignment>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>10272f0b-a413-49f6-bd6a-b520ea345d97</string>
    </SortOrder>
   </TableSpecification>
  </InsertTable>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETETable" Class="RCTable" LuaName="rctype_TableAtcEncoding" Name="JBTFE_DIV ATC kodetabell" Layer="JBTFE_TABELLER" Color="ByLayer" Group="Signal/ATC kodetabeller">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="ATC kodetabell serie/parallellbaliser (Ktab20s)">
   <Variant Name="ATC kodetabell serie/parallellbaliser (Ktab20s)"/>
   <Variant Name="ATC kodetabell GMB-parallellbaliser (KtabGMBf) "/>
   <Variant Name="ETCS balise kodetabell for Østre linje"/>
   <Variant Name="ETCS balise kodetabell for Nasjonal Implementering"/>
  </Variants>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETEXref" Class="RCXRef" LuaName="rctype_XRef" Name="XRef" Layer="JBTRC_XRF" Color="ByLayer" Group="XRef"></ObjectType>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_AuxiliaryLine" Name="JBTFE_HJL Hjelpelinje" Layer="JBTFE_HJL" Color="ByLayer" Group="Felles/Hjelpelinjer">
  <RelationSpace>hjelpelinje</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTFE@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTFE@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTFE@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <AlignmentSystems DefaultSystemName="Hjelpelinje">
   <AlignmentSystem Name="Hjelpelinje" CantGauge="0.000" AlignmentGauge="0.000" LiftWithCant="false"/>
  </AlignmentSystems>
  <Variants DefaultValue="Hjelpelinje">
   <Variant Name="Hjelpelinje">
    <SetValue Key="Color" Value="ByLayer"/>
    <SetValue Key="Linetype" Value="RC-DASHED"/>
    <SetValue Key="GlobalWidth" Value="0.50"/>
    <SetValue Key="AlignmentSystem" Value="Hjelpelinje"/>
   </Variant>
  </Variants>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <PropertyPrompt Key="code" DefaultValue="Hjelpelinje" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Hjelpelinje" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-USPESIFISERT-{{SymbolMode}}" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="eOcp" Class="RailwayArea" LuaName="rctype_OcpArea" Name="JBTFE_DIV OCP område" Layer="JBTFE_OCP_OMRÅDER" Color="ByLayer" Group="Områder" Linetype="RC-OCP">
  <RelationSpace>område</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTFE@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTFE@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTFE@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <PropertyPrompt Key="code" DefaultValue="" AcceptEmptyValue="false"/>
  <Variants DefaultValue="OCP">
   <Variant Name="OCP"/>
  </Variants>
  <InsertArea DisplayName="OCP" Name="OCP" Group="OCP" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
 </ObjectType>
 <ObjectType DataType="tElementWithIDAndName" Class="RailwayArea" LuaName="rctype_Area" Name="JBTFE_DIV Område" Layer="JBTFE_OMRÅDER" Color="ByLayer" Group="Områder" Linetype="
					{%    if Variant == 'Brukerdefinert' %}RC-Brukerdefinert
					{% elsif Variant == 'ETCS-område (NID_C)' %}RC-EtcsOmraade
					{% elsif Variant == 'Arbeidsområde' %}RC-Arbeidsområde
					{% elsif Variant == 'Lokalområde' %}RC-Lokalområde
					{% elsif Variant == 'Grense for parsell' %}RC-Parsellgrense
					{% elsif Variant == 'Plattform' %}RC-Plattform
					{% elsif Variant == 'Jernbanebro' %}RC-Jernbanebro
					{% elsif Variant == 'Veibro' %}RC-Veibro
					{% elsif Variant == 'Tunnel' %}RC-Tunnel
					{% elsif Variant == 'Viewport' %}RC-Viewport
					{% elsif Variant == 'Jordingsmaskenett' %}RC-JordingsMaskenett
					{% endif %}">
  <RelationSpace>område</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTFE@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTFE@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTFE@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Brukerdefinert">
   <Variant Name="Brukerdefinert"/>
   <Variant Name="ETCS-område (NID_C)"/>
   <Variant Name="Arbeidsområde"/>
   <Variant Name="Lokalområde"/>
   <Variant Name="Grense for parsell"/>
   <Variant Name="Plattform"/>
   <Variant Name="Jernbanebro"/>
   <Variant Name="Veibro"/>
   <Variant Name="Tunnel"/>
   <Variant Name="Viewport"/>
   <Variant Name="Jordingsmaskenett"/>
  </Variants>
  <PropertyPrompt Key="code" DefaultValue="" AcceptEmptyValue="false"/>
  <InsertArea Name="Brukerdefinert" Group="Områder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
  <InsertArea Name="ETCS-område (NID_C)" Group="Områder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
  <InsertArea Name="Arbeidsområde" Group="Områder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
  <InsertArea Name="Lokalområde" Group="Områder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
  <InsertArea Name="Grense for parsell" Group="Områder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
  <InsertArea Name="Plattform" Group="Områder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
  <InsertArea Name="Jernbanebro" Group="Områder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
  <InsertArea Name="Veibro" Group="Områder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
  <InsertArea Name="Tunnel" Group="Områder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
  <InsertArea Name="Viewport" Group="Områder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
  <InsertArea Name="JordingsMaskenett" Group="Jording" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-OMRAADE-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertArea>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETEBalloon" Class="RailwayPlacedObject" LuaName="rctype_Balloon" Name="JBTFE_BLN Ballong" Layer="JBTFE_BALLONGER" Color="ByLayer" Group="Felles/Ballong" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>ballong</RelationSpace>
  <AttachTo Category="anything"/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Ballong">
   <Variant Name="Ballong"></Variant>
  </Variants>
  <SetValue Key="code" Value="Ballong"/>
  <PropertyPrompt Key="Content" DefaultValue="Content?" AcceptEmptyValue="false"/>
  <LuaExpression Name="name">
   <Formula>code.." "..Content</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>Attachment and Attachment.dir or getPropertyValue("dir")</Formula>
  </LuaExpression>
  <InsertPointObject Name="Ballong" GenerateDisplayBlockWithScript="true" DisplayBlockName="NO-BN-RT-JBTFE_BLN-BALLONG-1" DefaultSnapMode="Point" SetDisplayOffsetDuringInsert="true" DrawArrowToDisplayOffset="true" AskForAttachment="true">
   <DisplayBlockGenerationScript>RC__createBlockBalloon(nil)</DisplayBlockGenerationScript>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition RotationCenter="OwnPosition" GenerateBlockWithScript="true" ForceRedrawOfRuntimeBlocksOnScaleChange="true" AllowSymbolMove="true" DoNotIncludeInSymbolFrame="false">
   <Rotation AddAngle="{{AngularOffset}}"/>
   <SymbolBlockGenerationScript>RC__createBlockBalloon(railwayObject)</SymbolBlockGenerationScript>
   <SymbolAttribute Tag="BalloonContent">
    <Value>{{Content}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETEWatch" Class="RailwayPlacedObject" LuaName="rctype_Watch" Name="JBTFE_WCH Watch" Layer="JBTFE_WATCH" Color="ByLayer" Group="Felles/Watch" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>watch</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTFE@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTFE@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTFE@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Watch">
   <Variant Name="Watch"></Variant>
  </Variants>
  <SetValue Key="name" Value="Watch"/>
  <LuaExpression Name="Text">
   <Formula>_JBTFE_DIV_watch_text()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTFE_DIV_watch_text()" ReturnType="String" HideFromUser="false" Description="Returns a text to be displayed inside the Watch symbol's frame. The text consists of the code from each visible object related with '&quot;..rel_Watch_AppliesTo_Anything..&quot;'.">
   <Signature>String _JBTFE_DIV_watch_text()</Signature>
   <Formula>
				function _JBTFE_DIV_watch_text()
					local r,n,t
					local s = rel_Watch_AppliesTo_Anything
					r,n = getRelatedObjects(s)
					if n == 0 then 
						t = "UNFINISHED - Relate with '"..s.."' or edit its formula directly."
					else
						t = r[0].code
						for i = 1, n-1 do
							t = t..", "..r[i].code
						end
					end
					return t
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="SymbolFrame">
   <Formula>"Watch"</Formula>
  </LuaExpression>
  <InsertPointObject Name="Watch" DisplayBlockName="NO-BN-2D-JBTRC_WATCH-INNSETTING-SYMBOL-Schematic" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3" SnapSensitivityDistance="6">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_WCH-WATCH-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <BlockNameFormat JoinBy="-">NO-BN-2D-JBTFE_WCH-WATCH-{{SymbolMode}}</BlockNameFormat>
   <SymbolAttribute Tag="W">
    <Value>{{Text}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <LuaFunction Name="NOBN_com_getKof05Records()" ReturnType="String" HideFromUser="false" Description="Returns text in KOF file 05 format (Northing, Easting, Elevation). ThemeCode is an optional Norwegian SOSI code. SearchArea is the name of an optional RcArea.">
  <Signature>String NOBN_com_getKof05Records([int ThemeCode[,string SearchArea]])</Signature>
  <Formula>
			function NOBN_com_getKof05Records(ThemeCode, SearchArea)
				local d, df, n, r, t, s, areas 
				if ThemeCode == nil then -- No arguments given, return instructions for use:
					return "Returns text in the Norwegian KOF file 05 format (Northing, Easting, Elevation), for objects with RcType given by\n"
						.."the first object that this KOF watch is related to, using the '"..rel_Watch_AppliesTo_Anything.."' watch relation. Specify the\n"
						.."desired theme code as the first argument to this function. The theme code denotes the 4-digit SOSI survey object\n"
						.."type, to be printed along with the KOF records. If an optional search area name has been given, then the object\n"
						.."search will be restricted to that area. Note: Only visible objects are considered.",_warning
				end
				if SearchArea == nil then 
					SearchArea = "" -- Don't care
				end
				if SearchArea == "" then 
					d = DocumentData.ObjectCollection
				else
					areas = DocumentData.ObjectCollection:filter(function (x) return x.RcType:lower():match("område") and x:isVisible() end)
					areas = areas:filter(function (x) return x.code == SearchArea end)
					if getCollectionLength(areas) == 0 then 
						return "No search area was found with code '"..SearchArea.."'.",_warning
					else
						d = DocumentData.ObjectCollection:filter(function (x) return x.RcArea.code == areas[0].code end)
					end
				end
				r, n = getRelatedObjects(rel_Watch_AppliesTo_Anything)
				if n == 0 then
					return "Please relate KOF watch object to any object of the desired RcType, using the '"..rel_Watch_AppliesTo_Anything.."' relation.",_warning
				end
				t = r[0].RcType
				df = d:filter(function (x) return (x.RcType == t) end)
				n = getCollectionLength(df)
				if n == 0 then 
					if SearchArea ~= "" then
						return "No objects found in area '"..SearchArea.."' of type '"..t.."'.",_warning
					else
						return "No objects found of type '"..t.."'.",_warning
					end
				else
					--Make formatted string in KOF (Norway) format: "05 = KOORDINATBLOKK"
					--
					--Type            Point name     Pos    Beskrivelse
					-- -------------- -------------- ------ -----------
					--Linjestatus     ” ” eller ”-”  1      Angir om dataene i linja skal leses (” ”) eller ignoreres (”-”).
					--Datablokk type  05             2..3   Datablokk type, der 05 = koordinatblokk. Må ikke endres
					--Punktnavn       PPPPPPPPPP     5..14  Navn på målepunkt. Punktnavnet kan bestå av både tall og
					--                                      bokstaver og påvirker ikke sorteringsrekkefølgen i netLIN 3.
					--Temakode        KKKKKKKK       16..23 Temakode/SOSI-kode. Kan endres, se tabeller nedenfor.
					--                                      Viktig: For horisontale retningsendringer langs traseen
					--                                      (horisontalvinkler) i må ”HV” legges inn som temakode.
					--X-koordinat     XXXXXXXX.XXX   25..36 North-koordinat.
					--Y-koordinat     YYYYYYY.YYY    38..48 East-koordinat.
					--Høyde           ZZZZ.ZZZ       50..57 Ortometrisk høyde.
					--Beregningskode  Bk             59     Brukes ikke av RailCOMPLETE
					--Kommentar                      61..79 Brukes ikke av RailCOMPLETE
					-- Alfanumeriske felt VENSTRE-justeres, numeriske felt HØYREjusteres. Rader har maks 80 tegn.
					--
					s = "-KOF file for "..n.." objects found with RcType matching '"..t.."'\n"
					s = s.."-Type Obj.name Theme NNNNNNNN.NNN EEEEEEE.EEE HHHH.HHH (Northing, Easting, Elevation)\n"
					for i = 1, n do 
						local c = df[i-1].geoCoord
						s = s..string.format(" 05 %10d %8d %12.3f %11.3f %8.3f\n",i,ThemeCode,c.Y,c.X,c.Z)
					end
					return s
				end
			end
       </Formula>
 </LuaFunction>
 <ObjectType DataType="RailCOMPLETEWatch" Class="RailwayPlacedObject" LuaName="rctype_CoordinateList" Name="JBTFE_DIV KOF-format koordinatliste" Layer="JBTFE_WATCH" Color="ByLayer" Group="Felles/Watch" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>watch</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTFE@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTFE@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTFE@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="KofSearchArea" DisplayName="KOF_område" DefaultValue="" Description="The 'KofSearchArea' custom attribute is void or should be assigned a valid name for an existing RcArea object. If non-empty, then only objects within this area are considered."/>
  <CustomProperty DataType="UInt16" Name="KofThemeCode" DisplayName="KOF_sosikode" DefaultValue="7871" Description="The 'KofThemeCode' custom attribute [UInt16] should hold a 3- or 4-digit SOSI cartographic object nomenclature code according to Norwegian standard."/>
  <Variants DefaultValue="KOF Koordinatliste">
   <Variant Name="KOF Koordinatliste">
    <SetValue Key="name" Value=""/>
    <SetValue Key="Text" Value="KOF Koordinatliste"/>
   </Variant>
  </Variants>
  <InsertPointObject Name="KOF Koordinatliste" DisplayBlockName="NO-BN-2D-JBTRC_WATCH-INNSETTING-SYMBOL-Schematic">
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="SymbolFrame" Value="Watch"/>
  </InsertPointObject>
  <LuaExpression Name="Text">
   <Formula>NOBN_com_getKof05Records(KofThemeCode,KofSearchArea)</Formula>
  </LuaExpression>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_WCH-WATCH-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <BlockNameFormat JoinBy="-">NO-BN-2D-JBTFE_WCH-WATCH-{{SymbolMode}}</BlockNameFormat>
   <SymbolAttribute Tag="W">
    <Value>{{Text}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tMarker" Class="RailwayPlacedObject" LuaName="rctype_Marker" Name="JBTFE_MRK Markør" Layer="JBTFE_MARKØRER" Color="ByLayer" Group="Felles/Markører" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>markør</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTFE@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTFE@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTFE@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>NOBN_trk_getLateralOffsetFromCantAndTrackPlaneDistance(RightSided and 1e-3 or -1e-3)</Formula>
  </LuaExpression>
  <Variants DefaultValue="Knappenål">
   <Variant Name="Knappenål"/>
   <Variant Name="Ref.spor posisjon / avstand"/>
   <Variant Name="Høyde over havet / fall"/>
   <Variant Name="Posisjonsmarkering i sporet"></Variant>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="MarkerColor" DisplayName="Farge" DefaultValue="RØD" Description="The 'MarkerColor' custom enum property [Rød (RED) | Gul (YELLOW) | Grønn (GREEN) | Blå (BLUE) ] holds the marker's color.">
   <Values>
    <Value DisplayName="Rød">RØD</Value>
    <Value DisplayName="Gul">GUL</Value>
    <Value DisplayName="Grønn">GRØNN</Value>
    <Value DisplayName="Blå">BLÅ</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTFE_MRK_marker_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTFE_MRK_marker_Geometry3DName()" ReturnType="String" Description="Obtains the marker's 3D model name.">
   <Signature>String _JBTFE_MRK_marker_Geometry3DName()</Signature>
   <Formula>
				function _JBTFE_MRK_marker_Geometry3DName()
					if (Variant == "Knappenål") then
						return "NO-BN-3D-FE-DIV-MARKØR-KNAPPENÅL-"..MarkerColor:upper()
					elseif (Variant == "Ref.spor posisjon / avstand") then
						return "NO-BN-3D-FE-DIV-MARKØR-KNAPPENÅL-"..MarkerColor:upper()
					elseif (Variant == "Posisjonsmarkering i sporet") then
						return "NO-BN-3D-FE-DIV-POSISJONSMARKERING" 
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>_JBTFE_MRK_marker_name()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTFE_MRK_marker_name()" ReturnType="String" Description="Returns the name of the related object or position/distance or elevation/slope, depending on the variant and the number of related objects.">
   <Signature>String _JBTFE_MRK_marker_name([RailwayPlacedObject obj])</Signature>
   <Formula>
				function _JBTFE_MRK_marker_name(obj)
					obj = obj or this
					local s = rel_Marker_AppliesTo_Anything
					local r,n = getRelatedObjects(s,obj)
					local st = s
				
					if obj.Variant == "Ref.spor posisjon / avstand" then
						if n == 0 then
							return RC__identify(Alignment)..".("..obj.RcType..") : Km."..NOBN_trk_toKm(obj.ReferenceMileage)

						elseif n == 1 then
							if r[0].ReferenceMileage == nil then 
								return "ERROR - Cannot deduce reference mileage for target object "..
									"("..r[0].RcType.."):"..RC__identify(r[0])
							else
								return RC__identify(r[0].Alignment)..".("..r[0].RcType..") : Km."..NOBN_trk_toKm(r[0].ReferenceMileage)
							end

						else --n is 2 or more
							if r[0].ReferenceMileage == nil then 
								return "ERROR - Cannot deduce reference mileage for first target object "..
									"("..r[0].RcType.."):"..RC__identify(r[0])
							elseif r[1].ReferenceMileage == nil then 
								return "ERROR - Cannot deduce reference mileage for second target object "..
									"("..r[1].RcType.."):"..RC__identify(r[1])
							end
							if RC__isNan(getDistance(r[0],r[1])) then 
								return "ERROR - No path found between objects: "..
									RC__identify(r[0].Alignment)..".("..r[0].RcType.."):"..RC__identify(r[0])..
									" und "..
									RC__identify(r[1].Alignment)..".("..r[1].RcType.."):"..RC__identify(r[1]).."." 
							else
								if r[0].ReferenceMileage &lt; r[1].ReferenceMileage then
									return string.format("Distance from %s to %s = %.03f m",RC__identify(r[0]), RC__identify(r[1]), getDistance(r[0],r[1]))
								else
									return string.format("Distance from %s to %s = %.03f m",RC__identify(r[1]), RC__identify(r[0]), getDistance(r[0],r[1]))
								end
							end
						end
						
					elseif obj.Variant == "Høyde over havet / fall" then
						if n == 0 then
							--return string.format("%s.(%s) : Elevation above mean sea level = %.03f", RC__identify(obj.Alignment), obj.RcType, obj.geoCoord.Z)
				
						elseif n == 1 then
							local z0 = r[0].geoCoord.Z
							if z0 == nil then 
								return "ERROR - Cannot deduce elevation for first target object "..
									"("..r[0].RcType.."):"..RC__identify(r[0])
							else
								return string.format("%s.(%s) : Elevation = %.03f", RC__identify(r[0].Alignment), r[0].RcType, z0)
							end
				
						else --n is 2 or more
							local z0 = r[0].geoCoord.Z
							local z1 = r[1].geoCoord.Z
							if z0 == nil then 
								return "ERROR - Cannot deduce elevation for first target object "..
									"("..r[0].RcType.."):"..RC__identify(r[0])
							elseif z1 == nil then 
								return "ERROR - Cannot deduce elevation for second target object "..
									"("..r[1].RcType.."):"..RC__identify(r[1])
							end
							local d = getDistance(r[0],r[1])
							local dZ = z0 - z1 --from first clicked to last clicked
							if RC__isNan(d) then 
								return "ERROR - No path found between objects: "..
									RC__identify(r[0].Alignment)..".("..r[0].RcType.."):"..RC__identify(r[0])..
									" and "..
									RC__identify(r[1].Alignment)..".("..r[1].RcType.."):"..RC__identify(r[1]).."." 
							else
								return string.format("Slope (%s =&gt; %s) : (%.03f - %0.3f = %.03f) / (%.03f) = %.02f o/oo", 
									RC__identify(r[0]), RC__identify(r[1]), z0, z1, dZ, d, 1000*(dZ/d))
							end
						end
				
					else
						--All other variants - show the related item's identities:
						if n == 0 then 
							return "UNFINISHED - Relate with '"..st.."'."
						else
							local function CodeOrId(x) return x.code ~= "" and x.code or x.id end
							local t = "("..CodeOrId(r[0])
							for i = 1, n-1 do
								t = t..", "..CodeOrId(r[i])
							end
							return t..")"
						end
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Knappenål" DisplayBlockName="NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3" SnapSensitivityDistance="3">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Ref.spor posisjon / avstand" DisplayBlockName="NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3" SnapSensitivityDistance="3">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Høyde over havet / fall" DisplayBlockName="NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3" SnapSensitivityDistance="3">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Posisjonsmarkering i sporet" DisplayBlockName="NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3" SnapSensitivityDistance="3">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="true"/>
   <BlockNameFormat JoinBy="-">NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}</BlockNameFormat>
   <SymbolAttribute Tag="FARGE">
    <Value>{{MarkerColor}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tCrossSection" Class="RailwayPlacedObject" LuaName="rctype_RailmlCrossSection" Name="JBTFE_RCS Cross section" Layer="JBTFE_RCS" Color="ByLayer" Group="Felles/railML Cross Section" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>cross_section</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTFE@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTFE@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTFE@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTFE_DIV_RailmlCrossSection_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTFE_DIV_RailmlCrossSection_Geometry3DName()" ReturnType="String" Description="Returns the railMl cross section's 3D geometry name.">
   <Signature>String _JBTFE_DIV_RailmlCrossSection_Geometry3DName()</Signature>
   <Formula>
				function _JBTFE_DIV_RailmlCrossSection_Geometry3DName()
					return "NO-BN-3D-FE-DIV-MARKØR-KNAPPENÅL-RØD"
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Cross section" DisplayBlockName="NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="true"/>
   <BlockNameFormat JoinBy="-">NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <LuaFunction Name="NOBN_trk_getTrackUsage()" ReturnType="String" Description="Obtains the intended usage for the track which is the Own Alignment to the calling object.">
  <Signature>String NOBN_trk_getTrackUsage([ObjectRef obj])</Signature>
  <Formula>
			function NOBN_trk_getTrackUsage(obj)
				obj = obj or this
				if obj.Alignment.RcType ~= rctype_Track then
					return _error, "*** NOBN_trk_getTrackUsage : The object's own alignment type must be '"..rctype_Track.."'."
				else
					return obj.Alignment.Variant
				end
			end
		</Formula>
 </LuaFunction>
 <ObjectType DataType="RailCOMPLETESection" Class="RailwayPlacedObject" LuaName="rctype_TrackUsage" Name="JBTFE_DIV Sporbruk" Layer="JBTFE_SPORBRUK" Color="ByLayer" Group="Felles/Sporbruk" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>sporbruk</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTFE@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTFE@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTFE@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Hovedspor">
   <Variant Name="Hovedspor"/>
   <Variant Name="Togspor"/>
   <Variant Name="Hensettingsspor"/>
   <Variant Name="Skiftespor"/>
   <Variant Name="Sidespor"/>
   <Variant Name="Buttspor"/>
   <Variant Name="Uttrekksspor"/>
   <Variant Name="Usikret område"/>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTFE_DIV_sporbruk_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTFE_DIV_sporbruk_code()" ReturnType="String" Description="Obtains the code for the track usage (Sporbruk) object [String].">
   <Signature>String _JBTFE_DIV_sporbruk_code()</Signature>
   <Formula>
				function _JBTFE_DIV_sporbruk_code()
					if Variant == "Hovedspor" then return "Hv"
					elseif Variant == "Togspor" then return "Tg"
					elseif Variant == "Hensettingsspor" then return "He"
					elseif Variant == "Skiftespor" then return "Sk"
					elseif Variant == "Sidespor" then return "Si"
					elseif Variant == "Buttspor" then return "Bu"
					elseif Variant == "Uttrekksspor" then return "Ut"
					elseif Variant == "Usikret område" then return "Us"
					else return "Unrecognized variant ["..Variant.."].",_error
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Hovedspor" DisplayName="Sporbruk" DisplayBlockName="NO-BN-2D-JBTRC_SEKSJON-INNSETTING-SYMBOL-Schematic">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="SymbolFrame" Value="Symbolramme-R2.75"/>
   <LuaExpression Name="DelimiterType">
    <Formula>rctype_TrackUsageDelimiter</Formula>
   </LuaExpression>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_SEK-SEKSJON-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <SymbolAttribute Tag="X">
    <Value>{{Variant}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tDelimitedOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_TrackUsageDelimiter" Name="JBTFE_DIV Sporbrukgrense" Layer="JBTFE_SPORBRUKGRENSE" Color="ByLayer" Group="Felles/Sporbruk" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>sporbrukgrense</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTFE@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTFE@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTFE@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>_JBTFE_DIV_sporbrukgrense_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTFE_DIV_sporbrukgrense_code()" ReturnType="String" Description="Obtains the name of a track usage delimiter element, inherited from the two surrounding track usage section elements.">
   <Signature>String _JBTFE_DIV_sporbrukgrense_code()</Signature>
   <Formula>
				function _JBTFE_DIV_sporbrukgrense_code()
					local first = DownSections.Count == 0  and "-" or DownSections[0].code
					local second = UpSections.Count == 0  and "-" or UpSections[0].code
					if MileageIncreasesTowardsLeft then	first,second = second,first end
					return "(" .. first .. "/" .. second .. ")"
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>_JBTFE_DIV_sporbrukgrense_objectInfo()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTFE_DIV_sporbrukgrense_objectInfo()" ReturnType="String" Description="Obtains the 'BaneNORBeskrivelse' (formerly known as 'ObjectInfo') text for the track usage delimiter element.">
   <Signature>String _JBTFE_DIV_sporbrukgrense_objectInfo()</Signature>
   <Formula>
				function _JBTFE_DIV_sporbrukgrense_objectInfo()
					local first = DownSections.Count == 0  and "-" or DownSections[0].Variant
					local second = UpSections.Count == 0  and "-" or UpSections[0].Variant
					if MileageIncreasesTowardsLeft then	first,second = second,first end
					return "Sporbruk: " .. first .. "/" .. second
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Sporbrukgrense" DisplayBlockName="NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}" SnapToAlignment="true" SnapDistance="1e-3">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <BlockNameFormat JoinBy="-">NO-BN-2D-JBTFE_MRK-MARKOER-{{SymbolMode}}</BlockNameFormat>
   <SymbolAttribute Tag="FARGE">
    <Value>{{code}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETECloneObject" Class="CloneRailwayObject" LuaName="rctype_CloneObject" Name="CloneObject" DisplayName="Clone object"></ObjectType>
 <LuaFunction Name="NOBN_sub_getFoundationCode()" ReturnType="String" Description="Returns the code for a foundation / bolt group / deduced from its associated object (based on RcType and close proximity).">
  <Signature>String NOBN_sub_getFoundationCode([ObjRef obj])</Signature>
  <Formula>
			function NOBN_sub_getFoundationCode(obj)
				local tol = 0.50 --[m] Look for a matching object close to 'obj'
				local function fn(obj,objectTypes,errMsg)
						--Check for matching objects in prioritized order.
					local ot,n,o
					ot = getCollectionFromTable(objectTypes)
					n = ot.Count
					for i=0,n-1 do
						o = getNearbyPointObjects2D(tol,ot[i],obj)
						if getCollectionLength(o) &gt; 0 then return o[0].code end
					end
					return errMsg 
				end
			
				if obj == nil then obj = this end
				if RcType:match("JBTEH_FUN KL%-fundament") then 
					return fn(obj,{	rctype_OcsPole,
									rctype_OcsDropArmUnderPortal,
									rctype_OcsDropArmForBridgeOrTunnel,
									rctype_GuywireFootplate,
									rctype_SpannerFootplate,
									rctype_TunnelWallFixing
								},
								"UNFINISHED - no visible OCS pole or guywire / spanner fastener found at foundation.")
				elseif RcType:match(rctype_SignalFoundation) then 
					return fn(obj,{rctype_Signal},"UNFINISHED - no visible signal found at foundation.")
				elseif RcType:match(rctype_CabinetFoundation) then 
					return fn(obj,{rctype_SignallingCabinet},"UNFINISHED - no visible signal cabinet found at foundation.")
				elseif RcType:match(rctype_TelecomFoundation) then 
					return fn(obj,{"TODO: Define telecom objects here :ODOT"},"UNFINISHED - no visible matching telecom object found at foundation.")
				end
			end
		</Formula>
 </LuaFunction>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_CableTrough" Name="JBTKU_KFK Kabelkanal" Layer="JBTKU_KFK" Color="ByLayer" Group="Underbygning/Føringsveier/Kabelkanal">
  <RelationSpace>kabelføring</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Underbygning"/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D">
   <SetValue Key="Parent" Value="GCS"/>
   <SetValue Key="RotationBeforeOffset" Value="True"/>
  </DynamicProperty>
  <DynamicProperty Type="Representation3D" Subtype="IteratedGeometry3D">
   <SetValue Key="Parent" Value="GCS"/>
   <SetValue Key="Frozen" Value="=not SweptGeometry3D_0.Frozen"/>
   <SetValue Key="RotationBeforeOffset" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="IteratedGeometry3D_1.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>code.." ("..Variant..")"</Formula>
  </LuaExpression>
  <AlignmentSystems DefaultSystemName="Kabelføring, løftet med overhøyde">
   <AlignmentSystem Name="Kabelføring, løftet med overhøyde" CantGauge="1.500" AlignmentGauge="0.000" LiftWithCant="true"/>
  </AlignmentSystems>
  <Variants DefaultValue="Kabelkanal, betong, 1-løps, 30 cm">
   <Variant Name="Kabelkanal, betong, 1-løps, 30 cm"/>
   <Variant Name="Kabelkanal, betong, 1-løps, 40 cm"/>
   <Variant Name="Kabelkanal, betong, 2-løps, 60 cm"/>
   <Variant Name="Kabelkanal, betong, 3-løps, 60 cm"/>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="AddElevationIfCant" DisplayName="Heving hvis overhøhyde" DefaultValue="NONE" Description="The 'Heving hvis overhøyde' (AddElevationIfCant) property controls how the cable duct shall behave if its alignment contains cant data. The cant data will normally be inherited from the closest track. If the duct is placed on the right side of this track, then select 'Venstrekurve' (CCW): the right rail's superelevation will be added to the cable duct's elevation (Z coordinate). If the duct is placed on the left side of this track, then select 'Høyrekurve' (CW): the left rail's superelevation will be added to the cable duct's elevation. If you need to elevate the duct to a specific height independent of left/right curvature, e.g. to attach it to a tunnel wall or to a bridge's fence, then select 'Alltid' (ALWAYS). To ignore possible cant data, select 'NONE'.">
   <Values>
    <Value Description="Cable duct's cant data will be ignored, duct is placed according to vertical profile data only." DisplayName="Ingen">NONE</Value>
    <Value Description="Cable duct's elevation is augmented by its cant profile value when in a CCW (left) curve." DisplayName="Venstrekurve">CCW</Value>
    <Value Description="Cable duct's elevation is augmented by its cant profile value when in a CW (right) curve." DisplayName="Høyrekurve">CW</Value>
    <Value Description="Cable duct's elevation is augmented by its cant profile everywhere" DisplayName="Alltid">ALWAYS</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Linetype">
   <Formula>_JBTKU_KFK_Linetype()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFK_Linetype()" ReturnType="String" HideFromUser="false" Description="Returns the CAD system 2D presentation line type for the cable duct, based on its Variant.">
   <Signature>String _JBTKU_KFK_Linetype()</Signature>
   <Formula>
				function _JBTKU_KFK_Linetype()
					if Variant:lower():match("1%-løps") then return "RC-DASHED-01"
					elseif Variant:lower():match("2%-løps") then return "RC-DASHED-02"
					elseif Variant:lower():match("3%-løps") then return "RC-DASHED-03"
					else return "Continuous", _info("Variant ["..Variant.."] has not been anticipated yet.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="GlobalWidth">
   <Formula>_JBTKU_KFK_GlobalWidth()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFK_GlobalWidth()" ReturnType="Double" HideFromUser="false" Description="Returns the global width of the cable duct's 2D representation as a wide polyline.">
   <Signature>Double _JBTKU_KFK_GlobalWidth()</Signature>
   <Formula>
				function _JBTKU_KFK_GlobalWidth()
					if Variant:lower():match("1%-løps, 30 cm") then return 0.30
					elseif Variant:lower():match("1%-løps, 40 cm") then return 0.40
					elseif Variant:lower():match("2%-løps, 60 cm") then return 0.62
					elseif Variant:lower():match("3%-løps, 60 cm") then return 0.62
					else return 0, _info("Variant ["..Variant.."] has not been anticipated yet.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="SweptGeometry3D_0.Name">
   <Formula>_JBTKU_KFK_Geometry3DName(true,true)</Formula>
  </LuaExpression>
  <LuaExpression Name="SweptGeometry3D_0.Offset.Z">
   <Formula>_JBTKU_KFK_Geometry3DOffsetZ(_position)</Formula>
  </LuaExpression>
  <LuaExpression Name="IteratedGeometry3D_1.Name">
   <Formula>_JBTKU_KFK_Geometry3DName(true,false)</Formula>
  </LuaExpression>
  <LuaExpression Name="IteratedGeometry3D_1.Offset.X">
   <Formula>_JBTKU_KFK_Geometry3DOffsetX(_position)</Formula>
  </LuaExpression>
  <LuaExpression Name="IteratedGeometry3D_1.Offset.Z">
   <Formula>_JBTKU_KFK_Geometry3DOffsetZ(_position)</Formula>
  </LuaExpression>
  <LuaExpression Name="IteratedGeometry3D_1.Separation">
   <Formula>_JBTKU_KFK_IteratedGeometry3DSeparation(_position)</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFK_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the cable duct's default 3D geometry name, covered or uncovered. Set second argument to 'true' if a sweep profile is needed.">
   <Signature>String _JBTKU_KFK_Geometry3DName([boolean Covered,)</Signature>
   <Formula>
				function _JBTKU_KFK_Geometry3DName(Covered,Swept)

					if Covered == nil or Covered == false then Covered = false
					elseif Covered == true then --do nothing
					else return "Argument 'Covered' must be nil, true or false.",_error
					end

					if Swept == nil or Swept == false then Swept = false
					elseif Swept == true then --do nothing
					else return "Argument 'Swept' must be nil, true or false.",_error
					end

					local t = "NO-BN-"..(Swept and "2D" or "3D").."-KU-KFØ-KABELKANAL-"
					if     Variant == "Kabelkanal, betong, 1-løps, 30 cm" then return t.."300x1000-1-LØPS"..(Covered and "-MED-50-50-LOKK" or "")
					elseif Variant == "Kabelkanal, betong, 1-løps, 40 cm" then return t.."400x1000-1-LØPS"..(Covered and "-MED-50-50-LOKK" or "")
					elseif Variant == "Kabelkanal, betong, 2-løps, 60 cm" then return t.."620x2400-2-LØPS"..(Covered and "-MED-70-70-LOKK" or "")
					elseif Variant == "Kabelkanal, betong, 3-løps, 60 cm" then return t.."620x2400-3-LØPS"..(Covered and "-MED-70-70-LOKK" or "")
					else 
						return "", _info("Variant ["..Variant.."] has not been anticipated yet.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaFunction Name="_JBTKU_KFK_getStartEndAndJump()" ReturnType="AlignmentInfo,AlignmentInfo,Double" HideFromUser="false" Description="Sampled formula. Returns 'AlignmentInfo' data structures for one duct element's start and end, plus the jump length from start to end along the duct's alignment. Must be called with '_position' as input argument (_position.Ref = alignment GUID, _position.Pos = distAlong).">
   <Signature>alignmentInfo,alignmentInfo,Double _JBTKU_KFK_getStartEndAndJump(_position)</Signature>
   <Formula>
				function _JBTKU_KFK_getStartEndAndJump(_position)
					--Interpret 'Cant' stored in duct's alignment as extra offset (usually the lift of the closest rail) [mm]:
					local id,pos,len2d,offset,s,e,a,b
					id = _position.Ref.id
					pos = _position.Pos
					len2d = getObjectFromId(id).RcAlignment.HorizontalGeometry.Length
					offset = 0.499 * _JBTKU_KFK_IteratedGeometry3DSeparation(_position) --pick samples at +/- offset from object's insertion point (but avoid 0.5000 sharp).
					if pos &lt; offset then
						a = 0
						b = pos + offset
					elseif pos &gt; len2d - offset then 
						a = pos - offset
						b = len2d
					else 
						a = pos - offset
						b = pos + offset
					end
					s = getAlignmentInfo(getAlignmentPos(id,a))
					e = getAlignmentInfo(getAlignmentPos(id,b))
					return s,e,b-a
				end
			</Formula>
  </LuaFunction>
  <LuaFunction Name="_JBTKU_KFK_Geometry3DOffsetX()" ReturnType="Double" HideFromUser="false" Description="Sampled formula. Returns sideways offset for cable duct element (midway between end points on alignment). Must be called with '_position' as input argument (_position.ref = alignment GUID, _position.pos = distAlong).">
   <Signature>Double _JBTKU_KFK_Geometry3DOffsetX(_position)</Signature>
   <Formula>
				function _JBTKU_KFK_Geometry3DOffsetX(_position)
					local s,e = _JBTKU_KFK_getStartEndAndJump(_position)
					local ai = getAlignmentInfo(_position.ref.id,(s.Point.X + e.Point.X)/2,(s.Point.Y + e.Point.Y)/2)
					return ai.DistanceToAlignment
				end	
			</Formula>
  </LuaFunction>
  <LuaFunction Name="_JBTKU_KFK_Geometry3DOffsetZ()" ReturnType="Double" HideFromUser="false" Description="Sampled formula. Returns an extra elevation for the cable duct element in none/CCW/CW/always curve situations according to the current setting of the 'AddElevationIfCant' property. Copy cant data from closest track's cant using the RC-AssistOffsetProfile command, or RC-AlignmentManager/Alignment/Cant. This function must be called with '_position' as input argument (_position.Ref = alignment GUID, _position.Pos = distAlong).">
   <Signature>Double _JBTKU_KFK_Geometry3DOffsetZ(_position)</Signature>
   <Formula>
				function _JBTKU_KFK_Geometry3DOffsetZ(where)
					local _Geometry3DOffsetZstartAi,endAi,jumpDist = _JBTKU_KFK_getStartEndAndJump(where)
					local mid = getAlignmentInfo(where)
					local startElevation = startAi.Elevation
					local endElevation = endAi.Elevation
					local startCant = RC__isNan(startAi.Cant) and 0 or startAi.Cant
					local endCant = RC__isNan(endAi.Cant) and 0 or endAi.Cant
					if AddElevationIfCant == "ALWAYS" then
						return (startElevation + endElevation)/2 + (startCant/1000 + endCant/1000)/2 - mid.Point.Z
					elseif AddElevationIfCant == mid.CantRotation then
						return (startElevation + endElevation)/2 + (startCant/1000 + endCant/1000)/2 - mid.Point.Z
					else 
						--If 'AddElevationIfCant' is "NONE" or "CW" or "CCW" but we are not currently in a curve:
						return (startElevation + endElevation)/2 - mid.Point.Z
					end
				end
			</Formula>
  </LuaFunction>
  <LuaFunction Name="_JBTKU_KFK_Rotation3DX()" ReturnType="Double" HideFromUser="false" Description="Sampled formula. Returns pitch (gradient) for the cable duct element. Copy the duct's vertical profile (gradient) data from the relevant tracks' vertical profile using the RC-AssistOffsetProfile command. This function must be called with '_position' as input argument (_position.Ref = alignment GUID, _position.Pos = distAlong).">
   <Signature>Double _JBTKU_KFK_Rotation3DX(_position)</Signature>
   <Formula>
				function _JBTKU_KFK_Rotation3DX(where)
					local startAi,endAi,jumpDist = _JBTKU_KFK_getStartEndAndJump(where)
					local startElevation = startAi.Elevation
					local endElevation = endAi.Elevation
					local midCantRotation = getAlignmentInfo(where).CantRotation
					local startCant = RC__isNan(startAi.Cant) and 0 or startAi.Cant
					local endCant = RC__isNan(endAi.Cant) and 0 or endAi.Cant
					local deltaZ
					if AddElevationIfCant == "ALWAYS" or AddElevationIfCant == midCantRotation then
						deltaZ = (endElevation + endCant/1000) - (startElevation + startCant/1000)
					else
						--If 'AddElevationIfCant' is "NONE" or "CW" or "CCW" but we are not currently in a curve:
						deltaZ = endElevation - startElevation
					end
					return math.deg(math.atan(deltaZ,jumpDist))
				end
			</Formula>
  </LuaFunction>
  <LuaFunction Name="_JBTKU_KFK_IteratedGeometry3DSeparation()" ReturnType="Double" HideFromUser="false" Description="Returns the default separation between consecutive concrete cable duct elements. 5 mm margin is added in tangent segments. In sharp curves, the elements have to be cut at an angle, so the separation decreases with decreasing curvature. This function must be called with '_position' as input argument (_position.Ref = alignment GUID, _position.Pos = distAlong).">
   <Signature>Double _JBTKU_KFK_IteratedGeometry3DSeparation(_position)</Signature>
   <Formula>
				function _JBTKU_KFK_IteratedGeometry3DSeparation(where)
					-- TODO: A more elaborate function would rely on the actual size for each inserted 3D Model, which may vary as a sampled function along the alignment.
					-- This simple formula assumes that the 3D geometry is constant along the alignment, decided by the Variant (which applies to the whole alignment's length)
					local f, b
					if Variant == "Kabelkanal, betong, 1-løps, 30 cm" then 
						f = 2400/1000
						b = 0.3
					elseif Variant == "Kabelkanal, betong, 1-løps, 40 cm" then 
						f = 2400/1000
						b = 0.4
					elseif Variant == "Kabelkanal, betong, 2-løps, 60 cm" then 
						f = 1
						b = 0.6
					elseif Variant == "Kabelkanal, betong, 3-løps, 60 cm" then 
						f = 1
						b = 0.6
					else 
						return 3.1416, _info("Variant ["..Variant.."] has not been anticipated yet - so we assume 3.1416m 3D geometry separation...")
					end
					local r = getAlignmentInfo(where).CurveRadius
					-- Empirical formula, to allow a small separation between concrete elements in the "outer curve", but assuming that it will be cut in the "inner curve".
					if r == nil or r &gt; 100 then 
						return 2.4 / f + .005
					elseif r &lt; (0.8 / b) then 
						return (2.4 - b) / f
					else 
						return (2.4 - 0.8/r) / f + .005
					end
				end
			</Formula>
  </LuaFunction>
  <PropertyPrompt Key="code" DefaultValue="Kabelkanal" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Kabelkanal, betong, 1-løps, 30 cm" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-KABELKANAL-1-LOEPS-300-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Kabelkanal, betong, 1-løps, 40 cm" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-KABELKANAL-1-LOEPS-400-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Kabelkanal, betong, 2-løps, 60 cm" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-KABELKANAL-2-LOEPS-620-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Kabelkanal, betong, 3-løps, 60 cm" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-KABELKANAL-3-LOEPS-620-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_UnderTrackCrossingConcrete" Name="JBTKU_KFR  " Layer="JBTKU_KFR" Color="ByLayer" Group="Underbygning/Føringsveier/Omstøpte trekkerør">
  <RelationSpace>rørpakke</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTKU@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTKU@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTKU@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Underbygning"/>
  <AlignmentSystems DefaultSystemName="Kabelføring">
   <AlignmentSystem Name="Kabelføring" CantGauge="0.000" AlignmentGauge="0.000" LiftWithCant="false"/>
  </AlignmentSystems>
  <Variants DefaultValue="Rørpakke, omstøpt, 1x4xØ110">
   <Variant Name="Rørpakke, omstøpt, 1x1xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 2x1xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 3x1xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 4x1xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 5x1xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 6x1xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 7x1xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 1x2xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 2x2xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 3x2xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 4x2xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 5x2xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 6x2xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 7x2xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 1x3xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 2x3xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 3x3xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 4x3xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 5x3xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 6x3xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 7x3xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 3x(3xØ110-Ø160),(3xØ110)"/>
   <Variant Name="Rørpakke, omstøpt, 1x4xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 2x4xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 3x4xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 4x4xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 5x4xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 6x4xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 7x4xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 1x5xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 2x5xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 3x5xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 4x5xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 5x5xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 6x5xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 7x5xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 1x6xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 2x6xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 3x6xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 4x6xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 5x6xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 6x6xØ110"/>
   <Variant Name="Rørpakke, omstøpt, 7x6xØ110"/>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D">
   <SetValue Key="Frozen" Value="false"/>
   <SetValue Key="CustomTransformation" Value="True"/>
  </DynamicProperty>
  <CustomProperty DataType="Boolean" Name="UnderTrackCrossing" DisplayName="Krysser under spor" DefaultValue="true" Description="If true, then the pipes are meant to cross under one or more tracks, connecting two cable pits (manholes).
				\nIf false, the pipes are meant to connect cable pits without crossing under any track."/>
  <CustomProperty DataType="Double" Name="StartPointVerticalOffset" DisplayName="Vertical offset at start" DefaultValue="-0.900" Description="The vertical offset at the start of the concrete encased tubes [m], relative to its manhole (or the nearest track, if no manhole was found)."/>
  <CustomProperty DataType="Double" Name="EndPointVerticalOffset" DisplayName="Vertical offset at start" DefaultValue="-0.900" Description="The vertical offset at the end of the concrete encased tubes [m], relative to its manhole (or the nearest track, if no manhole was found)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Slope" DisplayName="Slope [o/oo] from start to end" Description="
			Below -4 o/oo : OK - Slope magnitude is larger than the recommended value.\n
			-4 to -3 o/oo : WARNING - Slope magnitude is close to the limit, increase slope magnitude.\n
			-3 to +3 o/oo : ERROR - Slope magnitude is not sufficient, increase slope magnitude.\n
			+3 to +4 o/oo : WARNING - Slope magnitude is close to the limit, increase slope magnitude.\n
			Above +4 o/oo : OK - Slope magnitude is larger than the recommended value.\n"/>
  <LuaExpression Name="mc_Slope" IsModelCheck="true">
   <Formula>_JBTKU_KFR_chkSlope()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFR_chkSlope()" ReturnType="String" Description="Checks the slope from start to end of the concrete-encased tubes. Error if its magnitude is less than 3 o/oo, warning at 4 o/oo.">
   <Signature>String _JBTKU_KFR_chkSlope()</Signature>
   <Formula>
				function _JBTKU_KFR_chkSlope()
					local errorBelowSlope = 3 --[o/oo]
					local warnBelowSlope = 4 --[o/oo]
					local p1 = RcAlignment.StartPoint
					local p2 = RcAlignment.EndPoint
					local t1 = getNearbyAlignments(getPoint3D(p1.X,p1.Y))[0]
					local t2 = getNearbyAlignments(getPoint3D(p2.X,p2.Y))[0]
					local m1 = getNearbyPointObjects2D(p1, 2.5, rctype_CablePit)
					local m2 = getNearbyPointObjects2D(p2, 2.5, rctype_CablePit)
					local n1 = getCollectionLength(m1)
					local n2 = getCollectionLength(m2) 
					
					local z1, z2, t
				
					if n1 + n2 == 0 then
						--Manhole not found at start nor at end:
						z1 = getAlignmentInfo(t1.id,p1.X,p1.Y).Elevation + StartPointVerticalOffset
						z2 = getAlignmentInfo(t2.id,p2.X,p2.Y).Elevation + EndPointVerticalOffset
						t = "track "..RC__identify(t1).." / track "..RC__identify(t2)
					elseif n2 == 0 then
						--Manhole found at start, none found at end:
						z1 = m1[0].geoCoord.Z + StartPointVerticalOffset
						z2 = getAlignmentInfo(t2.id,p2.X,p2.Y).Elevation + EndPointVerticalOffset
						t = "manhole "..RC__identify(m1).." / track "..RC__identify(t2)
					elseif n1 == 0 then
						--Manhole found at end, none found at start:
						z1 = getAlignmentInfo(t1.id,p1.X,p1.Y).Elevation + StartPointVerticalOffset
						z2 = m2[0].geoCoord.Z + EndPointVerticalOffset
						t = "track "..RC__identify(t1).." / manhole "..RC__identify(m2)
					else
						--Manhole found at start and at end:
						z1 = m1[0].geoCoord.Z + StartPointVerticalOffset
						z2 = m2[0].geoCoord.Z + EndPointVerticalOffset
						t = "manhole "..RC__identify(m1).." / manhole "..RC__identify(m2)
					end
				
					local dZ = z2 - z1
					local dL = RcAlignment.HorizontalGeometry.Length
					local slope = (dZ/dL) * 1000 --[o/oo]

					if math.abs(slope) &lt;= errorBelowSlope then 
						return _error,string.format("%.01f: ERROR - %s slope from elevation %.03f to %.03f is not within tolerance %.01f o/oo. Ref. %s.",
							slope, (slope &gt;= 0.0 and "upwards" or "downwards"), z1,z2,errorBelowSlope,t)
					elseif math.abs(slope) &lt;= warnBelowSlope then 
						return _warning,string.format("%.01f: WARNING - %s slope from elevation %.03f to %.03f is close to but still within tolerance %.01f o/oo. Ref. %s.",
							slope, (slope &gt;= 0.0 and "upwards" or "downwards"), z1,z2,errorBelowSlope,t)
					else
						return _ok,string.format("%.01f: OK - %s slope from elevation %.03f to %.03f is greater than %.01f o/oo. Ref. %s.",
							slope, (slope &gt;= 0.0 and "upwards" or "downwards"), z1,z2,warnBelowSlope,t)
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>code.." ("..Variant..")"</Formula>
  </LuaExpression>
  <LuaExpression Name="Linetype">
   <Formula>_JBTKU_KFR_Linetype()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFR_Linetype()" ReturnType="String" HideFromUser="false" Description="Returns the CAD system 2D presentation line type for the cable tube package, based on its Variant.">
   <Signature>String _JBTKU_KFR_Linetype()</Signature>
   <Formula>
				function _JBTKU_KFR_Linetype()
					return "RC-SOLID"
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="GlobalWidth">
   <Formula>_JBTKU_KFR_GlobalWidth()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFR_GlobalWidth()" ReturnType="Double" HideFromUser="false" Description="Returns the global width of the cable tube package's 2D representation as a wide polyline.">
   <Signature>Double _JBTKU_KFR_GlobalWidth()</Signature>
   <Formula>
				function _JBTKU_KFR_GlobalWidth()
						if Variant == "Rørpakke, omstøpt, 1x1xØ110" and not UnderTrackCrossing then return 0.170
					elseif Variant == "Rørpakke, omstøpt, 2x1xØ110" and not UnderTrackCrossing then return 0.170
					elseif Variant == "Rørpakke, omstøpt, 3x1xØ110" and not UnderTrackCrossing then return 0.170
					elseif Variant == "Rørpakke, omstøpt, 4x1xØ110" and not UnderTrackCrossing then return 0.170
					elseif Variant == "Rørpakke, omstøpt, 5x1xØ110" and not UnderTrackCrossing then return 0.170
					elseif Variant == "Rørpakke, omstøpt, 6x1xØ110" and not UnderTrackCrossing then return 0.170
					elseif Variant == "Rørpakke, omstøpt, 7x1xØ110" and not UnderTrackCrossing then return 0.170
					elseif Variant == "Rørpakke, omstøpt, 1x2xØ110" and not UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 2x2xØ110" and not UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 3x2xØ110" and not UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 4x2xØ110" and not UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 5x2xØ110" and not UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 6x2xØ110" and not UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 7x2xØ110" and not UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 1x3xØ110" and not UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 2x3xØ110" and not UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 3x3xØ110" and not UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 4x3xØ110" and not UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 5x3xØ110" and not UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 6x3xØ110" and not UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 7x3xØ110" and not UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 1x4xØ110" and not UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 2x4xØ110" and not UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 3x4xØ110" and not UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 4x4xØ110" and not UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 5x4xØ110" and not UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 6x4xØ110" and not UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 7x4xØ110" and not UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 1x5xØ110" and not UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 2x5xØ110" and not UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 3x5xØ110" and not UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 4x5xØ110" and not UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 5x5xØ110" and not UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 6x5xØ110" and not UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 7x5xØ110" and not UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 1x6xØ110" and not UnderTrackCrossing then return 0.870
					elseif Variant == "Rørpakke, omstøpt, 2x6xØ110" and not UnderTrackCrossing then return 0.870
                    elseif Variant == "Rørpakke, omstøpt, 3x6xØ110" and not UnderTrackCrossing then return 0.870
                    elseif Variant == "Rørpakke, omstøpt, 4x6xØ110" and not UnderTrackCrossing then return 0.870
                    elseif Variant == "Rørpakke, omstøpt, 5x6xØ110" and not UnderTrackCrossing then return 0.870
                    elseif Variant == "Rørpakke, omstøpt, 6x6xØ110" and not UnderTrackCrossing then return 0.870
                    elseif Variant == "Rørpakke, omstøpt, 7x6xØ110" and not UnderTrackCrossing then return 0.870
					elseif Variant == "Rørpakke, omstøpt, 1x7xØ110" and not UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 2x7xØ110" and not UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 3x7xØ110" and not UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 4x7xØ110" and not UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 5x7xØ110" and not UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 6x7xØ110" and not UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 7x7xØ110" and not UnderTrackCrossing then return 1.010

					elseif Variant == "Rørpakke, omstøpt, 3x(3xØ110-Ø160),(3xØ110)" then return 0.640

					elseif Variant == "Rørpakke, omstøpt, 1x1xØ110" and UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 2x1xØ110" and UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 3x1xØ110" and UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 4x1xØ110" and UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 5x1xØ110" and UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 6x1xØ110" and UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 7x1xØ110" and UnderTrackCrossing then return 0.310
					elseif Variant == "Rørpakke, omstøpt, 1x2xØ110" and UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 2x2xØ110" and UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 3x2xØ110" and UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 4x2xØ110" and UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 5x2xØ110" and UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 6x2xØ110" and UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 7x2xØ110" and UnderTrackCrossing then return 0.450
					elseif Variant == "Rørpakke, omstøpt, 1x3xØ110" and UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 2x3xØ110" and UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 3x3xØ110" and UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 4x3xØ110" and UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 5x3xØ110" and UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 6x3xØ110" and UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 7x3xØ110" and UnderTrackCrossing then return 0.590
					elseif Variant == "Rørpakke, omstøpt, 1x4xØ110" and UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 2x4xØ110" and UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 3x4xØ110" and UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 4x4xØ110" and UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 5x4xØ110" and UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 6x4xØ110" and UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 7x4xØ110" and UnderTrackCrossing then return 0.730
					elseif Variant == "Rørpakke, omstøpt, 1x5xØ110" and UnderTrackCrossing then return 0.870
					elseif Variant == "Rørpakke, omstøpt, 2x5xØ110" and UnderTrackCrossing then return 0.870
					elseif Variant == "Rørpakke, omstøpt, 3x5xØ110" and UnderTrackCrossing then return 0.870
					elseif Variant == "Rørpakke, omstøpt, 4x5xØ110" and UnderTrackCrossing then return 0.870
					elseif Variant == "Rørpakke, omstøpt, 5x5xØ110" and UnderTrackCrossing then return 0.870
					elseif Variant == "Rørpakke, omstøpt, 6x5xØ110" and UnderTrackCrossing then return 0.870
					elseif Variant == "Rørpakke, omstøpt, 7x5xØ110" and UnderTrackCrossing then return 0.870
					elseif Variant == "Rørpakke, omstøpt, 1x6xØ110" and UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 2x6xØ110" and UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 3x6xØ110" and UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 4x6xØ110" and UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 5x6xØ110" and UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 6x6xØ110" and UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 7x6xØ110" and UnderTrackCrossing then return 1.010
					elseif Variant == "Rørpakke, omstøpt, 1x7xØ110" and UnderTrackCrossing then return 1.150
					elseif Variant == "Rørpakke, omstøpt, 2x7xØ110" and UnderTrackCrossing then return 1.150
					elseif Variant == "Rørpakke, omstøpt, 3x7xØ110" and UnderTrackCrossing then return 1.150
					elseif Variant == "Rørpakke, omstøpt, 4x7xØ110" and UnderTrackCrossing then return 1.150
					elseif Variant == "Rørpakke, omstøpt, 5x7xØ110" and UnderTrackCrossing then return 1.150
					elseif Variant == "Rørpakke, omstøpt, 6x7xØ110" and UnderTrackCrossing then return 1.150
					elseif Variant == "Rørpakke, omstøpt, 7x7xØ110" and UnderTrackCrossing then return 1.150		
					else 
						return 0,"Unrecognized variant ["..Variant.."]."
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="SweptGeometry3D_0.Name">
   <Formula>_JBTKU_KFR_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFR_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the tube package default 3D object model name.">
   <Signature>Double _JBTKU_KFR_Geometry3DName()</Signature>
   <Formula>
				function _JBTKU_KFR_Geometry3DName()
						if Variant == "Rørpakke, omstøpt, 1x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.200x0.170)-(1x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 2x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.340x0.170)-(2x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 3x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.480x0.170)-(3x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 4x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.620x0.170)-(4x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 5x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.760x0.170)-(5x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 6x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.900x0.170)-(6x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 7x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.040x0.170)-(7x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 1x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.200x0.310)-(1x2-110)"
					elseif Variant == "Rørpakke, omstøpt, 2x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.340x0.310)-(2x2-110)"
					elseif Variant == "Rørpakke, omstøpt, 3x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.480x0.310)-(3x2-110)"
					elseif Variant == "Rørpakke, omstøpt, 4x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.620x0.310)-(4x2-110)"
					elseif Variant == "Rørpakke, omstøpt, 5x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.760x0.310)-(5x2-110)"
					elseif Variant == "Rørpakke, omstøpt, 6x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.900x0.310)-(6x2-110)"
					elseif Variant == "Rørpakke, omstøpt, 7x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.040x0.310)-(7x2-110)"
					elseif Variant == "Rørpakke, omstøpt, 1x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.200x0.450)-(1x3-110)"
					elseif Variant == "Rørpakke, omstøpt, 2x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.340x0.450)-(2x3-110)"
					elseif Variant == "Rørpakke, omstøpt, 3x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.480x0.450)-(3x3-110)"
					elseif Variant == "Rørpakke, omstøpt, 4x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.620x0.450)-(4x3-110)"
					elseif Variant == "Rørpakke, omstøpt, 5x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.760x0.450)-(5x3-110)"
					elseif Variant == "Rørpakke, omstøpt, 6x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.900x0.450)-(6x3-110)"
					elseif Variant == "Rørpakke, omstøpt, 7x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.040x0.450)-(7x3-110)"
					elseif Variant == "Rørpakke, omstøpt, 1x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.200x0.590)-(1x4-110)"
					elseif Variant == "Rørpakke, omstøpt, 2x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.340x0.590)-(2x4-110)"
					elseif Variant == "Rørpakke, omstøpt, 3x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.480x0.590)-(3x4-110)"
					elseif Variant == "Rørpakke, omstøpt, 4x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.620x0.590)-(4x4-110)"
					elseif Variant == "Rørpakke, omstøpt, 5x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.760x0.590)-(5x4-110)"
					elseif Variant == "Rørpakke, omstøpt, 6x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.900x0.590)-(6x4-110)"
					elseif Variant == "Rørpakke, omstøpt, 7x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.040x0.590)-(7x4-110)"
					elseif Variant == "Rørpakke, omstøpt, 1x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.200x0.730)-(1x5-110)"
					elseif Variant == "Rørpakke, omstøpt, 2x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.340x0.730)-(2x5-110)"
					elseif Variant == "Rørpakke, omstøpt, 3x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.480x0.730)-(3x5-110)"
					elseif Variant == "Rørpakke, omstøpt, 4x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.620x0.730)-(4x5-110)"
					elseif Variant == "Rørpakke, omstøpt, 5x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.760x0.730)-(5x5-110)"
					elseif Variant == "Rørpakke, omstøpt, 6x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.900x0.730)-(6x5-110)"
					elseif Variant == "Rørpakke, omstøpt, 7x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.040x0.730)-(7x5-110)"
					elseif Variant == "Rørpakke, omstøpt, 1x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.200x0.870)-(1x6-110)"
					elseif Variant == "Rørpakke, omstøpt, 2x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.340x0.870)-(2x6-110)"
                    elseif Variant == "Rørpakke, omstøpt, 3x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.480x0.870)-(3x6-110)"
                    elseif Variant == "Rørpakke, omstøpt, 4x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.620x0.870)-(4x6-110)"
                    elseif Variant == "Rørpakke, omstøpt, 5x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.760x0.870)-(5x6-110)"
                    elseif Variant == "Rørpakke, omstøpt, 6x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.900x0.870)-(6x6-110)"
                    elseif Variant == "Rørpakke, omstøpt, 7x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.040x0.870)-(7x6-110)"
					elseif Variant == "Rørpakke, omstøpt, 1x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.200x1.010)-(1x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 2x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.340x1.010)-(2x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 3x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.480x1.010)-(3x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 4x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.620x1.010)-(4x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 5x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.760x1.010)-(5x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 6x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.900x1.010)-(6x1-110)"
					elseif Variant == "Rørpakke, omstøpt, 7x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.040x1.010)-(7x1-110)"
					
					elseif Variant == "Rørpakke, omstøpt, under spor, 1x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.310x0.310)-(1x1-110)"
					
					elseif Variant == "Rørpakke, omstøpt, 3x(3xØ110-Ø160),(3xØ110)" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.620x0.640)-(4x3-110)-(3x1-160)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 2x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.450x0.310)-(2x1-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 3x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.590x0.310)-(3x1-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 4x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.730x0.310)-(4x1-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 5x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.870x0.310)-(5x1-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 6x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.010x0.310)-(6x1-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 7x1xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.150x0.310)-(7x1-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 1x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.310x0.450)-(1x2-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 2x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.450x0.450)-(2x2-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 3x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.590x0.450)-(3x2-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 4x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.730x0.450)-(4x2-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 5x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.870x0.450)-(5x2-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 6x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.010x0.450)-(6x2-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 7x2xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.150x0.450)-(7x2-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 1x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.310x0.590)-(1x3-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 2x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.450x0.590)-(2x3-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 3x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.590x0.590)-(3x3-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 4x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.730x0.590)-(4x3-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 5x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.870x0.590)-(5x3-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 6x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.010x0.590)-(6x3-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 7x3xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.150x0.590)-(7x3-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 1x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.310x0.730)-(1x4-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 2x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.450x0.730)-(2x4-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 3x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.590x0.730)-(3x4-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 4x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.730x0.730)-(4x4-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 5x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.870x0.730)-(5x4-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 6x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.010x0.730)-(6x4-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 7x4xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.150x0.730)-(7x4-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 1x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.310x0.870)-(1x5-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 2x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.450x0.870)-(2x5-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 3x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.590x0.870)-(3x5-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 4x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.730x0.870)-(4x5-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 5x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.870x0.870)-(5x5-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 6x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.010x0.870)-(6x5-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 7x5xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.150x0.870)-(7x5-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 1x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.310x1.010)-(1x6-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 2x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.450x1.010)-(2x6-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 3x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.590x1.010)-(3x6-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 4x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.730x1.010)-(4x6-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 5x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.870x1.010)-(5x6-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 6x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.010x1.010)-(6x6-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 7x6xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.150x1.010)-(7x6-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 1x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.310x1.150)-(1x7-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 2x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.450x1.150)-(2x7-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 3x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.590x1.150)-(3x7-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 4x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.730x1.150)-(4x7-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 5x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(0.870x1.150)-(5x7-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 6x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.010x1.150)-(6x7-110)"
					elseif Variant == "Rørpakke, omstøpt, under spor, 7x7xØ110" then return "NO-BN-2D-KU-KFØ-OMTSTØPT-RØRPAKKE-(1.150x1.150)-(7x7-110)"		
					else 
						return "???","Unrecognized variant ["..Variant.."]."
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="SweptGeometry3D_0.Offset.Z">
   <Formula>_JBTKU_KFR_Offset3DZ(_position)</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFR_Offset3DZ()" ReturnType="String" HideFromUser="false" Description="Returns the tube package default elevation, interpolated linearly from the nearest manhole (or track) close to each end. Must be called with '_position' as input argument (_position.ref = alignment GUID, _position.pos = distAlong).">
   <Signature>Double _JBTKU_KFR_Offset3DZ(_position)</Signature>
   <Formula>
				function _JBTKU_KFR_Offset3DZ(cursor)
					--Draw concrete encased tubes in a straight line from one end to the other
				
					local p1 = RcAlignment.StartPoint
					local p2 = RcAlignment.EndPoint
					local t1 = getNearbyAlignments(getPoint3D(p1.X,p1.Y))[0]
					local t2 = getNearbyAlignments(getPoint3D(p2.X,p2.Y))[0]
					local m1 = getNearbyPointObjects2D(p1, 2.5, rctype_CablePit)
					local m2 = getNearbyPointObjects2D(p2, 2.5, rctype_CablePit)
					local n1 = getCollectionLength(m1)
					local n2 = getCollectionLength(m2)
					local z1, z2
				
					if n1 + n2 == 0 then
						--Manhole not found at start nor at end:
						z1 = getAlignmentInfo(t1.id,p1.X,p1.Y).Elevation + StartPointVerticalOffset
						z2 = getAlignmentInfo(t2.id,p2.X,p2.Y).Elevation + EndPointVerticalOffset
					elseif n2 == 0 then
						--Manhole found at start, none found at end:
						z1 = m1[0].geoCoord.Z + StartPointVerticalOffset
						z2 = getAlignmentInfo(t2.id,p2.X,p2.Y).Elevation + EndPointVerticalOffset
					elseif n1 == 0 then
						--Manhole found at end, none found at start:
						z1 = getAlignmentInfo(t1.id,p1.X,p1.Y).Elevation + StartPointVerticalOffset
						z2 = m2[0].geoCoord.Z + EndPointVerticalOffset
					else
						--Manhole found at start and at end:
						z1 = m1[0].geoCoord.Z + StartPointVerticalOffset
						z2 = m2[0].geoCoord.Z + EndPointVerticalOffset
					end
					--if true then return z1,z2,StartPointVerticalOffset,EndPointVerticalOffset end --DEBUG
				
					local dZ = z2 - z1
					local dL = RcAlignment.HorizontalGeometry.Length
					local slope = dZ/dL
				
					local distAlong = cursor.pos
					local Z = z1 + slope*distAlong
					return  Z
				end
			</Formula>
  </LuaFunction>
  <PropertyPrompt Key="code" DefaultValue="Omstøpt rørpakke" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Rørpakke, omstøpt, 1x2xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 2x2xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 3x2xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 4x2xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 1x3xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 2x3xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 3x3xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 4x3xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 1x4xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 2x4xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 3x4xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 4x4xØ110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Rørpakke, omstøpt, 3x(3xØ110-Ø160),(3xØ110)" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-OMSTOEPTE-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_UnderTrackCrossingSteel" Name="JBTKU_KFP Pressrør" Layer="JBTKU_KFP" Color="ByLayer" Group="Underbygning/Føringsveier/Pressrør">
  <RelationSpace>pressrør</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Underbygning"/>
  <AlignmentSystems DefaultSystemName="Kabelføring">
   <AlignmentSystem Name="Kabelføring" CantGauge="0.000" AlignmentGauge="0.000" LiftWithCant="false"/>
  </AlignmentSystems>
  <Variants DefaultValue="Pressrør Ø160 uten subrør">
   <Variant Name="Pressrør Ø160 uten subrør"/>
   <Variant Name="Pressrør Ø400 uten subrør"/>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D"/>
  <LuaExpression Name="name">
   <Formula>code.." ("..Variant..")"</Formula>
  </LuaExpression>
  <LuaExpression Name="Linetype">
   <Formula>_JBTKU_KFP_Linetype()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFP_Linetype()" ReturnType="String" HideFromUser="false" Description="Returns the CAD system 2D presentation line type for the stiff tube package, based on its Variant.">
   <Signature>String _JBTKU_KFP_Linetype()</Signature>
   <Formula>
				function _JBTKU_KFP_Linetype()
					return "Continuous" --(same enum for alle language packs)
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="GlobalWidth">
   <Formula>_JBTKU_KFOE__JBTKU_KFP_GlobalWidth()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFOE__JBTKU_KFP_GlobalWidth()" ReturnType="Double" HideFromUser="false" Description="Returns the global width of the stiff  tube package's 2D representation as a wide polyline.">
   <Signature>Double _JBTKU_KFOE__JBTKU_KFP_GlobalWidth()</Signature>
   <Formula>
				function _JBTKU_KFOE__JBTKU_KFP_GlobalWidth()
					if Variant:match("Pressrør Ø160") then return 0.160
					elseif Variant:match("Pressrør Ø400") then return 0.400
					else
						return 1.0, _info("Variant ["..Variant.."] has not been anticipated yet.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="SweptGeometry3D_0.Name">
   <Formula>_JBTKU_KFP_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFP_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the tube package default 3D object model name.">
   <Signature>Double _JBTKU_KFP_Geometry3DName()</Signature>
   <Formula>
				function _JBTKU_KFP_Geometry3DName()
					local t = "NO-BN-2D-KU-KFØ-PRESSRØR-DIAMETER-"
					if Variant:match("Pressrør Ø160") then return t.."144-160-TOMT"
					elseif Variant:match("Pressrør Ø400") then return t.."360-400-TOMT"
					else 
						return "", _info("Variant ["..Variant.."] has not been anticipated yet.")
					end
				end
			</Formula>
  </LuaFunction>
  <PropertyPrompt Key="code" DefaultValue="Pressrør" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Pressrør Ø160 uten subrør" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-PRESSROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Pressrør Ø400 uten subrør" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-PRESSROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_FlexibleTube" Name="JBTKU_KFT Trekkerør" Layer="JBTKU_KFT" Color="ByLayer" Group="Underbygning/Føringsveier/Trekkerør">
  <RelationSpace>trekkerør</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTKU@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTKU@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTKU@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Underbygning"/>
  <AlignmentSystems DefaultSystemName="Kabelføring">
   <AlignmentSystem Name="Kabelføring" CantGauge="0.000" AlignmentGauge="0.000" LiftWithCant="false"/>
  </AlignmentSystems>
  <LuaExpression Name="name">
   <Formula>code.." ("..Variant..")"</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D">
   <SetValue Key="CustomTransformation" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Linetype">
   <Formula>_JBTKU_KFT_Linetype()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFT_Linetype()" ReturnType="String" HideFromUser="false" Description="Returns the CAD system 2D presentation line type for the flexible tube, based on its Variant.">
   <Signature>String _JBTKU_KFT_Linetype()</Signature>
   <Formula>
				function _JBTKU_KFT_Linetype()
					return "Continuous" --(same enum for alle language packs)
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="GlobalWidth">
   <Formula>_JBTKU_KFT_GlobalWidth()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFT_GlobalWidth()" ReturnType="Double" HideFromUser="false" Description="Returns the global width of the flexible tube's 2D representation as a wide polyline.">
   <Signature>Double _JBTKU_KFT_GlobalWidth()</Signature>
   <Formula>
				function _JBTKU_KFT_GlobalWidth()
					if Variant:match("Ø50") then return 0.050
					elseif Variant:match("Ø75") then return 0.075
					elseif Variant:match("Ø110") then return 0.110
					elseif Variant:match("Ø125") then return 0.125
					elseif Variant:match("Ø160") then return 0.160
					else 
						return 0, _info("Variant ["..Variant.."] has not been anticipated yet.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="SweptGeometry3D_0.Name">
   <Formula>_JBTKU_KFT_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFT_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the flexible tube default 3D object model name.">
   <Signature>String _JBTKU_KFT_Geometry3DName()</Signature>
   <Formula>
				function _JBTKU_KFT_Geometry3DName()
					local t = "NO-BN-2D-KU-KFØ-TREKKERØR-RØD-DIAMETER-"
					if Variant:match("Ø50") then return t.."042-050"
					elseif Variant:match("Ø75") then return t.."063-075"
					elseif Variant:match("Ø110") then return t.."094-110"
					elseif Variant:match("Ø125") then return t.."108-125"
					elseif Variant:match("Ø160") then return t.."138-160"
					else
						return "", _info("Variant ["..Variant.."] has not been anticipated yet.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="SweptGeometry3D_0.Offset.Z">
   <Formula>_JBTKU_KFT_Offset3DZ(_position)</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFT_Offset3DZ()" ReturnType="Double" HideFromUser="false" Description="Returns the flexible tube Z offset along the geometry, relative to the duct bottom located at the start of the tube's alignment geometry. Must be called with '_position' as input argument (_position.ref = alignment GUID, _position.pos = distAlong).">
   <Signature>Double _JBTKU_KFT_Offset3DZ(SampledPosition _position)</Signature>
   <Formula>
				function _JBTKU_KFT_Offset3DZ(cursor)
					local P1 = RcAlignment.StartPoint
					local ducts = getNearbyAlignments(getPoint3D(P1.X,P1.Y), rctype_CableTrough)
					if getCollectionLength(ducts) == 0 then
						return 0, _info("UNFINISHED - No cable duct found at flexible tube's geometry start point.")
					end
					local Zref = getAlignmentInfo(ducts[0].id,P1.X,P1.Y).Point.Z
					
					local ini = 0.2		--Length of initial level part
					local c = 0.8		--Length of cosine part
					local h1 = 0.1		--Start at bottom duct level +h1, make a cosine bend down to bottom duct -h1 
					local r = 0.5		--After horizontal movement, bend up from Zref-h1 as a quarter-circle with radius r 
					local h2 = 0.4		--Finally, rise another h2, close to the tube's end (at the object to feed)
					local d = 0.1		--Horizontal length of the last steep ascent
					
					local L = RcAlignment.HorizontalGeometry.Length --2D length of the tube's geometry
					local L1 = ini		--Start cosine bend
					local L2 = L1+c		--End of cosine, start horizontal part
					local L3 = L-d-r	--Start of arc
					local L4 = L-d		--End of arc, start of steep ascent
					if L &lt; ini+c+r+d then 
						return 0, _info("UNFINISHED - Tube geometry is too short to generate Z offset.")
					end
					
					local p = cursor.pos	--Our 'cursor' running along the geometry from 0 to L
					
					if p &lt; L1 then --horizontal
						return Zref + h1
					
					elseif p &lt; L2 then --cosine
						return Zref + h1*math.cos(math.pi*((p-L1)/c))
					
					elseif p &lt; L3 then --horizontal
						return Zref - h1
					
					elseif p &lt; L4 then --circular arc
						return Zref - h1 + r*(1 - math.sqrt(1 -((p-L3)/r)^2))
					
					else 
						return Zref - h1 + r + h2*(p-L4)/d
					end
				end
			</Formula>
  </LuaFunction>
  <Variants DefaultValue="Trekkerør, Ø50">
   <Variant Name="Trekkerør, Ø50"/>
   <Variant Name="Trekkerør, Ø75"/>
   <Variant Name="Trekkerør, Ø110"/>
   <Variant Name="Trekkerør, Ø125"/>
   <Variant Name="Trekkerør, Ø160"/>
  </Variants>
  <PropertyPrompt Key="code" DefaultValue="Trekkerør" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Trekkerør, Ø50" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Trekkerør, Ø75" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Trekkerør, Ø110" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Trekkerør, Ø125" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Trekkerør, Ø160" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_CablePit" Name="JBTKU_KFØ Trekkekum" Layer="JBTKU_KFØ_TREKKEKUM" Color="ByLayer" Group="Underbygning/Føringsveier" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>trekkekum</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTKU@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTKU@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTKU@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Underbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Trekkekum Ø=1400 H=1350">
   <Variant Name="Trekkekum Ø=1400 H=1350">
    <SetValue Key="ManholeDiameter" Value="1400"/>
    <SetValue Key="ManholeLength" Value="0"/>
    <SetValue Key="ManholeDepth" Value="0"/>
    <SetValue Key="ManholeHeight" Value="1350"/>
   </Variant>
   <Variant Name="Trekkekum L=1600 D=900 H=900">
    <SetValue Key="ManholeDiameter" Value="0"/>
    <SetValue Key="ManholeLength" Value="1600"/>
    <SetValue Key="ManholeDepth" Value="900"/>
    <SetValue Key="ManholeHeight" Value="900"/>
   </Variant>
   <Variant Name="Trekkekum L=1400 D=1400 H=1600">
    <SetValue Key="ManholeDiameter" Value="0"/>
    <SetValue Key="ManholeLength" Value="1400"/>
    <SetValue Key="ManholeDepth" Value="1400"/>
    <SetValue Key="ManholeHeight" Value="1600"/>
   </Variant>
   <Variant Name="Trekkekum L=2300 D=2300 H=2400, 3-veis">
    <SetValue Key="ManholeDiameter" Value="0"/>
    <SetValue Key="ManholeLength" Value="2300"/>
    <SetValue Key="ManholeDepth" Value="2300"/>
    <SetValue Key="ManholeHeight" Value="2400"/>
   </Variant>
   <Variant Name="Trekkekum L=2300 D=2300 H=2400, 4-veis">
    <SetValue Key="ManholeDiameter" Value="0"/>
    <SetValue Key="ManholeLength" Value="2300"/>
    <SetValue Key="ManholeDepth" Value="2300"/>
    <SetValue Key="ManholeHeight" Value="2400"/>
   </Variant>
   <Variant Name="Trekkekum, brukerdefinert, rund">
    <SetValue Key="ManholeDiameter" Value="1000"/>
    <SetValue Key="ManholeLength" Value="0"/>
    <SetValue Key="ManholeDepth" Value="0"/>
    <SetValue Key="ManholeHeight" Value="1000"/>
   </Variant>
   <Variant Name="Trekkekum, brukerdefinert, rektangulær">
    <SetValue Key="ManholeDiameter" Value="0"/>
    <SetValue Key="ManholeLength" Value="1000"/>
    <SetValue Key="ManholeDepth" Value="1000"/>
    <SetValue Key="ManholeHeight" Value="1000"/>
   </Variant>
  </Variants>
  <CustomProperty DataType="UInt32" Name="ManholeDiameter" DisplayName="Trekkekum diameter" DefaultValue="0" Description="The manhole diameter (exterior dimension) [mm]."/>
  <CustomProperty DataType="UInt32" Name="ManholeLength" DisplayName="Trekkekum lengde" DefaultValue="0" Description="The manhole length (exterior dimension measured along its own alignment) [mm]."/>
  <CustomProperty DataType="UInt32" Name="ManholeDepth" DisplayName="Trekkekum dybde" DefaultValue="0" Description="The manhole depth (exterior dimension measured perpendicularly to its own alignment) [mm]."/>
  <CustomProperty DataType="UInt32" Name="ManholeHeight" DisplayName="Trekkekum høyde" DefaultValue="0" Description="The manhole height (exterior dimension) [mm]."></CustomProperty>
  <CustomProperty DataType="Enumeration" Name="ManholeDisplayMode" DisplayName="Trekkekum visningsmodus" DefaultValue="Closed" Description="The manhole shown as closed (Lukket) with its top plate, or open (Åpen) without its top plate.">
   <Values>
    <Value DisplayName="Lukket">CLOSED</Value>
    <Value DisplayName="Åpen">OPEN</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="code">
   <Formula>_JBTKU_KFOE_manhole_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFOE_manhole_code()" ReturnType="String" Description="Obtains the code for the manhole, as a concatenation of the manhole's reference mileage km-value and the current 'Seq' local variable.">
   <Signature>String _JBTKU_KFOE_manhole_code()</Signature>
   <Formula>
				function _JBTKU_KFOE_manhole_code()
					local entireKm = math.floor(ReferenceMileage/1000)
					return string.format("TK-%d-%02d",entireKm,Seq), _info("Manhole's code is inherited from reference mileage ("..ReferenceMileage..") and the local variable Seq ("..Seq..").")
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>code.." ("..Variant..")"</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>_JBTKU_KFOE_manhole_LateralOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFOE_manhole_LateralOffset()" ReturnType="Double" Description="Returns manhole's default distance to its alignment.">
   <Signature>Double _JBTKU_KFOE_manhole_LateralOffset()</Signature>
   <Formula>
				function _JBTKU_KFOE_manhole_LateralOffset() 
					local MinFreeProfile = 2.52 --Bane NOR TRV value
					local d
					if ManholeDiameter &gt; 0 then
						--Should "touch" MinFreeProfile, insertion point = center manhole at Top-of-rail
						d = MinFreeProfile + ManholeDiameter/2000.0
					elseif ManHoleLength &gt; 0 and ManHoleDepth &gt; 0 then
						--Should "touch" MinFreeProfile, insertion point = midpoint long side towards track at Top-of-rail
						if dir == "both" then d = MinFreeProfile + 0.0
						elseif dir == "none" then d = MinFreeProfile + ManholeDepth/1000.0
						elseif dir == "up" then d = MinFreeProfile + ManholeLength/2000.0
						elseif dir == "down" then d = MinFreeProfile + ManholeLength/2000.0
						else return 1e-3, _info("UNFINISHED - Unknown direction") 
						end
					else
						return 1e-3, _info("Variant ["..Variant.."] has not been anticipated yet.")
					end
					return RightSided and d or -d, _info("Distance to alignment deduced from direction and from manhole dimensions.")
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKU_KFOE_manhole_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_KFOE_manhole_Geometry3DName()" ReturnType="String" Description="Returns manhole's default 3D object model name.">
   <Signature>String _JBTKU_KFOE_manhole_Geometry3DName()</Signature>
   <Formula>
				function _JBTKU_KFOE_manhole_Geometry3DName()
					if ManholeDiameter == 0 and (ManholeLength == 0 and ManholeDepth == 0) then --AND: all are zero...
						return "NO-BN-3D-FE-DIV-UKJENT",
							_info("Dimensions are missing, set either Diameter or Length/Depth to their intended values.")
					elseif ManholeDiameter == 0 and (ManholeLength == 0 or ManholeDepth == 0) then --OR: still missing something...
						return "NO-BN-3D-FE-DIV-UKJENT",
							_info("Both of Length and Depth must be non-zero when Diameter is zero.")
					elseif ManholeDiameter &gt; 0 and (ManholeLength &gt; 0 or ManholeDepth &gt; 0) then
						return "NO-BN-3D-FE-DIV-UKJENT",
							_info("Length/Depth must be set to zero when Diameter is non-zero.")
					elseif ManholeHeight == 0 then
						return "NO-BN-3D-FE-DIV-UKJENT",
							_info("Manhole Height must be non-zero [mm].")
					end
					local tOpenOrClosed = (ManholeDisplayMode == "CLOSED") and "-MED-LOKK" or ""
					if ManholeDiameter &gt; 0 then
						--Cylindrical manhole:
						return "NO-BN-3D-KU-KFØ-TREKKEKUM-Ø"..ManholeDiameter.."-H"..ManholeHeight..tOpenOrClosed
					else
						--Cubic manhole:
						local numberOfOrifices = Variant:lower():match("(%d+)%-veis")
						if numberOfOrifices == nil then
							return "NO-BN-3D-KU-KFØ-TREKKEKUM-L"..ManholeLength.."-D"..ManholeDepth.."-H"..ManholeHeight..tOpenOrClosed
						else
							return "NO-BN-3D-KU-KFØ-TREKKEKUM-L"..ManholeLength.."-D"..ManholeDepth.."-H"..ManholeHeight.."-"..numberOfOrifices.."-VEIS"..tOpenOrClosed
						end
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Trekkekum Ø=1400 H=1350" DisplayBlockName="NO-BN-2D-JBTKU_KFØ-TREKKEKUM-RUND-1400-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1.5">
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Trekkekum L=1600 D=900 H=900" DisplayBlockName="NO-BN-2D-JBTKU_KFØ-TREKKEKUM-L1600-D900-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1.5">
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Trekkekum L=1400 D=1400 H=1600" DisplayBlockName="NO-BN-2D-JBTKU_KFØ-TREKKEKUM-L1400-D1400-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1.5">
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Trekkekum L=2300 D=2300 H=2400, 3-veis" DisplayBlockName="NO-BN-2D-JBTKU_KFØ-TREKKEKUM-L2300-D2300-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1.5">
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Trekkekum L=2300 D=2300 H=2400, 4-veis" DisplayBlockName="NO-BN-2D-JBTKU_KFØ-TREKKEKUM-L2300-D2300-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1.5">
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Trekkekum, brukerdefinert, rund" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TREKKEKUM-RUND-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1.5">
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Trekkekum, brukerdefinert, rektangulær" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TREKKEKUM-REKTANGULAER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1.5">
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_THUMBNAIL_USPESIFISERT" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				{%    if Variant == 'Trekkekum Ø=1400 H=1350' %}NO-BN-2D-JBTKU_KFØ-TREKKEKUM-RUND-1400
				{% elsif Variant == 'Trekkekum L=1600 D=900 H=900' %}NO-BN-2D-JBTKU_KFØ-TREKKEKUM-L1600-D900
				{% elsif Variant == 'Trekkekum L=1400 D=1400 H=1600' %}NO-BN-2D-JBTKU_KFØ-TREKKEKUM-L1400-D1400
				{% elsif Variant == 'Trekkekum L=2300 D=2300 H=2400, 3-veis' %}NO-BN-2D-JBTKU_KFØ-TREKKEKUM-L2300-D2300
				{% elsif Variant == 'Trekkekum L=2300 D=2300 H=2400, 4-veis' %}NO-BN-2D-JBTKU_KFØ-TREKKEKUM-L2300-D2300
				{% elsif Variant == 'Trekkekum, brukerdefinert, rund' %}NO-BN-2D-JBTRC_THUMBNAIL-TREKKEKUM-RUND
				{% elsif Variant == 'Trekkekum, brukerdefinert, rektangulær' %}NO-BN-2D-JBTRC_THUMBNAIL-TREKKEKUM-REKTANGULAER
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{code}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="jordskinne"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_Road" Name="JBTKU_VEI Vei" Layer="JBTKU_VEI" Color="ByLayer" Group="Underbygning/Veier">
  <RelationSpace>vei</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTKU@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTKU@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTKU@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Underbygning"/>
  <AlignmentSystems DefaultSystemName="Vei">
   <AlignmentSystem Name="Vei" CantGauge="0.000" AlignmentGauge="0.000" LiftWithCant="false"/>
  </AlignmentSystems>
  <Variants DefaultValue="Bilvei">
   <Variant Name="Bilvei">
    <LuaExpression Name="name">
     <Formula>code.." (bilvei)"</Formula>
    </LuaExpression>
    <SetValue Key="RoadNumberOfLanes" Value="2"/>
    <SetValue Key="RoadExteriorWidth" Value="6000"/>
   </Variant>
   <Variant Name="Gangvei">
    <LuaExpression Name="name">
     <Formula>code.." (gangvei)"</Formula>
    </LuaExpression>
    <SetValue Key="RoadNumberOfLanes" Value="1"/>
    <SetValue Key="RoadExteriorWidth" Value="2000"/>
   </Variant>
   <Variant Name="Sykkelsti">
    <LuaExpression Name="name">
     <Formula>code.." (sykkelsti)"</Formula>
    </LuaExpression>
    <SetValue Key="RoadNumberOfLanes" Value="1"/>
    <SetValue Key="RoadExteriorWidth" Value="1400"/>
   </Variant>
   <Variant Name="Rømningsvei">
    <LuaExpression Name="name">
     <Formula>code.." (rømningsvei)"</Formula>
    </LuaExpression>
    <SetValue Key="RoadNumberOfLanes" Value="1"/>
    <SetValue Key="RoadExteriorWidth" Value="1200"/>
   </Variant>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="IteratedGeometry3D">
   <SetValue Key="RotationBeforeOffset" Value="True"/>
   <SetValue Key="CustomTransformation" Value="false"/>
  </DynamicProperty>
  <CustomProperty DataType="Enumeration" Name="RoadNumberOfLanes" DisplayName="Felt" Description="The road's number of lanes.">
   <Values Variant="Bilvei">
    <Value>6</Value>
    <Value>4</Value>
    <Value>3</Value>
    <Value>2</Value>
    <Value>1</Value>
   </Values>
   <Values Variant="Gangvei">
    <Value>1</Value>
   </Values>
   <Values Variant="Sykkelsti">
    <Value>2</Value>
    <Value>1</Value>
   </Values>
   <Values Variant="Rømningsvei">
    <Value>1</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="RoadExteriorWidth" DisplayName="Bredde" Description="The road's exterior width [mm].">
   <Values Variant="Bilvei">
    <Value>12000</Value>
    <Value>11000</Value>
    <Value>10000</Value>
    <Value>9000</Value>
    <Value>8000</Value>
    <Value>7000</Value>
    <Value>6000</Value>
    <Value>5500</Value>
    <Value>5000</Value>
    <Value>4500</Value>
    <Value>4000</Value>
   </Values>
   <Values Variant="Gangvei">
    <Value>2000</Value>
    <Value>1600</Value>
    <Value>1200</Value>
   </Values>
   <Values Variant="Sykkelsti">
    <Value>2800</Value>
    <Value>1400</Value>
   </Values>
   <Values Variant="Rømningsvei">
    <Value>1400</Value>
    <Value>1200</Value>
    <Value>1000</Value>
    <Value>800</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="IteratedGeometry3D_0.Name">
   <Formula>_JBTKU_VEI_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_VEI_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the road's default 3D object model name.">
   <Signature>String _JBTKU_VEI_Geometry3DName()</Signature>
   <Formula>
				function _JBTKU_VEI_Geometry3DName()
					--TODO: Add more roads in 3D
					--TODO: Allow for varying segment lengths (all are 1000 mm now)
					local t = Sweep3D and "NO-BN-2D-KU-VEI-" or "NO-BN-3D-KU-VEI-"
					if Variant == "Bilvei" then 
						return t.."VEIBANE-"..RoadNumberOfLanes.."-FELT-L1000-D100-B"..RoadExteriorWidth
					elseif Variant == "Gangvei" then
						return t.."GANGBANE-"..RoadNumberOfLanes.."-FELT-L1000-D100-B"..RoadExteriorWidth
					elseif Variant == "Sykkelsti" then 
						return t.."SYKKELBANE-"..RoadNumberOfLanes.."-FELT-L1000-D100-B"..RoadExteriorWidth
					elseif Variant == "Rømningsvei" then
						return t.."RØMNINGSVEI-"..RoadNumberOfLanes.."-FELT-L1000-D100-B"..RoadExteriorWidth.."-H2250"
					else 
						return "", _info("Variant ["..Variant.."] has not been anticipated yet.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="IteratedGeometry3D_0.IterationStepSize">
   <Formula>_JBTKU_VEI_IteratedGeometryIterationStepSize(_position)</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_VEI_IteratedGeometryIterationStepSize()" ReturnType="Double" HideFromUser="false" Description="Returns the distance to the next 3D model insertion point along the alignment axis during 3D Preview or 3D Export. Must be called with '_position' as input argument (_position.ref = alignment GUID, _position.pos = distAlong).">
   <Signature>Double _JBTKU_VEI_IteratedGeometryIterationStepSize(Double _position)</Signature>
   <Formula>
				function _JBTKU_VEI_IteratedGeometryIterationStepSize(pos)
					-- TODO: A more elaborate function would rely on the actual size for each inserted 3D Model, which may vary as a sampled function along the alignment.
					-- This simple formula assumes that the 3D geometry is constant along the alignment, decided by the Variant (which applies to the whole alignment's length)
					-- TODO: Implement 'SweepMode3D' which interprets the given 3D Model Name as a 2D section to be sweeped (or twisted, if Cant info is provided).

					-- length	= Assumed length of each 3D element along the alignment [m]
					-- width 	= Assumed width of each 3D element perpendicularly the alignment [m]
					-- spacing	= Recommended minimum spacing between any two adjacent elements
					local length, width, spacing
				
					if Variant == "Bilvei" then 
						length	= 1.000
						width	= 6.000
						spacing	= 0.000
					elseif Variant == "Gangvei" then 
						length	= 2.400
						width	= 0.400
						spacing	= 0.000
					elseif Variant == "Sykkelsti" then 
						length	= 1.000
						width	= 0.600
						spacing	= 0.000
					elseif Variant == "Rømningsvei" then 
						length 	= 1.000
						width 	= 0.600
						spacing	= 0.000
					else 
						return 3.142, _info("Variant ["..Variant.."] has not been anticipated yet - so we assume 3.142 m 3D Model Separation...")
					end
					--Find step size along constant-curve alignment such that the outer corner of one element touches the outer corner of the adjacent element:
					local r = getAlignmentInfo(pos).CurveRadius
					local ksi = (length/2) / (r + (width/2))
					if ksi &lt; 1e-3 then 
						return length + spacing --Almost no anglular change between elements
					else
						return (2*r * math.atan(ksi)) + spacing
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="IteratedGeometry3D_0.InitialLinearOffset">
   <Formula>IteratedGeometry3D_0.Separation/2</Formula>
  </LuaExpression>
  <PropertyPrompt Key="code" DefaultValue="Vei" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Bilvei" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-BILVEI-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
   <IncludeSegmentType>Spiral</IncludeSegmentType>
   <SetValue Key="AlignmentSystem" Value="Vei"/>
   <LuaExpression Name="HorizontalGeometryPointObjectTypeRef">
    <Formula>rctype_HorizontalGeometryVertex</Formula>
   </LuaExpression>
   <LuaExpression Name="VerticalProfilePointObjectTypeRef">
    <Formula>rctype_VerticalProfileVertex</Formula>
   </LuaExpression>
   <LuaExpression Name="HorizontalGeometrySectionObjectTypeRef">
    <Formula>rctype_HorizontalGeometrySegment</Formula>
   </LuaExpression>
   <LuaExpression Name="VerticalProfileSectionObjectTypeRef">
    <Formula>rctype_VerticalProfileSegment</Formula>
   </LuaExpression>
  </InsertAlignment>
  <InsertAlignment Name="Sykkelsti" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-SYKKELSTI-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
   <IncludeSegmentType>Spiral</IncludeSegmentType>
   <SetValue Key="AlignmentSystem" Value="Vei"/>
   <LuaExpression Name="HorizontalGeometryPointObjectTypeRef">
    <Formula>rctype_HorizontalGeometryVertex</Formula>
   </LuaExpression>
   <LuaExpression Name="VerticalProfilePointObjectTypeRef">
    <Formula>rctype_VerticalProfileVertex</Formula>
   </LuaExpression>
   <LuaExpression Name="HorizontalGeometrySectionObjectTypeRef">
    <Formula>rctype_HorizontalGeometrySegment</Formula>
   </LuaExpression>
   <LuaExpression Name="VerticalProfileSectionObjectTypeRef">
    <Formula>rctype_VerticalProfileSegment</Formula>
   </LuaExpression>
  </InsertAlignment>
  <InsertAlignment Name="Gangvei" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-GANGVEI-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
   <IncludeSegmentType>Spiral</IncludeSegmentType>
   <SetValue Key="AlignmentSystem" Value="Vei"/>
   <LuaExpression Name="HorizontalGeometryPointObjectTypeRef">
    <Formula>rctype_HorizontalGeometryVertex</Formula>
   </LuaExpression>
   <LuaExpression Name="VerticalProfilePointObjectTypeRef">
    <Formula>rctype_VerticalProfileVertex</Formula>
   </LuaExpression>
   <LuaExpression Name="HorizontalGeometrySectionObjectTypeRef">
    <Formula>rctype_HorizontalGeometrySegment</Formula>
   </LuaExpression>
   <LuaExpression Name="VerticalProfileSectionObjectTypeRef">
    <Formula>rctype_VerticalProfileSegment</Formula>
   </LuaExpression>
  </InsertAlignment>
  <InsertAlignment Name="Rømningsvei" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-ROEMNINGSVEI-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
   <IncludeSegmentType>Spiral</IncludeSegmentType>
   <SetValue Key="AlignmentSystem" Value="Vei"/>
   <LuaExpression Name="HorizontalGeometryPointObjectTypeRef">
    <Formula>rctype_HorizontalGeometryVertex</Formula>
   </LuaExpression>
   <LuaExpression Name="VerticalProfilePointObjectTypeRef">
    <Formula>rctype_VerticalProfileVertex</Formula>
   </LuaExpression>
   <LuaExpression Name="HorizontalGeometrySectionObjectTypeRef">
    <Formula>rctype_HorizontalGeometrySegment</Formula>
   </LuaExpression>
   <LuaExpression Name="VerticalProfileSectionObjectTypeRef">
    <Formula>rctype_VerticalProfileSegment</Formula>
   </LuaExpression>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_CabinetFoundation" Name="JBTKU_FUN Apparatskapfundament" Layer="JBTKU_FUN" Color="ByLayer" Group="Underbygning/Fundamenter/Apparatskap" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>apparatskapfundament</RelationSpace>
  <AttachmentCategory Name="apparatskapfundament"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTKU@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTKU@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTKU@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Underbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Betong apparatskap fundament, hull på langsiden"/>
   <Variant Name="Betong apparatskap fundament, hull på kortsiden"/>
  </Variants>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>NOBN_sub_getFoundationCode()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>tostring(code):upper():match("UNFINISHED") and "" or code</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_FUN_CabinetFoundation_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FUN_CabinetFoundation_Geometry3DName()" ReturnType="String" Description="Returns the cabinet foundation's 3D geometry name.">
   <Signature>String _JBTEH_FUN_CabinetFoundation_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_FUN_CabinetFoundation_Geometry3DName()
					if Variant == "Betong apparatskap fundament, hull på langsiden" then
						return "NO-BN-3D-KU-FUN-APPARATSKAP-STORT-1400x820x540-LANGSIDEHULL"
					elseif Variant == "Betong apparatskap fundament, hull på kortsiden" then
						return "NO-BN-3D-KU-FUN-APPARATSKAP-STORT-1400x820x540-KORTSIDEHULL"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Betong apparatskap fundament, hull på langsiden" DisplayBlockName="NO-BN-2D-JBTKU_FUN-SKAPFUNDAMENT-BETONG-APPARATSKAP-LANGSIDE-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Betong apparatskap fundament, hull på kortsiden" DisplayBlockName="NO-BN-2D-JBTKU_FUN-SKAPFUNDAMENT-BETONG-APPARATSKAP-KORTSIDE-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTKU_FUN-SKAPFUNDAMENT-BETONG-APPARATSKAP-LANGSIDE-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTKU_FUN-SKAPFUNDAMENT
				{% if Variant == 'Betong apparatskap fundament, hull på langsiden' %}BETONG-APPARATSKAP-LANGSIDE
				{% elsif Variant == 'Betong apparatskap fundament, hull på kortsiden' %}BETONG-APPARATSKAP-KORTSIDE
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints Variant="Betong apparatskap fundament, hull på langsiden">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="apparatskap"/>
   </SnapPoints>
   <SnapPoints Variant="Betong apparatskap fundament, hull på kortsiden">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="apparatskap"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_OcsPoleFoundation" Name="JBTEH_FUN KL-fundament" Layer="JBTEH_FUN" Color="ByLayer" Group="Underbygning/Fundamenter/Kontaktledning" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>kl-fundament</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTKU@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTKU@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTKU@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Underbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Betong KL-fundament, bjelkemast">
    <SetValue Key="OcsFoundationBaseWidth" Value="1800"/>
    <SetValue Key="OcsFoundationBaseOffset" Value="000"/>
    <SetValue Key="OcsFoundationShaftHeight" Value="2700"/>
   </Variant>
   <Variant Name="Boret KL-fundament, Ø355-Ø232xDD27xM36">
    <SetValue Key="OcsFoundationShaftHeight" Value="5000"/>
   </Variant>
   <Variant Name="Boret KL-fundament, Ø555-191x374xM36">
    <SetValue Key="OcsFoundationShaftHeight" Value="4500"/>
   </Variant>
   <Variant Name="Fjellbolter for KL-mast i tunnel"></Variant>
   <Variant Name="Fjellbolter for KL-mast på veggkonsoll"></Variant>
   <Variant Name="Veggkonsoll for KL-mast"></Variant>
   <Variant Name="Spesial KL-fundament"></Variant>
   <Variant Name="Betong KL-fundament, lav B3 og B6, 240x800xM36, 6000-9500">
    <SetValue Key="OcsFoundationBaseWidth" Value="1800"/>
    <SetValue Key="OcsFoundationBaseOffset" Value="000"/>
    <SetValue Key="OcsFoundationShaftHeight" Value="3200"/>
   </Variant>
   <Variant Name="Betong KL-fundament, høy B6, 260x940xM36, 10000-13000">
    <SetValue Key="OcsFoundationBaseWidth" Value="1800"/>
    <SetValue Key="OcsFoundationBaseOffset" Value="000"/>
    <SetValue Key="OcsFoundationShaftHeight" Value="3200"/>
   </Variant>
   <Variant Name="Betong KL-fundament, H3, 700x700xM36, 6000-9500">
    <SetValue Key="OcsFoundationBaseWidth" Value="1800"/>
    <SetValue Key="OcsFoundationBaseOffset" Value="000"/>
    <SetValue Key="OcsFoundationShaftHeight" Value="2700"/>
   </Variant>
   <Variant Name="Betong KL-fundament, H3, 790x790xM36, 10000-12000">
    <SetValue Key="OcsFoundationBaseWidth" Value="1800"/>
    <SetValue Key="OcsFoundationBaseOffset" Value="000"/>
    <SetValue Key="OcsFoundationShaftHeight" Value="2700"/>
   </Variant>
   <Variant Name="Betong KL-fundament, H3, 830x830xM36, 12500-13000">
    <SetValue Key="OcsFoundationBaseWidth" Value="1800"/>
    <SetValue Key="OcsFoundationBaseOffset" Value="000"/>
    <SetValue Key="OcsFoundationShaftHeight" Value="2700"/>
   </Variant>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="OcsFoundationBaseWidth" DisplayName="Fundament bunnplate bredde" Description="The overhead catenary system (OCS) foundation base plate width (transversal to track). Not applicable to bored foundations.">
   <Values Variant="Betong KL-fundament, bjelkemast">
    <Value>2200</Value>
    <Value>2100</Value>
    <Value>2000</Value>
    <Value>1900</Value>
    <Value>1800</Value>
    <Value>1700</Value>
    <Value>1600</Value>
   </Values>
   <Values Variant="Betong KL-fundament, lav B3 og B6, 240x800xM36, 6000-9500">
    <Value>1800</Value>
   </Values>
   <Values Variant="Betong KL-fundament, høy B6, 260x940xM36, 10000-13000">
    <Value>1800</Value>
   </Values>
   <Values Variant="Betong KL-fundament, H3, 700x700xM36, 6000-9500">
    <Value>1800</Value>
   </Values>
   <Values Variant="Betong KL-fundament, H3, 790x790xM36, 10000-12000">
    <Value>1800</Value>
   </Values>
   <Values Variant="Betong KL-fundament, H3, 830x830xM36, 12500-13000">
    <Value>1800</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="OcsFoundationBaseOffset" DisplayName="Fundament bunnplate offset" Description="The overhead catenary system (OCS) foundation base plate offset. Not applicable to bored foundations.">
   <Values Variant="Betong KL-fundament, bjelkemast">
    <Value>300</Value>
    <Value>200</Value>
    <Value>100</Value>
    <Value>000</Value>
   </Values>
   <Values Variant="Betong KL-fundament, lav B3 og B6, 240x800xM36, 6000-9500">
    <Value>000</Value>
   </Values>
   <Values Variant="Betong KL-fundament, høy B6, 260x940xM36, 10000-13000">
    <Value>000</Value>
   </Values>
   <Values Variant="Betong KL-fundament, H3, 700x700xM36, 6000-9500">
    <Value>000</Value>
   </Values>
   <Values Variant="Betong KL-fundament, H3, 790x790xM36, 10000-12000">
    <Value>000</Value>
   </Values>
   <Values Variant="Betong KL-fundament, H3, 830x830xM36, 12500-13000">
    <Value>000</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="OcsFoundationShaftHeight" DisplayName="Fundament søylehøyde" Description="The overhead catenary system (OCS) foundation shaft height resp. total bored height.">
   <Values Variant="Betong KL-fundament, bjelkemast">
    <Value>2700</Value>
    <Value>2200</Value>
    <Value>1700</Value>
    <Value>1200</Value>
   </Values>
   <Values Variant="Boret KL-fundament, Ø555-191x374xM36">
    <Value>7500</Value>
    <Value>7000</Value>
    <Value>6500</Value>
    <Value>6000</Value>
    <Value>5500</Value>
    <Value>5000</Value>
    <Value>4500</Value>
    <Value>4000</Value>
    <Value>3500</Value>
    <Value>3000</Value>
    <Value>2500</Value>
   </Values>
   <Values Variant="Boret KL-fundament, Ø355-Ø232xDD27xM36">
    <Value>7500</Value>
    <Value>7000</Value>
    <Value>6500</Value>
    <Value>6000</Value>
    <Value>5500</Value>
    <Value>5000</Value>
    <Value>4500</Value>
    <Value>4000</Value>
    <Value>3500</Value>
    <Value>3000</Value>
    <Value>2500</Value>
   </Values>
   <Values Variant="Betong KL-fundament, lav B3 og B6, 240x800xM36, 6000-9500">
    <Value>3700</Value>
    <Value>3200</Value>
    <Value>3100</Value>
    <Value>2400</Value>
    <Value>1800</Value>
   </Values>
   <Values Variant="Betong KL-fundament, høy B6, 260x940xM36, 10000-13000">
    <Value>3700</Value>
    <Value>3200</Value>
    <Value>3100</Value>
    <Value>2400</Value>
    <Value>1800</Value>
   </Values>
   <Values Variant="Betong KL-fundament, H3, 700x700xM36, 6000-9500">
    <Value>3700</Value>
    <Value>2900</Value>
    <Value>2700</Value>
    <Value>2600</Value>
    <Value>2200</Value>
   </Values>
   <Values Variant="Betong KL-fundament, H3, 790x790xM36, 10000-12000">
    <Value>3700</Value>
    <Value>2900</Value>
    <Value>2700</Value>
    <Value>2600</Value>
    <Value>2200</Value>
   </Values>
   <Values Variant="Betong KL-fundament, H3, 830x830xM36, 12500-13000">
    <Value>3700</Value>
    <Value>2900</Value>
    <Value>2700</Value>
    <Value>2600</Value>
    <Value>2200</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="dir" Value="both"/>
  <LuaExpression Name="code">
   <Formula>NOBN_sub_getFoundationCode()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>tostring(code):upper():match("UNFINISHED") and code or ""</Formula>
  </LuaExpression>
  <LuaExpression Name="Mileage">
   <Formula>RC__getMileageFromRelatedObject(rel_OcsFoundation_AppliesTo_OcsPoleOrAnchoringFootplate)</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RC__getLateralOffsetFromRelatedObject(rel_OcsFoundation_AppliesTo_OcsPoleOrAnchoringFootplate)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>RC__getVerticalOffsetFromRelatedObject(rel_OcsFoundation_AppliesTo_OcsPoleOrAnchoringFootplate)</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>RC__getDirFromRelatedObject(rel_OcsFoundation_AppliesTo_OcsPoleOrAnchoringFootplate)</Formula>
  </LuaExpression>
  <LuaExpression Name="AngularOffset">
   <Formula>RC__getAngularOffsetFromRelatedObject(rel_OcsFoundation_AppliesTo_OcsPoleOrAnchoringFootplate)</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_FUN_OcsFoundation_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FUN_OcsFoundation_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the 3D geometry name for an OCS foundation.">
   <Signature>String _JBTEH_FUN_OcsFoundation_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_FUN_OcsFoundation_Geometry3DName()
					local bw = OcsFoundationBaseWidth
					local bo = OcsFoundationBaseOffset == 0 and "000" or tostring(OcsFoundationBaseOffset)
					local sh = OcsFoundationShaftHeight

					if Variant == "Betong KL-fundament, bjelkemast" then
						return "NO-BN-3D-EH-FUN-BJELKEMAST-1600x"..bw.."x1000-"..bo.."-700x700-191x374xM36-"..sh
					
					elseif Variant == "Boret KL-fundament, Ø355-Ø232xDD27xM36" then
						return "NO-BN-3D-EH-FUN-GITTERMAST-BORET-Ø355-Ø232x27DDxM36-"..sh
					
					elseif Variant == "Boret KL-fundament, Ø555-191x374xM36" then
						return "NO-BN-3D-EH-FUN-BJELKEMAST-BORET-Ø555-191x374xM36-"..sh
					
					elseif Variant == "Fjellbolter for KL-mast i tunnel" then
						return "NO-BN-3D-EH-FUN-HENGEMAST-FJELLBOLTER-350x350xM24"
					
					elseif Variant == "Fjellbolter for KL-mast på veggkonsoll" then
						return "NO-BN-3D-EH-FUN-KONSOLL-VEGGFESTE-FJELLBOLTER-600x700xM32"

					elseif Variant == "Veggkonsoll for KL-mast" then
						return "NO-BN-3D-EH-FUN-KONSOLL-VEGGFESTE-191x374xM36"
					
					elseif Variant == "Spesial KL-fundament" then
						return "NO-BN-3D-FE-DIV-UKJENT", _info("To be replaced by customized special foundation adapted to the situation's needs.")
										
					elseif Variant == "Betong KL-fundament, lav B3 og B6, 240x800xM36, 6000-9500" then
						if sh == 1800 then 
							return "NO-BN-3D-EH-FUN-GITTERMAST-B3-B6-2300x2300x350-000-500x1100-240x800xM36-"..sh
						else 
							return "NO-BN-3D-EH-FUN-GITTERMAST-B3-B6-1600x1800x500-100-600x1200-240x800xM36-"..sh
						end

					elseif Variant == "Betong KL-fundament, høy B6, 260x940xM36, 10000-13000" then
						if sh == 1800 then 
							return "NO-BN-3D-EH-FUN-GITTERMAST-B6-2300x2300x350-000-500x1100-260x940xM36-"..sh
						else 
							return "NO-BN-3D-EH-FUN-GITTERMAST-B6-1600x1800x500-100-600x1200-260x940xM36-"..sh
						end

					elseif Variant == "Betong KL-fundament, H3, 700x700xM36, 6000-9500" then
						return "NO-BN-3D-EH-FUN-GITTERMAST-H3-1600x"..bw.."x500-"..bo.."-1000x1000-700x700xM36-"..sh
					
					elseif Variant == "Betong KL-fundament, H3, 790x790xM36, 10000-12000" then
						return "NO-BN-3D-EH-FUN-GITTERMAST-H3-1600x"..bw.."x500-"..bo.."-1100x1100-790x790xM36-"..sh
					
					elseif Variant == "Betong KL-fundament, H3, 830x830xM36, 12500-13000" then
						return "NO-BN-3D-EH-FUN-GITTERMAST-H3-1600x"..bw.."x500-"..bo.."-1100x1100-830x830xM36-"..sh
					
					else
						return _error, "Unrecognized variant ["..Variant.."]."
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Betong KL-fundament, bjelkemast" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-BETONG-BJELKEMAST-1600x1800-000-191x374xM36-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Boret KL-fundament, Ø355-Ø232xDD27xM36" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-BETONG-BORET-Ø355-Ø232xDD27xM36-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Boret KL-fundament, Ø555-191x374xM36" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-BETONG-BORET-Ø555-191x374xM36-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Fjellbolter for KL-mast i tunnel" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-FJELLBOLTER-FOR-BRU-OG-TUNNEL-350x350xM24-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Fjellbolter for KL-mast på veggkonsoll" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-FJELLBOLTER-FOR-VEGGKONSOLL-600x700xM24-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Veggkonsoll for KL-mast" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-VEGGKONSOLL-191x374xM36-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Spesial KL-fundament" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-SPESIAL-191x374xM36-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Betong KL-fundament, lav B3 og B6, 240x800xM36, 6000-9500" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-BETONG-B3-B6-LAV-1600x1800-000-240x800xM36-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Betong KL-fundament, høy B6, 260x940xM36, 10000-13000" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-BETONG-B6-HOEY-1600x1800-000-260x940xM36-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Betong KL-fundament, H3, 700x700xM36, 6000-9500" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-BETONG-H3-1600x1800-000-700x700xM36-6000-9500-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Betong KL-fundament, H3, 790x790xM36, 10000-12000" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-BETONG-H3-1600x1800-000-790x790xM36-10000-12000-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Betong KL-fundament, H3, 830x830xM36, 12500-13000" DisplayBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-BETONG-H3-1600x1800-000-830x830xM36-12500-13000-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT-BETONG-BJELKEMAST-1600x1800-000-191x374xM36-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_FUN-KL-FUNDAMENT
				{% if    Variant == 'Betong KL-fundament, bjelkemast' %}BETONG-BJELKEMAST-1600x{{OcsFoundationBaseWidth}}-{{OcsFoundationBaseOffset}}-191x374xM36
				{% elsif Variant == 'Boret KL-fundament, Ø555-191x374xM36' %}BETONG-BORET-Ø555-191x374xM36
				{% elsif Variant == 'Boret KL-fundament, Ø355-Ø232xDD27xM36' %}BETONG-BORET-Ø355-Ø232xDD27xM36
				{% elsif Variant == 'Fjellbolter for KL-mast i tunnel' %}FJELLBOLTER-FOR-BRU-OG-TUNNEL-350x350xM24
				{% elsif Variant == 'Fjellbolter for KL-mast på veggkonsoll' %}FJELLBOLTER-FOR-VEGGKONSOLL-600x700xM24
				{% elsif Variant == 'Veggkonsoll for KL-mast' %}VEGGKONSOLL-191x374xM36
				{% elsif Variant == 'Spesial KL-fundament' %}SPESIAL-191x374xM36
				{% elsif Variant == 'Betong KL-fundament, lav B3 og B6, 240x800xM36, 6000-9500' %}BETONG-B3-B6-LAV-1600x1800-000-240x800xM36
				{% elsif Variant == 'Betong KL-fundament, høy B6, 260x940xM36, 10000-13000' %}BETONG-B6-HOEY-1600x1800-{{OcsFoundationBaseOffset}}-260x940xM36
				{% elsif Variant == 'Betong KL-fundament, H3, 700x700xM36, 6000-9500' %}BETONG-H3-1600x{{OcsFoundationBaseWidth}}-{{OcsFoundationBaseOffset}}-700x700xM36-6000-9500
				{% elsif Variant == 'Betong KL-fundament, H3, 790x790xM36, 10000-12000' %}BETONG-H3-1600x{{OcsFoundationBaseWidth}}-{{OcsFoundationBaseOffset}}-790x790xM36-10000-12000
				{% elsif Variant == 'Betong KL-fundament, H3, 830x830xM36, 12500-13000' %}BETONG-H3-1600x{{OcsFoundationBaseWidth}}-{{OcsFoundationBaseOffset}}-830x830xM36-12500-13000
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="kl-mast"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="bardun_fotplate"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="strever_fotplate"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="tunnelfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_SignalFoundation" Name="JBTKU_FUN Signalfundament" Layer="JBTKU_FUN" Color="ByLayer" Group="Underbygning/Fundamenter/Signal" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>signalfundament</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTKU@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTKU@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTKU@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Underbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Betong Hs fundament på fri linje">
    <SetValue Key="name" Value="Hs-fund. på fri linje"/>
    <SetValue Key="SignalFoundationShaftHeight" Value="1700"/>
   </Variant>
   <Variant Name="Betong Hs fundament på plattform">
    <SetValue Key="name" Value="Hs-fund. på plattform"/>
    <SetValue Key="VerticalOffset" Value="0.76"/>
    <SetValue Key="SignalFoundationShaftHeight" Value="1000"/>
   </Variant>
   <Variant Name="Betong Hs fundament, Ø300/Ø680">
    <SetValue Key="name" Value="Rundt Hs-fund, Ø680"/>
    <SetValue Key="SignalFoundationShaftHeight" Value="1800"/>
   </Variant>
   <Variant Name="Betong Ds fundament, Ø76, konisk">
    <SetValue Key="name" Value="Ds-fund."/>
   </Variant>
   <Variant Name="Betong Ds fundament, Ø76, rettsidet">
    <SetValue Key="name" Value="Ds-fund."/>
   </Variant>
   <Variant Name="Betong Ds fundament, ERTMS">
    <SetValue Key="name" Value="Ds-fund."/>
   </Variant>
   <Variant Name="Boret Hs fundament, Ø555">
    <SetValue Key="name" Value="Boret Hs-fund."/>
    <SetValue Key="SignalFoundationShaftHeight" Value="4500"/>
   </Variant>
   <Variant Name="Betong veibomdrivmaskin fundament, Ø210/Ø680">
    <SetValue Key="name" Value="Rundt Veibommaskin-fund, Ø680"/>
    <SetValue Key="SignalFoundationShaftHeight" Value="1600"/>
   </Variant>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="SignalFoundationShaftHeight" DisplayName="Fundament søylehøyde" Description="The signal foundation shaft height resp. total bored height.">
   <Values Variant="Betong Hs fundament på fri linje">
    <Value>1700</Value>
   </Values>
   <Values Variant="Betong Hs fundament på plattform">
    <Value>1000</Value>
   </Values>
   <Values Variant="Betong Hs fundament, Ø300/Ø680">
    <Value>1800</Value>
    <Value>1600</Value>
   </Values>
   <Values Variant="Betong Ds fundament, Ø76, konisk">
    <Value>400</Value>
   </Values>
   <Values Variant="Betong Ds fundament, Ø76, rettsidet">
    <Value>400</Value>
   </Values>
   <Values Variant="Betong Ds fundament, ERTMS">
    <Value>400</Value>
   </Values>
   <Values Variant="Boret Hs fundament, Ø555">
    <Value>7500</Value>
    <Value>7000</Value>
    <Value>6500</Value>
    <Value>6000</Value>
    <Value>5500</Value>
    <Value>5000</Value>
    <Value>4500</Value>
    <Value>4000</Value>
    <Value>3500</Value>
    <Value>3000</Value>
    <Value>2500</Value>
   </Values>
   <Values Variant="Betong veibomdrivmaskin fundament, Ø210/Ø680">
    <Value>1600</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKU_FUN_Signalfundament_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_FUN_Signalfundament_Geometry3DName()" ReturnType="Double" HideFromUser="false" Description="Sampled formula. Returns sideways offset for cable duct element (midway betwen end points on alignment). Must be called with '_position' as input argument (_position.ref = alignment GUID, _position.pos = distAlong).">
   <Signature>_JBTKU_FUN_Signalfundament_Geometry3DName()</Signature>
   <Formula>
				function _JBTKU_FUN_Signalfundament_Geometry3DName()
					if (Variant == "Betong Hs fundament på fri linje") then
						return "NO-BN-3D-KU-FUN-HOVEDSIGNAL-FRI-LINJE-2000x2000x300-650x650-300x300xM24-1700"
					elseif(Variant == "Betong Hs fundament på plattform") then
						return "NO-BN-3D-KU-FUN-HOVEDSIGNAL-PLATTFORM-1750x1750x300-650x650-300x300xM24-1000"
					elseif(Variant == "Betong Hs fundament, Ø300/Ø680") then
						return "NO-BN-3D-KU-FUN-HOVEDSIGNAL-Ø300xØ680-300x300xM24-"..SignalFoundationShaftHeight
					elseif(Variant == "Betong Ds fundament, Ø76, konisk") then
						return "NO-BN-3D-KU-FUN-DVERGSIGNAL-Ø76-KONISK"
					elseif(Variant == "Betong Ds fundament, Ø76, rettsidet") then
						return "NO-BN-3D-KU-FUN-DVERGSIGNAL-Ø76-RETTSIDET"
					elseif(Variant == "Betong Ds fundament, ERTMS") then
						return "NO-BN-3D-KU-FUN-DVERGSIGNAL-ERTMS" -- TODO: Make 3D model for this.
					elseif(Variant == "Boret Hs fundament, Ø555") then
						return "NO-BN-3D-KU-FUN-HOVEDSIGNAL-BORET-Ø555-164x164xM32-"..SignalFoundationShaftHeight
					elseif(Variant == "Betong veibomdrivmaskin fundament, Ø210/Ø680") then
						return "NO-BN-3D-KU-FUN-VEIBOMDRIVMASKIN-Ø210xØ680-210x210xM20-1600"
					end
				end	
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Betong Hs fundament på fri linje" DisplayBlockName="NO-BN-2D-JBTKU_FUN-SIGNALFUNDAMENT-BETONG-HS-PAA-FRI-LINJE-300x300xM24-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Betong Hs fundament på plattform" DisplayBlockName="NO-BN-2D-JBTKU_FUN-SIGNALFUNDAMENT-BETONG-HS-PAA-PLATTFORM-300x300xM24-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Betong Hs fundament, Ø300/Ø680" DisplayBlockName="NO-BN-2D-JBTKU_FUN-SIGNALFUNDAMENT-BETONG-HS-Ø300-Ø680-300x300xM24-H1800-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Betong Ds fundament, Ø76, konisk" DisplayBlockName="NO-BN-2D-JBTKU_FUN-SIGNALFUNDAMENT-BETONG-DS-KONISK-Ø76-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Betong Ds fundament, Ø76, rettsidet" DisplayBlockName="NO-BN-2D-JBTKU_FUN-SIGNALFUNDAMENT-BETONG-DS-RETTVEGGET-Ø76-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Betong Ds fundament, ERTMS" DisplayBlockName="NO-BN-2D-JBTKU_FUN-SIGNALFUNDAMENT-BETONG-DS-ERTMS-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Boret Hs fundament, Ø555" DisplayBlockName="NO-BN-2D-JBTKU_FUN-SIGNALFUNDAMENT-BETONG-BORET-Ø555-164x164xM32-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Betong veibomdrivmaskin fundament, Ø210/Ø680" DisplayBlockName="NO-BN-2D-JBTKU_FUN-SIGNALFUNDAMENT-BETONG-VEIBOMDRIVMASKIN-Ø210-Ø680-210x210xM20-H1600-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTKU_FUN-SIGNALFUNDAMENT-BETONG
				{% if Variant == 'Betong Hs fundament på fri linje' %}HS-PAA-FRI-LINJE-300x300xM24
				{% elsif Variant == 'Betong Hs fundament på plattform' %}HS-PAA-PLATTFORM-300x300xM24
				{% elsif Variant == 'Betong Hs fundament, Ø300/Ø680' %}HS-Ø300-Ø680-300x300xM24-H1800
				{% elsif Variant == 'Betong Ds fundament, Ø76, konisk' %}DS-KONISK-Ø76
				{% elsif Variant == 'Betong Ds fundament, Ø76, rettsidet' %}DS-RETTVEGGET-Ø76
				{% elsif Variant == 'Betong Ds fundament, ERTMS' %}DS-ERTMS
				{% elsif Variant == 'Boret Hs fundament, Ø555' %}BORET-Ø555-164x164xM32
				{% elsif Variant == 'Betong veibomdrivmaskin fundament, Ø210/Ø680' %}VEIBOMDRIVMASKIN-Ø210-Ø680-210x210xM20-H1600
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints Variant="Betong Hs fundament på fri linje">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="signal"/>
   </SnapPoints>
   <SnapPoints Variant="Betong Hs fundament på plattform">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="signal"/>
   </SnapPoints>
   <SnapPoints Variant="Betong Hs fundament, Ø300/Ø680">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="signal"/>
   </SnapPoints>
   <SnapPoints Variant="Betong Ds fundament, Ø76, konisk">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="signal"/>
   </SnapPoints>
   <SnapPoints Variant="Betong Ds fundament, Ø76, rettsidet">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="signal"/>
   </SnapPoints>
   <SnapPoints Variant="Betong Ds fundament, ERTMS">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="ertms_shunting_signal"/>
   </SnapPoints>
   <SnapPoints Variant="Boret Hs fundament, Ø555">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="signal"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_TelecomFoundation" Name="JBTKU_FUN Telefundament" Layer="JBTKU_FUN" Color="ByLayer" Group="Underbygning/Fundamenter/Tele" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>telefundament</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTKU@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTKU@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTKU@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Underbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Betongfundament, anvisersøyle"/>
   <Variant Name="Betongfundament, monitor"/>
   <Variant Name="Betongfundament, validator"/>
   <Variant Name="Betongfundament, tele- og fordelingsskap"/>
  </Variants>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>NOBN_sub_getFoundationCode()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>tostring(code):upper():match("UNFINISHED") and "" or code</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKU_FUN_TelecomFoundation_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_FUN_TelecomFoundation_Geometry3DName()" ReturnType="String" Description="Returns the cabinet foundation's 3D geometry name.">
   <Signature>String _JBTKU_FUN_TelecomFoundation_Geometry3DName()</Signature>
   <Formula>
				function _JBTKU_FUN_TelecomFoundation_Geometry3DName()
					if Variant == "Betongfundament, anvisersøyle" then
						return "NO-BN-3D-KU-FUN-TELE-ANVISERSYØYLE-1500x1500x1000-Ø600"
					elseif Variant == "Betongfundament, monitor" then
						return "NO-BN-3D-KU-FUN-TELE-MONITOR-1000x1000x1000-Ø600"
					elseif Variant == "Betongfundament, validator" then
						return "NO-BN-3D-KU-FUN-TELE-BILLETT-VALIDATOR-360x300x500"
					elseif Variant == "Betongfundament, tele- og fordelingsskap" then
						return "NO-BN-3D-KU-FUN-TELE-FORDELINGSSKAP-900x800x910"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Betongfundament, anvisersøyle" DisplayBlockName="NO-BN-2D-JBTKU_FUN-TELEFUNDAMENT-BETONG-ANVISERSOEYLE-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Betongfundament, monitor" DisplayBlockName="NO-BN-2D-JBTKU_FUN-TELEFUNDAMENT-BETONG-MONITOR-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Betongfundament, validator" DisplayBlockName="NO-BN-2D-JBTKU_FUN-TELEFUNDAMENT-BETONG-VALIDATOR-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Betongfundament, tele- og fordelingsskap" DisplayBlockName="NO-BN-2D-JBTKU_FUN-TELEFUNDAMENT-BETONG-TELESKAP-OG-FORDELINGSSKAP-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTKU_FUN-TELEFUNDAMENT
				{% if Variant == 'Betongfundament, anvisersøyle' %}BETONG-ANVISERSOEYLE
				{% elsif Variant == 'Betongfundament, monitor' %}BETONG-MONITOR
				{% elsif Variant == 'Betongfundament, validator' %}BETONG-VALIDATOR
				{% elsif Variant == 'Betongfundament, tele- og fordelingsskap' %}BETONG-TELESKAP-OG-FORDELINGSSKAP
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints Variant="Betongfundament, anvisersøyle">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="anvisersøyle"/>
   </SnapPoints>
   <SnapPoints Variant="Betongfundament, monitor">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="monitor"/>
   </SnapPoints>
   <SnapPoints Variant="Betongfundament, validator">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="validator"/>
   </SnapPoints>
   <SnapPoints Variant="Betongfundament, tele- og fordelingsskap">
    <SnapPoint X="0.0" Y="0.0" TargetSpace="fordelingsskap"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_MinorPoleFixing" Name="JBTKU_SKF Skiltfeste" Layer="JBTKU_SKF" Color="ByLayer" Group="Underbygning/Skiltfester" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skiltfeste</RelationSpace>
  <AttachmentCategory Name="skiltfeste"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTKU@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTKU@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTKU@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Underbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Betongfundament (h=500mm)">
    <SetValue Key="name" Value="Ø60/b225/h500"/>
   </Variant>
   <Variant Name="Betongfundament (h=700mm)">
    <SetValue Key="name" Value="Ø60/b225/h700"/>
   </Variant>
   <Variant Name="Betongfundament (h=1200mm)">
    <SetValue Key="name" Value="Ø60/Ø200/h1200"/>
   </Variant>
   <Variant Name="Jordfundament">
    <SetValue Key="name" Value="Ø60/jordfund."/>
   </Variant>
   <Variant Name="Jordspyd (60cm dypt)">
    <SetValue Key="name" Value="Ø60/jordspyd"/>
   </Variant>
   <Variant Name="Tilbakefylt grop">
    <SetValue Key="name" Value="Tilbakefylt grop"/>
   </Variant>
   <Variant Name="Strips eller patentbånd">
    <SetValue Key="name" Value="Strips m.m."/>
   </Variant>
   <Variant Name="Brakett mot gulv">
    <SetValue Key="name" Value="Ø60/gulv"/>
   </Variant>
   <Variant Name="Brakett mot vegg">
    <SetValue Key="name" Value="Ø60/vegg"/>
    <SetValue Key="VerticalOffset" Value="2.5"/>
   </Variant>
   <Variant Name="Brakett på annen mast">
    <SetValue Key="name" Value="Brakett på annen mast"/>
   </Variant>
  </Variants>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>if Variant:find("Brakett mot vegg") then return 2.5 else return 0 end</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKU_SKF_MinorPoleFixing_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKU_SKF_MinorPoleFixing_Geometry3DName()" ReturnType="String" Description="Returns the pole fixing's 3D geometry name.">
   <Signature>String _JBTKU_SKF_MinorPoleFixing_Geometry3DName()</Signature>
   <Formula>
				function _JBTKU_SKF_MinorPoleFixing_Geometry3DName()
					if Variant == "Betongfundament (h=500mm)" then
						return "NO-BN-3D-KU-SKF-SKILTFESTE-BETONGFOT-Ø60-145..215x500"
					elseif Variant == "Betongfundament (h=700mm)" then
						return "NO-BN-3D-KU-SKF-SKILTFESTE-BETONGFOT-Ø60-145..215x700"
					elseif Variant == "Betongfundament (h=1200mm)" then
						return "NO-BN-3D-KU-SKF-SKILTFESTE-BETONGFOT-Ø60-Ø200x1200"
					elseif Variant == "Jordfundament" then
						return "NO-BN-3D-KU-SKF-SKILTFESTE-JORDFUNDAMENT-Ø60-700"
					elseif Variant == "Jordspyd (60cm dypt)" then
						return "NO-BN-3D-KU-SKF-SKILTFESTE-JORDSPYD-Ø60"
					elseif Variant == "Tilbakefylt grop" then
						return "NO-BN-3D-KU-SKF-SKILTFESTE-TILBAKEFYLT-BALLASTGROP"
					elseif Variant == "Strips eller patentbånd" then
						return "NO-BN-3D-KU-SKF-SKILTFESTE-PATENTBÅND"
					elseif Variant == "Brakett mot gulv" then
						return "NO-BN-3D-KU-SKF-SKILTFESTE-BRAKETT-MOT-GULV-Ø60-200x200x308"
					elseif Variant == "Brakett mot vegg" then
						return "NO-BN-3D-KU-SKF-SKILTFESTE-BRAKETT-MOT-VEGG-Ø60-150x120x119"
					elseif Variant == "Brakett på annen mast" then
						return "NO-BN-3D-KU-SKF-SKILTFESTE-BRAKETT-MOT-MAST"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Betongfundament (h=500mm)" DisplayBlockName="NO-BN-2D-JBTKU_SKF-SKILTFESTE-BETONGFOT-60-225-500-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" EnableDirectionSetting="true" AddAngle="0"/>
  </InsertPointObject>
  <InsertPointObject Name="Betongfundament (h=700mm)" DisplayBlockName="NO-BN-2D-JBTKU_SKF-SKILTFESTE-BETONGFOT-60-225-700-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" EnableDirectionSetting="true" AddAngle="0"/>
  </InsertPointObject>
  <InsertPointObject Name="Betongfundament (h=1200mm)" DisplayBlockName="NO-BN-2D-JBTKU_SKF-SKILTFESTE-BETONGFOT-60-200-1200-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" EnableDirectionSetting="true" AddAngle="0"/>
  </InsertPointObject>
  <InsertPointObject Name="Jordfundament" DisplayBlockName="NO-BN-2D-JBTKU_SKF-SKILTFESTE-JORDFUNDAMENT-60-700-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" EnableDirectionSetting="true" AddAngle="0"/>
  </InsertPointObject>
  <InsertPointObject Name="Jordspyd (60cm dypt)" DisplayBlockName="NO-BN-2D-JBTKU_SKF-SKILTFESTE-JORDSPYD-60-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" EnableDirectionSetting="true" AddAngle="0"/>
  </InsertPointObject>
  <InsertPointObject Name="Tilbakefylt grop" DisplayBlockName="NO-BN-2D-JBTKU_SKF-SKILTFESTE-TILBAKEFYLT-GROP-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" EnableDirectionSetting="true" AddAngle="0"/>
  </InsertPointObject>
  <InsertPointObject Name="Strips eller patentbånd" DisplayBlockName="NO-BN-2D-JBTKU_SKF-SKILTFESTE-STRIPS-ELLER-PATENTBÅND-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" EnableDirectionSetting="true" AddAngle="0"/>
  </InsertPointObject>
  <InsertPointObject Name="Brakett på annen mast" DisplayBlockName="NO-BN-2D-JBTKU_SKF-SKILTFESTE-BRAKETT-PÅ-ANNEN-MAST-{{SymbolMode}}" SnapToAlignment="true" SnapDistance="3.5">
   <JigSymbolAppearance EnableDirectionSetting="true" AddAngle="-90"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Brakett mot vegg" DisplayBlockName="NO-BN-2D-JBTKU_SKF-SKILTFESTE-BRAKETT-MOT-VEGG-60-110-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" EnableDirectionSetting="true" AddAngle="0"/>
   <SetValue Key="VerticalOffset" Value="2.5"/>
  </InsertPointObject>
  <InsertPointObject Name="Brakett mot gulv" DisplayBlockName="NO-BN-2D-JBTKU_SKF-SKILTFESTE-BRAKETT-MOT-GULV-60-308-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" EnableDirectionSetting="true" AddAngle="0"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTKU_SKF-SKILTFESTE-BETONGFOT-60-225-700-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTKU_SKF-SKILTFESTE
				{% if Variant == 'Betongfundament (h=500mm)' %}BETONGFOT-60-225-500
				{% elsif Variant == 'Betongfundament (h=700mm)' %}BETONGFOT-60-225-700
				{% elsif Variant == 'Betongfundament (h=1200mm)' %}BETONGFOT-60-200-1200
				{% elsif Variant == 'Jordfundament' %}JORDFUNDAMENT-60-700
				{% elsif Variant == 'Jordspyd (60cm dypt)' %}JORDSPYD-60
				{% elsif Variant == 'Brakett mot gulv' %}BRAKETT-MOT-GULV-60-308
				{% elsif Variant == 'Brakett på annen mast' %}BRAKETT-PÅ-ANNEN-MAST
				{% elsif Variant == 'Brakett mot vegg' %}BRAKETT-MOT-VEGG-60-110
				{% elsif Variant == 'Tilbakefylt grop' %}TILBAKEFYLT-GROP
				{% elsif Variant == 'Strips eller patentbånd' %}STRIPS-ELLER-PATENTBÅND
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="skilt"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="stolpe"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="skilt_mot_vei"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <LuaFunction Name="NOBN_trk_getFoulingPointReferenceMileage()" ReturnType="String" Description="Returns the reference mileage for the fouling point being farthest from the stock rail joint, using reference alignment mileage. Assumes caller is a switch unless argument 'v' is given.">
  <Signature>String NOBN_trk_getFoulingPointReferenceMileage(tSwitch v)</Signature>
  <Formula>
			function NOBN_trk_getFoulingPointReferenceMileage(v)
				if v == nil then v = getObjectFromId(id) end
				if v.RcType ~= rctype_Switch then
					return "Bad object type ["..RcType.."], '"..rctype_Switch.."' was expected"
				else
					local fp,dmax,w,d
					fp = getFoulingPoints(v)
					dmax = 0
					w = nil
					for i = 0,fp.Count-1 do
						d = math.sqrt((fp[i].FoulingPoint.x - v.geocoord.x)^2 + (fp[i].FoulingPoint.y - v.geocoord.y)^2)
						if d &gt; dmax then
							dmax = d
							w = fp[i].Branch1.ReferenceMileage
						end
					end
					if dmax == 0 then
						return "(no fouling points found)"
					else
						return w
					end
				end
			end 
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_trk_getFoulingPointMileage()" ReturnType="String" Description="Returns the own alignment mileage for the fouling point being farthest from the stock rail joint, using own alignment mileage. Assumes caller is a switch unless argument 'v' is given.">
  <Signature>String NOBN_trk_getFoulingPointMileage(tSwitch v)</Signature>
  <Formula>
			function NOBN_trk_getFoulingPointMileage(v)
				if v == nil then v = getObjectFromId(id) end
				if v.RcType ~= rctype_Switch then
					return "Bad object type ["..RcType.."], '"..rctype_Switch.."' was expected"
				else
					local fp,dmax,w,i,d
					fp = getFoulingPoints(v)
					dmax = 0
					w = nil
					for i = 0,fp.Count-1 do
						d = math.sqrt((fp[i].FoulingPoint.x - v.geocoord.x)^2 + (fp[i].FoulingPoint.y - v.geocoord.y)^2)
						if d &gt; dmax then
							dmax = d
							w = fp[i].Branch1.Mileage
						end
					end
					if dmax == 0 then
						return "(no fouling points found)",_warning
					else
						return w
					end
				end
			end 
		</Formula>
 </LuaFunction>
 <ObjectType DataType="RailCOMPLETEContinuation" Class="RailwayPlacedObject" LuaName="rctype_TrackContinuation" Name="JBTKO_SPF Sporfortsettelse" Layer="JBTKO_SPF" Color="ByLayer" Group="Overbygning/Sporfortsettelser">
  <RelationSpace>sporfortsettelse</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="1" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="0.5" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="-1.8" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="2.4" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>NOBN_trk_getLiftFromCant()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_AlignmentType" DisplayName="Alignment type" Description="The alignments must be compatible."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Continuity" DisplayName="Continuity" Description="The alignments shall end in the same XY point (seen from the above)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Tangent" DisplayName="Tangent direction" Description="The alignments shall share the same tangent (i.e., XY-plane differentiability)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Elevation" DisplayName="Elevation" Description="The alignments shall share the same elevation (Z-coordinate)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Gradient" DisplayName="Gradient" Description="The alignments shall share the same gradient (pitch [o/oo])."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Cant" DisplayName="Cant" Description="The alignments shall share the same cant (roll / superelevation [mm]) where they meet."/>
  <LuaExpression Name="mc_AlignmentType" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionAlignmentCompatibility()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Continuity" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionContinuity()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Tangent" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionTangentMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Elevation" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionElevationMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Gradient" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionGradientMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Cant" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionCantMatch()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Sporfortsettelse">
   <Variant Name="Sporfortsettelse"></Variant>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
  </DynamicProperty>
  <LuaExpression Name="code">
   <Formula>_JBTKO_SPF_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SPF_code()" ReturnType="String" Description="Returns a formated string containing the code properties '[Code1] --- [Code2]' for the two tracks that meet in a track continuation.">
   <Signature>String _JBTKO_SPF_code()</Signature>
   <Formula>
				function _JBTKO_SPF_code()
					local first,second
					if RcType ~= rctype_TrackContinuation then
						return _error, "Bad object type ["..RcType.."] - '"..rctype_TrackContinuation.."' was expected."
					else
						first = Alignment
						if first == nil then
							return "Bad or missing alignment reference",_warning
						elseif Alignment.RcType ~= rctype_Track then
							return "Cannot connect to alignments of type '"..Alignment.RcType.."'.",_warning
						end
						second = TargetAlignment
						if second == nil then
							return "Bad or missing continuing alignment reference",_warning
						elseif TargetAlignment.RcType ~= rctype_Track then
							return "Cannot connect to alignments of type '"..TargetAlignment.RcType.."'.",_warning
						end
						if first.id == second.id then
							return _error, "Own alignment and continuing alignment cannot be the same ["..first.code.."]"
						end
						--2021-08-23 CLFEY: Leave the text as-is, emphasize showing what is own / what is target:
						--if MileageIncreasesTowardsLeft then
						--	first,second = second,first 
						--end
						return "["..first.code.."] ==&gt; ["..second.code.."]"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <LuaExpression Name="Mileage">
   <Formula>_JBTKO_SPF_mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SPF_mileage()" ReturnType="Double" Description="Obtains the mileage from its alignment.">
   <Signature>Double _JBTKO_SPF_mileage()</Signature>
   <Formula>
				function _JBTKO_SPF_mileage()
					local ai = getAlignmentInfo()
					if RC__isNan(ai.RelativePosition) then return nil, _info("Position not found - move object inside the extent of its own alignment.") end
					return ai.RelativePosition &lt; (Alignment.RcAlignment.HorizontalGeometry.Length - ai.RelativePosition)
							and Alignment.RcAlignment.StartMileage or Alignment.RcAlignment.EndMileage
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="TargetAlignment">
   <Formula>_JBTKO_SPF_TargetAlignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SPF_TargetAlignment()" ReturnType="Double" Description="Obtains the target alignment, as long as its snaps to own alignment close to this continuation object.">
   <Signature>Double _JBTKO_SPF_TargetAlignment()</Signature>
   <Formula>
				function _JBTKO_SPF_TargetAlignment()
					return getNearbyAlignments(Alignment.RcType):filter(function (x) return x.id ~= Alignment.id end)[0]
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Sporfortsettelse" DisplayBlockName="NO-BN-2D-JBTKO_SPF-FORBINDELSE-FORTSETTELSE-0-0-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="false" Layer="JBTKO$SPF" Color="ByBlock" Linetype="ByBlock" Lineweight="ByBlock" Transparency="ByBlock">
   <Rotation Add180DegreesIfDirIsDown="true"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTKO_SPF-FORBINDELSE-FORTSETTELSE
				{% if ExtendingFromEnd == 'True' %}
					{% if ContinuingWithBegin == 'False' %}0-1{% else %}0-0{% endif %}
				{% else %}
					{% if ContinuingWithBegin == 'False' %}0-0{% else %}1-0{% endif %}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="eCrossing" Class="RailwayPlacedObject" LuaName="rctype_SwitchCrossing" Name="JBTKO_SPV Sporkryss" Layer="JBTKO_SPV" Color="ByLayer" Group="Overbygning/Sporkryss">
  <RelationSpace>sporkryss</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="1" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="0.5" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="-1.8" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="2.4" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>NOBN_trk_getLiftFromCant()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_AlignmentType" DisplayName="Alignment type" Description="Both alignments must be railway tracks."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Continuity" DisplayName="Continuity" Description="The crossing shall be located where the tracks' center lines cross (as seen from the above, ignoring Z)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Tangent" DisplayName="Tangent direction" Description="The tracks are expected to cross at 2:9 or 2:12 (corresponding to 1:9 or 1:12 coupled switches)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Elevation" DisplayName="Elevation" Description="The tracks shall share the same elevation (Z-coordinate) at the crossing point."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_GradientAndCant" DisplayName="Rail plane" Description="The tracks shall share the same combined gradient and cant (belonging to a possibly inclined plane in space)."/>
  <LuaExpression Name="mc_AlignmentType" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionAlignmentCompatibility()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Continuity" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionContinuity()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Tangent" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionTangentMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Elevation" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionElevationMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_GradientAndCant" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionGradientAndCantMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="Var1">
   <Formula>NOBN_trk_chkConnectionGradientAndCantMatch("Var1")</Formula>
  </LuaExpression>
  <LuaExpression Name="Var2">
   <Formula>NOBN_trk_chkConnectionGradientAndCantMatch("Var2")</Formula>
  </LuaExpression>
  <Variants DefaultValue="Sporkryss">
   <Variant Name="Sporkryss"></Variant>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTKO_SPV_crossingCode()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SPV_crossingCode()" ReturnType="String" Description="Returns a formated string containing the code properties '[Code1] -X- [Code2]' for the two tracks that meet in a track crossing.">
   <Signature>String _JBTKO_SPV_crossingCode()</Signature>
   <Formula>
				function _JBTKO_SPV_crossingCode()
					local first,second
					if RcType ~= rctype_SwitchCrossing then
						return "Bad object type ["..RcType.."], '"..rctype_SwitchCrossing.."' was expected."
					else
						first = Alignment
						if first == nil then
							return "Bad or missing alignment reference",_warning
						end
						second = TargetAlignment
						if second == nil then
							return "Bad or missing intersecting alignment reference",_warning
						end
						if first.id == second.id then
							return "Alignment and intersecting alignment cannot be the same ["..first.code.."]"
						end
						if MileageIncreasesTowardsLeft then
							first,second = second,first 
						end
						return "["..first.code.."] -X- ["..second.code.."]"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <InsertPointObject Name="Sporkryss" DisplayBlockName="NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORKRYSS-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORKRYSS-{{SymbolMode}}" AllowSymbolMove="false" Layer="JBTKO$SPV" Color="ByBlock" Linetype="ByBlock" Lineweight="ByBlock" Transparency="ByBlock">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="0"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="eSwitch" Class="RailwayPlacedObject" LuaName="rctype_Switch" Name="JBTKO_SPV Sporveksel" Layer="JBTKO_SPV" Color="ByLayer" Group="Overbygning/Sporveksler" AttAddX="
					{%    if Variant == '1:7 R190 FX 54E3 (KO-800157)' %}13.503
					{% elsif Variant == '1:9 R190 FX 54E3 (KO-701334)' %}10.523
					
					{% elsif Variant == '1:8.21 R300 BX 60E1 (KO-065306)' %}18.188
					{% elsif Variant == '1:9 R300 FX 54E3 (KO-701287)' %}16.616
					{% elsif Variant == '1:9 R300 FX 60E1 (KO-701409)' %}16.615
					{% elsif Variant == '1:9 R300 BX 60E1 (KO-800099)' %}16.615

					{% elsif Variant == '1:11.66 R500 FX 60E1 (KO-800068)' %}21.393
					{% elsif Variant == '1:12 R500 FX 54E3 (KO-701306)' %}20.797
					{% elsif Variant == '1:12 R500 FX 60E1 (KO-800068)' %}20.797
					{% elsif Variant == '1:12 R500 BX 60E1 (KO-800090)' %}20.797

					{% elsif Variant == '1:14 R760 FX 54E3 (KO-701319)' %}27.108
					{% elsif Variant == '1:14 R760 FX 60E1 (KO-701372)' %}27.108
					{% elsif Variant == '1:14 R760 BX 60E1 (KO-800108)' %}27.108
					{% elsif Variant == '1:15 R760 FX 60E1 (KO-701382)' %}25.305
					{% elsif Variant == '1:15 R760 BX 60E1 (KO-800164)' %}25.305

					{% elsif Variant == '1:18.4 R1200 BX 60E1 (KO-800081)' %}32.829

					{% elsif Variant == '1:26.1 R2500 BX 60E1 (KO-701399)' %}48.109
					{% endif %}" AttMirrorX="{% if quadrant == '2' or quadrant == '3' %}true{% else %}false{% endif %}" AttMirrorY="{% if quadrant == '1' or quadrant == '2' %}true{% else %}false{% endif %}">
  <ObjectTypeAttribute Key="quadrant" Value="{% if dir == 'up' and SwitchGeometry == 'left' %}1{% elsif dir == 'down' and SwitchGeometry == 'right' %}2{% elsif dir == 'down' and SwitchGeometry == 'left' %}3{% elsif dir == 'up' and SwitchGeometry == 'right' %}4{% endif %}"/>
  <SetValue Key="ConnectionCourse" Value="{% if insertionDirection == 'up' %}{{insertionSide}}{% else %}{% if insertionSide == 'right' %}left{% else %}right{% endif %}{% endif %}"/>
  <SetValue Key="SwitchGeometry" Value="{{ConnectionCourse}}"/>
  <SetValue Key="dir" Value="{{insertionDirection}}"/>
  <RelationSpace>sporveksel</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="Variant" CadAttributeTag="BETEGNELSE" X="0" Y="6.5" Layer="JBTKO@SPV_TYPE" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <SetValue Key="Geometry3D_0.Frozen" Value="True"/>
  <DynamicProperty Type="Representation3D" Subtype="Annotation3D">
   <LuaExpression Name="Contents">
    <Formula>_JBTKO_SPV_Annotation3D()</Formula>
   </LuaExpression>
   <SetValue Key="Parent" Value="ACS"/>
   <LuaExpression Name="Justify">
    <Formula>dir == "up" and "MiddleLeft" or "MiddleRight"</Formula>
   </LuaExpression>
   <SetValue Key="TextHeight" Value="1.000"/>
   <SetValue Key="TextThickness" Value="0.150"/>
   <SetValue Key="TextStyle3D" Value="Standard"/>
   <SetValue Key="Offset.Z" Value="0.5"/>
   <SetValue Key="Rotation.Z" Value="90"/>
   <SetValue Key="RotationBeforeOffset" Value="False"/>
  </DynamicProperty>
  <LuaFunction Name="_JBTKO_SPV_Annotation3D()" ReturnType="String" Description="Returns info about switch placement for use in 3D projections.">
   <Signature>_JBTKO_SPV_Annotation3D()</Signature>
   <Formula>
				function _JBTKO_SPV_Annotation3D()
					return "Km."..NOBN_trk_toKm(ReferenceMileage).."\\P".."V."..code
				end
			</Formula>
  </LuaFunction>
  <Variants DefaultValue="Generell sporveksel">
   <Variant Name="Generell sporveksel" Description="A two-way switch which does not match any of the predefined geometries stored in the administration's switch definition file.">
    <SetValue Key="type" Value="other:unspecified"/>
    <SetValue Key="trackContinueRadius" Value="0"/>
   </Variant>
   <Variant Name="1:7 R190 FX 54E3 (KO-800157)" Description="1:7(R190) two-way switch, fixed nose crossing, 54-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="190"/>
    <SetValue Key="SwitchNoseType" Value="FIXED"/>
   </Variant>
   <Variant Name="1:9 R190 FX 54E3 (KO-701334)" Description="1:9(R190) two-way switch, fixed nose crossing, 54-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="190"/>
    <SetValue Key="SwitchNoseType" Value="FIXED"/>
   </Variant>
   <Variant Name="1:8.21 R300 BX 60E1 (KO-065306)" Description="1:8.21(R300) two-way switch, movable nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="300"/>
    <SetValue Key="SwitchNoseType" Value="MOVABLE"/>
   </Variant>
   <Variant Name="1:9 R300 FX 54E3 (KO-701287)" Description="1:9(R300) two-way switch, fixed nose crossing, 54-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="300"/>
    <SetValue Key="SwitchNoseType" Value="FIXED"/>
   </Variant>
   <Variant Name="1:9 R300 FX 60E1 (KO-701409)" Description="1:9(R300) two-way switch, fixed nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="300"/>
    <SetValue Key="SwitchNoseType" Value="FIXED"/>
   </Variant>
   <Variant Name="1:9 R300 BX 60E1 (KO-800099)" Description="1:9(R300) two-way switch, movable nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="300"/>
    <SetValue Key="SwitchNoseType" Value="MOVABLE"/>
   </Variant>
   <Variant Name="1:11.66 R500 FX 60E1 (KO-800068)" Description="1:11.66(R500) two-way switch, fixed nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="500"/>
    <SetValue Key="SwitchNoseType" Value="FIXED"/>
   </Variant>
   <Variant Name="1:12 R500 FX 54E3 (KO-701306)" Description="1:12(R500) two-way switch, fixed nose crossing, 54-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="500"/>
    <SetValue Key="SwitchNoseType" Value="FIXED"/>
   </Variant>
   <Variant Name="1:12 R500 FX 60E1 (KO-800068)" Description="1:12(R500) two-way switch, fixed nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="500"/>
    <SetValue Key="SwitchNoseType" Value="FIXED"/>
   </Variant>
   <Variant Name="1:12 R500 BX 60E1 (KO-800090)" Description="1:12(R500) two-way switch, movabnle nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="500"/>
    <SetValue Key="SwitchNoseType" Value="MOVABLE"/>
   </Variant>
   <Variant Name="1:14 R760 FX 54E3 (KO-701319)" Description="1:14(R760) two-way switch, fixed nose crossing, 54-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="760"/>
    <SetValue Key="SwitchNoseType" Value="FIXED"/>
   </Variant>
   <Variant Name="1:14 R760 FX 60E1 (KO-701372)" Description="1:14(R760) two-way switch, fixed nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="760"/>
    <SetValue Key="SwitchNoseType" Value="FIXED"/>
   </Variant>
   <Variant Name="1:14 R760 BX 60E1 (KO-800108)" Description="1:14(R760) two-way switch, movable nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="760"/>
    <SetValue Key="SwitchNoseType" Value="MOVABLE"/>
   </Variant>
   <Variant Name="1:15 R760 FX 60E1 (KO-701382)" Description="1:15(R760) two-way switch, fixed nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="760"/>
    <SetValue Key="SwitchNoseType" Value="FIXED"/>
   </Variant>
   <Variant Name="1:15 R760 BX 60E1 (KO-800164)" Description="1:15(R760) two-way switch, movable nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="760"/>
    <SetValue Key="SwitchNoseType" Value="MOVABLE"/>
   </Variant>
   <Variant Name="1:18.4 R1200 BX 60E1 (KO-800081)" Description="1:18.4(R1200) two-way switch, movable nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="1200"/>
    <SetValue Key="SwitchNoseType" Value="MOVABLE"/>
   </Variant>
   <Variant Name="1:26.1 R2500 BX 60E1 (KO-701399)" Description="1:26.1(R760) two-way switch, movable nose crossing, 60-kg rails.">
    <SetValue Key="type" Value="ordinarySwitch"/>
    <SetValue Key="trackContinueRadius" Value="2500"/>
    <SetValue Key="SwitchNoseType" Value="MOVABLE"/>
   </Variant>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="SwitchControlAndLocking" DisplayName="Omlegging / Låsing" DefaultValue="RM" Category="Connections" Description="The 'SwitchControlAndLocking' custom property [RM | PL | PR | PB | PN | HL | HR | HB | HN ] defines the switch control and locking type. The abbreviations mean: R='Remote controlled'. P='Pushbutton, electrically operated'. H='Hand operated (hand thrown)'. M='Machine locked (using a point machine or clamping device, with end position detection)'. L='Keylocked for left switch leg train movements'. R='Keylocked for right switch leg train movements'. B='Keylocked for both right and left switch leg train movements (one at a time)'. N='Not interlocked'.">
   <Values>
    <Value DisplayName="Sentralstilt, maskinlåst" Description="Remote controlled, machine locked">RM</Value>
    <Value DisplayName="Kastelodd, kontrollåst V" Description="Hand thrown, keylocked for left switch leg train movements">HL</Value>
    <Value DisplayName="Kastelodd, kontrollåst H" Description="Hand thrown, keylocked for right switch leg train movements">HR</Value>
    <Value DisplayName="Kastelodd, kontrollåst HV" Description="Hand thrown, keylocked for both right and left switch leg train movements (one at a time)">HB</Value>
    <Value DisplayName="Kastelodd, uforriglet" Description="Hand thrown, not interlocked">HN</Value>
    <Value DisplayName="Trykknapp, kontrollåst V" Description="Pushbutton controlled, keylocked for left switch leg train movements (one at a time)">PL</Value>
    <Value DisplayName="Trykknapp, kontrollåst H" Description="Pushbutton controlled, keylocked for right switch leg train movements">PR</Value>
    <Value DisplayName="Trykknapp, kontrollåst HV" Description="Pushbutton controlled, keylocked for both right and left switch leg train movements">PB</Value>
    <Value DisplayName="Trykknapp, uforriglet" Description="Pushbutton controlled, not interlocked">PN</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="SwitchElectrification" DisplayName="Ledningsføring" DefaultValue="Both" Category="Connections" Description="The 'SwitchElectrification' custom property [Both | Left | Right | Unknown] defines the switch electrification (both/left/right driving directions are electrified).">
   <Values>
    <Value DisplayName="Begge spor" Description="Both switch legs are electrified">BOTH</Value>
    <Value DisplayName="Enkelt spor venstre" Description="Only left switch leg is electrified">LEFT</Value>
    <Value DisplayName="Enkelt spor høyre" Description="Only right switch leg is electrified">RIGHT</Value>
    <Value DisplayName="Udefinert" Description="Switch leg electrification is unknown">UNKNOWN</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="SwitchNoseType" DisplayName="Fast eller bevegelig kryss" DefaultValue="UNKNOWN" Category="Connections" Description="The 'SwitchNoseType' custom property [Fixed | Movable] defines the type of switch nose (point frog), fixed or movable.">
   <Values>
    <Value DisplayName="Fast">FIXED</Value>
    <Value DisplayName="Bevegelig">MOVABLE</Value>
    <Value DisplayName="Udefinert">UNKNOWN</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_AlignmentType" DisplayName="Alignment type" Description="Both alignments must be railway tracks."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Continuity" DisplayName="Continuity" Description="The switch's stock rail joint must be located on its own alignment, the branching track shall start or end in the through track."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Tangent" DisplayName="Tangent direction" Description="The tracks shall share the same tangent where they meet (i.e., XY-plane differentiability when turning out) ."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Elevation" DisplayName="Elevation" Description="The through track and the branch track shall share the same elevation at the stock rail joint (Z-coordinate)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Gradient" DisplayName="Gradient" Description="The tracks shall share the same  gradient (pitch) at the stock rail joint [o/oo]."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Cant" DisplayName="Cant" Description="The tracks shall share the same cant (roll / superelevation) at the stock rail joint [mm]."/>
  <LuaExpression Name="mc_AlignmentType" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionAlignmentCompatibility()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Continuity" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionContinuity()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Tangent" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionTangentMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Elevation" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionElevationMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Gradient" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionGradientMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Cant" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionCantMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>_JBTKO_SPV_switchCode()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SPV_switchCode()" ReturnType="String" Description="Returns a formated string containing the code properties '[Code1] -X- [Code2]' for the two tracks that meet in a track crossing.">
   <Signature>String _JBTKO_SPV_switchCode()</Signature>
   <Formula>
				function _JBTKO_SPV_switchCode()
					local first,second
					if RcType ~= rctype_Switch then
						return "Bad object type ["..RcType.."], '"..rctype_Switch.."' was expected"
					else
						first = Alignment
						if first == nil then
							return "Bad or missing alignment reference",_warning
						end
						second = TargetAlignment
						if second == nil then
							return "Bad or missing branching alignment reference",_warning
						end
						if first.id == second.id then
							return "Alignment and branching alignment cannot be the same ["..first.code.."]"
						end
						return "["..Alignment.code.."] -&gt; ["..TargetAlignment.code.."]"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SPV_switchGeometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SPV_switchGeometry3DName()" ReturnType="String" Description="Returns 3D geometry's 'Name' according to switch variant.">
   <Signature>String _JBTKO_SPV_switchGeometry3DName(tSwitch v)</Signature>
   <Formula>
				function _JBTKO_SPV_switchGeometry3DName(v)
					v = v or this
					if v.RcType ~= rctype_Switch then
						return "Bad object type ["..RcType.."], '"..rctype_Switch.."' was expected"
					end
					local sideOfTrack = SwitchGeometry:upper() == "RIGHT" and "H" or "V"
					local suffix = SwitchNoseType:upper() == "FIXED" and "-FX" or "-BX" --Fixed or movable X-ing

					-- R190:
					if Variant == "1:7 R190 FX 54E3 (KO-800157)" then
						return "NO-BN-3D-KO-SPV-54E3-1-7-R190-"..sideOfTrack..suffix
					elseif Variant == "1:9 R190 FX 54E3 (KO-701334)" then
						return "NO-BN-3D-KO-SPV-54E3-1-9-R190-"..sideOfTrack..suffix					

					-- R300:
					elseif Variant == "1:8.21 R300 BX 60E1 (KO-065306)" then
						return "NO-BN-3D-KO-SPV-60E1-1-8.21-R300-"..sideOfTrack..suffix
					elseif Variant == "1:9 R300 FX 54E3 (KO-701287)" then
						return "NO-BN-3D-KO-SPV-54E3-1-9-R300-"..sideOfTrack..suffix
					elseif Variant == "1:9 R300 FX 60E1 (KO-701409)" then
						return "NO-BN-3D-KO-SPV-60E1-1-9-R300-"..sideOfTrack..suffix
					elseif Variant == "1:9 R300 BX 60E1 (KO-800099)" then
						return "NO-BN-3D-KO-SPV-60E1-1-9-R300-"..sideOfTrack..suffix

					-- R500:
					elseif Variant == "1:11.66 R500 FX 60E1 (KO-800068)" then
						return "NO-BN-3D-KO-SPV-60E1-1-11.66-R500-"..sideOfTrack..suffix
					elseif Variant == "1:12 R500 FX 54E3 (KO-701306)" then
						return "NO-BN-3D-KO-SPV-54E3-1-12-R500-"..sideOfTrack..suffix
					elseif Variant == "1:12 R500 FX 60E1 (KO-800068)" then
						return "NO-BN-3D-KO-SPV-60E1-1-12-R500-"..sideOfTrack..suffix
					elseif Variant == "1:12 R500 BX 60E1 (KO-800090)" then
						return "NO-BN-3D-KO-SPV-60E1-1-12-R500-"..sideOfTrack..suffix

					-- R760:
					elseif Variant == "1:14 R760 FX 54E3 (KO-701319)" then
						return "NO-BN-3D-KO-SPV-54E3-1-14-R760-"..sideOfTrack..suffix
					elseif Variant == "1:14 R760 FX 60E1 (KO-701372)" then
						return "NO-BN-3D-KO-SPV-60E1-1-14-R760-"..sideOfTrack..suffix
					elseif Variant == "1:14 R760 BX 60E1 (KO-800108)" then
						return "NO-BN-3D-KO-SPV-60E1-1-14-R760-"..sideOfTrack..suffix
					elseif Variant == "1:15 R760 FX 60E1 (KO-701382)" then
						return "NO-BN-3D-KO-SPV-60E1-1-15-R760-"..sideOfTrack..suffix
					elseif Variant == "1:15 R760 BX 60E1 (KO-800164)" then
						return "NO-BN-3D-KO-SPV-60E1-1-15-R760-"..sideOfTrack..suffix

					-- R1200:
					elseif Variant == "1:18.4 R1200 BX 60E1 (KO-800081)" then
						return "NO-BN-3D-KO-SPV-60E1-1-18.4-R1200-"..sideOfTrack..suffix

					-- R2500:
					elseif Variant == "1:26.1 R2500 BX 60E1 (KO-701399)" then
						return "NO-BN-3D-KO-SPV-60E1-1-26.1-R2500-"..sideOfTrack..suffix
					else 
						return "NO-BN-3D-UNSPECIFIED"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="model">
   <Formula>Variant</Formula>
  </LuaExpression>
  <LuaExpression Name="trackContinueCourse">
   <Formula>_JBTKO_SPV_trackContinueCourse()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SPV_trackContinueCourse()" ReturnType="String" Description="Returns a string holding either 'left' or 'right'. At present, 3-way switches (allowed in railML) are not modeled in RailCOMPLETE, i.e. ConnectionCourse being 'straight' leads to an error message.">
   <Signature>String _JBTKO_SPV_trackContinueCourse()</Signature>
   <Formula>
				function _JBTKO_SPV_trackContinueCourse()
					if (ConnectionCourse == "right") then 
						return "left"
					elseif (ConnectionCourse == "left") then
						return "right"
					elseif (ConnectionCourse == 'straight') then
						return "Cannot use 'straight' connection course in 2-way switch, use 'left' or 'right'",_warning
					else
						return "Bad connection course ["..ConnectionCourse.."]",_error
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Generell sporveksel" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:7 R190 FX 54E3 (KO-800157)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-07-R190-54E3-FX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:9 R190 FX 54E3 (KO-701334)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-09-R190-54E3-FX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:8.21 R300 BX 60E1 (KO-065306)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-08.21-R300-60E1-BX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:9 R300 FX 54E3 (KO-701287)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-09-R300-54E3-FX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:9 R300 FX 60E1 (KO-701409)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-09-R300-60E1-FX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:9 R300 BX 60E1 (KO-800099)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-09-R300-60E1-BX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:11.66 R500 FX 60E1 (KO-800068)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-11.66-R500-60E1-FX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:12 R500 FX 54E3 (KO-701306)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-12-R500-54E3-FX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:12 R500 FX 60E1 (KO-800068)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-12-R500-60E1-FX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:12 R500 BX 60E1 (KO-800090)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-12-R500-60E1-BX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:14 R760 FX 54E3 (KO-701319)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-14-R760-54E3-FX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:14 R760 FX 60E1 (KO-701372)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-14-R760-60E1-FX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:14 R760 BX 60E1 (KO-800108)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-14-R760-60E1-BX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:15 R760 FX 60E1 (KO-701382)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-15-R760-60E1-FX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:15 R760 BX 60E1 (KO-800164)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-15-R760-60E1-BX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:18.4 R1200 BX 60E1 (KO-800081)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-18.4-R1200-60E1-BX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="1:26.1 R2500 BX 60E1 (KO-701399)" DisplayBlockName="{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-26.1-R2500-60E1-BX-1-Metric{% else %}NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-1-Schematic{% endif %}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="false" Layer="JBTKO$SPV" Color="ByBlock" Linetype="ByBlock" Lineweight="ByBlock" Transparency="ByBlock">
   <Rotation Add180DegreesIfDirIsDown="true" AddAngle="0"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL
				{% if SymbolMode == 'Geographic' %}
					{%    if Variant == '1:7 R190 FX 54E3 (KO-800157)'     %}07-R190-54E3-FX
					{% elsif Variant == '1:9 R190 FX 54E3 (KO-701334)'     %}09-R190-54E3-FX
					
					{% elsif Variant == '1:8.21 R300 BX 60E1 (KO-065306)'  %}08.21-R300-60E1-BX
					{% elsif Variant == '1:9 R300 FX 54E3 (KO-701287)'     %}09-R300-54E3-FX
					{% elsif Variant == '1:9 R300 FX 60E1 (KO-701409)'     %}09-R300-60E1-FX
					{% elsif Variant == '1:9 R300 BX 60E1 (KO-800099)'     %}09-R300-60E1-BX

					{% elsif Variant == '1:11.66 R500 FX 60E1 (KO-800068)' %}11.66-R500-60E1-FX
					{% elsif Variant == '1:12 R500 FX 54E3 (KO-701306)'    %}12-R500-54E3-FX
					{% elsif Variant == '1:12 R500 FX 60E1 (KO-800068)'    %}12-R500-60E1-FX
					{% elsif Variant == '1:12 R500 BX 60E1 (KO-800090)'    %}12-R500-60E1-BX

					{% elsif Variant == '1:14 R760 FX 54E3 (KO-701319)'    %}14-R760-54E3-FX
					{% elsif Variant == '1:14 R760 FX 60E1 (KO-701372)'    %}14-R760-60E1-FX
					{% elsif Variant == '1:14 R760 BX 60E1 (KO-800108)'    %}14-R760-60E1-BX
					{% elsif Variant == '1:15 R760 FX 60E1 (KO-701382)'    %}15-R760-60E1-FX
					{% elsif Variant == '1:15 R760 BX 60E1 (KO-800164)'    %}15-R760-60E1-BX

					{% elsif Variant == '1:18.4 R1200 BX 60E1 (KO-800081)' %}18.4-R1200-60E1-BX

					{% elsif Variant == '1:26.1 R2500 BX 60E1 (KO-701399)' %}26.1-R2500-60E1-BX
					{% else %}GENERELL
					{% endif %}					
					{{quadrant}}-Metric
				{% else %}GENERELL-{{quadrant}}-Schematic
				{% endif %}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="false" Layer="JBTEH$SPV" Color="ByBlock" Linetype="ByBlock" Lineweight="ByBlock" Transparency="ByBlock">
   <Rotation Add180DegreesIfDirIsDown="true" AddAngle="0"/>
   <BlockNameFormat JoinBy="-">
				{% if SymbolMode == 'Geographic' and Variant != 'Generell sporveksel' %}
					NO-BN-2D-JBTEH_SPV-FORBINDELSE-SPORVEKSEL
					{%    if Variant == '1:7 R190 FX 54E3 (KO-800157)'     %}07-R190-54E3-FX
					{% elsif Variant == '1:9 R190 FX 54E3 (KO-701334)'     %}09-R190-54E3-FX
					
					{% elsif Variant == '1:8.21 R300 BX 60E1 (KO-065306)'  %}08.21-R300-60E1-BX
					{% elsif Variant == '1:9 R300 FX 54E3 (KO-701287)'     %}09-R300-54E3-FX
					{% elsif Variant == '1:9 R300 FX 60E1 (KO-701409)'     %}09-R300-60E1-FX
					{% elsif Variant == '1:9 R300 BX 60E1 (KO-800099)'     %}09-R300-60E1-BX

					{% elsif Variant == '1:11.66 R500 FX 60E1 (KO-800068)' %}11.66-R500-60E1-FX
					{% elsif Variant == '1:12 R500 FX 54E3 (KO-701306)'    %}12-R500-54E3-FX
					{% elsif Variant == '1:12 R500 FX 60E1 (KO-800068)'    %}12-R500-60E1-FX
					{% elsif Variant == '1:12 R500 BX 60E1 (KO-800090)'    %}12-R500-60E1-BX
					
					{% elsif Variant == '1:14 R760 FX 54E3 (KO-701319)'    %}14-R760-54E3-FX
					{% elsif Variant == '1:14 R760 FX 60E1 (KO-701372)'    %}14-R760-60E1-FX
					{% elsif Variant == '1:14 R760 BX 60E1 (KO-800108)'    %}14-R760-60E1-BX
					{% elsif Variant == '1:15 R760 FX 60E1 (KO-701382)'    %}15-R760-60E1-FX
					{% elsif Variant == '1:15 R760 BX 60E1 (KO-800164)'    %}15-R760-60E1-BX

					{% elsif Variant == '1:18.4 R1200 BX 60E1 (KO-800081)' %}18.4-R1200-60E1-BX

					{% elsif Variant == '1:26.1 R2500 BX 60E1 (KO-701399)' %}26.1-R2500-60E1-BX
					{% else %}BAD_Variant_{{Variant}}
					{% endif %}
					{% if SwitchElectrification == 'BOTH' %}BOTH_LEGS_ELECTRIFIED
					{% elsif SwitchElectrification == 'LEFT' or SwitchElectrification == 'Right' %}ONE_LEG_ELECTRIFIED
					{% elsif SwitchElectrification == 'UNKNOWN' %}UNKNOWN_ELECTRIFICATION
					{% else %}BAD_SwitchElectrification-{{SwitchElectrification}}
					{% endif %}
					{{quadrant}}-Metric
				{% elsif SymbolMode == 'Geographic' and Variant == 'Generell sporveksel' %}
					NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-{{quadrant}}-Metric
				{% else %}
					NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-{{quadrant}}-Schematic
				{% endif %}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="false" Layer="JBTSA$SPV" Color="ByBlock" Linetype="ByBlock" Lineweight="ByBlock" Transparency="ByBlock">
   <Rotation Add180DegreesIfDirIsDown="true" AddAngle="0"/>
   <BlockNameFormat JoinBy="-">
				{% if SymbolMode == 'Geographic' and Variant != 'Generell sporveksel' %}
					NO-BN-2D-JBTSA_SPV-FORBINDELSE-SPORVEKSEL
					{%    if Variant == '1:7 R190 FX 54E3 (KO-800157)'     %}07-R190-54E3-FX
					{% elsif Variant == '1:9 R190 FX 54E3 (KO-701334)'     %}09-R190-54E3-FX
				
					{% elsif Variant == '1:8.21 R300 BX 60E1 (KO-065306)'  %}08.21-R300-60E1-BX
					{% elsif Variant == '1:9 R300 FX 54E3 (KO-701287)'     %}09-R300-54E3-FX
					{% elsif Variant == '1:9 R300 FX 60E1 (KO-701409)'     %}09-R300-60E1-FX
					{% elsif Variant == '1:9 R300 BX 60E1 (KO-800099)'     %}09-R300-60E1-BX

					{% elsif Variant == '1:11.66 R500 FX 60E1 (KO-800068)' %}11.66-R500-60E1-FX
					{% elsif Variant == '1:12 R500 FX 54E3 (KO-701306)'    %}12-R500-54E3-FX
					{% elsif Variant == '1:12 R500 FX 60E1 (KO-800068)'    %}12-R500-60E1-FX
					{% elsif Variant == '1:12 R500 BX 60E1 (KO-800090)'    %}12-R500-60E1-BX

					{% elsif Variant == '1:14 R760 FX 54E3 (KO-701319)'    %}14-R760-54E3-FX
					{% elsif Variant == '1:14 R760 FX 60E1 (KO-701372)'    %}14-R760-60E1-FX
					{% elsif Variant == '1:14 R760 BX 60E1 (KO-800108)'    %}14-R760-60E1-BX
					{% elsif Variant == '1:15 R760 FX 60E1 (KO-701382)'    %}15-R760-60E1-FX
					{% elsif Variant == '1:15 R760 BX 60E1 (KO-800164)'    %}15-R760-60E1-BX

					{% elsif Variant == '1:18.4 R1200 BX 60E1 (KO-800081)' %}18.4-R1200-60E1-BX

					{% elsif Variant == '1:26.1 R2500 BX 60E1 (KO-701399)' %}26.1-R2500-60E1-BX
					{% else %}BAD_Variant_{{Variant}}
					{% endif %}
					{%    if SwitchControlAndLocking == 'RM' %}REMOTE_CONTROLLED
					{% elsif SwitchControlAndLocking == 'PL' or SwitchControlAndLocking == 'PR' or SwitchControlAndLocking == 'PB' %}KEYLOCKED
					{% elsif SwitchControlAndLocking == 'HL' or SwitchControlAndLocking == 'HR' or SwitchControlAndLocking == 'HB' %}KEYLOCKED
					{% elsif SwitchControlAndLocking == 'PN' or SwitchControlAndLocking == 'HN' %}NOT_INTERLOCKED
					{% else %}BAD_SwitchControlAndLocking
					{% endif %}
					{{quadrant}}-Metric
				{% elsif SymbolMode == 'Geographic' and Variant == 'Generell sporveksel' %}
					NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-{{quadrant}}-Metric
				{% else %}
					NO-BN-2D-JBTKO_SPV-FORBINDELSE-SPORVEKSEL-GENERELL-{{quadrant}}-Schematic
				{% endif %}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="false" DrawOrder="top" Layer="JBTSA$SPV" Color="ByBlock" Linetype="ByBlock" Lineweight="ByBlock" Transparency="ByBlock">
   <Rotation Add180DegreesIfDirIsDown="true" AddAngle="{% if Dir == 'down' %}180{% else %}0{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				{% if SymbolMode == 'Geographic' and Variant != 'Generell sporveksel' %}
					{% if SwitchControlAndLocking == 'PR' or SwitchControlAndLocking == 'PL' or SwitchControlAndLocking == 'PB' or SwitchControlAndLocking == 'PN' %}NO-BN-2D-JBTSA_SPV-FORBINDELSE-SPORVEKSEL-CIRCLE-AT-TANGENT-INTERSECTION
						{%    if Variant == '1:7 R190 FX 54E3 (KO-800157)' %}13.503
						{% elsif Variant == '1:9 R190 FX 54E3 (KO-701334)' %}10.523
						
						{% elsif Variant == '1:8.21 R300 BX 60E1 (KO-065306)' %}18.188
						{% elsif Variant == '1:9 R300 FX 54E3 (KO-701287)' %}16.616
						{% elsif Variant == '1:9 R300 FX 60E1 (KO-701409)' %}16.615
						{% elsif Variant == '1:9 R300 BX 60E1 (KO-800099)' %}16.615

						{% elsif Variant == '1:11.66 R500 FX 60E1 (KO-800068)' %}21.393
						{% elsif Variant == '1:12 R500 FX 54E3 (KO-701306)' %}20.797
						{% elsif Variant == '1:12 R500 FX 60E1 (KO-800068)' %}20.797
						{% elsif Variant == '1:12 R500 BX 60E1 (KO-800090)' %}20.797

						{% elsif Variant == '1:14 R760 FX 54E3 (KO-701319)' %}27.108
						{% elsif Variant == '1:14 R760 FX 60E1 (KO-701372)' %}27.108
						{% elsif Variant == '1:14 R760 BX 60E1 (KO-800108)' %}27.108
						{% elsif Variant == '1:15 R760 FX 60E1 (KO-701382)' %}25.305
						{% elsif Variant == '1:15 R760 BX 60E1 (KO-800164)' %}25.305

						{% elsif Variant == '1:18.4 R1200 BX 60E1 (KO-800081)' %}32.829

						{% elsif Variant == '1:26.1 R2500 BX 60E1 (KO-701399)' %}48.109
						{% endif %}
						Metric
					{% endif %}
				{% endif %}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="false" Layer="JBTSA$SPV" Color="ByBlock" Linetype="ByBlock" Lineweight="ByBlock" Transparency="ByBlock">
   <Rotation Add180DegreesIfDirIsDown="true" AddAngle="{% if Dir == 'down' %}180{% else %}0{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				{% if SymbolMode == 'Geographic' %}
					{%    if SwitchControlAndLocking == 'RL' or SwitchControlAndLocking == 'PL' or SwitchControlAndLocking == 'HL' %}NO-BN-2D-JBTSA_SPV-FORBINDELSE-SPORVEKSEL-KEYLOCKED-LEFT-Metric
					{% elsif SwitchControlAndLocking == 'RR' or SwitchControlAndLocking == 'PR' or SwitchControlAndLocking == 'HR' %}NO-BN-2D-JBTSA_SPV-FORBINDELSE-SPORVEKSEL-KEYLOCKED-RIGHT-Metric
					{% elsif SwitchControlAndLocking == 'RB' or SwitchControlAndLocking == 'PB' or SwitchControlAndLocking == 'HB' %}NO-BN-2D-JBTSA_SPV-FORBINDELSE-SPORVEKSEL-KEYLOCKED-BOTH-Metric
					{% endif %}
				{% else %}
					{%    if SwitchControlAndLocking == 'RL' or SwitchControlAndLocking == 'PL' or SwitchControlAndLocking == 'HL' %}NO-BN-2D-JBTSA_SPV-FORBINDELSE-SPORVEKSEL-KEYLOCKED-LEFT-Schematic
					{% elsif SwitchControlAndLocking == 'RR' or SwitchControlAndLocking == 'PR' or SwitchControlAndLocking == 'HR' %}NO-BN-2D-JBTSA_SPV-FORBINDELSE-SPORVEKSEL-KEYLOCKED-RIGHT-Schematic
					{% elsif SwitchControlAndLocking == 'RB' or SwitchControlAndLocking == 'PB' or SwitchControlAndLocking == 'HB' %}NO-BN-2D-JBTSA_SPV-FORBINDELSE-SPORVEKSEL-KEYLOCKED-BOTH-Schematic
					{% endif %}
				{% endif %}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="0" Y="2.5" TargetSpace="lokalstiller"/>
    <SnapPoint X="0" Y="-2.5" TargetSpace="lokalstiller"/>
    <SnapPoint X="0" Y="0" TargetSpace="sporvekseltunger"/>
   </SnapPoints>
   <SnapPoints Variant="1:7 R190 FX 54E3 (KO-800157)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="18.6474" Y="1.672" TargetSpace="sporsperre"/>
    <SnapPoint X="18.7666" Y="-0.751" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:9 R190 FX 54E3 (KO-701334)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="0.84186177" Y="1.75188526" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="0.85" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="3.89367110" Y="1.75002238" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="3.93" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="16.8592" Y="0.7495" TargetSpace="skinneskjøt"/>
    <SnapPoint X="16.8907" Y="0" TargetSpace="skinneskjøt"/>
    <SnapPoint X="18.0416" Y="1.613" TargetSpace="sporsperre"/>
    <SnapPoint X="18.1541" Y="-0.751" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:8.21 R300 BX 60E1 (KO-065306)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="1.00031" Y="2.51464" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="0.99801" Y="-2.49891" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="5.21105" Y="2.5611" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="5.25295" Y="-2.49892" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="28.02852" Y="3.83954" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="28.32818" Y="-2.50416" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="23.4996" Y="1.6885" TargetSpace="sporsperre"/>
    <SnapPoint X="23.5911" Y="-0.7542" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:9 R300 FX 54E3 (KO-701287)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="22.3197" Y="1.5846" TargetSpace="sporsperre"/>
    <SnapPoint X="22.4967" Y="-0.751" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:9 R300 FX 60E1 (KO-701409)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="1.00109109" Y="1.75225524" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="1.008" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="5.20487399" Y="1.79794469" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="5.237" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="15.7829" Y="0.4187" TargetSpace="skinneskjøt"/>
    <SnapPoint X="15.79" Y="0" TargetSpace="skinneskjøt"/>
    <SnapPoint X="21.1317" Y="1.5006" TargetSpace="sporsperre"/>
    <SnapPoint X="21.2113" Y="-0.7535" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:9 R300 BX 60E1 (KO-800099)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="1.00031" Y="2.51464" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="0.99801" Y="-2.49891" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="5.21105" Y="2.5611" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="5.25295" Y="-2.49892" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="28.02852" Y="3.83954" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="28.32818" Y="-2.50416" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="23.4996" Y="1.6885" TargetSpace="sporsperre"/>
    <SnapPoint X="23.5911" Y="-0.7542" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:11.66 R500 FX 60E1 (KO-800068)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}"></SnapPoints>
   <SnapPoints Variant="1:12 R500 FX 54E3 (KO-701306)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="30.1318" Y="1.6611" TargetSpace="sporsperre"/>
    <SnapPoint X="30.2045" Y="-0.751" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:12 R500 FX 60E1 (KO-800068)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="0.98448908" Y="1.75094744" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="0.988" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="4.03771321" Y="1.76617386" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="4.052" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="7.66716867" Y="1.80887624" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="7.695" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="19.4052" Y="0.3768" TargetSpace="skinneskjøt"/>
    <SnapPoint X="19.41" Y="0" TargetSpace="skinneskjøt"/>
    <SnapPoint X="27.3045" Y="1.4990" TargetSpace="sporsperre"/>
    <SnapPoint X="27.3639" Y="-0.7552" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:12 R500 BX 60E1 (KO-800090)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}"></SnapPoints>
   <SnapPoints Variant="1:14 R760 FX 54E3 (KO-701319)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="37.3852" Y="1.672" TargetSpace="sporsperre"/>
    <SnapPoint X="37.4448" Y="-0.751" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:14 R760 FX 60E1 (KO-701372)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="37.3153" Y="1.671" TargetSpace="sporsperre"/>
    <SnapPoint X="37.3749" Y="-0.7535" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:14 R760 BX 60E1 (KO-800108)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="0.99406" Y="2.51234" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="1.00151" Y="-2.4974" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="3.9443" Y="2.52334" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="3.9612" Y="-2.4974" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="8.16892" Y="2.555" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="8.19147" Y="-2.4974" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="45.06364" Y="3.8519" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="45.26258" Y="-2.4974" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="47.32825" Y="3.99248" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="47.56431" Y="-2.4974" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="37.264" Y="1.68161" TargetSpace="sporsperre"/>
    <SnapPoint X="37.32603" Y="-0.75487" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:15 R760 FX 60E1 (KO-701382)">
    <SnapPoint X="37.3151" Y="1.6786" TargetSpace="sporsperre"/>
    <SnapPoint X="37.3751" Y="-0.761" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:15 R760 BX 60E1 (KO-800164)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}"></SnapPoints>
   <SnapPoints Variant="1:18.4 R1200 BX 60E1 (KO-800081)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="1.03614926" Y="1.75065431" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="1.038" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="5.73931411" Y="1.76471472" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="5.748" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="11.15110340" Y="1.80338543" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="11.168" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="56.74078823" Y="3.08518750" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="56.8541" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="59.21244152" Y="3.20359522" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="59.3335" Y="-1.75" TargetSpace="sporvekseldrivmaskin"/>
    <SnapPoint X="37.3372" Y="0.8103" TargetSpace="skinneskjøt"/>
    <SnapPoint X="37.3152" Y="-0.3382" TargetSpace="skinneskjøt"/>
    <SnapPoint X="50.6568" Y="1.8293" TargetSpace="sporsperre"/>
    <SnapPoint X="50.7118" Y="-0.7616" TargetSpace="sporsperre"/>
   </SnapPoints>
   <SnapPoints Variant="1:26.1 R2500 BX 60E1 (KO-701399)" MirrorAboutAlignmentTangent="{% if SwitchGeometry == 'left' and dir == 'down' %}true{% elsif SwitchGeometry == 'right' and dir == 'up' %}true{% else %}false{% endif %}" MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}">
    <SnapPoint X="67.5777" Y="1.6748" TargetSpace="sporsperre"/>
    <SnapPoint X="67.6106" Y="-0.761" TargetSpace="sporsperre"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_SwitchBlades" Name="JBTKO_TNG Sporvekseltunger" Layer="JBTKO_TNG" Color="ByLayer" Group="Overbygning/Tunger" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>sporvekseltunger</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="3" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="0.5" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="2" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="4" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <Variants DefaultValue="1:9 R190">
   <Variant Name="1:9 R190"/>
   <Variant Name="1:7 R190"/>
   <Variant Name="1:8.21 R300"/>
   <Variant Name="1:9 R300"/>
   <Variant Name="1:11.66 R500"/>
   <Variant Name="1:12 R500"/>
   <Variant Name="1:14 R760"/>
   <Variant Name="1:15 R760"/>
   <Variant Name="1:18.4 R1200"/>
   <Variant Name="1:26.1 R2500"/>
  </Variants>
  <LuaExpression Name="Variant">
   <Formula>_JBTKO_TNG_Variant()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_TNG_Variant()" ReturnType="ObjRef" Description="Obtains the Variant from its related switch.">
   <Signature>Enumeration _JBTKO_TNG_Variant()</Signature>
   <Formula>
				function _JBTKO_TNG_Variant()
					local s = rel_SwitchTongues_BelongTo_Switch
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return getPropertyValue("Variant"), _info("UNFINISHED - Relate with '"..s.."' to a switch (turnout).")
					else 
						local switch = r[0]
						return switch.Variant:match("(1:%d+ R%d+)"), _info("Variant inherited with relation '"..s.."' from switch '"..RC__identify(switch).."' ")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Alignment">
   <Formula>_JBTKO_TNG_alignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_TNG_alignment()" ReturnType="ObjRef" Description="Obtains the alignment [ObjRef] from its switch, related with 'Er tunge for sporveksel'.">
   <Signature>ObjRef _JBTKO_TNG_alignment()</Signature>
   <Formula>
				function _JBTKO_TNG_alignment()
					local s = rel_SwitchTongues_BelongTo_Switch
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return getPropertyValue("Alignment"), _info("UNFINISHED - Relate with '"..s.."' to a switch (turnout).")
					else
						return r[0].Alignment, _info("Alignment inherited with relation '"..s.."' from switch '"..RC__identify(r[0]).."' ")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTKO_TNG_mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_TNG_mileage()" ReturnType="Double" Description="Obtains the mileage from its switch, related with 'Er tunge for sporveksel'.">
   <Signature>Double _JBTKO_TNG_mileage()</Signature>
   <Formula>
				function _JBTKO_TNG_mileage()
					local s = rel_SwitchTongues_BelongTo_Switch
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return getPropertyValue("Mileage"), _info("UNFINISHED - Relate with '"..s.."' to a switch (turnout).")
					else
						return r[0].Mileage, _info("Mileage inherited with relation '"..s.."' from switch '"..RC__identify(r[0]).."' ")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="code">
   <Formula>_JBTKO_TNG_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_TNG_code()" ReturnType="String" Description="Obtains the code from its switch, related with 'Er tunge for sporveksel'.">
   <Signature>Double _JBTKO_TNG_code()</Signature>
   <Formula>
				function _JBTKO_TNG_code()
					local s = rel_SwitchTongues_BelongTo_Switch
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return _info("UNFINISHED - Relate with '"..s.."' to a switch (turnout).")
					else
						return r[0].code, _info("Code inherited with relation '"..s.."' from switch "..RC__identify(r[0])..".")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>"Tng."..code</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>_JBTKO_TNG_dir()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_TNG_dir()" ReturnType="Enum" Description="Obtains the direction (dir) [up | down] enum from its switch, related with 'Er tunge for sporveksel'.">
   <Signature>Double _JBTKO_TNG_dir()</Signature>
   <Formula>
				function _JBTKO_TNG_dir()
					local s = rel_SwitchTongues_BelongTo_Switch
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return _info("UNFINISHED - Relate with '"..s.."' to a switch (turnout).")
					else
						return r[0].dir, _info("EnableDirectionSetting (dir) inherited with relation '"..s.."' from switch '"..RC__identify(r[0]).."' ")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_TNG_SwitchBlades_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_TNG_SwitchBlades_Geometry3DName()" ReturnType="String" Description="Returns the switch blaedes' 3D geometry name.">
   <Signature>String _JBTKO_TNG_SwitchBlades_Geometry3DName()</Signature>
   <Formula>
				function _JBTKO_TNG_SwitchBlades_Geometry3DName()
					if Variant == "1:9 R190" then
						return "NO-BN-3D-KO_TNG-TUNGER-09-R190"
					elseif Variant == "1:7 R190"	then
						return "NO-BN-3D-KO_TNG-TUNGER-07-R190"
					elseif Variant == "1:8.21 R300"	then
						return "NO-BN-3D-KO_TNG-TUNGER-08.21-R300"
					elseif Variant == "1:9 R300"	then
						return "NO-BN-3D-KO_TNG-TUNGER-09-R300"
					elseif Variant == "1:11.66 R500"	then
						return "NO-BN-3D-KO_TNG-TUNGER-11.66-R500"
					elseif Variant == "1:12 R500"	then
						return  "NO-BN-3D-KO_TNG-TUNGER-12-R500"
					elseif Variant == "1:14 R760"	then
						return "NO-BN-3D-KO_TNG-TUNGER-14-R760"
					elseif Variant == "1:15 R760"	then
						return "NO-BN-3D-KO_TNG-TUNGER-15-R760"
					elseif Variant == "1:18.4 R1200"	then
						return "NO-BN-3D-KO_TNG-TUNGER-18.4-R1200"
					elseif Variant == "1:26.1 R2500"	then
						return "NO-BN-3D-KO_TNG-TUNGER-26.1-R2500"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="NormalPosition" DisplayName="Normalstilling" DefaultValue="Unknown" Description="Normalstilling viser tungestilling i samsvar med relé-normalstilling i sikringsanleggets relétegninger. 'Venstre' betyr at toget vil kjøre til venstre, 'Høyre' betyr kjøring til høyre.">
   <Values>
    <Value DisplayName="Ukjent">Unknown</Value>
    <Value DisplayName="Venstre">Left</Value>
    <Value DisplayName="Midtstilling">Straight</Value>
    <Value DisplayName="Høyre">Right</Value>
   </Values>
  </CustomProperty>
  <InsertPointObject DisplayName="Sporvekseltunger 1:9 R190" Name="1:9 R190" DisplayBlockName="NO-BN-2D-JBTKO_TNG-SPORVEKSELTUNGE-09-R190-V-Metric" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfLeftSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="NormalPosition" Value="{% if RightSided %}{% if dir == 'up' %}Left{% else %}Right{% endif %}{% else %}{% if dir == 'up' %}Right{% else %}Left{% endif %}{% endif %}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Sporvekseltunger 1:9 R300" Name="1:9 R300" DisplayBlockName="NO-BN-2D-JBTKO_TNG-SPORVEKSELTUNGE-09-R300-V-Metric" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfLeftSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="NormalPosition" Value="{% if RightSided %}{% if dir == 'up' %}Left{% else %}Right{% endif %}{% else %}{% if dir == 'up' %}Right{% else %}Left{% endif %}{% endif %}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Sporvekseltunger 1:11.66 R500" Name="1:11.66 R500" DisplayBlockName="NO-BN-2D-JBTKO_TNG-SPORVEKSELTUNGE-11.66-R500-V-Metric" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfLeftSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="NormalPosition" Value="{% if RightSided %}{% if dir == 'up' %}Left{% else %}Right{% endif %}{% else %}{% if dir == 'up' %}Right{% else %}Left{% endif %}{% endif %}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Sporvekseltunger 1:12 R500" Name="1:12 R500" DisplayBlockName="NO-BN-2D-JBTKO_TNG-SPORVEKSELTUNGE-12-R500-V-Metric" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfLeftSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="NormalPosition" Value="{% if RightSided %}{% if dir == 'up' %}Left{% else %}Right{% endif %}{% else %}{% if dir == 'up' %}Right{% else %}Left{% endif %}{% endif %}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Sporvekseltunger 1:14 R760" Name="1:14 R760" DisplayBlockName="NO-BN-2D-JBTKO_TNG-SPORVEKSELTUNGE-14-R760-V-Metric" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfLeftSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="NormalPosition" Value="{% if RightSided %}{% if dir == 'up' %}Left{% else %}Right{% endif %}{% else %}{% if dir == 'up' %}Right{% else %}Left{% endif %}{% endif %}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Sporvekseltunger 1:15 R760" Name="1:15 R760" DisplayBlockName="NO-BN-2D-JBTKO_TNG-SPORVEKSELTUNGE-15-R760-V-Metric" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfLeftSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="NormalPosition" Value="{% if RightSided %}{% if dir == 'up' %}Left{% else %}Right{% endif %}{% else %}{% if dir == 'up' %}Right{% else %}Left{% endif %}{% endif %}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Sporvekseltunger 1:18.4 R1200" Name="1:18.4 R1200" DisplayBlockName="NO-BN-2D-JBTKO_TNG-SPORVEKSELTUNGE-18.4-R1200-V-Metric" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfLeftSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="NormalPosition" Value="{% if RightSided %}{% if dir == 'up' %}Left{% else %}Right{% endif %}{% else %}{% if dir == 'up' %}Right{% else %}Left{% endif %}{% endif %}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Sporvekseltunger 1:26.1 R2500" Name="1:26.1 R2500" DisplayBlockName="NO-BN-2D-JBTKO_TNG-SPORVEKSELTUNGE-26.1-R2500-V-Metric" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfLeftSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="NormalPosition" Value="{% if RightSided %}{% if dir == 'up' %}Left{% else %}Right{% endif %}{% else %}{% if dir == 'up' %}Right{% else %}Left{% endif %}{% endif %}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="false">
   <Rotation Add180DegreesIfDirIsDown="true"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTKO_TNG-SPORVEKSELTUNGE
				{% if Variant == '1:7 R190' %}07-R190
				{% elsif Variant == '1:9 R190' %}09-R190
				{% elsif Variant == '1:8.21 R300' %}08.21-R300
				{% elsif Variant == '1:9 R300' %}09-R300
				{% elsif Variant == '1:11.66 R500' %}11.66-R500
				{% elsif Variant == '1:12 R500' %}12-R500
				{% elsif Variant == '1:14 R760' %}14-R760
                {% elsif Variant == '1:15 R760' %}15-R760
				{% elsif Variant == '1:18.4 R1200' %}18.4-R1200
				{% elsif Variant == '1:26.1 R2500' %}26.1-R2500
				{% endif %}
				{% if NormalPosition == 'Right' %}H
				{% elsif NormalPosition == 'Left' %}V
				{% else %}H
				{% endif %}
				Metric
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETELabel" Class="RailwayPlacedObject" LuaName="rctype_LabelForSwitch" Name="JBTFE_DIV Etikett for sporveksel" Layer="JBTFE_ETIKETTER" Color="ByLayer" Group="Felles/Etiketter">
  <RelationSpace>etikett</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="D-1-2-HRB-025-018-SPV">
   <Variant Name="D-1-2-HLB-025-018-SPV"/>
   <Variant Name="D-1-2-HRB-025-018-SPV"/>
  </Variants>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RC__getNearestSnapDistance(getPropertyValue("LateralOffset"),5)</Formula>
  </LuaExpression>
  <LuaExpression Name="ReferenceMileage">
   <Formula>
				local r = getRelatedObjects(rel_Label_AppliesTo_Anything)
				return r[0] and r[0].ReferenceMileage or getPropertyValue(ReferenceMileage)
			</Formula>
  </LuaExpression>
  <LuaExpression Name="LabelItem1">
   <Formula>NOBN_trk_getSwitchLabelItem1(MileageIncreasesTowardsLeft)</Formula>
  </LuaExpression>
  <LuaExpression Name="LabelItem2">
   <Formula>NOBN_trk_getSwitchLabelItem2(MileageIncreasesTowardsLeft)</Formula>
  </LuaExpression>
  <LuaExpression Name="LabelItem3">
   <Formula>NOBN_trk_getSwitchLabelItem3()</Formula>
  </LuaExpression>
  <InsertPointObject DisplayName="Sporveksel SS/Mid (km-retn mot høyre)" Name="D-1-2-HRB-025-018-SPV" DisplayBlockName="NO-BN-2D-JBTFE_ETI-ETIKETT-D-1-2-HRB-025-018-{{SymbolMode}}">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject DisplayName="Sporveksel SS/Mid (km-retn mot venstre)" Name="D-1-2-HLB-025-018-SPV" DisplayBlockName="NO-BN-2D-JBTFE_ETI-ETIKETT-D-1-2-HLB-025-018-{{SymbolMode}}">
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_ETI-ETIKETT-D-1-2-HRB-025-018" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="true" AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTFE_ETI-ETIKETT
				{% if Variant == 'D-1-2-HLB-025-018-SPV' %}D-1-2-HLB-025-018
				{% elsif Variant == 'D-1-2-HRB-025-018-SPV' %}D-1-2-HRB-025-018
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="T01">
    <Value>{{LabelItem1}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="T02">
    <Value>{{LabelItem2}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="T03">
    <Value>{{LabelItem3}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="eTrack" Class="RailwayAlignment" LuaName="rctype_Track" Name="JBTKO_SPO Spor" Layer="JBTKO_SPO" Color="ByLayer" Group="Overbygning/Spor">
  <RelationSpace>spor</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="1" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="0.5" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="-1.8" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="2.4" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Name3D">
   <Formula>RcType..": "..code</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <SetValue Key="RotationBeforeOffset" Value="True"/>
  </DynamicProperty>
  <DynamicProperty Type="Representation3D" Subtype="IteratedGeometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <SetValue Key="RotationBeforeOffset" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="IteratedGeometry3D_1.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>"["..code.."]"</Formula>
  </LuaExpression>
  <SetValue Key="AlignmentSystem" Value="Normalspor 1435 mm"/>
  <AlignmentSystems DefaultSystemName="Normalspor 1435 mm">
   <AlignmentSystem Name="Normalspor 1435 mm" CantGauge="1.500" AlignmentGauge="1.435" LiftWithCant="true"/>
  </AlignmentSystems>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <SetValue Key="RotationBeforeOffset" Value="True"/>
   <SetValue Key="Name" Value="NO-BN-2D-KO-BLL-BALLAST-172-3400x578@667-7000x430@667"/>
   <SetValue Key="IterationStepSize" Value="0.600"/>
   <SetValue Key="InitialLinearOffset" Value="0.300"/>
  </DynamicProperty>
  <DynamicProperty Type="Representation3D" Subtype="IteratedAnnotation3D">
   <LuaExpression Name="Contents">
    <Formula>_JBTKO_SPO_Annotation3D(_position)</Formula>
   </LuaExpression>
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="Justify" Value="BottomCenter"/>
   <SetValue Key="TextHeight" Value="0.250"/>
   <SetValue Key="TextThickness" Value="0.050"/>
   <SetValue Key="Rotation.X" Value="90"/>
   <SetValue Key="RotationBeforeOffset" Value="False"/>
   <LuaExpression Name="IterationStepSize">
    <Formula>_JBTKO_SPO_getIteratedAnnotation3DStep(_position)</Formula>
   </LuaExpression>
   <LuaExpression Name="InitialLinearOffset">
    <Formula>_JBTKO_SPO_getIteratedAnnotation3DStep(_position)</Formula>
   </LuaExpression>
  </DynamicProperty>
  <Variants DefaultValue="Enkle skinner med ballastprofil">
   <Variant Name="Enkle skinner med ballastprofil">
    <SetValue Key="InclinedRailProfile" Value="Unknown"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-ENKEL"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="True"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="False"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="False"/>
   </Variant>
   <Variant Name="Enkle skinner og sviller med ballastprofil">
    <SetValue Key="InclinedRailProfile" Value="Unknown"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-ENKEL"/>
    <SetValue Key="IteratedGeometry3D_1.Name" Value="NO-BN-3D-KO-SVI-SVILLE-JBV60-BETONG-232x300x2600-ENKEL"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="False"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="False"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="False"/>
   </Variant>
   <Variant Name="Enkle skinner og ledeskinner med ballastprofil">
    <SetValue Key="InclinedRailProfile" Value="Unknown"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-MED-CC536-LEDESKINNER-ENKEL"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="True"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="False"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="False"/>
   </Variant>
   <Variant Name="Enkle skinner og sviller og ledeskinner med ballastprofil">
    <SetValue Key="InclinedRailProfile" Value="Unknown"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-MED-CC536-LEDESKINNER-ENKEL"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="False"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="False"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="False"/>
   </Variant>
   <Variant Name="60E1 1:20 skinner og enkle sviller med ballastprofil">
    <SetValue Key="InclinedRailProfile" Value="1:20"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-60E1-1_20"/>
    <SetValue Key="IteratedGeometry3D_1.Name" Value="NO-BN-3D-KO-SVI-SVILLE-JBV60-BETONG-232x300x2600-ENKEL"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="False"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="False"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="False"/>
   </Variant>
   <Variant Name="60E1 1:20 skinner og 54E3 ledeskinner og sviller med ballastprofil">
    <SetValue Key="InclinedRailProfile" Value="1:20"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-60E1-1_20-MED-LEDESKINNER-54E3"/>
    <SetValue Key="IteratedGeometry3D_1.Name" Value="NO-BN-3D-KO-SVI-SVILLE-JBV60-BETONG-232x300x2600-ENKEL"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="False"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="False"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="False"/>
   </Variant>
   <Variant Name="60E1 1:20 skinnestrenger">
    <SetValue Key="InclinedRailProfile" Value="1_20"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-60E1-1_20"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="True"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="True"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="True"/>
   </Variant>
   <Variant Name="54E3 ledeskinne skinnestrenger">
    <SetValue Key="InclinedRailProfile" Value="Unknown"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-CC536-LEDESKINNER-54E3"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="True"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="True"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="True"/>
   </Variant>
   <Variant Name="60E1 1:20 med 54E3 ledeskinne skinnestrenger">
    <SetValue Key="InclinedRailProfile" Value="1_20"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-60E1-1_20-MED-LEDESKINNER-54E3"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="True"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="True"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="True"/>
   </Variant>
   <Variant Name="54E3 1:20 skinnestrenger">
    <SetValue Key="InclinedRailProfile" Value="1_20"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-54E3-1_20"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="True"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="True"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="True"/>
   </Variant>
   <Variant Name="49E1 opprett skinnestrenger">
    <SetValue Key="InclinedRailProfile" Value="OPPRETT"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-49E1-OPPRETT"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="True"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="True"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="True"/>
   </Variant>
   <Variant Name="39 kg opprett skinnestrenger">
    <SetValue Key="InclinedRailProfile" Value="OPPRETT"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-39KG-OPPRETT"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="True"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="True"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="True"/>
   </Variant>
   <Variant Name="60E1 1:20 skinner med JBV60 sviller og ballastprofil">
    <SetValue Key="InclinedRailProfile" Value="1_20"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-SKINNER-60E1-1_20"/>
    <SetValue Key="IteratedGeometry3D_1.Name" Value="NO-BN-3D-KO-SVI-SVILLE-BETONG-JBV60-MED-FASTCLIP"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="False"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="False"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="True"/>
   </Variant>
   <Variant Name="Kjørekanter 1435 mm">
    <SetValue Key="InclinedRailProfile" Value="Unknown"/>
    <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-KO-SKI-SPORVIDDE-1435-KJØREKANTER"/>
    <SetValue Key="IteratedGeometry3D_1.Frozen" Value="True"/>
    <SetValue Key="SweptGeometry3D_2.Frozen" Value="True"/>
    <SetValue Key="IteratedAnnotation3D_3.Frozen" Value="True"/>
   </Variant>
  </Variants>
  <LuaExpression Name="HorizontalGeometryPointObjectTypeRef">
   <Formula>rctype_HorizontalGeometryVertex</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalProfilePointObjectTypeRef">
   <Formula>rctype_VerticalProfileVertex</Formula>
  </LuaExpression>
  <LuaExpression Name="HorizontalGeometrySectionObjectTypeRef">
   <Formula>rctype_HorizontalGeometrySegment</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalProfileSectionObjectTypeRef">
   <Formula>rctype_VerticalProfileSegment</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="InclinedRailProfile" DisplayName="Skråstilt skinneprofil" DefaultValue="1:20" Description="Rails are either upright or inclined 1:20 [ Opprett | 1:20 ].">
   <Values>
    <Value DisplayName="Opprett">OPPRETT</Value>
    <Value DisplayName="1:30">1_30</Value>
    <Value DisplayName="1:20">1_20</Value>
    <Value DisplayName="1:40">1_40</Value>
    <Value DisplayName="1:60">1_60</Value>
    <Value DisplayName="Ukjent">Unknown</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="Annotation3DType" DisplayName="3D annotation type" DefaultValue="NONE" Description="Show Km, Pr or no annotation in 3D export/preview [NONE | KM | PR].">
   <Values>
    <Value DisplayName="None" Description="No 3D annotations for Km or Pr">NONE</Value>
    <Value DisplayName="Km" Description="Annotate Km each 100m / 50m / 10m in 3D export/preview.">KM</Value>
    <Value DisplayName="Pr" Description="Annotate Pr each 100m / 50m / 10m in 3D export/preview.">PR</Value>
   </Values>
  </CustomProperty>
  <LuaFunction Name="_JBTKO_SPO_Annotation3D()" ReturnType="String" Description="Returns the 'Km' value as measured at intervals of 100 meters in the applicable reference alignment. Each 10th meter is marked as well, with a short line across the track. Note: There is an alternative function _JBTKO_SPO_Annotation3D_Pr() that shows 'Pr' (profile in own alignment) instead.">
   <Signature>_JBTKO_SPO_Annotation3D(AlignmentPos _position)</Signature>
   <Formula>
				function _JBTKO_SPO_Annotation3D(_position)
					local eps = 1e-3
					local majorStep = 100
					local middleStep = majorStep / 2
					local minorStep = majorStep / 10
					local ai = getAlignmentInfo(_position)
					local p = ai.Point
					local refId = ai.ReferenceAlignmentId
					local aiRef = getAlignmentInfo(refId,p)
					local m = (Annotation3DType == "KM") and aiRef.Mileage or ai.Mileage
					local err1 = math.min(m % majorStep, majorStep - m % majorStep)
					local err2 = math.min(m % middleStep, middleStep - m % middleStep)
					local isMajorStep = err1 &lt; eps
					local isMiddleStep = err2 &lt; eps
					if isMajorStep then
						if Annotation3DType == "KM" then
							return "Km."..NOBN_trk_toKm(m).."\\P(Ref.".. getObjectFromId(refId).code ..")".."\\P|"
						else
							return "Pr."..NOBN_trk_toKm(m).."\\P("..this.code ..")".."\\P|"
						end
					elseif isMiddleStep then
						return "_______"
					else
						return "___"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaFunction Name="_JBTKO_SPO_getIteratedAnnotation3DStep()" ReturnType="String" Description="Returns the distance along own alignment's geometry to the next position where a 3D 'event' is to be placed.
				\nSelect bewteen 'Km', 'Pr' or 'None' in the custom property 'Annotation3DType', 'Km' value as measured at intervals of 100 meters in the applicable reference alignment. Each 10th meter is marked as well, with a short line across the track. Note: There is an alternative function _JBTKO_SPO_Annotation3D_Pr() that shows 'Pr' (profile in own alignment) instead.">
   <Signature>_JBTKO_SPO_getIteratedAnnotation3DStep(AlignmentPos _position)</Signature>
   <Formula>
				function _JBTKO_SPO_getIteratedAnnotation3DStep(_position)
					if Annotation3DType == "KM" then
						return getStepFromNextRoundedReferenceMileage(this, 10, _position.Pos)
					elseif Annotation3DType == "PR" then
						return getStepFromNextRoundedMileage(this, 10, _position.Pos)
					else
						return ""
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="GlobalWidth">
   <Formula>_JBTKO_SPO_GlobalWidth()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SPO_GlobalWidth()" ReturnType="String" Description="Returns the CAD system Global Width (modelspace / paperspace line thickness) for railway track alignments.">
   <Signature>_JBTKO_SPO_GlobalWidth()</Signature>
   <Formula>
				function _JBTKO_SPO_GlobalWidth()
					if SymbolMode == 'Geographic' then
						return 0.00
					else
						--'Schematic': Railway track alignments' line weight depend on the track's usage:
						--For now, check railML attribute 'Type':
						--[ Main track | Secondary track | Connecting track | Station track | Siding track ]
						--TODO: Check on DNA's categories for railway track usage, when alignments in 2D are wrapped
						--inside a block with segmented view according to its linear event properties.
						if Type == "mainTrack" then return 0.70
						elseif Type == "secondaryTrack" then return 0.70
						elseif Type == "connectingTrack" then return 0.70
						elseif Type == "stationTrack" then return 0.70
						elseif Type == "sidingTrack" then return 0.00
						else return 0.00,_error --Shouldn't happen
						end
					end
				end
			</Formula>
  </LuaFunction>
  <PropertyPrompt Key="code" DefaultValue="Spor" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Enkle skinner med ballastprofil" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-JERNBANESPOR-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
   <IncludeSegmentType>Spiral</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Enkle skinner og sviller med ballastprofil" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-JERNBANESPOR-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
   <IncludeSegmentType>Spiral</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Enkle skinner og ledeskinner med ballastprofil" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-JERNBANESPOR-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
   <IncludeSegmentType>Spiral</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Kjørekanter 1435 mm" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-JERNBANESPOR-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
   <IncludeSegmentType>Spiral</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="60E1 1:20 skinner og enkle sviller med ballastprofil" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-JERNBANESPOR-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
   <IncludeSegmentType>Spiral</IncludeSegmentType>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_InnerRailAndInsulation" Name="JBTKO_KJK Kjørekant og skinneisolering" Layer="JBTKO_KJK_isolasjon" Color="ByLayer" Group="Overbygning/Spor">
  <RelationSpace>kjørekant_og_skinneisolering</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="1" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="0.5" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="-1.8" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="2.4" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <AlignmentSystems DefaultSystemName="Kjørekant og skinneisolering">
   <AlignmentSystem Name="Kjørekant og skinneisolering" CantGauge="1.500" AlignmentGauge="1.435" LiftWithCant="false"/>
  </AlignmentSystems>
  <Variants DefaultValue="Kjørekant og skinneisolering">
   <Variant Name="Kjørekant og skinneisolering"></Variant>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D"/>
  <LuaExpression Name="SweptGeometry3D_0.Name">
   <Formula>_JBTKO_KJK_SweptGeometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_KJK_SweptGeometry3DName()" ReturnType="String" Description="Returns the 3D model name [String] for the rail edge and rail isolation state.">
   <Signature>String _JBTKO_KJK_SweptGeometry3DName()</Signature>
   <Formula>
				function _JBTKO_KJK_SweptGeometry3DName()
					local iso = getDownObject(rctype_InsulatedRailJoint)
					if not iso then
						--Unknown isolation state:
						return "NO-BN-2D-FE-WIR-WIRE-GRÅ-DIAMETER-005"
					elseif Color:upper() == "RED" then
						--Visualize non-isolated (pure return current) rail:
						return "NO-BN-2D-FE-WIR-WIRE-RØD-DIAMETER-050"
					elseif Color:upper() == "GREEN" then
						--Visualize isolated (signal) rail:
						return "NO-BN-2D-FE-WIR-WIRE-GRØNN-DIAMETER-050"
					else
						--unknown color code:
						return "NO-BN-2D-FE-WIR-WIRE-"..iso.Color.."-DIAMETER-050"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>"["..code.."]"</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>_JBTKO_KJK_PointOfContact_code(nil)</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_KJK_PointOfContact_code()" ReturnType="String" Description="Obtains the code for a rail point-of-contact alignment, deduced from an insulation in the associated track at the rail's start point.">
   <Signature>String _JBTKO_KJK_PointOfContact_code([AlignmentRef alg])</Signature>
   <Formula>
				function _JBTKO_KJK_PointOfContact_code(alg)
					if alg == nil then alg = this end
					if alg.RcAlignment == nil then return "ERROR - Bad argument ["..RC__identify(alg).."] - has no RcAlignment." end
					local tol = 0.050 --[m]
					local ps = alg.RcAlignment.StartPoint
					local pe = alg.RcAlignment.EndPoint
					local trackGauge = alg.AlignmentSystemAlignmentGauge
					--Get point near midpoint of rail:
					local pm = getAlignmentInfo(alg.id,(ps.X+pe.X)/2.0,(ps.Y+pe.Y)/2.0).Point 
					--Note: If the rail alignment starts or ends in a connection element, then there may be several close candidates:
					local ts = getNearbyAlignments(getPoint3D(ps.X,ps.Y)):
						filter(function (x)
								local d = getAlignmentInfo(x.id,ps.X,ps.Y).DistanceToAlignment
								return math.abs(math.abs(d) - trackGauge/2.0) &lt; tol
							end)
							local n = getCollectionLength(ts)
					if n == 0  then
						return "UNFINISHED - Did not find a track associated with this rail."
					elseif n == 1  then
						local ds = getAlignmentInfo(ts[0].id,ps.X,ps.Y).DistanceToAlignment
						return (ds &lt; 0 and "V. skinne " or "H. skinne ")..ts[0].code
					else
						--Switch, or continuation in a crossing - more than one
						--track lies exctly one half track cauge from start of rail.
						--Note: We cannot use start+end point, since the rail's associated 
						--track may deviate from the same track axis in both ends.
						for i=0,n-1 do
							local ds = getAlignmentInfo(ts[i].id,ps.X,ps.Y).DistanceToAlignment
							local dm = getAlignmentInfo(ts[i].id,pm.X,pm.Y).DistanceToAlignment
							if math.abs(ds-dm) &lt; tol then
								--We have probably found two parallel rails with suitable gauge distance:
								return (ds &lt; 0 and "V. skinne " or "H. skinne ")..ts[i].code
							end
						end
						return "UNFINISHED - Could not identify an associated track."
					end
				end
			</Formula>
  </LuaFunction>
  <PropertyPrompt Key="code" DefaultValue="Kjørekant og skinneisolering" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Kjørekant og skinneisolering" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-SKINNEPROFIL-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
   <IncludeSegmentType>Spiral</IncludeSegmentType>
   <SetValue Key="AlignmentSystem" Value="Kjørekant og skinneisolering"/>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tDelimitedOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_HorizontalGeometryVertex" Name="JBTKO_HOT Horisontalgeometripunkt" Layer="JBTKO_HOT" Color="ByLayer" Group="Overbygning/Karakteristiske trasépunkter" AttAddX="0" AttAddY="0">
  <RelationSpace>horisontaltrasépunkt</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="3" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="0.5" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="2" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="4" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="(Linje start/slutt)"/>
   <Variant Name="KP"/>
   <Variant Name="FKP"/>
   <Variant Name="OB"/>
   <Variant Name="OE"/>
   <Variant Name="FOB"/>
   <Variant Name="FOE"/>
   <Variant Name="RB"/>
   <Variant Name="RE"/>
   <Variant Name="REB"/>
  </Variants>
  <LuaExpression Name="LateralOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Variant">
   <Formula>_JBTKO_HOT_Variant()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_HOT_Variant()" ReturnType="String" Description="Analyzes local alignment geometry and cant and returns nearest vertex' Variant, i.e. type of geometric vertex/cant.">
   <Signature>String _JBTKO_HOT_Variant()</Signature>
   <Formula>
				function _JBTKO_HOT_Variant()
					local ai = getAlignmentInfo()
					local nearest = ai.NearestHorizontalVertex
					local nearestCant = ai.NearestCantVertex
					-- insert "RE,RB" if cant station is closest
					local vertexMileage = nearest.Item1 and nearest.Item1.EndMileage or nearest.Item2.StartMileage
					if nearestCant ~= nil and math.abs(nearestCant.Mileage - ai.Mileage) &lt; math.abs(vertexMileage - ai.Mileage)
										and math.abs(vertexMileage - ai.Mileage) &gt; 1 then
						if math.abs(nearestCant.GradientIn) &gt; 0 and math.abs(nearestCant.GradientOut) &gt; 0 then
							return "REB"
						elseif (nearestCant.GradientIn == nil or nearestCant.GradientIn == 0) and math.abs(nearestCant.GradientOut) &gt; 0 then
							return "RB"
						elseif (nearestCant.GradientOut == nil or nearestCant.GradientOut == 0) and math.abs(nearestCant.GradientIn) &gt; 0 then
							return "RE"
						end
					end
					if nearest == nil then return "" end
					if nearest.Item1 ~= nil and nearest.Item1.Type == "Curve" then
						if nearest.Item2 == nil or nearest.Item2.Type == "Straight" then return "KP" end
						if nearest.Item2.Type == "Curve" then return "FKP" end
					end
					if nearest.Item2 ~= nil and nearest.Item2.Type == "Curve" then
						if nearest.Item1 == nil or nearest.Item1.Type == "Straight" then return "KP" end
					end
					if nearest.Item1 ~= nil and nearest.Item1.Type == "Clothoid" then
						if nearest.Item2 ~= nil and nearest.Item2.Type == "Clothoid" then 
							if nearest.Item1.RadiusStart &lt; nearest.Item1.RadiusEnd then return "FOB" else return "FOE" end --(Note: "FOE" is not found in StyleDef, but is used)
						end
						if nearest.Item1.RadiusStart &lt; nearest.Item1.RadiusEnd then return "OB" else return "OE" end
					end
					if nearest.Item2 ~= nil and nearest.Item2.Type == "Clothoid" then 
						if nearest.Item2.RadiusEnd &lt; nearest.Item2.RadiusStart then return "OB" else return "OE" end
					end
					return "(Linje start/slutt)" --Track begin / end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTKO_HOT_Mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_HOT_Mileage()" ReturnType="Double" Description="Analyzes local alignment geometry and cant and returns nearest vertex' mileage.">
   <Signature>Double _JBTKO_HOT_Mileage()</Signature>
   <Formula>
			function _JBTKO_HOT_Mileage()
				local ai = getAlignmentInfo()
				local nearest = ai.NearestHorizontalVertex
				-- insert "RE,RB" if cant station is closest
				local nearestCant = ai.NearestCantVertex
				local vertexMileage = nearest.Item1 and nearest.Item1.EndMileage or nearest.Item2.StartMileage
				if nearestCant ~= nil and math.abs(nearestCant.Mileage - ai.Mileage) &lt; math.abs(vertexMileage - ai.Mileage)
										and math.abs(vertexMileage - ai.Mileage) &gt; 1 then
					return nearestCant.Mileage
				else
					if nearest.Item2 ~= nil then return nearest.Item2.StartMileage end
					if nearest.Item1 ~= nil then return nearest.Item1.EndMileage end
					return 0.0,_error, _info("Bad data for function _JBTKO_HOT_Mileage().")
				end
			end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="code">
   <Formula>Variant</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <InsertPointObject Name="Horisontalt geometripunkt" DisplayBlockName="NO-BN-2D-JBTKO_DIV-KARAKTERISTISK-PUNKT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTKO_DIV-KARAKTERISTISK-PUNKT-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% assign mitl = {{alignmentRotation | minus:ucsRotation | cosisnegative}} %}{% if mitl == 'True' %}180{% else %}0{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tDelimitedOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_VerticalProfileVertex" Name="JBTKO_VET Vertikalprofilpunkt" Layer="JBTKO_VET" Color="ByLayer" Group="Overbygning/Karakteristiske trasépunkter" AttAddX="0" AttAddY="0">
  <RelationSpace>vertikaltrasépunkt</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="3" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="0.5" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="2" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="4" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="_"/>
   <Variant Name="HBP"/>
   <Variant Name="LBP"/>
   <Variant Name="SE1"/>
   <Variant Name="SE2"/>
   <Variant Name="(Linje start/slutt)"/>
  </Variants>
  <LuaExpression Name="LateralOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Variant">
   <Formula>_JBTKO_VET_Variant()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_VET_Variant()" ReturnType="String" Description="Analyzes local alignment vertical profile and returns nearest segment delimiters or vertex' 'Variant', i.e. type of vertical vertex.">
   <Signature>String _JBTKO_VET_Variant()</Signature>
   <Formula>
				function _JBTKO_VET_Variant()
					local ai = getAlignmentInfo()
					local nearestDelimiter = ai.NearestVerticalSegmentDelimiter
					if nearestDelimiter ~= nil then
						if nearestDelimiter.Type == "CurveStart" then return "SE1" end
						if nearestDelimiter.Type == "CurveEnd" then return "SE2" end
					end
					local nvv = ai.NearestVerticalVertex
					if nvv == nil then return "_" end
					if nvv.Type == "Crest" then return "HBP" end
					if nvv.Type == "Sag" then return "LBP" end
					if nvv.Type == "None" then return "(Linje start/slutt)" end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" Name="PviInfo" DisplayName="PVI info"/>
  <TextAttribute Annotative="true" BindingProperty="PviInfo" CadAttributeTag="PVI_INFO" X="0" Y="-4" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" MText="true"/>
  <LuaExpression Name="PviInfo">
   <Formula>_JBTKO_VET_PviInfo()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_VET_PviInfo()" ReturnType="String" Description="Returns vertical profile info for crests and sags.">
   <Signature>String _JBTKO_VET_PviInfo()</Signature>
   <Formula>
			function _JBTKO_VET_PviInfo()
				local str = ""
				local ai = getAlignmentInfo()					
				local nearestDelimiter = ai.NearestVerticalSegmentDelimiter
				local nearestVertex = ai.NearestVerticalVertex
					
				if nearestVertex == nil then return "?" end
				if nearestDelimiter ~= nil and nearestDelimiter.Type ~= "Pvi" then
					if nearestDelimiter.Type == "CurveStart" then str = "SE1" end
					if nearestDelimiter.Type == "CurveEnd" then str = "SE2" end
				else
					if nearestVertex.Radius &lt; 0 then str = "R"..string.format("%.03f", nearestVertex.Radius) end
					if nearestVertex.Type == "None" then str = "(Linje start/slutt)" end
				end
				return str.."\\P".."H="..string.format("%.3f", nearestDelimiter.Elevation).." moh."	--meters above [mean] sea level
			end
		</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTKO_VET_Mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_VET_Mileage()" ReturnType="Double" Description="Analyzes local alignment profile and returns nearest vertex' mileage.">
   <Signature>Double _JBTKO_VET_Mileage()</Signature>
   <Formula>
				function _JBTKO_VET_Mileage()
					local nearestDelimiter = getAlignmentInfo().NearestVerticalSegmentDelimiter
					return nearestDelimiter == nil and nil or nearestDelimiter.Mileage
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="code">
   <Formula>_JBTKO_VET_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_VET_code()" ReturnType="String" Description="Analyzes local alignment vertical profile and returns code for the nearest characteristic point.">
   <Signature>String _JBTKO_VET_code()</Signature>
   <Formula>
				function _JBTKO_VET_code()
					return Variant
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <InsertPointObject Name="Vertikalt geometripunkt" DisplayBlockName="NO-BN-2D-JBTKO_DIV-KARAKTERISTISK-PUNKT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTKO_DIV-KARAKTERISTISK-PUNKT-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% assign mitl = {{alignmentRotation | minus:ucsRotation | cosisnegative}} %}{% if mitl == 'True' %}180{% else %}0{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETESection" Class="RailwayPlacedObject" LuaName="rctype_HorizontalGeometrySegment" Name="JBTKO_HOS Horisontalgeometrisegment" Layer="JBTKO_HOS" Color="ByLayer" Group="Overbygning/Karakteristiske trasépunkter" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Rettlinje">
    <LuaExpression Name="code">
     <Formula>Variant.."\\P".."L="..string.format("%.3f",getAlignmentInfo().Segment.Length).."\\PRL"</Formula>
    </LuaExpression>
   </Variant>
   <Variant Name="Kurve">
    <LuaExpression Name="code">
     <Formula>
						local ai = getAlignmentInfo()
						return Variant.."\\P".."L="..string.format("%.3f",ai.Segment.Length) .."\\P".."R="..string.format("%.3f",ai.Segment.RadiusStart)
					</Formula>
    </LuaExpression>
   </Variant>
   <Variant Name="Klotoide">
    <LuaExpression Name="code">
     <Formula>
						local ai = getAlignmentInfo()
						local segment = ai.Segment
						local text1
						if segment.RadiusStart == math.huge then 
							text1 = "RL"
						else
							text1 = "R"..string.format("%.3f",segment.RadiusStart)
						end
						
						local text2
						if segment.RadiusEnd == math.huge then
							text2 = "RL"
						else
							text2 = "R"..string.format("%.3f",segment.RadiusEnd)
						end
						
						local vector = ai.Tangent
						local tangentAngle2D = math.atan(vector.Y,vector.Z)
						if (math.cos(getUcsAngle() - tangentAngle2D) &lt; 0) then
							text = "&lt;"..text2.."-"..text1.."&gt;"
						else
							text = "&lt;"..text1.."-"..text2.."&gt;"
						end
						
						return Variant.."\\P".."L="..string.format("%.3f",ai.Segment.Length).."\\P"..text
					</Formula>
    </LuaExpression>
   </Variant>
  </Variants>
  <LuaExpression Name="Variant">
   <Formula>
				type = getAlignmentInfo().Segment.Type
				if type == "Straight" then return "Rettlinje" end
				if type == "Curve" then return "Kurve" end
				if type == "Clothoid" then return "Klotoide" end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>
				local sc = DocumentData.Document.Database.Cannoscale.Scale --Annotative scale
				if RcType:upper():match("SEGMENT") then
					local d = getPropertyValue("LateralOffset")
					if d == 0 then 
						return -6/sc
					else
						return RC__getNearestSnapDistance(d*sc,3)/sc
					end
				else 
					return RightSided and 1e-3 or -1e-3 
				end
			</Formula>
  </LuaExpression>
  <InsertPointObject Name="Horisontalgeometrisegment" DisplayBlockName="NO-BN-2D-JBTRC_SEKSJON-INNSETTING-SYMBOL-Schematic" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <LuaExpression Name="DelimiterType">
    <Formula>rctype_HorizontalGeometryVertex</Formula>
   </LuaExpression>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_SEK-SEKSJON-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% assign mitl = {{alignmentRotation | minus:ucsRotation | cosisnegative}} %}{% if mitl == 'True' %}180{% else %}0{% endif %}"/>
   <SymbolAttribute Tag="X">
    <Value>{{code}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETESection" Class="RailwayPlacedObject" LuaName="rctype_VerticalProfileSegment" Name="JBTKO_VES Vertikalprofilsegment" Layer="JBTKO_VES" Color="ByLayer" Group="Overbygning/Karakteristiske trasépunkter" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Gradient">
    <LuaExpression Name="code">
     <Formula>
						Variant.."\\P"..string.format("%.1f",getAlignmentInfo().Gradient).." {\\H0.5x;\\A2;0}/{\\H0.5x;\\A0;00}"
					</Formula>
    </LuaExpression>
   </Variant>
   <Variant Name="HBP">
    <LuaExpression Name="code">
     <Formula>
						local ai = getAlignmentInfo()
						local nvv = ai.NearestVerticalVertex
						local pviElevation = string.format("%.3f", nvv.Elevation)
						local trackElevation = string.format("%.3f", ai.Elevation)
						local length3D = string.format("%.3f", nvv.Length)
						local radius = string.format("%.3f", nvv.Radius)
						return Variant.."\\P".."Hpvi="..pviElevation.."\\P".."Hspor="..trackElevation.."\\P".."L3D="..length3D.."\\P".."R="..radius
					</Formula>
    </LuaExpression>
   </Variant>
   <Variant Name="LBP">
    <LuaExpression Name="code">
     <Formula>
						local ai = getAlignmentInfo()
						local nvv = ai.NearestVerticalVertex
						local pviElevation = string.format("%.3f", nvv.Elevation)
						local trackElevation = string.format("%.3f", ai.Elevation)
						local length3D = string.format("%.3f", nvv.Length)
						local radius = string.format("%.3f", nvv.Radius)
						return Variant.."\\P".."Hpvi="..pviElevation.."\\P".."Hspor="..trackElevation.."\\P".."L3D="..length3D.."\\P".."R="..radius
					</Formula>
    </LuaExpression>
   </Variant>
  </Variants>
  <LuaExpression Name="Variant">
   <Formula>
				local nvv = getAlignmentInfo().NearestVerticalVertex
				if nvv.Type == "None" then return "Gradient"
				elseif nvv.Type == "Crest" then return nvv.Radius &lt; 4e-4 and "Gradient" or "HBP"
				elseif nvv.Type == "Sag" then return nvv.Radius &lt; 4e-4 and "Gradient" or "LBP"
				else return _info("Bad Vertical Vertex Type: "..nvv.Type),_warning
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>
				local sc = DocumentData.Document.Database.Cannoscale.Scale --Annotative scale
				if RcType:upper():match("SEGMENT") then
					local d = getPropertyValue("LateralOffset")
					if d == 0 then 
						return -6/sc
					else
						return RC__getNearestSnapDistance(d*sc,3)/sc
					end
				else 
					return RightSided and 1e-3 or -1e-3 
				end
			</Formula>
  </LuaExpression>
  <InsertPointObject Name="Vertikalprofilsegment" DisplayBlockName="NO-BN-2D-JBTRC_SEKSJON-INNSETTING-SYMBOL-Schematic" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <LuaExpression Name="DelimiterType">
    <Formula>rctype_VerticalProfileVertex</Formula>
   </LuaExpression>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_SEK-SEKSJON-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% assign mitl = {{alignmentRotation | minus:ucsRotation | cosisnegative}} %}{% if mitl == 'True' %}180{% else %}0{% endif %}"/>
   <SymbolAttribute Tag="X">
    <Value>{{code}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
 </ObjectType>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_PlatformEdge" Name="JBTKO_PLF Plattformkant" Layer="JBTKO_PLF" Color="ByLayer" Group="Overbygning/Plattformer">
  <RelationSpace>plattformkant</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <Variants DefaultValue="Plattformelementer, betong, 1m bredde, 2m lengde, høyre side">
   <Variant Name="Plattformelementer, betong, 1m bredde, 2m lengde, høyre side">
    <SetValue Key="IteratedGeometry3D_0.Name" Value="NO-BN-3D-KO-PLF-PLATTFORMELEMENT-1000-2000-VSIDE"/>
    <SetValue Key="IteratedGeometry3D_0.Separation" Value="2.0"/>
    <SetValue Key="IteratedGeometry3D_0.InitialLinearOffset" Value="1.0"/>
   </Variant>
   <Variant Name="Plattformelementer, betong, 1m bredde, 2m lengde, venstre side">
    <SetValue Key="IteratedGeometry3D_0.Name" Value="NO-BN-3D-KO-PLF-PLATTFORMELEMENT-1000-2000-VSIDE"/>
    <SetValue Key="IteratedGeometry3D_0.Separation" Value="2.0"/>
    <SetValue Key="IteratedGeometry3D_0.InitialLinearOffset" Value="1.0"/>
   </Variant>
  </Variants>
  <AlignmentSystems DefaultSystemName="Plattformkant">
   <AlignmentSystem Name="Plattformkant" CantGauge="0.000" AlignmentGauge="0.000" LiftWithCant="false"/>
  </AlignmentSystems>
  <DynamicProperty Type="Representation3D" Subtype="IteratedGeometry3D">
   <SetValue Key="RotationBeforeOffset" Value="True"/>
   <SetValue Key="CustomTransformation" Value="false"/>
  </DynamicProperty>
  <LuaExpression Name="IteratedGeometry3D_0.Rotation.X">
   <Formula>NOBN_trk_getPitchFromGradient(_position)</Formula>
  </LuaExpression>
  <LuaExpression Name="IteratedGeometry3D_0.Rotation.Y">
   <Formula>NOBN_trk_getRollFromCant(_position)</Formula>
  </LuaExpression>
  <LuaExpression Name="IteratedGeometry3D_0.Rotation.Z">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <PropertyPrompt Key="code" DefaultValue="Plattformkant" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Plattformelementer, betong, 1m bredde, 2m lengde, høyre side" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-PLATFORM-EDGE-RIGHT-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Plattformelementer, betong, 1m bredde, 2m lengde, venstre side" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-PLATFORM-EDGE-LEFT-Schematic" DefaultToTangentContinuity="true">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_BufferStop" Name="JBTKO_SST Sporstopper" Layer="JBTKO_SST" Color="ByLayer" Group="Overbygning/Sporstoppere" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>sporstopper</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Fast">
   <Variant Name="Fast"/>
   <Variant Name="Glidbar"/>
   <Variant Name="Hydraulisk"/>
  </Variants>
  <LuaExpression Name="LateralOffset">
   <Formula>NOBN_trk_getLateralOffsetFromCantAndTrackPlaneDistance(RightSided and 1e-3 or -1e-3)</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>"Sst."..Variant:sub(1,4).."."..code</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SST_BufferStop_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SST_BufferStop_Geometry3DName()" ReturnType="String" Description="Returns the buffer stops 3D geometry name.">
   <Signature>String _JBTKO_SST_BufferStop_Geometry3DName()</Signature>
   <Formula>
				function _JBTKO_SST_BufferStop_Geometry3DName()
					if Variant == "Fast" then
						return "NO-BN-3D-KO-SST-SPORSTOPPER-FAST"
					elseif Variant == "Glidbar" then
						return "NO-BN-3D-KO-SST-SPORSTOPPER-GLIDBAR"
					elseif Variant == "Hydraulisk" then
						return "NO-BN-3D-KO-SST-SPORSTOPPER-HYDRAULISK"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Fast" DisplayBlockName="NO-BN-2D-JBTKO_SST-SPORSTOPPER-FAST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Glidbar" DisplayBlockName="NO-BN-2D-JBTKO_SST-SPORSTOPPER-GLIDBAR-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Hydraulisk" DisplayBlockName="NO-BN-2D-JBTKO_SST-SPORSTOPPER-HYDRAULISK-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTKO_SST-SPORSTOPPER-FAST" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTKO_SST-SPORSTOPPER
			{% if Variant == 'Fast' %}FAST
			{% elsif Variant == 'Glidbar' %}GLIDBAR
			{% elsif Variant == 'Hydraulisk' %}HYDRAULISK
			{% endif %}
			{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_SnowClearingProtectiveBeam" Name="JBTKO_MVS Oppkjørsbjelke" Layer="JBTKO_MVS" Color="ByLayer" Group="Overbygning/Oppkjørsbjelker" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>oppkjørsbjelke</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Oppkjørsbjelke, kort">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-KO-MVS-OPPKJØRSBJELKE-KORT"/>
   </Variant>
   <Variant Name="Oppkjørsbjelke, lang">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-KO-MVS-OPPKJØRSBJELKE-LANG"/>
   </Variant>
  </Variants>
  <LuaExpression Name="LateralOffset">
   <Formula>NOBN_trk_getLateralOffsetFromCantAndTrackPlaneDistance(RightSided and 1e-3 or -1e-3)</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>"up"</Formula>
  </LuaExpression>
  <SetValue Key="name" Value="Oppkjørsbjelke"/>
  <InsertPointObject Name="Oppkjørsbjelke, kort" DisplayBlockName="NO-BN-2D-JBTKO_MVS-OPPKJOERSBJELKE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTKO_MVS-OPPKJOERSBJELKE" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTKO_MVS-OPPKJOERSBJELKE-{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tEarthWire" Class="RailwayAlignment" LuaName="rctype_EarthingConductor" Name="JBTEH_JOR Jordleder" Layer="JBTEH_JOR" Color="ByLayer" Group="Kontaktledning/Jording">
  <RelationSpace>jordleder</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <Variants DefaultValue="Isolert jordleder">
   <Variant Name="Isolert jordleder" Description="Jordleder i lavspentløpet i kabelkanal langs sporet.">
    <SetValue Key="WireType" Value="Cu95"/>
    <SetValue Key="Sheath" Value="IX"/>
   </Variant>
   <Variant Name="Blank jordleder" Description="Jording som føres fra KL-mast til KL-mast, eller opphengt i tunneltak eller ført langs tunnelvegg.">
    <SetValue Key="WireType" Value="Cu95"/>
    <SetValue Key="Sheath" Value="KHF"/>
   </Variant>
   <Variant Name="Tverrforbinder" Description="Forbinder skinnestrenger i samme spor, f.eks. trekke returstrøm over til andre skinnen ifbm dobbelisolert skjøt. Kabelforlegning i sporet (dvs TXXI kappe).">
    <SetValue Key="WireType" Value="Cu70"/>
    <SetValue Key="Sheath" Value="TXXI"/>
   </Variant>
   <Variant Name="Utjevningsforbinder" Description="Forbinder jordskinnen i ett spor med jordskinnen i et annet spor i nærheten. Kabelforlegning er typisk i føringsvei (dvs IX kappe).">
    <SetValue Key="WireType" Value="Cu95"/>
    <SetValue Key="Sheath" Value="IX"/>
   </Variant>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D">
   <SetValue Key="CustomTransformation" Value="false"/>
  </DynamicProperty>
  <CustomProperty DataType="Enumeration" Name="WireType" DisplayName="Ledertype" DefaultValue="Cu95" Description="The earthing wire type (ewt) [6/16/25/35/50/70/95/120/150 mm2 Cu], or aluminum corresponding to the copper conductivities.">
   <Values>
    <Value>Cu400</Value>
    <Value>Cu300</Value>
    <Value>Cu240</Value>
    <Value>Cu185</Value>
    <Value>Cu150</Value>
    <Value>Cu120</Value>
    <Value>Cu95</Value>
    <Value>Cu70</Value>
    <Value>Cu50</Value>
    <Value>Cu35</Value>
    <Value>Cu25</Value>
    <Value>Cu16</Value>
    <Value>Cu06</Value>
    <Value>Alu240</Value>
    <Value>Alu190</Value>
    <Value>Alu150</Value>
    <Value>Alu120</Value>
    <Value>Alu80</Value>
    <Value>Alu50</Value>
    <Value>Alu35</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="Sheath" DisplayName="Kappe" DefaultValue="IX" Description="The earthing wire sheath type [KHF | UX | TXXI | IX], where KFH:naked conductor for air suspension, UX:insulated for object earthing, TXXI:connecting tracks in tunnels (Cl-free, flame retardant), IX:insulated for indoor or outdoor object earthing. Other Nexans abbreviations are:G:'glødet', H:'hardtrukket', F:'flertrådet'.">
   <Values>
    <Value>KHF</Value>
    <Value>UX</Value>
    <Value>TXXI</Value>
    <Value>IX</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="name">
   <Formula>code.." ("..Variant..")"</Formula>
  </LuaExpression>
  <LuaExpression Name="Linetype">
   <Formula>"RC-EARTHING-"..WireType</Formula>
  </LuaExpression>
  <LuaExpression Name="SweptGeometry3D_0.Name">
   <Formula>_JBTEH_JOR_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_JOR_Geometry3DName()" ReturnType="String" Description="Returns a 3D model name corresponding to the current earthing wire variant and custom properties.">
   <Signature>Double _JBTEH_JOR_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_JOR_Geometry3DName()
					--Cross-section area / outer diameter for bare copper multistranded wire (ref Bahra catalogue p.36):
					local bareCopperConductor = {{"Cu400",26},{"Cu300",23},{"Cu240",20},{"Cu185",18},{"Cu150",16},{"Cu120",14},{"Cu95",13},{"Cu70",11},{"Cu50",9},{"Cu35",8},{"Cu25",6},{"Cu16",5},{"Cu6",3}}
					if Sheath == "KHF" then 
						--if true then return WireType:match("(Cu%d+)") end --DEBUG
						local indx = 0
						for i = 1,#bareCopperConductor do
							if WireType:match("(Cu%d+)") == bareCopperConductor[i][1] then
								indx = i
							end
						end
						--if true then return WireType,indx,bareCopperConductor[3][2] end
						if indx == 0 then
							return "No cross-section area found in WireType name ["..WireType.."]."
						else
							if bareCopperConductor[indx][1]:match("Cu") then
								return string.format("NO-BN-2D-FE-WIR-WIRE-BLANK-KOBBER-%d-MM2-DIAMETER-%03d",
									bareCopperConductor[indx][1]:match("Cu(%d+)"), bareCopperConductor[indx][2])
							else
								return "Only copper wire types have been anticipated, sorry about that :-("
							end
						end
					else
						return "Only KHF wire types (bare stranded wire) have been anticipated, sorry about that :-("
					end
				end
			</Formula>
  </LuaFunction>
  <PropertyPrompt Key="code" DefaultValue="JL-" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Isolert jordleder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-JORDLEDER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Blank jordleder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-JORDLEDER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Tverrforbinder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-JORDLEDER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Utjevningsforbinder" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-JORDLEDER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_EarthingElectrode" Name="JBTEH_JEL Jordelektrode" Layer="JBTEH_JEL" Color="ByLayer" Group="Kontaktledning/Jording" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>jordelektrode</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Kråkefot">
   <Variant Name="Kråkefot"></Variant>
  </Variants>
  <LuaExpression Name="name">
   <Formula>
				if Variant == "Kråkefot" then return "Kråkefot"
				else return "Unknown ground spike earthing device variant ["..Variant.."].",_warning
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>
				if Variant == "Kråkefot" then 
					return "TODO: No available 3D model for RcType='"..RcType.."' Variant='"..Variant.."' - please send ditt forslag til support@railcomplete.com"
				else
					return "Unknown ground spike earthing device variant ["..Variant.."].",_warning
				end
			</Formula>
  </LuaExpression>
  <InsertPointObject Name="Kråkefot" DisplayBlockName="NO-BN-2D-JBTEH_JEL-JORDING-JORDPOTENSIAL-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_JEL-JORDING-JORDPOTENSIAL-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_JEL
				JORDING
				{% if Variant == 'Kråkefot' %}JORDPOTENSIAL
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_EarthingConnector" Name="JBTEH_JOF Jordforbinder" Layer="JBTEH_JOF" Color="ByLayer" Group="Kontaktledning/Jording" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>jordforbinder</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Skinnejord">
   <Variant Name="Jordtilkobling for objekt"></Variant>
   <Variant Name="Skinnejord"></Variant>
  </Variants>
  <LuaExpression Name="name">
   <Formula>
				if Variant == "Jordtilkobling for objekt" then return "Jordtilkobling"
				elseif Variant == "Skinnejord" then return "Skinnejord"
				else return "Unrecognized earthing connection device variant ["..Variant.."].",_warning
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>"Unrecognized earthing connection device variant ["..Variant.."].",_warning</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <InsertPointObject Name="Jordtilkobling for objekt" DisplayBlockName="NO-BN-2D-JBTEH_JEL-JORDING-JORDPOTENSIAL-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Skinnejord" DisplayBlockName="NO-BN-2D-JBTEH_JOF-JORDING-SKINNEJORD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_JOF-JORDING-SKINNEJORD-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D
				{% if Variant == 'Jordtilkobling for objekt' %}JBTEH_JEL-JORDING-JORDPOTENSIAL
				{% elsif Variant == 'Skinnejord' %}JBTEH_JOF-JORDING-SKINNEJORD
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_EarthingBusBar" Name="JBTEH_JSK Jordskinne" Layer="JBTEH_JSK" Color="ByLayer" Group="Kontaktledning/Jording" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>jordskinne</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Jordskinne 10x50x290 (9xØ13)">
   <Variant Name="Jordskinne 10x50x290 (9xØ13)"></Variant>
   <Variant Name="Jordskinne 10x50x530 (17xØ13)"></Variant>
  </Variants>
  <SetValue Key="dir" Value="both"/>
  <LuaExpression Name="name">
   <Formula>
				if Variant:lower():match("jordskinne") then return "Jordskinne "..code
				else return "Unknown earthing bus bar variant ["..Variant.."].",_warning
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>
				if Variant == "Jordskinne 10x50x290 (9xØ13)" then return "NO-BN-3D-EH-JSK-JORDINGSSKINNE-10x50x290"
				elseif Variant == "Jordskinne 10x50x530 (17xØ13)" then return "NO-BN-3D-EH-JSK-JORDINGSSKINNE-10x50x530"
				else return "Unknown earthing connection device variant ["..Variant.."].",_warning
				end
			</Formula>
  </LuaExpression>
  <InsertPointObject Name="Jordskinne 10x50x290 (9xØ13)" DisplayBlockName="NO-BN-2D-JBTEH_JSK-JORDING-JORDSKINNE-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="0.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Jordskinne 10x50x530 (17xØ13)" DisplayBlockName="NO-BN-2D-JBTEH_JSK-JORDING-JORDSKINNE-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="0.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_JSK-JORDING-JORDSKINNE-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_JSK
				JORDING-JORDSKINNE
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tMarker" Class="RailwayPlacedObject" LuaName="rctype_ContactWireChangeAnnotation" Name="JBTEH_LBA Ledningsbytte annotering" Layer="JBTEH_LBA" Color="ByLayer" Group="Kontaktledning/Ledningsbytte annotering" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>kl-annotering</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="40" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="2.5" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="33" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <Variants DefaultValue="Vekslingsfelt annotering">
   <Variant Name="Seksjonsfelt annotering"/>
   <Variant Name="Vekslingsfelt annotering"/>
   <Variant Name="Sugefelt annotering"/>
   <Variant Name="Fritekst annotering"/>
  </Variants>
  <LuaExpression Name="name">
   <Formula>_JBTEH_LBA_ocs_annotation_name()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_LBA_ocs_annotation_name()" ReturnType="String" Description="Obtains the 'name' for a OCS annotation item.">
   <Signature>String _JBTEH_LBA_ocs_annotation_name()</Signature>
   <Formula>
				function _JBTEH_LBA_ocs_annotation_name()
					local RelationName = rel_OcsWireChangeAnnotation_AppliesTo_ContactWire
					local r,n = getRelatedObjects(RelationName)
					if Variant ~= "Fritekst annotering" then
						if n == 0 then 
							return "UNFINISHED - Relate OCS contact wire change annotation to its two catenary wire alignments with '"..RelationName.."'."
						elseif n == 1 then
							return "UNFINISHED - Relate OCS contact wire change annotation for contact wire '"
								..r[0].code.."' to one more catenary wire alignment with '"..RelationName.."'."
						elseif n == 2 then
							-- NB! The user should use the ManageProperties Relations tab and just drag-and-drop relations in 
							-- the datagrid to modify the sequence of relations (which modifies the text shown in modelspace).
							local a = r[0]
							local b = r[1]
							if (Variant == "Vekslingsfelt annotering") then 
								return "VEKSLINGSFELT".." L"..a.code.." / L"..b.code
							elseif (Variant == "Seksjonsfelt annotering") then 
								return "SEKSJONSFELT".." L"..a.code.." / L"..b.code
							elseif (Variant == "Sugefelt annotering") then 
								return "SUGEFELT".." L"..a.code.." / L"..b.code
							end
						else 
							return _warning, "Too many ["..n.."] related items - relate OCS contact wire change annotation to exactly two catenary wire alignments with '"
								..RelationName.."', or adjust stage settings using layer names."
						end
					elseif Variant == "Fritekst annotering" then 
						if code and code ~= "" then 
							return code
						else
							if n == 0 then 
								return "UNFINISHED - Relate OCS annotation with variant '"..Variant.."' to its items with '"
									..RelationName.."' and define the 'code' or 'name' property."
							else
								local s = RC__identify(r[0])
								for i = 1, n-1 do
									s = s..", "..RC__identify(r[i])
								end
								return "UNFINISHED - Define the 'code' property or change the 'name' property to annotate related items ["..s.."]."
							end
						end
					else
						return _error, "Unrecognized variant ["..Variant.."] - cannot annotate items"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Vekslingsfelt annotering" DisplayBlockName="NO-BN-2D-JBTFE_TXT-ANNOTERINGSTEKST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3" SnapSensitivityDistance="3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Seksjonsfelt annotering" DisplayBlockName="NO-BN-2D-JBTFE_TXT-ANNOTERINGSTEKST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3" SnapSensitivityDistance="3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Sugefelt annotering" DisplayBlockName="NO-BN-2D-JBTFE_TXT-ANNOTERINGSTEKST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3" SnapSensitivityDistance="3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Fritekst annotering" DisplayBlockName="NO-BN-2D-JBTFE_TXT-ANNOTERINGSTEKST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3" SnapSensitivityDistance="3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTFE_TXT
				ANNOTERINGSTEKST
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_HighVoltageConductor" Name="JBTEH_LED Ledning" Layer="JBTEH_LED" Color="ByLayer" Group="Kontaktledning/Ledning">
  <RelationSpace>høyspentledning</RelationSpace>
  <AlignmentSystems DefaultSystemName="Høyspentledning">
   <AlignmentSystem Name="Høyspentledning" CantGauge="0.010" AlignmentGauge="0.010" LiftWithCant="false"/>
  </AlignmentSystems>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <Variants DefaultValue="AT-line">
   <Variant Name="AT-line (PL)"/>
   <Variant Name="AT-kabel (PL)"/>
   <Variant Name="AT-line (NL)"/>
   <Variant Name="AT-kabel (NL)"/>
   <Variant Name="Fjernline"/>
   <Variant Name="Fjernkabel"/>
   <Variant Name="Forbigangsline"/>
   <Variant Name="Forbigangskabel"/>
   <Variant Name="Forsterkningsline"/>
   <Variant Name="Forsterkningskabel"/>
   <Variant Name="Mateline"/>
   <Variant Name="Matekabel"/>
   <Variant Name="Returline"/>
   <Variant Name="Returkabel"/>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D">
   <SetValue Key="CustomTransformation" Value="false"/>
  </DynamicProperty>
  <LuaExpression Name="Linetype">
   <Formula>_JBTEH_LED_Linetype()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_LED_Linetype()" ReturnType="String" Description="Obtains the CAD system linetype (continuous / dashed) for the wire, based on its Variant.">
   <Signature>String _JBTEH_LED_Linetype()</Signature>
   <Formula>
				function _JBTEH_LED_Linetype()
					if Variant == "AT-line (PL)" then
						return "RC-EH_LINJE"
					elseif Variant == "AT-kabel (PL)" then
						return "RC-EH_KABEL"
					elseif Variant == "AT-line (NL)" then
						return "RC-EH_LINJE"
					elseif Variant == "AT-kabel (NL)" then
						return "RC-EH_KABEL"
					elseif Variant == "Fjernline" then
						return "RC-EH_LINJE"
					elseif Variant == "Fjernkabel" then
						return "RC-EH_KABEL"
					elseif Variant == "Forbigangsline" then
						return "RC-EH_LINJE"
					elseif Variant == "Forbigangskabel" then
						return "RC-EH_KABEL"
					elseif Variant == "Forsterkningsline" then
						return "RC-EH_LINJE"
					elseif Variant == "Forsterkningskabel" then
						return "RC-EH_KABEL"
					elseif Variant == "Mateline" then
						return "RC-EH_LINJE"
					elseif Variant == "Matekabel" then
						return "RC-EH_KABEL"
					elseif Variant == "Returline" then
						return "RC-EH_RETURLEDNING"
					elseif Variant == "Returkabel" then
						return "RC-EH_RETURKABEL"
					else
						return "Continuous" --Cannot return text string here
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="WireType" DisplayName="Ledningstype" DefaultValue="tsli - al - 24 kv - 3x1x95" Description="the overhead catenary system (ocs) physical wire type.">
   <Values>
    <Value>axcesq-al-36 kv 1x400/35</Value>
    <Value>axlj - al - 24 kv - 1x240/25</Value>
    <Value>bsfi - cu - 1 kv - 3x10</Value>
    <Value>bsfi - cu - 1 kv - 3x16</Value>
    <Value>bsfi - cu - 1 kv - 3x2,5</Value>
    <Value>bsfi - cu - 1 kv - 3x25</Value>
    <Value>bsfi - cu - 1 kv - 3x50</Value>
    <Value>bsfi - cu - 1 kv - 3x6</Value>
    <Value>bv-axces - al - 36 kv - 1x240/35</Value>
    <Value>bv-axcesq - al - 36 kv - 1x240/35</Value>
    <Value>blank - al - 1x240/19</Value>
    <Value>blank - al - 1x240/37</Value>
    <Value>blank - al - 1x400/61</Value>
    <Value>blank - al - 1x240/61</Value>
    <Value>blank - cu - 1x150/37</Value>
    <Value>blank - cu - 1x95/1x50</Value>
    <Value>ex - al - 1 kv - 3x95</Value>
    <Value>ex - al - 1x240/19</Value>
    <Value>ex - al - 1x240/61</Value>
    <Value>ifsi - cu - 1 kv - 1x25/16</Value>
    <Value>ifsi - cu - 1 kv - 1x4/4 </Value>
    <Value>ix - 4x95 - cu</Value>
    <Value>ix - al - 1x240/19</Value>
    <Value>ix - al - 1x240/37</Value>
    <Value>ix - al - 1x240/61</Value>
    <Value>ixxi - 2x240 - al </Value>
    <Value>ixxi - al - 1 kv - 1x240</Value>
    <Value>ixxi - al - 1x240/37</Value>
    <Value>ixxi - al - 1x240/19</Value>
    <Value>ixxi - al - 1x240/61</Value>
    <Value>radox 4 gkw-x - cu - 1,8/3kv - 95</Value>
    <Value>tfxp - al - 1 kv - 1x240</Value>
    <Value>tsle - al - 36 kv - 1x240/61</Value>
    <Value>tsle - al - 36 kv - 1x400/35</Value>
    <Value>tsle - al- 24kv - 1x50/16</Value>
    <Value>tsle - al- 36kv - 1x150/35</Value>
    <Value>tsle - cu - 36 kv - 1x150</Value>
    <Value>tslf - al - 24 kv - 1x400</Value>
    <Value>tsli - al - 24 kv - 3x150</Value>
    <Value>tsli - al - 24 kv - 3x1x240</Value>
    <Value>tsli - al - 24 kv - 3x1x50</Value>
    <Value>tsli - al - 24 kv - 3x1x95</Value>
    <Value>tsli - al - 36 kv - 1x150</Value>
    <Value>tsli - al - 36 kv - 1x240</Value>
    <Value>tsli - al - 36 kv - 1x400/35</Value>
    <Value>tx - al - 1x240/37</Value>
    <Value>txse - al - 1 kv - 1x150</Value>
    <Value>txse - al - 1 kv - 1x240</Value>
    <Value>txse - al - 1 kv - 1x400</Value>
    <Value>txse - al - 1 kv - 1x50</Value>
    <Value>txse - al - 36kv - 1x400/35</Value>
    <Value>txse al. 24 kv</Value>
    <Value>txsi - al - 36 kv - 1x400</Value>
    <Value>txsi - cu - 24 kv - 1x25/16</Value>
    <Value>txsp - cu - 24 kv - 1x25</Value>
    <Value>txxi - al - 1kv - 1x1x240</Value>
    <Value>txxi - al - 1kv - 1x1x400</Value>
    <Value>txxi - al - 1kv - 2x1x240</Value>
    <Value>txxi - al - 1kv - 2x1x400</Value>
    <Value>txxi - cu - 1kv - 1x1x95</Value>
    <Value>txxi - cu - 1kv - 3x1x95</Value>
    <Value>txxp - al - 1 kv - 1x150/19</Value>
    <Value>txxp - al - 1 kv - 1x240</Value>
    <Value>txxp - al - 1 kv - 1x240/37</Value>
    <Value>txxp - al - 1 kv - 1x300/61</Value>
    <Value>txxp - cu - 1 kv - 1x150</Value>
    <Value>txxp - cu - 1 kv - 1x300</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="Material" DisplayName="Ledningsmateriale" Description="the overhead catenary system (ocs) physical wire material.">
   <Values>
    <Value>aluminium</Value>
    <Value>kobber</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Material">
   <Formula>_JBTEH_LED_TypeToPropertyAnalysis()["material"]</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="InsulationGroup" DisplayName="Isolasjonsgruppe" Description="the overhead catenary system (ocs) physical wire insulation group in kV.">
   <Values>
    <Value>1</Value>
    <Value>24</Value>
    <Value>36</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="InsulationGroup">
   <Formula>_JBTEH_LED_TypeToPropertyAnalysis()["insulation"]</Formula>
  </LuaExpression>
  <CustomProperty DataType="UInt32" Name="CrossSection" DisplayName="Nominellt tverrsnitt" Description="the overhead catenary system (ocs) physical wire nominal cross section in mm^2."/>
  <LuaExpression Name="CrossSection">
   <Formula>_JBTEH_LED_TypeToPropertyAnalysis()["cross_section"]</Formula>
  </LuaExpression>
  <CustomProperty DataType="UInt32" Name="Strands" DisplayName="Antall tråder" Description="the number of strands in the physical overhead catenary system (ocs) wire."/>
  <LuaExpression Name="Strands">
   <Formula>_JBTEH_LED_TypeToPropertyAnalysis()["strands"]</Formula>
  </LuaExpression>
  <LuaExpression Name="SweptGeometry3D_0.Roll">
   <Formula>NOBN_com_getRollFromCantInterpretedAsDecimalDegrees(_position)</Formula>
  </LuaExpression>
  <LuaExpression Name="SweptGeometry3D_0.Name">
   <Formula>_JBTEH_LED_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_LED_Geometry3DName()" ReturnType="Double" Description="Obtains the wire's 3D model name, based on its Variant and material.">
   <Signature>Double _JBTEH_LED_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_LED_Geometry3DName()
					return "NO-BN-2D-FE-WIR-WIRE-BLANK-KOBBER-95-MM2-DIAMETER-013"
				end
			</Formula>
  </LuaFunction>
  <LuaFunction Name="_JBTEH_LED_TypeToPropertyAnalysis()" ReturnType="Table[6*Double]" Description="Returns standard wire Values table: [material]=wire material, [insulation]=wire insulation group in kV, [cross_section]= wire nominal cross section in mm^2, [strands] = number of strands in the wire">
   <Signature>Table[6*Double] _JBTEH_LED_TypeToPropertyAnalysis(String type)</Signature>
   <Formula>
				function _JBTEH_LED_TypeToPropertyAnalysis(type)
					if type == nil then type = WireType end
					Types = {
						"axcesq-al-36 kv 1x400/35",
						"axlj - al - 24 kv - 1x240/25",
						"bsfi - cu - 1 kv - 3x10",
						"bsfi - cu - 1 kv - 3x16",
						"bsfi - cu - 1 kv - 3x2,5",
						"bsfi - cu - 1 kv - 3x25",
						"bsfi - cu - 1 kv - 3x50",
						"bsfi - cu - 1 kv - 3x6",
						"bv-axces - al - 36 kv - 1x240/35",
						"bv-axcesq - al - 36 kv - 1x240/35",
						"blank - al - 1x240/19",
						"blank - al - 1x240/37",
						"blank - al - 1x400/61",
						"blank - al - 1x240/61",
						"blank - cu - 1x150/37",
						"blank - cu - 1x95/1x50",
						"ex - al - 1 kv - 3x95",
						"ex - al - 1x240/19",
						"ex - al - 1x240/61",
						"ifsi - cu - 1 kv - 1x25/16",
						"ifsi - cu - 1 kv - 1x4/4 ",
						"ix - 4x95 - cu",
						"ix - al - 1x240/19",
						"ix - al - 1x240/37",
						"ix - al - 1x240/61",
						"ixxi - 2x240 - al ",
						"ixxi - al - 1 kv - 1x240",
						"ixxi - al - 1x240/37",
						"ixxi - al - 1x240/19",
						"ixxi - al - 1x240/61",
						"radox 4 gkw-x - cu - 1,8/3kv - 95",
						"tfxp - al - 1 kv - 1x240",
						"tsle - al - 36 kv - 1x240/61",
						"tsle - al - 36 kv - 1x400/35",
						"tsle - al- 24kv - 1x50/16",
						"tsle - al- 36kv - 1x150/35",
						"tsle - cu - 36 kv - 1x150",
						"tslf - al - 24 kv - 1x400",
						"tsli - al - 24 kv - 3x150",
						"tsli - al - 24 kv - 3x1x240",
						"tsli - al - 24 kv - 3x1x50",
						"tsli - al - 24 kv - 3x1x95",
						"tsli - al - 36 kv - 1x150",
						"tsli - al - 36 kv - 1x240",
						"tsli - al - 36 kv - 1x400/35",
						"tx - al - 1x240/37",
						"txse - al - 1 kv - 1x150",
						"txse - al - 1 kv - 1x240",
						"txse - al - 1 kv - 1x400",
						"txse - al - 1 kv - 1x50",
						"txse - al - 36kv - 1x400/35",
						"txse al. 24 kv",
						"txsi - al - 36 kv - 1x400",
						"txsi - cu - 24 kv - 1x25/16",
						"txsp - cu - 24 kv - 1x25",
						"txxi - al - 1kv - 1x1x240",
						"txxi - al - 1kv - 1x1x400",
						"txxi - al - 1kv - 2x1x240",
						"txxi - al - 1kv - 2x1x400",
						"txxi - cu - 1kv - 1x1x95",
						"txxi - cu - 1kv - 3x1x95",
						"txxp - al - 1 kv - 1x150/19",
						"txxp - al - 1 kv - 1x240",
						"txxp - al - 1 kv - 1x240/37",
						"txxp - al - 1 kv - 1x300/61",
						"txxp - cu - 1 kv - 1x150",
						"txxp - cu - 1 kv - 1x300"
						}
					if not RC__isMemberOf(Types, type) then 
						return 0,_warning, _info("Bad wire type ["..type.."]. ")
					end
					local t = {
						["axcesq-al-36 kv 1x400/35"] = {material= "aluminium", insulation=36 , cross_section=400, strands=35 },
						["axlj - al - 24 kv - 1x240/25"] = {material= "aluminium", insulation=24, cross_section=240, strands=25 },
						["bsfi - cu - 1 kv - 3x10"] = {material= "kobber", insulation= 1},
						["bsfi - cu - 1 kv - 3x16"] = {material= "kobber", insulation= 1},
						["bsfi - cu - 1 kv - 3x2,5"] = {material= "kobber", insulation= 1},
						["bsfi - cu - 1 kv - 3x25"] = {material= "kobber", insulation= 1},
						["bsfi - cu - 1 kv - 3x50"] = {material= "kobber", insulation= 1},
						["bsfi - cu - 1 kv - 3x6"] = {material= "kobber", insulation= 1},
						["bv-axces - al - 36 kv - 1x240/35"] = {material= "aluminium", insulation= 36, cross_section=240, strands=35 },
						["bv-axcesq - al - 36 kv - 1x240/35"] = {material= "aluminium", insulation= 36, cross_section=240, strands=35 },
						["blank - al - 1x240/19"] = {material= "aluminium", cross_section=240, strands=19 },
						["blank - al - 1x240/37"] = {material= "aluminium", cross_section=240, strands=37 },
						["blank - al - 1x400/61"] = {material= "aluminium", cross_section=400, strands=61 },
						["blank - al - 1x240/61"] = {material= "aluminium", cross_section=240, strands=61 },
						["blank - cu - 1x150/37"] = {material= "kobber", cross_section=150, strands=37 },
						["blank - cu - 1x95/1x50"] = {material= "kobber"},
						["ex - al - 1 kv - 3x95"] = {material= "aluminium", insulation= 1, cross_section=95 },
						["ex - al - 1x240/19"] = {material= "aluminium",cross_section=240, strands=19},
						["ex - al - 1x240/61"] = {material= "aluminium", cross_section=240, strands=61 },
						["ifsi - cu - 1 kv - 1x25/16"] = {material= "kobber", insulation= 1, cross_section=25, strands=16 },
						["ifsi - cu - 1 kv - 1x4/4 "] = {material= "kobber", insulation= 1, cross_section=4, strands=4 },
						["ix - 4x95 - cu"] = {material= "kobber", cross_section=95 },
						["ix - al - 1x240/19"] = {material= "aluminium", cross_section=240, strands=19 },
						["ix - al - 1x240/37"] = {material= "aluminium", cross_section=240, strands=37 },
						["ix - al - 1x240/61"] = {material= "aluminium", cross_section=240, strands=61 },
						["ixxi - 2x240 - al "] = {material= "aluminium", cross_section=240 },
						["ixxi - al - 1 kv - 1x240"] = {material= "aluminium", insulation= 1, cross_section=240 },
						["ixxi - al - 1x240/37"] = {material= "aluminium", cross_section=240, strands=37 },
						["ixxi - al - 1x240/19"] = {material= "aluminium", cross_section=240, strands=19 },
						["ixxi - al - 1x240/61"] = {material= "aluminium", cross_section=240, strands=61 },
						["radox 4 gkw-x - cu - 1,8/3kv - 95"] = {material= "kobber", cross_section=95 },
						["tfxp - al - 1 kv - 1x240"] = {material= "aluminium", insulation= 1, cross_section=240 },
						["tsle - al - 36 kv - 1x240/61"] = {material= "aluminium", insulation= 36, cross_section=240, strands=61 },
						["tsle - al - 36 kv - 1x400/35"] = {material= "aluminium", insulation= 36, cross_section=400, strands=35 },
						["tsle - al- 24kv - 1x50/16"] = {material= "aluminium", insulation= 24, cross_section=50, strands=16 },
						["tsle - al- 36kv - 1x150/35"] = {material= "aluminium", insulation= 36, cross_section=150, strands=35 },
						["tsle - cu - 36 kv - 1x150"] = {material= "kobber", insulation= 36, cross_section=150 },
						["tslf - al - 24 kv - 1x400"] = {material= "aluminium", insulation= 24, cross_section=400 },
						["tsli - al - 24 kv - 3x150"] = {material= "aluminium", insulation= 24, cross_section=150 },
						["tsli - al - 24 kv - 3x1x240"] = {material= "aluminium", insulation= 24, cross_section=240 },
						["tsli - al - 24 kv - 3x1x50"] = {material= "aluminium", insulation= 24, cross_section=50 },
						["tsli - al - 24 kv - 3x1x95"] = {material= "aluminium", insulation= 24, cross_section=95 },
						["tsli - al - 36 kv - 1x150"] = {material= "aluminium", insulation= 36, cross_section=150 },
						["tsli - al - 36 kv - 1x240"] = {material= "aluminium", insulation= 36, cross_section=240 },
						["tsli - al - 36 kv - 1x400/35"] = {material= "aluminium", insulation= 36, cross_section=400, strands=35 },
						["tx - al - 1x240/37"] = {material= "aluminium", cross_section=240, strands=37 },
						["txse - al - 1 kv - 1x150"] = {material= "aluminium", insulation=1, cross_section=150 },
						["txse - al - 1 kv - 1x240"] = {material= "aluminium", insulation=1, cross_section=240 },
						["txse - al - 1 kv - 1x400"] = {material= "aluminium", insulation=1, cross_section=400 },
						["txse - al - 1 kv - 1x50"] = {material= "aluminium", insulation= 1, cross_section=50 },
						["txse - al - 36kv - 1x400/35"] = {material= "aluminium", insulation= 36, cross_section=400, strands=35 },
						["txse al. 24 kv"] = {material= "aluminium", insulation= 24},
						["txsi - al - 36 kv - 1x400"] = {material= "aluminium", insulation= 36, cross_section=400},
						["txsi - cu - 24 kv - 1x25/16"] = {material= "kobber", insulation= 24, cross_section=25, strands=16 },
						["txsp - cu - 24 kv - 1x25"] = {material= "kobber", insulation= 24, cross_section=25 },
						["txxi - al - 1kv - 1x1x240"] = {material= "aluminium", insulation= 1, cross_section=240 },
						["txxi - al - 1kv - 1x1x400"] = {material= "aluminium", insulation= 1, cross_section=400 },
						["txxi - al - 1kv - 2x1x240"] = {material= "aluminium", insulation= 1, cross_section=240 },
						["txxi - al - 1kv - 2x1x400"] = {material= "aluminium", insulation= 1, cross_section=400 },
						["txxi - cu - 1kv - 1x1x95"] = {material= "kobber", insulation= 1, cross_section=95 },
						["txxi - cu - 1kv - 3x1x95"] = {material= "kobber", insulation= 1, cross_section=95 },
						["txxp - al - 1 kv - 1x150/19"] = {material= "aluminium", insulation= 1, cross_section=150, strands=19 },
						["txxp - al - 1 kv - 1x240"] = {material= "aluminium", insulation= 1, cross_section=240 },
						["txxp - al - 1 kv - 1x240/37"] = {material= "aluminium", insulation= 1, cross_section=240, strands=37 },
						["txxp - al - 1 kv - 1x300/61"] = {material= "aluminium", insulation= 1, cross_section=300, strands=61 },
						["txxp - cu - 1 kv - 1x150"] = {material= "kobber", insulation= 1, cross_section=150 },
						["txxp - cu - 1 kv - 1x300"] = {material= "kobber", insulation= 1, cross_section=300 }
					}
					return t[type]
				end 
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>"L"..code</Formula>
  </LuaExpression>
  <PropertyPrompt Key="code" DefaultValue="Høyspentledning" AcceptEmptyValue="false"/>
  <InsertAlignment Name="AT-line (PL)" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="AT-kabel (PL)" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="AT-line (NL)" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="AT-kabel (NL)" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Fjernline" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Fjernkabel" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Forbigangsline" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Forbigangskabel" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Forsterkningsline" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Forsterkningskabel" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Mateline" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Matekabel" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Returline" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Returkabel" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <IncludeSegmentType>Curve</IncludeSegmentType>
  </InsertAlignment>
 </ObjectType>
 <LuaFunction Name="NOBN_ocs_getWireMaterialTable()" ReturnType="Table[5*Double]" Description="Returns a table with standard contact / messenger / tensioning / midpoint anchor / guy wire values, indexed as follows:
			\n
			\n[cwMat] = Contact wire material
			\n[mwMat] = Messenger wire material
			\n[twMat] = Tensioning wire material
			\n[awMat] = Midpoint anchoring line (wire) material
			\n[gwMat] = Guywire material
			\n">
  <Signature>Table[5*Double] NOBN_ocs_getWireMaterialTable(OcsSystem os)</Signature>
  <Formula>
			--This function is declared as global in the DNA, accessible from all object types.
			function NOBN_ocs_getWireMaterialTable(os)
				os = os or OcsSystem
				local ContactWireValues = {
					--Note: Siemens' catenary wire clamp is about 12 cm high (117mm), above the upper tube
					["Unknown"]  = {cwMat="",        mwMat="",            twMat="",            awMat="",            gwMat=""           },
					["S25"]      = {cwMat="RiS 120", mwMat="Bz II 70/19", twMat="Bz II 70/19", awMat="Bz II 70/19", gwMat="Bz II 70/19"},
					["S20A"]     = {cwMat="RiS 100", mwMat="Bz II 50/19", twMat="Bz II 50/19", awMat="Bz II 50/19", gwMat="Bz II 50/19"},
					["S20AR"]    = {cwMat="RiS 100", mwMat="Bz II 50/19", twMat="Bz II 50/19", awMat="Bz II 50/19", gwMat="Bz II 50/19"},
					["S20B"]     = {cwMat="RiS 100", mwMat="Bz II 50/19", twMat="Bz II 50/19", awMat="Bz II 50/19", gwMat="Bz II 50/19"},
					["S20BR"]    = {cwMat="RiS 100", mwMat="Bz II 50/19", twMat="Bz II 50/19", awMat="Bz II 50/19", gwMat="Bz II 50/19"},
					["S20C1"]    = {cwMat="RiS 100", mwMat="Bz II 50/19", twMat="Bz II 50/19", awMat="Bz II 50/19", gwMat="Bz II 50/19"},
					["S20C2"]    = {cwMat="RiS 100", mwMat="Bz II 50/19", twMat="Bz II 50/19", awMat="Bz II 50/19", gwMat="Bz II 50/19"},
					["S35"]      = {cwMat="RiS 100", mwMat="Bz II 50/19", twMat="Bz II 50/19", awMat="Bz II 50/19", gwMat="Bz II 50/19"},
					["S35MS"]    = {cwMat="RiS 100", mwMat="Bz II 50/19", twMat="Bz II 50/19", awMat="Bz II 50/19", gwMat="Bz II 50/19"},
					["Cariboni"] = {cwMat="RiS 100", mwMat="Bz II 50/19", twMat="Bz II 50/19", awMat="Bz II 50/19", gwMat="Bz II 50/19"},
					["TET08"]    = {cwMat="RiS 100", mwMat="Bz II 50/19", twMat="Bz II 50/19", awMat="Bz II 50/19", gwMat="Bz II 50/19"}
				}
				if ContactWireValues[os] then
					return ContactWireValues[os]
				else
					return ContactWireValues["Unknown"],_warning, _info("Unknown OCS System for contact wire ["..os.."]. ")
				end
			end 
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_ocs_getOcsSystem()" ReturnType="Enumeration" Description="Flags the attribute as 'Unknown' if the OCS system has not yet been selected. Click F4 to change selection.">
  <Signature>Enumeration NOBN_ocs_getOcsSystem()</Signature>
  <Formula>
			function NOBN_ocs_getOcsSystem()
				os = getPropertyValue("OcsSystem")
				if os == "Unknown" then
					return os,_unfinished, _info("UNFINISHED - Press F4 to select OCS System.")
				else
					return os
				end
			end
		</Formula>
 </LuaFunction>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_ContactWire" Name="JBTEH_KTL Kontaktledning" Layer="JBTEH_KTL" Color="ByLayer" Group="Kontaktledning/Kontaktledning">
  <RelationSpace>kontaktledning</RelationSpace>
  <AlignmentSystems DefaultSystemName="Kontaktledning">
   <AlignmentSystem Name="Kontaktledning" CantGauge="0.010" AlignmentGauge="0.010" LiftWithCant="false"/>
  </AlignmentSystems>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <Variants DefaultValue="Kontaktledning, kjørbar">
   <Variant Name="Kontaktledning, kjørbar"/>
   <Variant Name="Kontaktledning, ikke kjørbar"/>
   <Variant Name="Kontaktledning, avspenningsline"/>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D">
   <SetValue Key="CustomTransformation" Value="false"/>
  </DynamicProperty>
  <LuaExpression Name="name">
   <Formula>_JBTEH_KTL_name()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTL_name()" ReturnType="String" Description="Obtains the overhead catenary system wire's name, deduced from its code, which is expected to end with a single letter from a to e.
			\n
			\nThe wire 'code' is expected to conform to the following pattern, where an asterisk means 'zero or more occurrences':
			\n
			\n    &lt;whitespace&gt;* &lt;NUMBER&gt;{&lt;dash&gt;&lt;number&gt;}* &lt;letter&gt;* &lt;whitespace&gt;*
			\n
			\nWire code  ==> Wire name
			\n30-397a     ==> L30-397
			\n10-2-27b   ==> L10-2-27
			\n3f                ==> 3
			\n
			\nIt is assumed that the five natural parts of a contact wire have 'code' properties as follows:
			\n
			\na - Tensioning wire (Avspenningsline)
			\nMulti-stranded steel wire(s) from the start Wire Tension Balancer (for 1 or 2 wires) to the first Line Isolator(s)
			\n
			\nb	- Lifted contact wire (Ikke kjørbar KL)
			\nLifted grooved contact wire (and messenger wire) from the first Line Isolator(s) to the first wire switch-over position
			\n
			\nc	- Contact wire (Kjørbar KL)
			\nGrooved contact wire (and messenger wire) between the first and the second wire switch-over positions
			\n
			\nd	- Lifted contact wire (Ikke kjørbar KL)
			\nLifted grooved CW (and messenger wire) from the second wire switch-over position to the second Line Isolator(s)
			\n
			\ne - Tensioning wire (Avspenningsline)
			\nMulti-stranded steel wire(s) from the second Line Isolator(s) to the end Wire Tension Balancer (for 1 or 2 wires)
			\n">
   <Signature>String _JBTEH_KTL_name()</Signature>
   <Formula>
				function _JBTEH_KTL_name()
					local pattern = "^%s-([%d%-]+)%a-"
					if tostring(code):match(pattern) then
						return "L"..(tostring(code):match(pattern))
					else
						return "("..code..")", _info("Wire code &lt;digits\\&gt;[&lt;dash\\&gt;&lt;digits\\&gt;]* was expected")
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="OcsSystem" DisplayName="KL-system" DefaultValue="S25" Description="The OCS System is one of [ Unknown | S25 | S20A | S20AR | S20B | S20BR | S20C1 | S20C2 | S35 | S35MS | Cariboni | TET08 ].">
   <Values>
    <Value>Unknown</Value>
    <Value>S25</Value>
    <Value>S20A</Value>
    <Value>S20AR</Value>
    <Value>S20B</Value>
    <Value>S20BR</Value>
    <Value>S20C1</Value>
    <Value>S20C2</Value>
    <Value>S35</Value>
    <Value>S35MS</Value>
    <Value>Cariboni</Value>
    <Value>TET08</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="OcsSystem">
   <Formula>NOBN_ocs_getOcsSystem()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="ContactWireMaterial" DisplayName="Kontaktledning materiale" DefaultValue="" Description="The overhead catenary system (OCS) contact wire material.">
   <Values Variant="Kontaktledning, kjørbar">
    <Value Description="EN50149 - AC-100 – Cu-ETP">Ri 100</Value>
    <Value Description="EN 50149 – AC-100 – CuAg0,1 ">RiS 100</Value>
    <Value Description="EN 50149 – AC-120 – Cu-ETP">Ri 120</Value>
    <Value Description="EN 50149 – AC-120 – CuAg0,1">RiS 120</Value>
   </Values>
   <Values Variant="Kontaktledning, ikke kjørbar">
    <Value Description="EN50149 - AC-100 – Cu-ETP">Ri 100</Value>
    <Value Description="EN 50149 – AC-100 – CuAg0,1 ">RiS 100</Value>
    <Value Description="EN 50149 – AC-120 – Cu-ETP">Ri 120</Value>
    <Value Description="EN 50149 – AC-120 – CuAg0,1">RiS 120</Value>
   </Values>
   <Values Variant="Kontaktledning, avspenningsline">
    <Value>N/A</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="ContactWireMaterial">
   <Formula>_JBTEH_KTL_ContactWireMaterial()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTL_ContactWireMaterial()" ReturnType="String" Description="Obtains the standard contact wire material according to OCS system.">
   <Signature>String _JBTEH_KTL_ContactWireMaterial()</Signature>
   <Formula>
				function _JBTEH_KTL_ContactWireMaterial()
					if Variant == "Kontaktledning, avspenningsline" then
						return "N/A"
					else
						return NOBN_ocs_getWireMaterialTable()["cwMat"]
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="MessengerWireMaterial" DisplayName="Bæreline materiale" DefaultValue="" Description="The overhead catenary system (OCS) messenger wire material.">
   <Values Variant="Kontaktledning, kjørbar">
    <Value>Bz II 50/19</Value>
    <Value>Bz II 50/19 isolert</Value>
    <Value>Bz II 70/19</Value>
   </Values>
   <Values Variant="Kontaktledning, ikke kjørbar">
    <Value>Bz II 50/19</Value>
    <Value>Bz II 50/19 isolert</Value>
    <Value>Bz II 70/19</Value>
   </Values>
   <Values Variant="Kontaktledning, avspenningsline">
    <Value>N/A</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="MessengerWireMaterial">
   <Formula>_JBTEH_KTL_MessengerWireMaterial()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTL_MessengerWireMaterial()" ReturnType="String" Description="Obtains the standard contact wire material according to OCS system.">
   <Signature>String _JBTEH_KTL_MessengerWireMaterial()</Signature>
   <Formula>
				function _JBTEH_KTL_MessengerWireMaterial()
					if Variant == "Kontaktledning, avspenningsline" then
						return "N/A"
					else
						return NOBN_ocs_getWireMaterialTable()["mwMat"]
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="TensioningWireMaterial" DisplayName="Avspenningsline materiale" DefaultValue="" Description="The overhead catenary system (OCS) tensioning wire material.">
   <Values Variant="Kontaktledning, kjørbar">
    <Value>N/A</Value>
   </Values>
   <Values Variant="Kontaktledning, ikke kjørbar">
    <Value>N/A</Value>
   </Values>
   <Values Variant="Kontaktledning, avspenningsline">
    <Value>50/175 w/bitumen</Value>
    <Value>60/222 w/bitumen</Value>
    <Value>16/133</Value>
    <Value>30/7</Value>
    <Value>Bz II 50/19 KHF</Value>
    <Value>Bz II 70/19 KHF</Value>
    <Value>Bz II 50/19 KHF isolert</Value>
    <Value>Bz II 50/19</Value>
    <Value>Bz II 70/19</Value>
    <Value>Bz II 80/19</Value>
    <Value>Bz II 95/19</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="TensioningWireMaterial">
   <Formula>_JBTEH_KTL_TensioningWireMaterial()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTL_TensioningWireMaterial()" ReturnType="String" Description="Obtains the standard tensioning wire material according to OCS system.">
   <Signature>String _JBTEH_KTL_TensioningWireMaterial()</Signature>
   <Formula>
				function _JBTEH_KTL_TensioningWireMaterial()
					if Variant == "Kontaktledning, avspenningsline" then
						return NOBN_ocs_getWireMaterialTable()["twMat"]
					else
						return "N/A"
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="Wire2dColor" DisplayName="Ledningsfarge i 2D" DefaultValue="" Description="The overhead catenary system (OCS) wire's color when displayed as a polyline in the CAD program.">
   <Values Variant="Kontaktledning, kjørbar">
    <Value>Sort</Value>
    <Value>Blå</Value>
    <Value>Lilla</Value>
    <Value>Rød</Value>
    <Value>Brun</Value>
    <Value>Oransje</Value>
    <Value>Grønn</Value>
   </Values>
   <Values Variant="Kontaktledning, ikke kjørbar">
    <Value>Sort</Value>
    <Value>Blå</Value>
    <Value>Lilla</Value>
    <Value>Rød</Value>
    <Value>Brun</Value>
    <Value>Oransje</Value>
    <Value>Grønn</Value>
   </Values>
   <Values Variant="Kontaktledning, avspenningsline">
    <Value>Gul</Value>
    <Value>Sort</Value>
    <Value>Blå</Value>
    <Value>Lilla</Value>
    <Value>Rød</Value>
    <Value>Brun</Value>
    <Value>Oransje</Value>
    <Value>Grønn</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Wire2dColor">
   <Formula>_JBTEH_KTL_Wire2dColor()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTL_Wire2dColor()" ReturnType="String" Description="Obtains the contact wire's color in CAD modelspace, based on its Variant.">
   <Signature>String _JBTEH_KTL_Wire2dColor()</Signature>
   <Formula>
				function _JBTEH_KTL_Wire2dColor()
					if Variant == "Kontaktledning, kjørbar" or Variant == "Kontaktledning, ikke kjørbar" then
						return "Sort"
					elseif Variant == "Kontaktledning, avspenningsline" then
						return "Gul"
					else
						return "Bad Variant ["..Variant.."]."
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Linetype">
   <Formula>_JBTEH_KTL_Linetype()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTL_Linetype()" ReturnType="String" Description="Obtains the CAD system linetype (continuous / dashed) for the catenary wire, based on its Variant.">
   <Signature>String _JBTEH_KTL_Linetype()</Signature>
   <Formula>
				function _JBTEH_KTL_Linetype()
					if Variant == "Kontaktledning, kjørbar" then
						return "Continuous"
					elseif Variant == "Kontaktledning, ikke kjørbar" then
						return "RC-DASHED"
					elseif Variant == "Kontaktledning, avspenningsline" then
						return "RC-DASHED"
					else
						return "Continuous" --Cannot return text string here
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Color">
   <Formula>_JBTEH_KTL_Color()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTL_Color()" ReturnType="String" Description="Obtains the CAD system's polyline color, based on the wire's Wire2dColor property.">
   <Signature>String _JBTEH_KTL_Color()</Signature>
   <Formula>
				function _JBTEH_KTL_Color()
					if     Wire2dColor == "Sort" then return 7 --Displays as white
					elseif Wire2dColor == "Blå" then return "30,144,255"
					elseif Wire2dColor == "Lilla" then return "148,0,211"
					elseif Wire2dColor == "Rød" then return "252,10,28"
					elseif Wire2dColor == "Brun" then return "139,69,19"
					elseif Wire2dColor == "Oransje" then return "255,140,0"
					elseif Wire2dColor == "Grønn" then return "50,205,50"
					elseif Wire2dColor == "Gul" then return 2
					else return 7 --white
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Lineweight">
   <Formula>_JBTEH_KTL_Lineweight()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTL_Lineweight()" ReturnType="Double" Description="Obtains the CAD system lineweight (line width in print) for the catenary wire, based on its Variant.">
   <Signature>Double _JBTEH_KTL_Lineweight()</Signature>
   <Formula>
				--AutoCAD needs lineweights to be of the form "Lineweight035" for "0.35 mm" (only predefined Values according to AutoCAD enum):
				function _JBTEH_KTL_Lineweight()
					if Wire2dColor == "Sort" then
						return "Lineweight035"
					else
						return "Lineweight040"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="SweptGeometry3D_0.Roll">
   <Formula>NOBN_com_getRollFromCantInterpretedAsDecimalDegrees(_position)</Formula>
  </LuaExpression>
  <LuaExpression Name="SweptGeometry3D_0.Name">
   <Formula>_JBTEH_KTL_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTL_Geometry3DName()" ReturnType="Double" Description="Obtains the wire's 3D model name, based on its Variant and material.">
   <Signature>Double _JBTEH_KTL_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_KTL_Geometry3DName()
					if Variant == "Kontaktledning, kjørbar" or Variant == "Kontaktledning, ikke kjørbar" then
						return "NO-BN-2D-EH-KTL-KONTAKTTRÅD-"..ContactWireMaterial:gsub(" ","-")
					elseif Variant == "Kontaktledning, avspenningsline" then
						local t = "NO-BN-2D-FE-WIR-WIRE-"
						if     ContactWireMaterial:match("50/175 w/bitumen") then return t.."SVART-DIAMETER-013"
						elseif ContactWireMaterial:match("60/222 w/bitumen") then return t.."SVART-DIAMETER-014"
						elseif ContactWireMaterial:match("16/133") then return t.."-006"
						elseif ContactWireMaterial:match("30/7") then return t.."GRÅ-DIAMETER-007"
						elseif ContactWireMaterial:match("50/19") then return t.."GRÅ-DIAMETER-009"
						elseif ContactWireMaterial:match("70/19") then return t.."GRÅ-DIAMETER-011"
						elseif ContactWireMaterial:match("80/19") then return t.."GRÅ-DIAMETER-012" --11.5mm
						elseif ContactWireMaterial:match("95/19") then return t.."GRÅ-DIAMETER-013"
						end
					else 
						return "Bad Variant ["..Variant.."]."
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Relations" DisplayName="Relasjoner" Description="Checks complex requirements on the number of established relations between this object and other objects."/>
  <LuaExpression Name="mc_Relations" IsModelCheck="true">
   <Formula>_JBTEH_KTL_chkRelations()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTL_chkRelations()" ReturnType="String" Description="A contact wire alignment shall relate to cantilevers, midpoint anchor and WTB, depending on its Variant being Regular CW / Lifted CW / CW tensioning wire.">
   <Signature>String _JBTEH_KTL_chkRelations()</Signature>
   <Formula>
				function _JBTEH_KTL_chkRelations()
					local _rWtb,nWtb = getRelatedObjects(rel_ContactWireOrMidpointAnchoringLineOrHvConductor_IsTensionedBy_Wtb)
					local _rCnt,nCnt = getRelatedObjects(rel_ContactWire_IsHeldBy_Cantilever)
					local _rMap,nMap = getRelatedObjects(rel_ContactWire_IsLockedBy_MidpointAnchor)
					
					--Tensioning wire end of CW:
					if Variant == "Kontaktledning, avspenningsline" then
						if nWtb == 1 then
							if nCnt == 0 and nMap == 0 then
								return _ok,"OK - CW tensioning wire is related to one WTB, no cantilever, no midpoint anchor."
							else
								return _error,"ERROR - CW tensioning wire (between WTB and ISO) shall not be related to cantilever(s) or a midpoint anchor."
							end
						else
							return _unfinished,"UNFINISHED - CW tensioning wire shall be related to a WTB at one end and shall be continued with a continuation object or a line isolator at the other end."
						end

					--Lifted CW:
					elseif Variant == "Kontaktledning, ikke kjørbar" then
						if nWtb == 0 then
							if nCnt &gt; 0 then
								if nMap == 0 then
									return _ok,"OK - Lifted CW is related to at least one cantilever, no WTB, no midpoint anchor."
								else
									return _error,"ERROR - Lifted CW shall not relate to a midpoint anchor."
								end
							else
								return _unfinished,"UNFINISHED - Lifted CW (between first ISO and its switchover to a regular CW) shall relate to at least one cantilever."
							end
						else
							return _error,"ERROR - Lifted CW shall not relate to a WTB."
						end
					
					--Regular CW:
					elseif Variant == "Kontaktledning, kjørbar" then
						if nWtb == 0 then
							if nCnt &gt; 0 then
								if nMap == 0 or nMap == 1 then
									return _ok,"OK - Regular CW is related to at least one cantilever, to zero or one midpoint anchor, no WTB."
								else
									return _error,"ERROR - Regular CW has too many midpoint anchors."
								end
							else
								return _unfinished,"UNFINISHED - Regular CW shall relate to at least one cantilever."
							end
						else
							return _error,"ERROR - Regular CW shall not relate to a WTB."
						end

					else
						return _error,"ERROR - Bad variant '"..Variant.."'."
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" Name="mc_OtherObjectsToBeModelchecked" ReadOnly="true" Category="Model check" DisplayName="Andre objekter som modelsjekkes" Description="When this contact wire is refreshed, then all point objects in 2D closer than 0.1 m from the alignment are modelchecked as well."/>
  <LuaExpression Name="mc_OtherObjectsToBeModelchecked" IsModelCheck="true">
   <Formula>_JBTEH_KTL_getOtherObjectsToModelcheck()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTL_getOtherObjectsToModelcheck()" ReturnType="String" Description="Returns the number of other items to modelcheck, and a table with references to them.">
   <Signature>_JBTEH_KTL_getOtherObjectsToModelcheck()</Signature>
   <Formula>
				function _JBTEH_KTL_getOtherObjectsToModelcheck()
					local t = getNearbyPointObjects2D(0.10)
					local n = t.Count
					return n,t, _info(n.." objects close to this contact wire have been modelchecked.")
				end
			</Formula>
  </LuaFunction>
  <PropertyPrompt Key="code" DefaultValue="Kontaktledning" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Kontaktledning, kjørbar" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTTRAAD-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Kontaktledning, ikke kjørbar" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTTRAAD-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertAlignment>
  <InsertAlignment Name="Kontaktledning, avspenningsline" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KABELFOERING-TREKKEROER-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_MidpointAnchorLine" Name="JBTEH_FIL Fixline" Layer="JBTEH_FIL" Color="ByLayer" Group="Kontaktledning/Fixline">
  <RelationSpace>fixline</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <Variants DefaultValue="Fixline">
   <Variant Name="Fixline"></Variant>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D">
   <SetValue Key="CustomTransformation" Value="false"/>
  </DynamicProperty>
  <CustomProperty DataType="Enumeration" Name="OcsSystem" DisplayName="KL-system" DefaultValue="S20A" Description="The OCS System is one of [Unknown | S25 | S20A | S20AR | S20B | S20BR | S20C1 | S20C2 | S35 | S35MS | Cariboni | TET08].">
   <Values>
    <Value>Unknown</Value>
    <Value>S25</Value>
    <Value>S20A</Value>
    <Value>S20AR</Value>
    <Value>S20B</Value>
    <Value>S20BR</Value>
    <Value>S20C1</Value>
    <Value>S20C2</Value>
    <Value>S35</Value>
    <Value>S35MS</Value>
    <Value>Cariboni</Value>
    <Value>TET08</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="OcsSystem">
   <Formula>_JBTEH_FIL_OcsSystem()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FIL_OcsSystem()" ReturnType="Enumeration" Description="Flags the attribute as 'Unknown' if the OCS system has not yet been selected. Click F4 to change selection.">
   <Signature>Enumeration _JBTEH_FIL_OcsSystem()</Signature>
   <Formula>
				function _JBTEH_FIL_OcsSystem()
					os = getPropertyValue("OcsSystem")
					if os == "Unknown" then
						return os,_unfinished, _info("UNFINISHED - Press F4 to select OCS System.")
					else
						return os
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="AnchoringLineMaterial" DisplayName="Fixline materiale" DefaultValue="Bz II 50/19" Description="The overhead catenary system (OCS) midpoint anchoring line material [Bz II 50/19 | Bz II 70/19 | Bz II 50/19 isolert].">
   <Values>
    <Value>Bz II 50/19</Value>
    <Value>Bz II 50/19 isolert</Value>
    <Value>Bz II 70/19</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="AnchoringLineMaterial">
   <Formula>_JBTEH_FIL_AnchoringLineMaterial()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FIL_AnchoringLineMaterial()" ReturnType="String" Description="Obtains the standard anchoring line (wire) material according to OCS system.">
   <Signature>String _JBTEH_FIL_AnchoringLineMaterial()</Signature>
   <Formula>
				function _JBTEH_FIL_AnchoringLineMaterial()
					return NOBN_ocs_getWireMaterialTable()["awMat"]
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="code">
   <Formula>_JBTEH_FIL_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FIL_code()" ReturnType="String" Description="Obtains the code for the contact wire midpoint anchoring line, inherited from the associated contact wire.">
   <Signature>String _JBTEH_FIL_code()</Signature>
   <Formula>
				function _JBTEH_FIL_code()
					local sMal = rel_MidpointAnchoringLine_Anchors_MidpointAnchor
					local rMal,nMal = getRelatedObjects(sMal)
					if nMal == 0 then
						return "UNFINISHED - Relate contact wire midpoint anchoring line with '"..sMal.."' to its midpoint anchor object."
					elseif nMal == 1 then
						local mal = rMal[0]
						return mal.code, _info("Midpoint anchoring line's code was deduced from its midpoint anchor.")
					else
						return _error,"ERROR - Midpoint anchoring line shall relate to just one contact wire midpoint with '"..sMal.."' ("..nMal.." were found)."
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>"Fl."..code</Formula>
  </LuaExpression>
  <InsertAlignment Name="Fixline" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTLEDNINGSOPPHENG-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <SetValue Key="Linetype" Value="RC-DASHED"/>
   <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-FE-WIR-WIRE-GRÅ-DIAMETER-010"/>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_GuyWire" Name="JBTEH_BAR Bardun" Layer="JBTEH_BAR" Color="ByLayer" Group="Kontaktledning/Bardun og strever">
  <RelationSpace>kl-bardun</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <Variants DefaultValue="Bardun">
   <Variant Name="Bardun"></Variant>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D">
   <SetValue Key="CustomTransformation" Value="True"/>
  </DynamicProperty>
  <SetValue Key="GlobalWidth" Value="0.020"/>
  <LuaExpression Name="code">
   <Formula>_JBTEH_BAR_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BAR_code()" ReturnType="String" Description="Obtains the code for the OCS guywire, inherited from its OCS pole's anchoring device.">
   <Signature>String _JBTEH_BAR_code()</Signature>
   <Formula>
				function _JBTEH_BAR_code()
					local t
					--TODO: Take into consideration more than one anchoring device to same OCS pole, add a unique suffix number to the code for all the guywires present.
					local sAnp = rel_GuyWireOrSpannerOrWtb_IsAnchoredBy_AnchoringToOcsPole
					local rAnp,nAnp = getRelatedObjects(sAnp)
					if nAnp == 0 then
						return _unfinished,"UNFINISHED - Relate to its anchoring device on OCS pole."
					else
						local anp = rAnp[0]

						if anp.Variant == "Forankring på mast for avspenning med bardun" then
							--guywire to counteract the WTB's forces on OCS pole:
							t = "-B"

						elseif anp.Variant == "Forankring på mast for kurvebardun" then
							--One or two guywires to compensate for large lateral forces on OCS pole, e.g., due to track curvature, AT wires changing side-of-track, or other issue:
							local rBar,nBar = getRelatedObjects(rel_AnchoringToOcsPole_Anchors_GuyWireOrSpannerOrWtb,anp)
							if nBar == 1 then
								--The anchor device has at least one guywire (this):
								t = "-KB"
							elseif nBar == 2 then
								if this.id == rBar[0].id then
									t = "-B1"
								else
									t = "-B2"
								end
							else
								t = "-(3 or more - do manual numbering)"
							end

						elseif anp.Variant == "Forankring på mast for strever" then
							return _error,"ERROR - Guywire is not compatible with anchoring for spanner."
						
						elseif anp.Variant == "Forankring på mast for avspenning med bardun" then
							return _error,"ERROR - Guywire is not compatible with anchoring-for-WTB-without-guywire."

						else
							return _error,"ERROR - Unrecognized Variant '"..Variant.."'."
						end

						local sPol = rel_AnchoringToOcsPole_IsInstalledOn_OcsPole
						local rPol,nPol = getRelatedObjects(sPol,rAnp[0])
						if nPol == 0 then
							return _unfinished,"UNFINISHED - The related anchoring device has no relation to a its OCS pole, cannot deduce guywire's code."
						else
							return rPol[0].code..t
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>_JBTEH_BAR_name()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BAR_name()" ReturnType="String" HideFromUser="false" Description="Obtains the name for the OCS catenary wire guywire, derived from its code.">
   <Signature>String _JBTEH_BAR_name()</Signature>
   <Formula>
				function _JBTEH_BAR_name()
					return "Bar."..code
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="OcsSystem" DisplayName="KL-system" DefaultValue="S20A" Description="The OCS System is one of [Unknown | S25 | S20A | S20AR | S20B | S20BR | S20C1 | S20C2 | S35 | S35MS | Cariboni | TET08].">
   <Values>
    <Value>Unknown</Value>
    <Value>S25</Value>
    <Value>S20A</Value>
    <Value>S20AR</Value>
    <Value>S20B</Value>
    <Value>S20BR</Value>
    <Value>S20C1</Value>
    <Value>S20C2</Value>
    <Value>S35</Value>
    <Value>S35MS</Value>
    <Value>Cariboni</Value>
    <Value>TET08</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="OcsSystem">
   <Formula>NOBN_ocs_getOcsSystem()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="GuyWireMaterial" DisplayName="Bardun materiale" DefaultValue="Bz II 50/19" Description="The overhead catenary system (OCS) guywire material [Bz II 50/19 | Bz II 70/19 | Bz II 50/19 isolert].">
   <Values>
    <Value>Bz II 50/19</Value>
    <Value>Bz II 50/19 isolert</Value>
    <Value>Bz II 70/19</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="GuyWireMaterial">
   <Formula>_JBTEH_BAR_GuyWireMaterial()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BAR_GuyWireMaterial()" ReturnType="String" Description="Obtains the standard guywire material according to OCS system.">
   <Signature>String _JBTEH_BAR_GuyWireMaterial()</Signature>
   <Formula>
				function _JBTEH_BAR_GuyWireMaterial()
					return NOBN_ocs_getWireMaterialTable()["gwMat"]
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="SweptGeometry3D_0.Roll">
   <Formula>NOBN_com_getRollFromCantInterpretedAsDecimalDegrees(_position)</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_JBTEH_BAR_GuyWireAngle" DisplayName="Bardunvinkel" Description="Checking that a guywire alignment shall make an angle of 40 to 50 decimal degrees, relative to the Z axis."/>
  <LuaExpression Name="mc_JBTEH_BAR_GuyWireAngle" IsModelCheck="true">
   <Formula>_JBTEH_BAR_chkGuyWireAngle()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BAR_chkGuyWireAngle()" ReturnType="String" Description="Checking that a guywire alignment shall make an angle of 40 to 50 decimal degrees, relative to the Z axis.">
   <Signature>String _JBTEH_BAR_chkGuyWireAngle()</Signature>
   <Formula>
				function _JBTEH_BAR_chkGuyWireAngle()
					if true then -- 2021-03-30 TODO - XXXXXXXXXXXXXXXXXXXXXXXXXXXX code must be written--
						return "SORRY - Model check for _JBTEH_BAR_chkGuyWireAngle has not been written yet.",_warning
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Relations" DisplayName="Relasjoner" Description="Checks complex requirements on the number of established relations between this object and other objects."/>
  <LuaExpression Name="mc_Relations" IsModelCheck="true">
   <Formula>_JBTEH_BAR_chkRelations()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BAR_chkRelations()" ReturnType="String" Description="A guywire footplate shall relate to a guywire alignment and to its foundation.">
   <Signature>String _JBTEH_BAR_chkRelations()</Signature>
   <Formula>
				function _JBTEH_BAR_chkRelations()
					local _rAnp,nAnp = getRelatedObjects(rel_GuyWireOrSpannerOrWtb_IsAnchoredBy_AnchoringToOcsPole)
					local _rAnt,nAnt = getRelatedObjects(rel_GuyWireOrSpannerOrWtb_IsAnchoredBy_TunnelFootplate)
					local _rAng,nAng = getRelatedObjects(rel_GuyWire_IsAnchoredBy_GuywireFootplate)
				
					if (nAnp + nAnt) == 1 and nAng == 1 then
						return _ok,"OK - Guywire alignment is related to an anchoring device on OCS pole or to a tunnel wall anchor, and to its footplate."

					elseif (nAnp + nAnt) == 0 then
						return _unfinished,"UNFINISHED - Guywire alignment shall relate to an anchoring device on an OCS pole (JBTEH_FPM) or on a tunnel wall/ceiling (JBTEH_TUF)."

					else 
						return _unfinished,"UNFINISHED - Guywire alignment shall relate to its footplate."
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="SweptGeometry3D_0.Offset.Z">
   <Formula>_JBTEH_BAR_Offset3DZ()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BAR_Offset3DZ()" ReturnType="Double" Description="Returns the Z offset for a guywire object, assuming the alignment has no (or zero) vertical profile. The start point is fetched from the guywire's anchoring to its OCS pole. The end point is fetched from the guy wire's anchoring to a guywire footplate.">
   <Signature>Enumeration _JBTEH_BAR_Offset3DZ()</Signature>
   <Formula>
				function _JBTEH_BAR_Offset3DZ()
					local atp = getRelatedObjects(rel_OcsPole_IsInstallationTargetFor_AnchoringToOcsPole)[0]
					local gwf = getRelatedObjects(rel_GuyWire_IsAnchoredBy_GuywireFootplate)[0]
					local L = RcAlignment.HorizontalGeometry.Length
					local t = _position.Pos / L
					return t * (gwf.geoCoord.Z - atp.geoCoord.Z) + atp.geoCoord.Z
				end
			</Formula>
  </LuaFunction>
  <PropertyPrompt Key="code" DefaultValue="Bardun" AcceptEmptyValue="false"/>
  <InsertAlignment Name="Bardun" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTLEDNINGSOPPHENG-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-FE-WIR-WIRE-GRÅ-DIAMETER-010"/>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" LuaName="rctype_Spanner" Name="JBTEH_STR Strever" Layer="JBTEH_STR" Color="ByLayer" Group="Kontaktledning/Bardun og strever">
  <RelationSpace>kl-strever</RelationSpace>
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <Variants DefaultValue="Strever">
   <Variant Name="Strever">
    <SetValue Key="Material" Value="Stålstag"/>
   </Variant>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="SweptGeometry3D">
   <SetValue Key="CustomTransformation" Value="True"/>
  </DynamicProperty>
  <SetValue Key="GlobalWidth" Value="0.020"/>
  <CustomProperty DataType="Enumeration" Name="Material" DisplayName="Strevermateriale" DefaultValue="Firkantstål HUP120x120" Description="The overhead catenary system (OCS) spanner beam type.">
   <Values>
    <Value>Firkantstål HUP120x120</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="code">
   <Formula>_JBTEH_STR_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_STR_code()" ReturnType="String" Description="Obtains the code for the OCS spanner, inherited from its OCS pole's anchoring device.">
   <Signature>String _JBTEH_STR_code()</Signature>
   <Formula>
				function _JBTEH_STR_code()
					local sAnp = rel_GuyWireOrSpannerOrWtb_IsAnchoredBy_AnchoringToOcsPole
					local rAnp,nAnp = getRelatedObjects(sAnp)
					if nAnp == 0 then
						return _unfinished,"UNFINISHED - A related anchoring device on OCS pole is missing."
					else
						local sPol = rel_AnchoringToOcsPole_IsInstalledOn_OcsPole
						local rPol,nPol = getRelatedObjects(sPol,rAnp[0])
						if nPol == 0 then
							return _unfinished,"UNFINISHED - The related anchoring device has no relation to a its OCS pole, cannot deduce spanner's code."
						else
							return rPol[0].code.."-S"
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>_JBTEH_STR_name()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_STR_name()" ReturnType="String" HideFromUser="false" Description="Obtains the name for the OCS catenary wire spanner component, derived from its code.">
   <Signature>String _JBTEH_STR_name()</Signature>
   <Formula>
				function _JBTEH_STR_name()
					return "Str."..code
				end
			</Formula>
  </LuaFunction>
  <PropertyPrompt Key="code" DefaultValue="Strever" AcceptEmptyValue="false"/>
  <LuaExpression Name="SweptGeometry3D_0.Roll">
   <Formula>NOBN_com_getRollFromCantInterpretedAsDecimalDegrees(_position)</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Relations" DisplayName="Relasjoner" Description="Checks complex requirements on the number of established relations between this object and other objects."/>
  <LuaExpression Name="mc_Relations" IsModelCheck="true">
   <Formula>_JBTEH_STR_chkRelations()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_STR_chkRelations()" ReturnType="String" Description="A guywire footplate shall relate to a guywire alignment and to its foundation.">
   <Signature>String _JBTEH_STR_chkRelations()</Signature>
   <Formula>
				function _JBTEH_STR_chkRelations()
					local _rAnp,nAnp = getRelatedObjects(rel_GuyWireOrSpannerOrWtb_IsAnchoredBy_AnchoringToOcsPole)
					local _rAnt,nAnt = getRelatedObjects(rel_GuyWireOrSpannerOrWtb_IsAnchoredBy_TunnelFootplate)
					local _rAns,nAns = getRelatedObjects(rel_Spanner_IsAnchoredBy_SpannerFootplate)
				
					if (nAnp + nAnt) == 1 and nAns == 1 then
						return _ok,"OK - Spanner alignment is related to an anchoring device on OCS pole or to a tunnel wall anchor, and to its footplate."

					elseif (nAnp + nAnt) == 0 then
						return _unfinished,"UNFINISHED - Spanner alignment shall relate to an anchoring device on an OCS pole (JBTEH_FPM) or on a tunnel wall/ceiling (JBTEH_TUF)."

					else 
						return _unfinished,"UNFINISHED - Spanner alignment shall relate to its footplate."
					end
				end
			</Formula>
  </LuaFunction>
  <InsertAlignment Name="Strever" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTLEDNINGSOPPHENG-Schematic" DefaultToTangentContinuity="false">
   <IncludeSegmentType>Tangent</IncludeSegmentType>
   <SetValue Key="SweptGeometry3D_0.Name" Value="NO-BN-2D-FE-DIV-STEEL-BEAM-HUP-120-120"/>
  </InsertAlignment>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_GuywireFootplate" Name="JBTEH_BAF Bardun fotplate" Layer="JBTEH_BAF" Color="ByLayer" Group="Kontaktledning/Forankring" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>bardun_fotplate</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Bardun fotplate, enkel">
   <Variant Name="Bardun fotplate, enkel"></Variant>
   <Variant Name="Bardun fotplate, dobbel"></Variant>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTEH_BAF_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BAF_code()" ReturnType="String" Description="Obtains the code for this guywire anchoring object, deduced from its guywire alignment.">
   <Signature>String _JBTEH_BAF_code()</Signature>
   <Formula>
				function _JBTEH_BAF_code()
					if Alignment == nil or Alignment.RcType ~= rctype_GuyWire then
						return "UNFINISHED - Own alignment for guywire anchoring baseplate must be of type '"..rctype_GuyWire.."'."
					end
					local sAng = rel_GuyWireFootplate_Anchors_GuyWire
					local rAng,nAng = getRelatedObjects(sAng)
					if nAng == 0 then 
						return _unfinished,"UNFINISHED - Relate guywire to its own alignment '"..Alignment.code.."'."
					else
						local gwi = rAng[0]
						--(No need to test for more than 1 related object, this is checked by the SymbolFrame code against the relations' cardinalities).
						if gwi.id ~= Alignment.id then
							return _error,"ERROR - Anchoring device's own alignment '"..Alignment.code.."' differs from related alignment '"..gwi.code.."'."
						end
						return gwi.code
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>_JBTEH_BAF_name()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BAF_name()" ReturnType="Double" Description="Returns the name for this guywire anchoring baseplate object.">
   <Signature>String _JBTEH_BAF_name()</Signature>
   <Formula>
				function _JBTEH_BAF_name()
					return code
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_BAF_Mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BAF_Mileage()" ReturnType="Double" Description="Returns mileage for this guywire anchoring baseplate. Snaps to the ground-level extremity of the associated guywire alignment.">
   <Signature>Double _JBTEH_BAF_Mileage()</Signature>
   <Formula>
				function _JBTEH_BAF_Mileage()
					--Assume it runs from 0 (at OCS pole's anchoring device) to L (at anchoring device)
					return Alignment.RcAlignment.HorizontalGeometry.Length
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="dir">
   <Formula>"down"</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>_JBTEH_BAF_VerticalOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BAF_VerticalOffset()" ReturnType="Double" Description="Returns the releative elevation for this guywire anchoring baseplate object.">
   <Signature>Double _JBTEH_BAF_VerticalOffset()</Signature>
   <Formula>
				function _JBTEH_BAF_VerticalOffset()
					local Pe = Alignment.RcAlignment.EndPoint
					local t = getNearbyAlignments(getPoint3D(Pe.X,Pe.Y))
					local e = getAlignmentInfo(t[0].id,Pe.X,Pe.Y).Point.Z --absolute elevation
					return e - getAlignmentInfo().Point.Z --Elevation relative to own alignment's elevation here.
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_BAF_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BAF_Geometry3DName()" ReturnType="String" Description="Obtains the Model 3D Name for this guywire anchoring base.">
   <Signature>String _JBTEH_BAF_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_BAF_Geometry3DName()
					--Look for pole near start of associated wire (alignment).
					local t
					if Variant:match("Bardun fotplate, enkel") then 
						t = "NO-BN-3D-EH-BAF-BARDUN-FOTPLATE-191x374xM36"
						
					elseif Variant:match("Bardun fotplate, dobbel") then
						t = "NO-BN-3D-EH-BAF-BARDUN-FOTPLATE-191x374xM36"
						
					else 
						return "Bad guywire anchoring baseplate Variant ["..Variant.."]."
					end
					return t
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Bardun fotplate, enkel" DisplayBlockName="NO-BN-2D-JBTEH_BAF-BARDUN-FOTPLATE-ENKEL-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kl-bardun</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Bardun fotplate, dobbel" DisplayBlockName="NO-BN-2D-JBTEH_BAF-BARDUN-FOTPLATE-DOBBEL-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kl-bardun</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_BAF-BARDUN
				{% if Variant == 'Bardun fotplate, enkel' %}FOTPLATE-ENKEL
				{% elsif Variant == 'Bardun fotplate, dobbel' %}FOTPLATE-DOBBEL
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="kl-fundament"/>
   </SnapPoints>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="tunnelfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_SpannerFootplate" Name="JBTEH_STF Strever fotplate" Layer="JBTEH_STF" Color="ByLayer" Group="Kontaktledning/Forankring" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>strever_fotplate</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Strever fotplate (uten streveren)">
   <Variant Name="Strever fotplate (uten streveren)"></Variant>
   <Variant Name="Strever fotplate og strever, 2.08m fra sidekant KL-mast"></Variant>
   <Variant Name="Strever fotplate og strever for Ø120 hengemast for bru og tunnel"></Variant>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTEH_STF_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_STF_code()" ReturnType="String" Description="Obtains the code for this spanner anchoring baseplate object, deduced from the OCS pole at its start.">
   <Signature>String _JBTEH_STF_code()</Signature>
   <Formula>
				function _JBTEH_STF_code()
					if Alignment == nil or Alignment.RcType ~= rctype_Spanner then
						return "UNFINISHED - Own alignment for spanner anchoring baseplate must be of type '"..rctype_Spanner.."'."
					end
					local sAns = rel_SpannerFootplate_Anchors_Spanner
					local rAns,nAns = getRelatedObjects(sAns)
					if nAns == 0 then 
						return _unfinished,"UNFINISHED - Relate spanner to its own alignment '"..Alignment.code.."'."
					else
						local spn = rAns[0]
						--(No need to test for more than 1 related object, this is checked by the SymbolFrame code against the relations' cardinalities).
						if spn.id ~= Alignment.id then
							return _error,"ERROR - Anchoring device's own alignment '"..Alignment.code.."' differs from related alignment '"..spn.code.."'."
						end
						return spn.code
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>_JBTEH_STF_name()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_STF_name()" ReturnType="String" Description="Returns the name for this OCS contact wire spanner fastening object.">
   <Signature>String _JBTEH_STF_name()</Signature>
   <Formula>
				function _JBTEH_STF_name()
					return code
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_STF_Mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_STF_Mileage()" ReturnType="Double" Description="Returns mileage for this spanner anchoring baseplate. Snaps to the ground-level extremity of the associated spanner alignment.">
   <Signature>Double _JBTEH_STF_Mileage()</Signature>
   <Formula>
				function _JBTEH_STF_Mileage()
					--Assume it runs from 0 (at pole) to L (at anchoring device)
					return Alignment.RcAlignment.HorizontalGeometry.Length
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="dir">
   <Formula>"down"</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>_JBTEH_STF_VerticalOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_STF_VerticalOffset()" ReturnType="Double" Description="Returns the releative elevation for this OCS contact wire spanner fastening object.">
   <Signature>Double _JBTEH_STF_VerticalOffset()</Signature>
   <Formula>
				function _JBTEH_STF_VerticalOffset()
					local tol = 0.5 --[m]
					local Pe = Alignment.RcAlignment.EndPoint
					local f = getNearbyPointObjects2D(tol,rctype_OcsPoleFoundation,Pe)
					local e --absolute elevation
					if getCollectionLength(f) == 0 then
						--Use nearest track's elevation when no foundation is present:
						local t = getNearbyAlignments(getPoint3D(Pe.X,Pe.Y))
						e = getAlignmentInfo(t[0].id,Pe.X,Pe.Y).Point.Z
					else
						--Foundation is present:
						e = f[0].geoCoord.Z + 0.085 --Start a little above foundation
					end
					return e - getAlignmentInfo().Point.Z --Elevation relative to own alignment's elevation here.
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_STF_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_STF_Geometry3DName()" ReturnType="String" Description="Obtains the Model 3D Name for this spanner anchoring baseplate object, deducing its dimensions from its associated OCS pole.">
   <Signature>String _JBTEH_STF_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_STF_Geometry3DName()
					--Look for pole near start of associated wire alignment.
					local tol = 0.5 --[m]
					local t
					if Variant == "Strever fotplate (uten streveren)" then
						t = "NO-BN-3D-EH-STF-STREVER-FOTPLATE-525x350-191x374xM36"
						
					elseif Variant == "Strever fotplate og strever, 2.08m fra sidekant KL-mast" then 
						t = "NO-BN-3D-EH-STF-STREVER-FOTPLATE-MED-STREVER-FOR-BJELKEMAST-L7000-D2080-H6654"
						
					elseif Variant == "Strever fotplate og strever for Ø120 hengemast for bru og tunnel" then
						local m = getNearbyPointObjects2D(tol,rctype_OcsDropArmForBridgeOrTunnel)
						local n = getCollectionLength(m)
						if n &gt; 0 then 
							-- Assume spanner 3D models exist in steps of 500 mm range 500..2500.
							-- Let default spanner choice be half the height of the supported OCS drop arm.
							local h = (math.floor((250 + (m[0].OcsPoleHeight/2)) / 500)) * 500
							h = (h &lt; 500) and 500 or h -- At least 500
							h = (h &gt; 2500) and 2500 or h -- No more than 2500
							t = "NO-BN-3D-EH-STF-STREVER-FOTPLATE-MED-STREVER-FOR-BRU-OG-TUNNEL-Ø120-H"..string.format("%03d",h)
						else
							t = "UNIFINSHED: No OCS drop arm found near spanner, cannot deduce spanner's 3D model name."
						end

					else 
						return "Bad spanner fastening Variant ["..Variant.."]."
					end
					return t
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Strever fotplate (uten streveren)" DisplayBlockName="NO-BN-2D-JBTEH_STF-STREVER-FOTPLATE-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kl-strever</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Strever fotplate og strever, 2.08m fra sidekant KL-mast" DisplayBlockName="NO-BN-2D-JBTEH_STF-STREVER-FOTPLATE-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kl-strever</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Strever fotplate og strever for Ø120 hengemast for bru og tunnel" DisplayBlockName="NO-BN-2D-JBTEH_STF-STREVER-FOTPLATE-OG-STREVER-FOR-BRU-OG-TUNNEL-120-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kl-strever</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_STF-STREVER
				{% if Variant == 'Strever fotplate (uten streveren)' %}FOTPLATE
				{% elsif Variant == 'Strever fotplate og strever, 2.08m fra sidekant KL-mast' %}FOTPLATE
				{% elsif Variant == 'Strever fotplate og strever for Ø120 hengemast for bru og tunnel' %}FOTPLATE-OG-STREVER-FOR-BRU-OG-TUNNEL-120
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="kl-fundament"/>
   </SnapPoints>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="tunnelfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_TunnelWallFixing" Name="JBTEH_TUF Tunnelfeste" Layer="JBTEH_TUF" Color="ByLayer" Group="Kontaktledning/Forankring" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>tunnelfeste</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Veggfeste for KL-avspenning i tunnel">
   <Variant Name="Veggfeste for KL-avspenning i tunnel"></Variant>
  </Variants>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>6.0</Formula>
  </LuaExpression>
  <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-EH-BAF-BARDUN-FOTPLATE-191x374xM36"/>
  <SetValue Key="name" Value="KL tunnelfeste"/>
  <LuaExpression Name="Geometry3D_0.Rotation.Y">
   <Formula>LeftSided and 90 or -90</Formula>
  </LuaExpression>
  <InsertPointObject Name="Veggfeste for KL-avspenning i tunnel" DisplayBlockName="NO-BN-2D-JBTEH_TUF-TUNNELFESTE-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_TUF
				{% if Variant == 'Veggfeste for KL-avspenning i tunnel' %}TUNNELFESTE
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_AnchoringToOcsPole" Name="JBTEH_FPM Forankring på mast" Layer="JBTEH_FPM" Color="ByLayer" Group="Kontaktledning/Forankring" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>forankring_på_mast</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="40" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="40" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="40" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Forankring på mast for avspenning med bardun">
   <Variant Name="Forankring på mast for avspenning med bardun"></Variant>
   <Variant Name="Forankring på mast for avspenning uten bardun"></Variant>
   <Variant Name="Forankring på mast for kurvebardun"></Variant>
   <Variant Name="Forankring på mast for strever"></Variant>
  </Variants>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_FPM_mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FPM_mileage()" ReturnType="String" Description="Returns the dir for this anchoring device, deduced from its related OCS pole.">
   <Signature>String _JBTEH_FPM_mileage()</Signature>
   <Formula>
				function _JBTEH_FPM_mileage()
					local s = rel_AnchoringToOcsPole_IsInstalledOn_OcsPole
					local r,n = getRelatedObjects(s)
					if n == 0 then 
						return getPropertyValue("Mileage"),
							_info("No related OCS pole, cannot adapt mileage.")
					elseif n == 1 then 
						return r[0].Mileage
					else 
						-- Two or more poles were found:
						return r[0].Mileage,
							_info("WARNING - Multiple OCS poles found, console uses closest pole's mileage.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="LateralOffset">
   <Formula>_JBTEH_FPM_LateralOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FPM_LateralOffset()" ReturnType="String" Description="Returns the LateralOffset for this anchoring device, deduced from its related OCS pole.">
   <Signature>String _JBTEH_FPM_LateralOffset()</Signature>
   <Formula>
				function _JBTEH_FPM_LateralOffset()
					local s = rel_AnchoringToOcsPole_IsInstalledOn_OcsPole
					local r,n = getRelatedObjects(s)
					if n == 0 then 
						return getPropertyValue("LateralOffset"),
							_info("No related OCS pole, cannot deduce LateralOffset.")
					elseif n == 1 then 
						return r[0].LateralOffset
					else
						-- Two or more poles were found:
						return r[0].LateralOffset,
							_warning, _info("WARNING - Multiple OCS poles found, console uses closest pole's LateralOffset.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="code">
   <Formula>_JBTEH_FPM_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FPM_code()" ReturnType="String" Description="Obtains the code for this anchoring device, deduced from its related OCS pole.">
   <Signature>String _JBTEH_FPM_code()</Signature>
   <Formula>
				function _JBTEH_FPM_code()
					local sPol = rel_AnchoringToOcsPole_IsInstalledOn_OcsPole
					local sObj = rel_AnchoringToOcsPole_Anchors_GuyWireOrSpannerOrWtb
					local rPol,nPol = getRelatedObjects(sPol)
					local rObj,nObj = getRelatedObjects(sObj)
					
					if nPol == 0 then 
						return _unfinished,"UNFINISHED - Relate anchoring device to its OCS pole with "..sPol.."."
					else
						if nObj == 0 then
							return _unfinished,"UNFINISHED - No WTB, guywire or spanner - relate with '"..sObj.."'."
						elseif nObj == 1 then
							return "Forankring "..rPol[0].code.." : ["..rObj[0].name.."]"
						else
							return "Forankring "..rPol[0].code.." : ["..rObj[0].name.."] &lt;-&gt; ["..rObj[1].name.."]"
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>_JBTEH_FPM_name()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FPM_name()" ReturnType="String" Description="Returns the name for this anchoring device, deduced from its related OCS pole.">
   <Signature>String _JBTEH_FPM_name()</Signature>
   <Formula>
				function _JBTEH_FPM_name()
					return code
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="dir">
   <Formula>_JBTEH_FPM_dir()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FPM_dir()" ReturnType="LaxDirection" Description="Returns the dir for this anchoring device, deduced from its related OCS pole.">
   <Signature>String _JBTEH_FPM_dir()</Signature>
   <Formula>
				function _JBTEH_FPM_dir()
					local s = rel_AnchoringToOcsPole_Anchors_GuyWireOrSpannerOrWtb
					local tmp,nTmp = getRelatedObjects(s)
					local rWtb = tmp:filter(function (x) return x.RcType == rctype_WireTensioningBalancer end)
					local nWtb = getCollectionLength(rWtb)
					if nTmp == 0 then
						return _unfinished,getPropertyValue("dir"), _info("No related WTB, guywire or spanner - cannot deduce anchor device's direction.")
					end

					local alg
					if nWtb == 1 then
						alg = rWtb[0].Alignment
					else
						--no wtb, just spanner / guywire alignment as first item:
						alg = tmp[0]
					end
					local wireDir = math.deg(math.atan(alg.RcAlignment.StartTangent.Y,alg.RcAlignment.StartTangent.X))
					local trackDir = math.deg(math.atan(getAlignmentInfo().Tangent.Y,getAlignmentInfo().Tangent.X))
					local angDiff
					if RC__getDistance2D(alg.RcAlignment.StartPoint) &lt; RC__getDistance2D(alg.RcAlignment.EndPoint) then
						angDiff = (360 + wireDir - trackDir) % 360
					else
						angDiff = (180 + 360 + wireDir - trackDir) % 360
					end
					if 315 &lt; angDiff or  angDiff &lt;= 045 then return "down" end
					if 045 &lt; angDiff and angDiff &lt;= 135 then return "none" end
					if 135 &lt; angDiff and angDiff &lt;= 225 then return "up"   end
					if 225 &lt; angDiff and angDiff &lt;= 315 then return "both" end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Double" Name="ConsoleHeight" DisplayName="Konsollhøyde over mast innsettingspunkt" DefaultValue="7.1" Description="The console's height [m] above its OCS pole's insertion point."></CustomProperty>
  <LuaExpression Name="ConsoleHeight">
   <Formula>_JBTEH_FPM_AnchoringHeight()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FPM_AnchoringHeight()" ReturnType="Double" Description="Returns the anchoring device's height above its associated OCS pole's insertion point elevation, deduced from its related OCS pole and its elevation relative to TOR.">
   <Signature>Double _JBTEH_FPM_AnchoringHeight()</Signature>
   <Formula>
				function _JBTEH_FPM_AnchoringHeight()
					local s = rel_AnchoringToOcsPole_IsInstalledOn_OcsPole
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return 0,_unfinished, _info("UNFINISHED - relate with '"..s.."'.")
					elseif n == 1 then 
						local pol = r[0]
						return this.VerticalOffset - pol.VerticalOffset,
							_info("Anchoring device's mounting height on OCS pole "..RC__identify(pol))
					else
						-- Two or more OCS poles were found:
						return this.VerticalOffset - r[0].VerticalOffset, _warning,
							_info("WARNING - Multiple OCS poles found (we are using just the first related OCS pole).")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="VerticalOffset">
   <Formula>_JBTEH_FPM_VerticalOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FPM_VerticalOffset()" ReturnType="Double" Description="Returns the relative elevation for this anchoring device, deduced from its related OCS pole.">
   <Signature>Double _JBTEH_FPM_VerticalOffset()</Signature>
   <Formula>
				function _JBTEH_FPM_VerticalOffset()
					local defaultGuywireHeight = 6.50 --TODO: Check value
					local defaultSpannerHeight = 4.80 --TODO: Check value
					
					local s = rel_AnchoringToOcsPole_Anchors_GuyWireOrSpannerOrWtb
					local r,_n = getRelatedObjects(s)

					if Variant == "Forankring på mast for avspenning med bardun" or Variant == "Forankring på mast for avspenning uten bardun" then
						local rWtb = r:filter(function (x) return x.RcType:match("JBTEH_AEH") end)
						local nWtb = getCollectionLength(rWtb)
						if nWtb == 0 then
							return 0,_warning, _info("WARNING - No related WTB")
						end

						local wtb = rWtb[0]
						local sWir = rel_Wtb_Tensions_ContactWireOrMidpointAnchoringLineOrHvConductor
						local rWir,nWir = getRelatedObjects(sWir,wtb)
						if nWir == 0 then
							return 0,_warning, _info("WARNING - Related WTB has no related wire")
						end

						local wir = rWir[0]
						if wir.RcType == rctype_ContactWire then
							--Ref Bane NOR Elkraftportalen, EH-707469 (S20) or EH-707487 (S25). 
							--Standard for weighted WTB: 0.235m  = 0.150 + 0.085 (from anchoring device's mounting on 
							--the OCS pole down to the center of the pulley wheel, minus 0.085 radius of small pulley wheel).
							--Note: The standard pulley wheel has 3:1 gearing. Other gearing numbers are allowed at Bane NOR,
							--but only subject to derogation acceptance.

							local offset = 0.0
							if wtb.Variant:match("Lodd") then
								offset = 0.235
							elseif wtb.Variant:match("Fjær") then
								--TODO: To be verified, that spring WTB shall be mounted on the OCS pole at the same elevation as its tensioned wire:
								offset = 0.0
							elseif wtb.Variant:match("Fast") then
								--Applies to single contact wire or messenger wire:
								offset = 0.0
							end
							
							--Find associated neighbor cantilever:
							local sCnt1 = rel_CantileverOrWtb_HasPrevious_CantileverOrWtb
							local sCnt2 = rel_CantileverOrWtb_HasNext_CantileverOrWtb
							local rCnt1,nCnt1 = getRelatedObjects(sCnt1,wtb)
							local rCnt2,nCnt2 = getRelatedObjects(sCnt2,wtb)
							if nCnt1 + nCnt2 == 0 then
								return 0,_warning, _info("WARNING - WTB has no neighbour cantilever - cannot deduce anchoring device's height.")
							else
								local cnt = getUnionOfCollections({rCnt1,rCnt2})[0] --must be one of them
								local wcvo = cnt.WireClampVerticalOffset
								return RC__round(wcvo + offset,2),
									_info("Anchoring device's height deduced from contact wire clamp's relative elevation "..RC__round(wcvo,2).." at cantilever "..cnt.code..".")
							end

						elseif wir.RcType == rctype_MidpointAnchorLine then
							--Locate the cantilever at the midopint anchor:
							local mal = rWir[0]
							local sMap = rel_MidpointAnchoringLine_Anchors_MidpointAnchor
							local rMap,nMap = getRelatedObjects(sMap,mal)
							if nMap == 0 then
								return 0,_warning, _info("WARNING - Related WTB tensions a midpoint anchor line which has no midpoint anchor (FIXPUNKT)")
							else
								local map = rMap[0]
								local sCnt = rel_Cantilever_IsLockedBy_MidpointAnchor
								local rCnt,nCnt = getRelatedObjects(sCnt,map)
								if nCnt == 0 then
									return 0,_warning, _info("WARNING - Related WTB tensions a midpoint anchor line which at its midpoint anchor has no related cantilever")
								else
									local cnt = rCnt[0]
									local wcvo = cnt.WireClampVerticalOffset
									return RC__round(wcvo,2),
										_info("Anchoring device's height deduced from its midpoint's cantilever's contact wire clamp's relative elevation "
										..RC__round(wcvo,2).." at cantilever "..cnt.code..".")
								end
							end
						elseif wir.RcType == rctype_HighVoltageConductor then
							return 0,_warning,"WARNING - The related WTB tensions a high voltage conductor - delete this formula and define the anchoring device's height manually."
						end
						
					elseif Variant == "Forankring på mast for kurvebardun" then
						return defaultGuywireHeight,_warning, _info("WARNING - Using default guywire height on OCS pole. Delete this formula and adjust manually.")

					elseif Variant == "Forankring på mast for strever" then
						return defaultSpannerHeight,_warning, _info("WARNING - Using default spanner height on OCS pole. Delete this formula and adjust manually.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_FPM_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FPM_Geometry3DName()" ReturnType="String" Description="Obtains the Model 3D Name for this anchoring device, deduced from its related OCS pole">
   <Signature>String _JBTEH_FPM_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_FPM_Geometry3DName()
					--TODO: Model real console in various sizes depending on the type of pole it is mounted on:
					--TODO: Include console for fastening to pole as well:
					local s = rel_AnchoringToOcsPole_IsInstalledOn_OcsPole
					local r,n = getRelatedObjects(s)
					local a
					if n == 0 then 
						return "UNIFINSHED: No OCS pole found, cannot deduce console's 3D model name."
					else
						a = r[0].OcsPoleCrossSection:match("HE[ABM](%d%d%d)") --'HEA220', 'HEB220',  etc: Capture the three digits.
						a = a or "240" --Default size if not a HEA, HEB or MEB pole...
						if Variant == "Forankring på mast for avspenning med bardun" then
							--TODO: Make model depend on OCS pole type and WTB type
							return "NO-BN-3D-EH-FPM-FORANKRING-PÅ-MAST-FOR-FAST-FJÆR-OG-LODDAVSPENNING-PÅ-STÅLMAST-E2103-I"
						elseif Variant == "Forankring på mast for kurvebardun" then
							--TODO: Make model depend on OCS pole type
							return "NO-BN-3D-EH-FPM-FORANKRING-PÅ-MAST-FOR-KURVEBARDUN"
						elseif Variant == "Forankring på mast for strever" then 
							return "NO-BN-3D-EH-FPM-FORANKRING-PÅ-MAST-FOR-STREVER-400x300-FOR-HEB"..a
						else
							return "Unknown Variant ["..Variant.."]."
						end
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Relations" DisplayName="Relasjoner" Description="Checks complex requirements on the number of established relations between this object and other objects."/>
  <LuaExpression Name="mc_Relations" IsModelCheck="true">
   <Formula>_JBTEH_FPM_chkRelations()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FPM_chkRelations()" ReturnType="String" Description="An anchoring device on an OCS pole shall relate to either one Wire Tension Balancer at its extremity (but not at continuation).">
   <Signature>String _JBTEH_FPM_chkRelations()</Signature>
   <Formula>
				function _JBTEH_FPM_chkRelations()
					local _rCow,nCow = getRelatedObjects(rel_AnchoringToOcsPole_IsInstalledOn_OcsPole)
				
					local tmp = getRelatedObjects(rel_AnchoringToOcsPole_Anchors_GuyWireOrSpannerOrWtb)
					local rWtb = tmp:filter(function (x) return x.RcType:match("JBTEH_AEH") end)
					local nWtb = getCollectionLength(rWtb)
					local rGwi = tmp:filter(function (x) return x.RcType:match("JBTEH_BAR") end)
					local nGwi = getCollectionLength(rGwi)
					local rSpn = tmp:filter(function (x) return x.RcType:match("JBTEH_STR") end)
					local nSpn = getCollectionLength(rSpn)
				
					if nCow == 0 then
						return _unfinished,"UNFINISHED - Anchoring device on OCS pole must relate to its OCS upright pole or suspension pole."
					end

					--Anchoring to OCS pole for WTB and guywire:
					if Variant == "Forankring på mast for avspenning med bardun" then
						if nWtb == 1 and nGwi == 1 and nSpn == 0 then
							return _ok,"OK - Anchoring device on OCS pole is related to one WTB and one guywire, no spanner."
						else
							if nWtb ~= 1 then return _unfinished,"UNFINISHED - Anchoring device on OCS pole shall be related to a WTB (and guywire)." end
							if nGwi ~= 1 then return _unfinished,"UNFINISHED - Anchoring device on OCS pole shall be related to a guywire (and WTB)." end
							if nSpn ~= 0 then return _error,"ERROR - Anchoring device on OCS pole shall not be related to a spanner." end
						end
					
					elseif Variant == "Forankring på mast for avspenning uten bardun" then
						if nWtb == 1 and nGwi == 0 and nSpn == 0 then
							return _ok,"OK - Anchoring device on OCS pole is related to just WTB, no guywire or spanner."
						else
							if nWtb ~= 1 then return _unfinished,"UNFINISHED - Anchoring device on OCS pole shall be related to a WTB." end
							if nGwi ~= 0 then return _error,"ERROR - Anchoring device on OCS pole shall not be related to a guywire." end
							if nSpn ~= 0 then return _error,"ERROR - Anchoring device on OCS pole shall not be related to a spanner." end
						end

					--Anchoring to OCS pole for curve guywire (or more guywires):
					elseif Variant == "Forankring på mast for kurvebardun" then
						if nWtb == 0 and nGwi &gt; 0 and nSpn == 0 then
							return _ok,"OK - Anchoring device on OCS pole is related to one or more guywires, no WTB or spanner."
						else
							if nWtb ~= 0 then return _error,"ERROR - Anchoring device on OCS pole shall not be related to a WTB." end
							if nGwi == 0 then return _unfinished,"UNFINISHED - Anchoring device on OCS pole shall be related to at least one guywire." end
							if nSpn ~= 0 then return _error,"ERROR - Anchoring device on OCS pole shall not be related to a spanner." end
						end
				
					--Anchoring to OCS pole for spanner:
					elseif Variant == "Forankring på mast for strever" then
						if nWtb == 0 and nGwi == 0 and nSpn == 1 then
							return _ok,"OK - Anchoring device on OCS pole is related to one spanner, no WTB or guywire."
						else
							if nWtb ~= 0 then return _error,"ERROR - Anchoring device on OCS pole shall not be related to a WTB." end
							if nGwi ~= 0 then return _error,"ERROR - Anchoring device on OCS pole shall not be related to a guywire." end
							if nSpn ~= 1 then return _unfinished,"UNFINISHED - Anchoring device on OCS pole shall be related to a spanner." end
						end

					else
						return _error,"ERROR - Bad variant '"..Variant.."'."
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Forankring på mast for avspenning med bardun" DisplayBlockName="NO-BN-2D-JBTEH_FPM-FORANKRING-PAA-MAST-FOR-AVSPENNING-MED-BARDUN-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Forankring på mast for avspenning uten bardun" DisplayBlockName="NO-BN-2D-JBTEH_FPM-FORANKRING-PAA-MAST-FOR-AVSPENNING-UTEN-BARDUN-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Forankring på mast for kurvebardun" DisplayBlockName="NO-BN-2D-JBTEH_FPM-FORANKRING-PAA-MAST-FOR-KURVEBARDUN-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Forankring på mast for strever" DisplayBlockName="NO-BN-2D-JBTEH_FPM-FORANKRING-PAA-MAST-FOR-STREVER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_FPM-FORANKRING-PAA-MAST-FOR
				{% if Variant == 'Forankring på mast for avspenning med bardun' %}AVSPENNING-MED-BARDUN
				{% elsif Variant == 'Forankring på mast for avspenning uten bardun' %}AVSPENNING-UTEN-BARDUN
				{% elsif Variant == 'Forankring på mast for kurvebardun' %}KURVEBARDUN
				{% elsif Variant == 'Forankring på mast for strever' %}STREVER
				{% else %}BAD_VARIANT
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="kl-mast"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <LuaFunction Name="NOBN_ocs_getWireTensioningDataTable()" ReturnType="Table[4*Double]" Description="Returns a table with standard tensioning force (tf) values, indexed as follows:
		\n
		\n[cwtf] Contact wire tensioning force
		\n[mwtf] Messenger wire tensioning force
		\n[swtf] Stitch wire tensioning force
		\n[awtf] Midpoint anchor line (wire) tensioning force
		\n">
  <Signature>Table[4*Double] NOBN_ocs_getWireTensioningDataTable(OcsSystem os = OcsSystem)</Signature>
  <Formula>
			function NOBN_ocs_getWireTensioningDataTable(os)
				os = os or OcsSystem
				local TensioningForces = {
					["Unknown"] = {cwtf=0, 		mwtf=0.0, 	swtf=0,		awtf=0 },
					["S25"]		= {cwtf=15,		mwtf=15,	swtf=2.8, 	awtf=10},
					["S20A"]	= {cwtf=10, 	mwtf=10,	swtf=2.3,	awtf=10},
					["S20AR"]	= {cwtf=7.06,	mwtf=7.06,	swtf=2.3, 	awtf=10},
					["S20B"]	= {cwtf=10,		mwtf=10,	swtf=0, 	awtf=10},
					["S20BR"]	= {cwtf=7.06,	mwtf=7.06,	swtf=0, 	awtf=10},
					["S20C1"]	= {cwtf=13,		mwtf=13,	swtf=2.3, 	awtf=10},
					["S20C2"]	= {cwtf=13,		mwtf=13,	swtf=2.3, 	awtf=10},
					["S35"]		= {cwtf=7.06,	mwtf=7.06,	swtf=0, 	awtf=10},
					["S35MS"]	= {cwtf=7.06,	mwtf=7.06,	swtf=0, 	awtf=10},
					["Cariboni"]= {cwtf=13,		mwtf=13,	swtf=0, 	awtf=13},
					["TET08"]	= {cwtf=13,		mwtf=13,	swtf=0, 	awtf=13}
				}
				if TensioningForces[os] then
					return TensioningForces[os]
				else
					--A table with the expected four indices is returned, but with zero values:
					return TensioningForces["Unknown"],_warning, _info("Unknown OCS System for wire tensioning balancer ["..os.."]. ")
				end
			end 
		</Formula>
 </LuaFunction>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_WireTensioningBalancer" Name="JBTEH_AEH Avspenning" Layer="JBTEH_AEH" Color="ByLayer" Group="Kontaktledning/Avspenning" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>avspenning</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Loddavspenning, dobbel">
   <Variant Name="Fastavspenning, enkel"/>
   <Variant Name="Fastavspenning, dobbel"/>
   <Variant Name="Loddavspenning, enkel"/>
   <Variant Name="Loddavspenning, dobbel"/>
   <Variant Name="Fjæravspenning, enkel"/>
   <Variant Name="Fjæravspenning, dobbel"/>
  </Variants>
  <TextPositionLuaExpression Name="OBJEKTNAVN">
   <Formula>RC__TextAttributePosition(1,dir == "up" and 16 or -16)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="STREKKRAFT">
   <Formula>RC__TextAttributePosition(3,dir == "up" and 16 or -16)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTID">
   <Formula>RC__TextAttributePosition(5,dir == "up" and 16 or -16)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTINFO">
   <Formula>RC__TextAttributePosition(7,dir == "up" and 16 or -16)</Formula>
  </TextPositionLuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>_JBTEH_AEH_dir()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_dir()" ReturnType="String" Description="Obtains the 'dir' for this OCS tensioning device, related to its alignment's direction.">
   <Signature>String _JBTEH_AEH_dir()</Signature>
   <Formula>
				function _JBTEH_AEH_dir()
					if Alignment == nil then
						return "unknown", _info("UNFINISHED: Own Alignment (contact wire) undefined for OCS tensioning device.")
					else
						return RC__getDistance2D(Alignment.RcAlignment.StartPoint) &lt; RC__getDistance2D(Alignment.RcAlignment.EndPoint) and "up" or "down"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="code">
   <Formula>_JBTEH_AEH_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_code()" ReturnType="String" Description="Obtains the 'code' for this OCS tensioning device, deduced from its own alignment (its contact wire or its midpoint anchoring line) and its position (start/end).">
   <Signature>String _JBTEH_AEH_code()</Signature>
   <Formula>
				function _JBTEH_AEH_code()
					if OcsSystem == "Unknown" then 
						return _warning, "UNFINISHED: Unknown Contact Wire System - make selection."
					else
						if Alignment then
							if Mileage &lt; Alignment.RcAlignment.HorizontalGeometry.Length/2 then
								return Alignment.code.."-start"
							else
								return Alignment.code.."-end"
							end
						else
							return _warning, "UNFINISHED: WTB must have a catenary wire object as own alignment."
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>_JBTEH_AEH_name()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_name()" ReturnType="String" Description="Obtains the 'name' for this OCS tensioning device, deduced from its own alignment (its contact wire).">
   <Signature>String _JBTEH_AEH_name()</Signature>
   <Formula>
				function _JBTEH_AEH_name()
					if     Variant:match("Fjær") then return Alignment.name .. " - [FJ]"
					elseif Variant:match("Fast") then return Alignment.name .. " - [F]"
					elseif Variant:match("Lodd") then return Alignment.name .. " - [L]"
					else return "Bad tensioning device variant ["..Variant.."].",_warning
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_AEH_Mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_Mileage()" ReturnType="Double" Description="Returns mileage for this wire tension balancer. Snaps to the extremity of its associated wire alignment.">
   <Signature>Double _JBTEH_AEH_Mileage()</Signature>
   <Formula>
				function _JBTEH_AEH_Mileage()
					--Assume it runs from 0 (at pole or continuation) to L (at pole or continuation)
					local ai = getAlignmentInfo() --Own alignment is a contact wire object type
					if RC__isNan(ai.RelativePosition) then
						return nil, _info("Position not found - move object inside the extent of its own alignment.")
					end
					return ai.RelativePosition &lt; (Alignment.RcAlignment.HorizontalGeometry.Length - ai.RelativePosition) and Alignment.RcAlignment.StartMileage or Alignment.RcAlignment.EndMileage
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="VerticalOffset">
   <Formula>_JBTEH_AEH_VerticalOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_VerticalOffset()" ReturnType="String" Description="Obtains the relative elevation above the wire that will be tensioned. Fixed WTBs and spring WTBs are located at the same zero relative elevation (same height). Weighted WTBs will vary with design. The default Bane NOR weighted WTB has its anchoring device insertion point located at 0.235 m above its wire. If the WTB is tensioning two wires (a double WTB), then the wires' default separation is 0.70 m. The reference elevation is the elevation of the contact wire - the messenger wire will be deduced from surrounding object's parameters.">
   <Signature>String _JBTEH_AEH_VerticalOffset()</Signature>
   <Formula>
				function _JBTEH_AEH_VerticalOffset()
					if OcsSystem == "Unknown" then return 0, _info("?/? kN (UNFINISHED - unknown OcsSystem).") end
					if Variant == "Fjæravspenning, enkel" or Variant == "Fjæravspenning, dobbel" or Variant == "Fastavspenning, enkel" or Variant == "Fastavspenning, dobbel" then
						return 0
					elseif Variant == "Loddavspenning, enkel" or Variant == "Loddavspenning, dobbel" then
						--Compute the default Bane NOR anchoring device's insertion point on OCS pole for weighted WTB, relative to its (main) wire:
						--See standard mechanical solution as per Bane NOR drawing EH-707469 (S20) or EH-707487 (S25):
						--Force attack is 0.235 = 0.150 + 0.085 above the wire, which enters at the lower side of the small pulley wheel.
						--If two wires are tensioned, then their standard vertical separation is 0.70 m.
						--An alternative is 0.065 = 0.150 - 0.085 (wire entering above pulley wheel) - but the corresponding Bane NOR drawing 
						--number E7254 (EH-707254) hasn't been updated since 1995, so it is probably not relevant anymore.
						return 0.235
					end
					return _info("Bad tensioning device variant ["..Variant.."].")
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="OcsSystem" DisplayName="KL-system" DefaultValue="S20A" Description="The OCS System is one of [Unknown | S25 | S20A | S20AR | S20B | S20BR | S20C1 | S20C2 | S35 | S35MS | Cariboni | TET08].">
   <Values>
    <Value>Unknown</Value>
    <Value>S25</Value>
    <Value>S20A</Value>
    <Value>S20AR</Value>
    <Value>S20B</Value>
    <Value>S20BR</Value>
    <Value>S20C1</Value>
    <Value>S20C2</Value>
    <Value>S35</Value>
    <Value>S35MS</Value>
    <Value>Cariboni</Value>
    <Value>TET08</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="OcsSystem">
   <Formula>_JBTEH_AEH_OcsSystem()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_OcsSystem()" ReturnType="Enumeration" Description="Flags the attribute as 'Unknown' if the OCS system has not yet been selected. Click F4 to change selection.">
   <Signature>Enumeration _JBTEH_AEH_OcsSystem()</Signature>
   <Formula>
				function _JBTEH_AEH_OcsSystem()
					os = getPropertyValue("OcsSystem")
					if os == "Unknown" then
						return os,_unfinished, _info("UNFINISHED - Press F4 to select OCS System.")
					else
						return os
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" Name="PrimaryTensioningForce" DisplayName="Primær strekkraft" Description="The contact wire (or midpoint anchor line) tensioning force [kN]."/>
  <LuaExpression Name="PrimaryTensioningForce">
   <Formula>_JBTEH_AEH_PrimaryTensioningForce(OcsSystem)</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_PrimaryTensioningForce()" ReturnType="String" Description="Obtains the primary tensioning force for this OCS tensioning device (contact wire t.f. or midpoint anchor line t.f.).">
   <Signature>String _JBTEH_AEH_PrimaryTensioningForce()</Signature>
   <Formula>
				function _JBTEH_AEH_PrimaryTensioningForce()
					if Variant == "Fastavspenning, enkel" then
						--Assume that this is a midpoint anchor wire (though it MIGHT be a single, short cw in a tunnel where you would split the WTB into two wall mounts):
						return NOBN_ocs_getWireTensioningDataTable(OcsSystem).awtf
					else
						--Assume that this is the contact wire:
						return NOBN_ocs_getWireTensioningDataTable(OcsSystem).cwtf
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" Name="SecondaryTensioningForce" DisplayName="Sekundær strekkraft" Description="The messenger wire tensioning force [kN]."/>
  <LuaExpression Name="SecondaryTensioningForce">
   <Formula>_JBTEH_AEH_SecondaryTensioningForce(OcsSystem)</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_SecondaryTensioningForce()" ReturnType="String" Description="Obtains the secondary tensioning force for this OCS tensioning device (messenger wire t.f., if present).">
   <Signature>String _JBTEH_AEH_SecondaryTensioningForce()</Signature>
   <Formula>
				function _JBTEH_AEH_SecondaryTensioningForce()
					if Variant == "Fastavspenning, enkel" or Variant == "Loddavspenning, enkel" or Variant == "Færavspenning, enkel" then
						return 0, _info("No messenger wire present with "..Variant..".")
					else
						--Assume that this is a messenger wire:
						return NOBN_ocs_getWireTensioningDataTable(OcsSystem).mwtf
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" Name="TensioningForceDisplay" DisplayName="Strekkraft visning" DefaultValue="" Description="The tensioning force Value, as shown close to the tensioning device [kN]."/>
  <TextAttribute Annotative="true" BindingProperty="TensioningForceDisplay" CadAttributeTag="STREKKRAFT" X="0" Y="20" Layer="JBTEH@STREKKRAFT" Justify="MiddleCenter" Height="0.9" Width="0" Color="ByBlock" Rotation="0" ObliqueAngle="0" Constant="false" Invisible="false" Lock="false" MText="false"/>
  <LuaExpression Name="TensioningForceDisplay">
   <Formula>_JBTEH_AEH_TensioningForceDisplay(OcsSystem)</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_TensioningForceDisplay()" ReturnType="String" Description="Obtains the tensioning forces for this OCS tensioning device, depending on the selected OcsSystem.">
   <Signature>String _JBTEH_AEH_TensioningForceDisplay()</Signature>
   <Formula>
				function _JBTEH_AEH_TensioningForceDisplay()
					if OcsSystem == "Unknown" then
						return "?/? kN", _info("OcsSystem has not been selected")
					end
					local tf = NOBN_ocs_getWireTensioningDataTable(OcsSystem)
					if Variant == "Fastavspenning, enkel" then
						 --Assume that this is an anchoring wire, for the midpoint anchor (but it MIGHT be a CW or MW in a narrow tunnel):
						return tf.awtf.." kN (fix)", _info("Midpoint anchor wire")
					else
						if Variant == "Fjæravspenning, dobbel"
						or Variant == "Loddavspenning, dobbel"
						or Variant == "Fastavspenning, dobbel"
						then
							return tf.cwtf.."/"..tf.mwtf.." kN", _info("Contact wire / messenger wire")
						elseif Variant == "Fjæravspenning, enkel"
						or Variant == "Loddavspenning, enkel"
						then
							return tf.cwtf.." kN", _info("Contact wire")
						end
					end
					return _info("Bad tensioning device variant ["..Variant.."].")
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_AEH_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_Geometry3DName()" ReturnType="String" Description="Obtains the 3D Model Name for this OCS tensioning device.">
   <Signature>String _JBTEH_AEH_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_AEH_Geometry3DName()
					local t = "NO-BN-3D-EH-AEH-AVSPENNING"
					if Variant:match("Fjær") then
						t = t.."-FJÆR"
					elseif Variant:match("Fast") then
						t = t.."-FAST"
					elseif Variant:match("Lodd") then
						t = t.."-LODD"
					end
					if Variant:match("enkel") then
						return t.."-ENKEL"
					elseif Variant:match("dobbel") then
						return t.."-DOBBEL"
					end
					return _info("Bad tensioning device variant ["..Variant.."].")
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" Name="mc_OcsCantileverSequence" DisplayName="Utligger- og avspenningsekvens" ReadOnly="true" Category="Model check" Description="Each wire tension balancer shall feature either a preceding cantilever (at lower mileage) or a next cantilever (at higher mileage)."/>
  <LuaExpression Name="mc_OcsCantileverSequence" IsModelCheck="true">
   <Formula>_JBTEH_AEH_chkCantileverSequence()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_chkCantileverSequence()" ReturnType="String" Description="Checks the WTB/cantilever sequence: WTB preceded by or followed by exactly one cantilever.">
   <Signature>String _JBTEH_AEH_chkCantileverSequence()</Signature>
   <Formula>
				function _JBTEH_AEH_chkCantileverSequence()
					local sPrev = rel_CantileverOrWtb_HasPrevious_CantileverOrWtb
					local rPrev,nPrev = getRelatedObjects(sPrev)
					local sNext = rel_CantileverOrWtb_HasNext_CantileverOrWtb
					local rNext,nNext = getRelatedObjects(sNext)
					if nPrev == 0 and nNext == 0 then
						return _unfinished,"UNFINISHED - Relate to preceding / following cantilever"
					elseif nPrev == 1 and nNext == 0 then
						if rPrev[0].RcType == this.RcType then return _error,"ERROR - WTB cannot be preceded by WTB." end
						return _ok,"OK - Preceded by cantilever "..rPrev[0].code
					elseif nPrev == 0 and nNext == 1 then
						if rNext[0].RcType == this.RcType then return _error,"ERROR - WTB cannot be preceded by WTB." end
						return _ok,"OK - Followed by cantilever "..rNext[0].code
					else
						return _error,"ERROR - Too many related cantilevers."
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Relations" DisplayName="Relasjoner" Description="Checks complex requirements on the number of established relations between this object and other objects."/>
  <LuaExpression Name="mc_Relations" IsModelCheck="true">
   <Formula>_JBTEH_AEH_chkRelations()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AEH_chkRelations()" ReturnType="String" Description="A wire tension balancer (Wtb) shall relate to either an achoring device on OCS pole or on a tunnel wall fitting.">
   <Signature>String _JBTEH_AEH_chkRelations()</Signature>
   <Formula>
				function _JBTEH_AEH_chkRelations()
					local _r1,n1 = getRelatedObjects(rel_GuyWireOrSpannerOrWtb_IsAnchoredBy_TunnelFootplate)
					local _r2,n2 = getRelatedObjects(rel_GuyWireOrSpannerOrWtb_IsAnchoredBy_AnchoringToOcsPole)
					local sum = n1 + n2
					if sum == 1 then
						return _ok,"OK - Wire Tension Balancer shall relate to an anchoring device on OCS pole (JBTEH_FPM) or to a tunnel wall/ceiling (JBTEH_TUF)."
					else
						return _unfinished,"UNFINISHED - Wire Tension Balancer shall relate to an anchoring device on an OCS pole (JBTEH_FPM) or to a tunnel wall/ceiling (JBTEH_TUF)."
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Fastavspenning, enkel" DisplayBlockName="NO-BN-2D-JBTEH_AEH-AVSPENNING-FAST-ENKEL-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>fixline</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>høyspentledning</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Fastavspenning, dobbel" DisplayBlockName="NO-BN-2D-JBTEH_AEH-AVSPENNING-FAST-DOBBEL-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>fixline</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>høyspentledning</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Loddavspenning, enkel" DisplayBlockName="NO-BN-2D-JBTEH_AEH-AVSPENNING-LODD-ENKEL-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>fixline</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>høyspentledning</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Loddavspenning, dobbel" DisplayBlockName="NO-BN-2D-JBTEH_AEH-AVSPENNING-LODD-DOBBEL-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>fixline</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>høyspentledning</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Fjæravspenning, enkel" DisplayBlockName="NO-BN-2D-JBTEH_AEH-AVSPENNING-FJAER-ENKEL-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>fixline</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>høyspentledning</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Fjæravspenning, dobbel" DisplayBlockName="NO-BN-2D-JBTEH_AEH-AVSPENNING-FJAER-DOBBEL-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>fixline</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>høyspentledning</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_AEH-AVSPENNING-LODD-DOBBEL-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_AEH
				AVSPENNING
				{% if    Variant == 'Fastavspenning, enkel' %}FAST-ENKEL
				{% elsif Variant == 'Fastavspenning, dobbel' %}FAST-DOBBEL
				{% elsif Variant == 'Loddavspenning, enkel' %}LODD-ENKEL
				{% elsif Variant == 'Loddavspenning, dobbel' %}LODD-DOBBEL
				{% elsif Variant == 'Fjæravspenning, enkel' %}FJAER-ENKEL
				{% elsif Variant == 'Fjæravspenning, dobbel' %}FJAER-DOBBEL
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_MidpointAnchor" Name="JBTEH_FIX Fixpunkt" Layer="JBTEH_AEH" Color="ByLayer" Group="Kontaktledning/Avspenning" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>fixpunkt</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Fixpunkt">
   <Variant Name="Fixpunkt"/>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTEH_FIX_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FIX_code()" ReturnType="String" Description="Obtains the 'code' for this fixpoint, deduced from its own alignment (its contact wire).">
   <Signature>String _JBTEH_FIX_code()</Signature>
   <Formula>
				function _JBTEH_FIX_code()
					local sCnt = rel_MidpointAnchor_Locks_Cantilever
					local _rCnt,nCnt = getRelatedObjects(sCnt)
					if nCnt == 0 then
						return _unfinished,"UNFINISHED - Relate midpoint anchor to its cantilever with '"..sCnt.."'."
					elseif nCnt == 1 then
						local sCow = rel_MidpointAnchor_Locks_ContactWire
						local rCow,nCow = getRelatedObjects(sCow)
						if nCow == 0 then
							return _unfinished,"UNFINISHED - Relate midpoint anchor to its contact wire with '" ..sCow.."'."
						elseif nCow == 1 then
							local cow = rCow[0]
							--Filter out the suffix letter 'a'..'e', if present:
							local tmp = cow.code:match("(.-)[abcde]$") and cow.code:sub(1,-2) or cow.code
							return tmp, _info("Code was deduced from related contact wire "..cow.code..".")
						else
							return _error,"ERROR - Midpoint anchor is related to more than one visible contact wire."
						end
					else
						return _error,"ERROR - Midpoint anchor is related to more than one visible cantilever."
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>_JBTEH_FIX_name()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FIX_name()" ReturnType="String" Description="Obtains the 'name' for this fixpoint, obtained from its code.">
   <Signature>String _JBTEH_FIX_name()</Signature>
   <Formula>
				function _JBTEH_FIX_name()
					return "L"..code.." - [FIX]"
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="ReferenceMileage">
   <Formula>_JBTEH_FIX_ReferenceMileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FIX_ReferenceMileage()" ReturnType="String" Description="Obtains the reference mileage value for this fixpoint, obtained from its related cantilever. NB! This function assumes that the contact wire has a defined relationship to the local ReferenceAlignment, use RC-AlignmentManager to define this.">
   <Signature>String _JBTEH_FIX_ReferenceMileage()</Signature>
   <Formula>
				function _JBTEH_FIX_ReferenceMileage()
					local s = rel_MidpointAnchor_Locks_Cantilever
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return getPropertyValue("ReferenceMileage"),_warning, _info("UNFINISHED - Relate fixpoint to its cantilever with '"..s.."'.")
					elseif n == 1 then
						return r[0].ReferenceMileage, _info("UNFINISHED - Relate fixpoint to its cantilever with '"..s.."'.")
					else
						return getPropertyValue("ReferenceMileage"),_error, _info("ERROR - Fixpoint should fix just one cantilever (per construction phase).")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="LateralOffset">
   <Formula>_JBTEH_FIX_LateralOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_FIX_LateralOffset()" ReturnType="String" Description="Obtains the LateralOffset for this midpoint anchor, deduced from its cantilever.">
   <Signature>String _JBTEH_FIX_LateralOffset()</Signature>
   <Formula>
				function _JBTEH_FIX_LateralOffset()
					local sCnt = rel_MidpointAnchor_Locks_Cantilever
					local rCnt,nCnt = getRelatedObjects(sCnt)
					if nCnt == 0 then
						return _unfinished,"UNFINISHED - Relate midpoint anchor to its cantilever with '"..sCnt.."'."
					elseif nCnt == 1 then
						local cnt = rCnt[0]
						return cnt.Stagger, _info("LateralOffset was copied from the stagger of related cantilever "..RC__identify(cnt)..".")
					else
						return _error,"ERROR - Midpoint anchor has zero or more than one related contact wire."
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <InsertPointObject Name="Fixpunkt" DisplayBlockName="NO-BN-2D-JBTEH_AEH-AVSPENNING-FIXPUNKT-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_AEH-AVSPENNING-FIXPUNKT-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETEContinuation" Class="RailwayPlacedObject" LuaName="rctype_HighVoltageConductorContinuation" Name="JBTEH_LEF Ledningfortsettelse" Layer="JBTEH_LEF" Color="ByLayer" Group="Kontaktledning/Forbindelser">
  <RelationSpace>ledningsfortsettelse</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_AlignmentType" DisplayName="Alignment type" Description="The alignments must be compatible."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Continuity" DisplayName="Continuity" Description="The alignments shall end in the same XY point (seen from the above)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Tangent" DisplayName="Tangent direction" Description="The alignments shall share the same tangent (i.e., XY-plane differentiability)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Elevation" DisplayName="Elevation" Description="The alignments shall share the same elevation (Z-coordinate)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Gradient" DisplayName="Gradient" Description="The alignments shall share the same gradient (pitch [o/oo])."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Cant" DisplayName="Cant" Description="The alignments shall share the same cant (roll / superelevation [mm]) where they meet."/>
  <LuaExpression Name="mc_AlignmentType" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionAlignmentCompatibility()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Continuity" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionContinuity()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Tangent" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionTangentMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Elevation" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionElevationMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Gradient" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionGradientMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Cant" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionCantMatch()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Ledningfortsettelse">
   <Variant Name="Ledningfortsettelse"></Variant>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTEH_LEF_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_LEF_code()" ReturnType="String" Description="Returns a formated string containing the code properties '[Code1] --- [Code2]' for the two conductors that meet in a conductor continuation.">
   <Signature>String _JBTEH_LEF_code()</Signature>
   <Formula>
				function _JBTEH_LEF_code()
					local first,second
					if RcType ~= rctype_HighVoltageConductorContinuation then
						return _error, "Bad object type ["..RcType.."] - '"..rctype_HighVoltageConductorContinuation.."' was expected."
					else
						first = Alignment
						if first == nil then
							return "Bad or missing alignment reference",_warning
						elseif Alignment.RcType ~= rctype_HighVoltageConductor then
							return "Cannot connect to alignments of type '"..Alignment.RcType.."'.",_warning
						end
						second = TargetAlignment
						if second == nil then
							return "Bad or missing continuing alignment reference",_warning
						elseif TargetAlignment.RcType ~= rctype_HighVoltageConductor then
							return "Cannot connect to alignments of type '"..Alignment.RcType.."'.",_warning
						end
						if first.id == second.id then
							return _error, "Own alignment and continuing alignment cannot be the same ["..first.code.."]"
						end
						return "["..first.code.."] ==&gt; ["..second.code.."]"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_LEF_mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_LEF_mileage()" ReturnType="Double" Description="Obtains the mileage from its alignment.">
   <Signature>Double _JBTEH_LEF_mileage()</Signature>
   <Formula>
				function _JBTEH_LEF_mileage()
					local ai = getAlignmentInfo()
					if RC__isNan(ai.RelativePosition) then return nil, _info("Position not found.") end
					return ai.RelativePosition &lt; (Alignment.RcAlignment.HorizontalGeometry.Length - ai.RelativePosition)
							and Alignment.RcAlignment.StartMileage or Alignment.RcAlignment.EndMileage
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="TargetAlignment">
   <Formula>_JBTEH_LEF_TargetAlignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_LEF_TargetAlignment()" ReturnType="Double" Description="Obtains the target alignment, as long as its snaps to own alignment close to this continuation object.">
   <Signature>Double _JBTEH_LEF_TargetAlignment()</Signature>
   <Formula>
				function _JBTEH_LEF_TargetAlignment()
					return getNearbyAlignments(Alignment.RcType):filter(function (x) return x.id ~= Alignment.id end)[0]
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Ledningfortsettelse" DisplayBlockName="NO-BN-2D-JBTEH_LEF-LEDNINGFORTSETTELSE-0-0-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>høyspentledning</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="false" Layer="JBTEH$KFO" Color="ByBlock" Linetype="ByBlock" Lineweight="ByBlock" Transparency="ByBlock">
   <Rotation Add180DegreesIfDirIsDown="true"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_LEF-LEDNINGFORTSETTELSE
				{% if ExtendingFromEnd == 'True' %}
					{% if ContinuingWithBegin == 'False' %}0-1{% else %}0-0{% endif %}
				{% else %}
					{% if ContinuingWithBegin == 'False' %}0-0{% else %}1-0{% endif %}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETEContinuation" Class="RailwayPlacedObject" LuaName="rctype_ContactWireContinuation" Name="JBTEH_KTF Kontaktledningfortsettelse" Layer="JBTEH_KTF" Color="ByLayer" Group="Kontaktledning/Forbindelser">
  <RelationSpace>kontaktledningsfortsettelse</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="1" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="0.5" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="-1.8" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="2.4" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_AlignmentType" DisplayName="Alignment type" Description="The alignments must be compatible."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Continuity" DisplayName="Continuity" Description="The alignments shall end in the same XY point (seen from the above)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Tangent" DisplayName="Tangent direction" Description="The alignments shall share the same tangent (i.e., XY-plane differentiability)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Elevation" DisplayName="Elevation" Description="The alignments shall share the same elevation (Z-coordinate)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Gradient" DisplayName="Gradient" Description="The alignments shall share the same gradient (pitch [o/oo])."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Cant" DisplayName="Cant" Description="The alignments shall share the same cant (roll / superelevation [mm]) where they meet."/>
  <LuaExpression Name="mc_AlignmentType" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionAlignmentCompatibility()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Continuity" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionContinuity()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Tangent" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionTangentMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Elevation" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionElevationMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Gradient" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionGradientMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Cant" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionCantMatch()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Kontaktledningfortsettelse">
   <Variant Name="Kontaktledningfortsettelse"></Variant>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTEH_KTF_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTF_code()" ReturnType="String" Description="Returns a formated string containing the code properties '[Code1] --- [Code2]' for the two wires that meet in a wire continuation.">
   <Signature>String _JBTEH_KTF_code()</Signature>
   <Formula>
				function _JBTEH_KTF_code()
					local first,second
					if RcType ~= rctype_ContactWireContinuation then
						return _error, "Bad object type ["..RcType.."] - '"..rctype_ContactWireContinuation.."' was expected"
					else
						first = Alignment
						if first == nil then
							return "Bad or missing alignment reference",_warning
						elseif Alignment.RcType ~= rctype_ContactWire then
							return "Cannot connect to alignments of type '"..Alignment.RcType.."'.",_warning
						end
						second = TargetAlignment
						if second == nil then
							return "Bad or missing continuing alignment reference",_warning
						elseif TargetAlignment.RcType ~= rctype_ContactWire then
							return "Cannot connect to alignments of type '"..Alignment.RcType.."'.",_warning
						end
						if first.id == second.id then
							return _error, "Own alignment and continuing alignment cannot be the same ["..first.code.."]"
						end
						return "["..first.code.."] ==&gt; ["..second.code.."]"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_KTF_mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTF_mileage()" ReturnType="Double" Description="Obtains the mileage from its alignment.">
   <Signature>Double _JBTEH_KTF_mileage()</Signature>
   <Formula>
				function _JBTEH_KTF_mileage()
					local ai = getAlignmentInfo()
					if RC__isNan(ai.RelativePosition) then return nil, _info("Position not found.") end
					return ai.RelativePosition &lt; (Alignment.RcAlignment.HorizontalGeometry.Length - ai.RelativePosition)
							and Alignment.RcAlignment.StartMileage or Alignment.RcAlignment.EndMileage
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Alignment">
   <Formula>_JBTEH_KTF_Alignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTF_Alignment()" ReturnType="ObjRef" Description="Obtains the mileage from its alignment.">
   <Signature>ObjRef _JBTEH_KTF_Alignment()</Signature>
   <Formula>
				function _JBTEH_KTF_Alignment()
					return getNearbyAlignments():filter(function (x) return x.RcType == rctype_ContactWire end)[0]
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="TargetAlignment">
   <Formula>_JBTEH_KTF_TargetAlignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KTF_TargetAlignment()" ReturnType="ObjRef" Description="Obtains the target alignment, as long as it has a start or an end close to own alignment and close to this continuation object. The continuation object is supposed to connect a contact wire alignment of any variant with a contact wire alignment of any variant, but no other alignment types.">
   <Signature>ObjRef _JBTEH_KTF_TargetAlignment()</Signature>
   <Formula>
				function _JBTEH_KTF_TargetAlignment()
					local tol = 1 --[m]
					local ta = getNearbyAlignments(rctype_ContactWire):filter(function (x) return x.id ~= Alignment.id end)[0]
					local d1 = RC__getDistance2D(this,ta.RcAlignment.StartPoint)
					local d2 = RC__getDistance2D(this,ta.RcAlignment.EndPoint)
					if math.min(d1,d2) &lt; tol then
						return ta, _info("Target alignment is the closest alignment with a start or end point within "..tol.." m from this contact wire continuation.")
					else
						return nil, _info("No contact wire target alignment found where its start or end is within tolerance "..tol.." m.")
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Kontaktledningfortsettelse" DisplayBlockName="NO-BN-2D-JBTEH_KTF-KONTAKTLEDNING-FORTSETTELSE-0-0-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="false" Layer="JBTEH$KFO" Color="ByBlock" Linetype="ByBlock" Lineweight="ByBlock" Transparency="ByBlock">
   <Rotation Add180DegreesIfDirIsDown="true"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_KTF-KONTAKTLEDNING-FORTSETTELSE
				{% if ExtendingFromEnd == 'True' %}
					{% if ContinuingWithBegin == 'False' %}0-1{% else %}0-0{% endif %}
				{% else %}
					{% if ContinuingWithBegin == 'False' %}0-0{% else %}1-0{% endif %}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <LuaFunction Name="JBTEH_MAS_nonPortalPole_code()" ReturnType="String" Description="Obtains the code for the OCS pole, as a concatenation of the pole's reference mileage km-value and the current 'Seq' local variable.">
  <Signature>String JBTEH_MAS_nonPortalPole_code()</Signature>
  <Formula>
			function JBTEH_MAS_nonPortalPole_code()
				local entireKm = math.floor(ReferenceMileage/1000)
				return string.format("%d-%02d",entireKm,Seq), _info("Pole's code is inherited from reference mileage ("..ReferenceMileage..") and the local variable Seq ("..Seq..").")
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTEH_MAS_getSpanlengths()" ReturnType="Double" HideFromUser="false" Description="Returns a collection of dictionaries {Spanlength = [String], Wirename = [String]}, one such dictionary for each cantilever present on this catenary pole, from wireclamp to the related cantilever's next wireclamp, measured as a 2D straight-line distance.">
  <Signature>Double _JBTEH_MAS_getSpanlengths()</Signature>
  <Formula>
			function _JBTEH_MAS_getSpanlengths()
				--[[
					This function assumes that wtb and cnt are chained with a common previous/next relation. Also handles 
					wtb mounted on a tunnel wall baseplate.
					-	Start at OCS pole and find its cantilevers and wtb's, or start at or tunnel wall baseplate
						and find its wtb.
					-	Iterate over all such objects found, locate the next cantilever or wtb in sequence
					-	For each next object, store next object's contact wire name and the 
						straight-line 2D distance in the XY plane from CW wireclamp/wtb to CW wireclamp/wtb.
					Return value: 	A collection of collections, each containing the 'name' of a contact wire and the
									straight-line 2D distance to next item.
				--]]
				local tol = 1.0 --[m] Tolerance when searching for wire tension balancers at an OCS pole
				local result = {}
			
				--Find all cantilevers and WTBs at this OCS pole, but skip WTBs serving midpoint anchor lines or AT conductors, earthing wires etc:
				local rCnt = getRelatedObjects(rel_OcsPole_Has_Cantilever)
				local rWtb = getNearbyPointObjects2D(tol,rctype_WireTensioningBalancer)
								:filter(function (x) return x.Alignment == rctype_ContactWire end)
				local items = getUnionOfCollections({rCnt,rWtb})
				local nItems = getCollectionLength(items)
			
				if nItems == 0 then
					--Poles for supporting OCS portals will exist, with neither wtbs nor cantilevers at the pole.
					return {}, _info("No spanlengths")
				else
					for i = 0, nItems-1 do
						local thisItem = items[i]
						local cowName
						local p1
						if thisItem.RcType == rctype_WireTensioningBalancer then
							p1 = thisItem:getPoint3D()
							cowName = thisItem.Alignment.name
						else
							--thisItem.RcType == rctype_Cantilever:
							p1 = thisItem:NOBN_ocs_getWireClampPoint3D()
							cowName = thisItem:getRelatedObjects(rel_Cantilever_Holds_ContactWire)[0].name
						end
						local nextItems,nNextItems = thisItem:getRelatedObjects(rel_CantileverOrWtb_HasNext_CantileverOrWtb)
						--A WTB might be the terminal for a contact wire (at a buffer stop etc). Treat only those who possess a successor:
						if nNextItems &gt; 0 then
							local nextItem = nextItems[0]
							local p2
							if nextItem.RcType == rctype_WireTensioningBalancer then
								p2 = nextItem:getPoint3D()
							else
								--nextItem.RcType == rctype_Cantilever:
								p2 = nextItem:NOBN_ocs_getWireClampPoint3D()
							end
							local distance2D = RC__getDistance2D(p1,p2)
							table.insert(result,{Spanlength = RC__round(distance2D,1), Wirename = cowName})
						end
					end
				end
				return result, _info(getCollectionLength(result).." spanlength(s)")
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTEH_MAS_SpanlengthDisplay()" ReturnType="String" HideFromUser="false" Description="Returns a text string containing the ContactWireName and Spanlength for each cantilever located on this OCS pole, from wire clamp to next canitlever's wire clamp (measured as a straight-line 2D length).">
  <Signature>String _JBTEH_MAS_SpanlengthDisplay()</Signature>
  <Formula>
			function _JBTEH_MAS_SpanlengthDisplay()
				--[[
					It is assumed that Spanlength holds a collection of dictionaries, each of which holds a
					contact wire's name [String] and its corresponding spanlength [Double].
			
					The return value has format:
			
					Show this:									...if property Spanlength is:
					=================================			=========================================================
					"-57.8-"									...a collection of just one dictionary {Spanlength = [double], Wirename = [string]}
					"L30-536 -52.6- /.../  L30-537 -37.8-"		...a collection of several such dictionaries.
				--]]
				
				local Spanlengths = getCollectionFromTable(_JBTEH_MAS_getSpanlengths())
				local nSpanlengths = getCollectionLength(Spanlengths)
				local s
				if nSpanlengths == 0 then
					return "", _info("No spanlength(s) - expected format is {{Spanlength = [double], Wirename = [string]}+}")
				elseif nSpanlengths == 1 then
					local sl = Spanlengths[0]
					return sl.Spanlength == 0 and "" or string.format("-%.01f-",sl.Spanlength)
				else
					for i = 0,nSpanlengths-1 do
						local sl = Spanlengths[i]
						if i == 0 then
							s = string.format("%s -%.01f-",sl.Wirename,sl.Spanlength)
						else
							s = s..string.format(" / %s -%.01f-",sl.Wirename,sl.Spanlength)
						end
					end
				end
				return s
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTEH_MAS_SpanlengthTextPosition()" ReturnType="Vector2D" HideFromUser="false" Description="Returns a World Coordinate System offset vector for the span length custom text position attribute, by default from the object's insertion point to halfway between the concerned poles' display points. Optionally, specify offsets as [LateralOffset [,LongitudinalOffset]]). RC will adapt input offsets to the current drawing scale if different from 1:1.">
  <Signature>{Double,Double} _JBTEH_MAS_SpanlengthTextPosition(Double LateralOffset, Double LongitudinalOffset = 0)</Signature>
  <Formula>
			function _JBTEH_MAS_SpanlengthTextPosition(LateralOffset,LongitudinalOffset)
				local wcsX,wcsY = RC__getWcsVectorFromAcsVector(RC__scale((RightSided and 1 or -1)*LateralOffset,LongitudinalOffset))
				local r,n = getRelatedObjects(rel_OcsPole_HasNext_OcsPole)
				if n == 0 then
					return {wcsX,wcsY}
				else
					local target = r[0]

					--Offset from object's insertion point to the midpoint between the displaypoints for the poles that are involved:
					local startX = geoCoord.X + SymbolOffset.X
					local startY = geoCoord.Y + SymbolOffset.Y
					local endX = target.geoCoord.X + target.SymbolOffset.X
					local endY = target.geoCoord.Y + target.SymbolOffset.Y
	
					return { SymbolOffset.X + (endX - startX)/2 + wcsX, SymbolOffset.Y + (endY - startY)/2 + wcsY }
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTEH_MAS_SpanlengthTextRotation()" ReturnType="Double" HideFromUser="false" Description="Returns the text attribute's rotation [DD] for the shortest span length custom text rotation attribute, to place the text nicely between its two poles' display points.">
  <Signature>Double _JBTEH_MAS_SpanlengthTextRotation()</Signature>
  <Formula>
			function _JBTEH_MAS_SpanlengthTextRotation()
				local r,n = getRelatedObjects(rel_OcsPole_HasNext_OcsPole)
				if n == 0 then 
					return AlignmentTangent
				else 
					local target = r[0]
	
					--WCS angle between the displaypoints for the poles that are involved:
					local startX = geoCoord.X + SymbolOffset.X
					local startY = geoCoord.Y + SymbolOffset.Y
					local endX = target.geoCoord.X + target.SymbolOffset.X
					local endY = target.geoCoord.Y + target.SymbolOffset.Y
					return math.deg(math.atan(endY - startY, endX - startX)) + (MileageIncreasesTowardsLeft and 180 or 0)
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="JBTEH_MAS_getOtherObjectsToModelcheck()" ReturnType="String" Description="Returns the number of other items to modelcheck, and a table with references to them.">
  <Signature>JBTEH_MAS_getOtherObjectsToModelcheck()</Signature>
  <Formula>
			function JBTEH_MAS_getOtherObjectsToModelcheck()
				local sPortal1 = rel_OcsPole_IsSupportFor_OcsPortal
				local sPortal2 = rel_OcsPole_IsDropArmUnder_OcsPortal
				local sSupportingPole = rel_OcsPortal_IsSupportedBy_OcsPole
				local sDropArm = rel_OcsPortal_IsDropArmSupportFor_OcsPole

				local t = {} --Collection of other objects to check
				local first = true

				local rPortal1,nPortal1 = getRelatedObjects(sPortal1)
				local rPortal2,nPortal2 = getRelatedObjects(sPortal2)
				local rPortal = getUnionOfCollections({rPortal1,rPortal2})
				local nPortal = nPortal1 + nPortal2

				for j = 0,nPortal-1 do
					table.insert(t,rPortal[j])
					txt = first and "{"..RC__identify(rPortal[j]) or txt..","..RC__identify(rPortal[j])
					first = false
					local rSupportingPole,nSupportingPole = rPortal[j]:getRelatedObjects(sSupportingPole)
					for i = 0, nSupportingPole-1 do 
						if rSupportingPole[i].id ~= this.id then
							table.insert(t,rSupportingPole[i])
							txt = txt..","..RC__identify(rSupportingPole[i])
						end
					end
					local rDropArm,nDropArm = rPortal[j]:getRelatedObjects(sDropArm)
					for i = 0, nDropArm-1 do
						if rDropArm[i].id ~= this.id then
							table.insert(t,rDropArm[i])
							txt = txt..","..RC__identify(rDropArm[i])
						end
					end
					local n = nSupportingPole + nDropArm
					return n,t, _info(n..": "..txt.."}")
				end
				return 0,{}, _info(first and "{}" or txt)
			end
		</Formula>
 </LuaFunction>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_OcsPole" Name="JBTEH_MAS KL-mast" Layer="JBTEH_MAS" Color="ByLayer" Group="Kontaktledning/Master" AttMirrorX="{% if MileageIncreasesTowardsLeft %}true{% else %}false{% endif %}" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>kl-mast</RelationSpace>
  <AttachmentCategory Name="kl-mast"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Bjelkemast">
   <Variant Name="Bjelkemast">
    <SetValue Key="OcsPoleCrossSection" Value="HEB240"/>
    <SetValue Key="OcsPoleHeight" Value="10000"/>
   </Variant>
   <Variant Name="Bjelkemast, forsterket">
    <SetValue Key="OcsPoleCrossSection" Value="HEM260"/>
    <SetValue Key="OcsPoleHeight" Value="10000"/>
   </Variant>
   <Variant Name="GMB-mast">
    <SetValue Key="OcsPoleCrossSection" Value="HEB240"/>
    <SetValue Key="OcsPoleHeight" Value="7500"/>
   </Variant>
   <Variant Name="H-mast">
    <SetValue Key="OcsPoleCrossSection" Value="H3"/>
    <SetValue Key="OcsPoleHeight" Value="7500"/>
   </Variant>
   <Variant Name="B-mast">
    <SetValue Key="OcsPoleCrossSection" Value="B3"/>
    <SetValue Key="OcsPoleHeight" Value="7500"/>
   </Variant>
   <Variant Name="Betongmast">
    <SetValue Key="OcsPoleCrossSection" Value="13"/>
    <SetValue Key="OcsPoleDepth" Value="2000"/>
    <SetValue Key="OcsPoleHeight" Value="8000"/>
   </Variant>
   <Variant Name="Tremast">
    <SetValue Key="OcsPoleCrossSection" Value="Ø260"/>
    <SetValue Key="OcsPoleDepth" Value="1600"/>
    <SetValue Key="OcsPoleHeight" Value="7500"/>
   </Variant>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="NewOrExisting" DisplayName="Ny eller eksisterende" DefaultValue="Ny" Description="The overhead catenary system (OCS) pole's age [Ny | Eksisterende].">
   <Values>
    <Value>Ny</Value>
    <Value>Eksisterende</Value>
   </Values>
  </CustomProperty>
  <TextPositionLuaExpression Name="OBJEKTNAVN">
   <Formula>RC__TextAttributePosition(4,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTID">
   <Formula>RC__TextAttributePosition(22,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTINFO">
   <Formula>RC__TextAttributePosition(24,0)</Formula>
  </TextPositionLuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_OtherObjectsToBeModelchecked" DisplayName="Andre objekter som modelsjekkes" Description="If this OCS pole supports a portal, then the portal with more poles / drop arms are modelchecked as well."/>
  <LuaExpression Name="mc_OtherObjectsToBeModelchecked" IsModelCheck="true">
   <Formula>JBTEH_MAS_getOtherObjectsToModelcheck()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="OcsPoleCrossSection" DisplayName="Masteprofil" Description="The overhead catenary system (OCS) pole profile (omp) [HEB200..280 | HEM260 | H3..H6 | B2..B6 | 240x240 | Ø260].">
   <Values Variant="Bjelkemast">
    <Value>HEB280</Value>
    <Value>HEB260</Value>
    <Value>HEB240</Value>
    <Value>HEB220</Value>
    <Value>HEB200</Value>
   </Values>
   <Values Variant="Bjelkemast, forsterket">
    <Value>HEM260</Value>
   </Values>
   <Values Variant="GMB-mast">
    <Value>HEB280</Value>
    <Value>HEB260</Value>
    <Value>HEB240</Value>
    <Value>HEB220</Value>
    <Value>HEB200</Value>
   </Values>
   <Values Variant="H-mast">
    <Value>H6</Value>
    <Value>H5</Value>
    <Value>H3</Value>
   </Values>
   <Values Variant="B-mast">
    <Value>B6</Value>
    <Value>B5</Value>
    <Value>B4</Value>
    <Value>B3</Value>
    <Value>B2</Value>
   </Values>
   <Values Variant="Betongmast">
    <Value>27</Value>
    <Value>26</Value>
    <Value>25</Value>
    <Value>24</Value>
    <Value>23</Value>
    <Value>22</Value>
    <Value>21</Value>
    <Value>20</Value>
    <Value>19</Value>
    <Value>18</Value>
    <Value>17</Value>
    <Value>16</Value>
    <Value>15</Value>
    <Value>14</Value>
    <Value>13</Value>
    <Value>19S</Value>
    <Value>18S</Value>
    <Value>17S</Value>
    <Value>16S</Value>
    <Value>15S</Value>
    <Value>14S</Value>
    <Value>13S</Value>
   </Values>
   <Values Variant="Tremast">
    <Value>Ø260</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="OcsPoleHeight" DisplayName="Mastehøyde" DefaultValue="7000" Description="The overhead catenary system (OCS) pole height [mm]. The total pole length is the sum of its height and its depth.">
   <Values Variant="Bjelkemast">
    <Value>13000</Value>
    <Value>12500</Value>
    <Value>12000</Value>
    <Value>11500</Value>
    <Value>11000</Value>
    <Value>10500</Value>
    <Value>10000</Value>
    <Value>9500</Value>
    <Value>9000</Value>
    <Value>8500</Value>
    <Value>8000</Value>
    <Value>7500</Value>
    <Value>7000</Value>
    <Value>6500</Value>
    <Value>6000</Value>
   </Values>
   <Values Variant="Bjelkemast, forsterket">
    <Value>13000</Value>
    <Value>12500</Value>
    <Value>12000</Value>
    <Value>11500</Value>
    <Value>11000</Value>
    <Value>10500</Value>
    <Value>10000</Value>
    <Value>9500</Value>
    <Value>9000</Value>
    <Value>8500</Value>
    <Value>8000</Value>
   </Values>
   <Values Variant="GMB-mast">
    <Value>13000</Value>
    <Value>12500</Value>
    <Value>12000</Value>
    <Value>11500</Value>
    <Value>11000</Value>
    <Value>10500</Value>
    <Value>10000</Value>
    <Value>9500</Value>
    <Value>9000</Value>
    <Value>8500</Value>
    <Value>8000</Value>
    <Value>7500</Value>
    <Value>7000</Value>
    <Value>6500</Value>
    <Value>6000</Value>
   </Values>
   <Values Variant="H-mast">
    <Value>13000</Value>
    <Value>12500</Value>
    <Value>12000</Value>
    <Value>11500</Value>
    <Value>11000</Value>
    <Value>10500</Value>
    <Value>10000</Value>
    <Value>9500</Value>
    <Value>9000</Value>
    <Value>8500</Value>
    <Value>8000</Value>
    <Value>7500</Value>
    <Value>7000</Value>
    <Value>6500</Value>
    <Value>6000</Value>
   </Values>
   <Values Variant="B-mast">
    <Value>13000</Value>
    <Value>12500</Value>
    <Value>12000</Value>
    <Value>11500</Value>
    <Value>11000</Value>
    <Value>10500</Value>
    <Value>10000</Value>
    <Value>9500</Value>
    <Value>9000</Value>
    <Value>8500</Value>
    <Value>8000</Value>
    <Value>7500</Value>
   </Values>
   <Values Variant="Betongmast">
    <Value>13000</Value>
    <Value>12000</Value>
    <Value>11000</Value>
    <Value>10000</Value>
    <Value>9000</Value>
    <Value>8000</Value>
    <Value>7000</Value>
    <Value>6000</Value>
   </Values>
   <Values Variant="Tremast">
    <Value>12000</Value>
    <Value>11500</Value>
    <Value>11000</Value>
    <Value>10500</Value>
    <Value>10000</Value>
    <Value>9500</Value>
    <Value>9000</Value>
    <Value>8500</Value>
    <Value>8000</Value>
    <Value>7500</Value>
    <Value>7000</Value>
    <Value>6500</Value>
    <Value>6000</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="OcsPoleHeight">
   <Formula>_JBTEH_MAS_OcsPoleHeight()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAS_OcsPoleHeight()" ReturnType="Double" HideFromUser="false" Description="Returns the height of the OCS pole, possibly adapted to carry a portal.">
   <Signature>Double _JBTEH_MAS_OcsPoleHeight()</Signature>
   <Formula>
				function _JBTEH_MAS_OcsPoleHeight()
					local r,n = getRelatedObjects(rel_OcsPole_IsSupportFor_OcsPortal)
					if n &gt; 0 then
						return string.format("%.0f", 500 * ((r[0].VerticalOffset + 1.0) // 0.5)) --[mm]
					else
						--Assume that the 3D library uses steps of 500 mm, assume using tall poles (for AT):
						return tostring(9500 - 500*math.floor((250 + 1000*VerticalOffset)//500)) --[mm]
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="OcsPoleDepth" DisplayName="Mastedybde" DefaultValue="0" Description="Only applicable to wooden and concrete poles. The overhead catenary system (OCS) pole depth below ground reference level (omd) [mm].">
   <Values Variant="Bjelkemast">
    <Value>0</Value>
   </Values>
   <Values Variant="Bjelkemast, forsterket">
    <Value>0</Value>
   </Values>
   <Values Variant="GMB-mast">
    <Value>0</Value>
   </Values>
   <Values Variant="H-mast">
    <Value>0</Value>
   </Values>
   <Values Variant="B-mast">
    <Value>0</Value>
   </Values>
   <Values Variant="Betongmast">
    <Value>2000</Value>
   </Values>
   <Values Variant="Tremast">
    <Value>2000</Value>
    <Value>1800</Value>
    <Value>1600</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Collection" Name="Spanlength" DisplayName="Spennlengde" DefaultValue="0.0" Description="The span length (sl) [m] denotes the distance traveled along the associated alignment's reference alignment (projected onto the XY plane) from this pole to the closest next pole, related using '&quot;..rel_OcsPole_HasNext_OcsPole..&quot;'/'&quot;..rel_OcsPole_HasPrevious_OcsPole..&quot;'."/>
  <LuaExpression Name="Spanlength">
   <Formula>_JBTEH_MAS_getSpanlengths()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="SpanlengthDisplay" DisplayName="Spennlengde visning" DefaultValue="" Description="The span length value [m] being displayed close to the OCS pole."/>
  <LuaExpression Name="SpanlengthDisplay">
   <Formula>_JBTEH_MAS_SpanlengthDisplay()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="SpanlengthDisplay" CadAttributeTag="SPENNLENGDE" X="15" Y="5" Layer="JBTEH@SPENNLENGDE" Justify="MiddleCenter" Height="0.9" Width="0" Rotation="0" ObliqueAngle="0" Constant="false" Invisible="false" Lock="false" MText="false"/>
  <CustomProperty DataType="Double" Name="SpanlengthTextLateralOffset" DisplayName="Sideveis spennlengdetekst offset" DefaultValue="0" Description="The span length(s) text lateral offset [m] denotes the distance, transversal to the pole's local track direction, to offset the text element(s)."/>
  <CustomProperty DataType="Double" Name="SpanlengthTextLongitudinalOffset" DisplayName="Longitudinal offset for Spanlength text" DefaultValue="0" Description="The span length(s) text longitudinal offset [m] denotes the distance, along the pole's local track direction, to offset the text element(s)."/>
  <TextPositionLuaExpression Name="SPENNLENGDE">
   <Formula>_JBTEH_MAS_SpanlengthTextPosition(SpanlengthTextLateralOffset,SpanlengthTextLongitudinalOffset)</Formula>
  </TextPositionLuaExpression>
  <TextRotationLuaExpression Name="SPENNLENGDE">
   <Formula>_JBTEH_MAS_SpanlengthTextRotation()</Formula>
  </TextRotationLuaExpression>
  <CustomProperty DataType="Boolean" Name="SupportArm" DisplayName="Support arm" DefaultValue="false" Description="True if the OCS pole features a support arm holding autotransformer conductors [ True | False ]."/>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>JBTEH_MAS_nonPortalPole_code()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>_JBTEH_MAS_VerticalOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAS_VerticalOffset()" ReturnType="Double" HideFromUser="false" Description="Returns and locks the relative elevation at zero (lowest rail) for OCS pole. Delete this formula and adjust manually when other relative elevation is needed.">
   <Signature>Double _JBTEH_MAS_VerticalOffset()</Signature>
   <Formula>
				function _JBTEH_MAS_VerticalOffset()
					return 0
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="AngularOffset">
   <Formula>_JBTEH_MAS_ocsPole_AngularOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAS_ocsPole_AngularOffset()" ReturnType="Double" HideFromUser="false" Description="Returns an angular offset, to orient the (ordinary) pole colinear with its portal (if any).">
   <Signature>Double _JBTEH_MAS_ocsPole_AngularOffset()</Signature>
   <Formula>
				function _JBTEH_MAS_ocsPole_AngularOffset()
					local pRelationName = rel_OcsPole_IsSupportFor_OcsPortal
					local pr,pn = getRelatedObjects(pRelationName)
					if pn == 0 then
						return getPropertyValue("AngularOffset"), _info("No control input - adjust angular offset manually or relate with '"..pRelationName.."' to a portal (which has second support pole).")
				
					else
						local portal = pr[0]
						local s = rel_OcsPortal_IsSupportedBy_OcsPole
						local r,n = getRelatedObjects(s,portal)
				
						if n == 0 then
							return getPropertyValue("AngularOffset"),_error,
								_info("ERROR OCS pole has bad connection to gantry '"..RC__identify(portal).."'.")
				
						elseif n == 1 then
							--Gantry:
							return getPropertyValue("AngularOffset"),
								_info("OCS pole is connected to a gantry '"..RC__identify(portal)..
								"' - adjust pole's angular offset manually or change gantry into portal (which has one more portal support poles).")
						
						elseif n == 2 then
							--Assume that the first two related poles are located at the portal's extremities:
							local m1 = r[0]
							local m2 = r[1]
							local x1 = m1.geoCoord.X		
							local y1 = m1.geoCoord.Y
							local x2 = m2.geoCoord.X
							local y2 = m2.geoCoord.Y
							local portalDir = math.deg(math.atan(y2-y1,x2-x1)) % 180.0
							local tg = getAlignmentInfo().Tangent
							local trackDir = math.deg(math.atan(tg.Y,tg.X))
							local info = "Angular Offset deduced using portal support poles '"..RC__identify(m1).."' and '"..RC__identify(m2).."'."
							return (360.0 + RC__round(90 - (trackDir - portalDir),3)) % 360.0, _info(info)
				
						else
							--TODO: Locate the two support poles at each end of portal, use this to find angular offset, then turn yourself if you 
							--are a support pole at one or the other end, or just adapt if you are in between ends.
							return getPropertyValue("AngularOffset"),
								_info("OCS pole is connected to a portal '"..RC__identify(portal).." with total 3 or more supporting poles"..
								"' - adjust pole's angular offset manually.")
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_MAS_ocsPole_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAS_ocsPole_Geometry3DName()" ReturnType="String" Description="Obtains the 3D geometry's 'Name' for this KL pole.">
   <Signature>Double _JBTEH_MAS_ocsPole_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_MAS_ocsPole_Geometry3DName()
					if Variant == "Bjelkemast" then
						return "NO-BN-3D-EH-MAS-BJELKEMAST-" ..OcsPoleCrossSection .."-191x374xM36-"..OcsPoleHeight
					elseif Variant == "Bjelkemast, forsterket" then
						return "NO-BN-3D-EH-MAS-BJELKEMAST-" ..OcsPoleCrossSection .."-191x374xM36-"..OcsPoleHeight
					elseif Variant == "GMB-mast" then
						--TODO: Få ekte data for GMB-mastene, Lage 3D GMB-master
						return "NO-BN-3D-EH-MAS-GMBMAST-" ..OcsPoleCrossSection .."-" ..OcsPoleHeight
					elseif Variant == "H-mast" then
						--Assume the 191x374 modern type:
						return "NO-BN-3D-EH-MAS-GITTERMAST-" ..OcsPoleCrossSection .."-191x374xM36-"..OcsPoleHeight
					elseif Variant == "B-mast" then
						--Assume the 191x374 modern type:
						return "NO-BN-3D-EH-MAS-GITTERMAST-" ..OcsPoleCrossSection .."-191x374xM36-"..OcsPoleHeight
					elseif Variant == "Betongmast" then
						return "NO-BN-3D-EH-MAS-BETONGMAST-" ..OcsPoleCrossSection .."-"..OcsPoleDepth.."-"..OcsPoleHeight
					elseif Variant == "Tremast" then
						return "NO-BN-3D-EH-MAS-TREMAST-" ..OcsPoleCrossSection .."-"..OcsPoleDepth.."-"..OcsPoleHeight
					else
						return "Ukjent Variant ["..Variant.."]",_warning
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Bjelkemast" DisplayBlockName="NO-BN-2D-JBTEH_MAS-BJELKEMAST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4" SubGroup="Ordinære master">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject Name="Bjelkemast, forsterket" DisplayBlockName="NO-BN-2D-JBTEH_MAS-BJELKEMAST-FORSTERKET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4" SubGroup="Ordinære master">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject Name="GMB-mast" DisplayBlockName="NO-BN-2D-JBTEH_MAS-GMBMAST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4" SubGroup="Ordinære master">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject Name="H-mast" DisplayBlockName="NO-BN-2D-JBTEH_MAS-GITTERMAST-H-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4" SubGroup="Ordinære master">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject Name="B-mast" DisplayBlockName="NO-BN-2D-JBTEH_MAS-GITTERMAST-B-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4" SubGroup="Ordinære master">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject Name="Betongmast" DisplayBlockName="NO-BN-2D-JBTEH_MAS-BETONGMAST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4" SubGroup="Ordinære master">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject Name="Tremast" DisplayBlockName="NO-BN-2D-JBTEH_MAS-TREMAST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4" SubGroup="Ordinære master">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_MAS
				{% if    Variant == 'Bjelkemast' %}BJELKEMAST
				{% elsif Variant == 'Bjelkemast, forsterket' %}BJELKEMAST-FORSTERKET
				{% elsif Variant == 'GMB-mast' %}GMBMAST
				{% elsif Variant == 'B-mast' %}GITTERMAST-B
				{% elsif Variant == 'H-mast' %}GITTERMAST-H
				{% elsif Variant == 'Betongmast' %}BETONGMAST
				{% elsif Variant == 'Tremast' %}TREMAST
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="åk"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="skilt"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="seksjonsutliggerkonsoll"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="utligger"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="kl-fundament"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="autotransformator"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="avskjerming"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="forankring_på_mast"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="avspenning"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="kl-bryter"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_OcsDropArmForBridgeOrTunnel" Name="JBTEH_MAS Hengemast for bru og tunnel" Layer="JBTEH_MAS_HGM_TUNNEL" Color="ByLayer" Group="Kontaktledning/Master" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>kl-mast</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextPositionLuaExpression Name="OBJEKTNAVN">
   <Formula>RC__TextAttributePosition(0,8)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTID">
   <Formula>RC__TextAttributePosition(-1.5,8)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTINFO">
   <Formula>RC__TextAttributePosition(1.5,8)</Formula>
  </TextPositionLuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Hengemast for bru og tunnel">
   <Variant Name="Hengemast for bru og tunnel">
    <SetValue Key="OcsPoleCrossSection" Value="Sirkulær, Ø120"/>
    <SetValue Key="OcsPoleHeight" Value="3100"/>
   </Variant>
   <Variant Name="Hengemast Cariboni">
    <SetValue Key="OcsPoleCrossSection" Value="Rektangulær, 100x150"/>
    <SetValue Key="OcsPoleHeight" Value="3100"/>
   </Variant>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="NewOrExisting" DisplayName="Ny eller eksisterende" DefaultValue="Ny" Description="The overhead catenary system (OCS) pole's age [Ny | Eksisterende].">
   <Values>
    <Value>Ny</Value>
    <Value>Eksisterende</Value>
   </Values>
  </CustomProperty>
  <TextPositionLuaExpression Name="OBJEKTNAVN">
   <Formula>RC__TextAttributePosition(20,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTID">
   <Formula>RC__TextAttributePosition(22,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTINFO">
   <Formula>RC__TextAttributePosition(24,0)</Formula>
  </TextPositionLuaExpression>
  <CustomProperty DataType="Enumeration" Name="OcsPoleCrossSection" DisplayName="Masteprofil" DefaultValue="Sirkulær, Ø120" Description="The overhead catenary system (OCS) drop arm profile (smp) [ Sirkulær, Ø120 | Kvadratisk, 100x100 | Rektangulær, 100x150 | Rektangulær, 100x200 ].">
   <Values Variant="Hengemast for bru og tunnel">
    <Value>Sirkulær, Ø120</Value>
    <Value>Kvadratisk, 100x100</Value>
    <Value>Rektangulær, 100x150</Value>
    <Value>Rektangulær, 100x200</Value>
   </Values>
   <Values Variant="Hengemast Cariboni">
    <Value>Rektangulær, 100x150</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="OcsPoleHeight" DisplayName="Høyde" DefaultValue="3600" Description="The overhead catenary system (OCS) drop arm height [mm], given in predefined lengths 0.5m - 5.0m in 250 millimeter steps.">
   <Values Variant="Hengemast for bru og tunnel">
    <Value>5000</Value>
    <Value>4750</Value>
    <Value>4500</Value>
    <Value>4250</Value>
    <Value>4000</Value>
    <Value>3750</Value>
    <Value>3500</Value>
    <Value>3250</Value>
    <Value>3000</Value>
    <Value>2750</Value>
    <Value>2500</Value>
    <Value>2250</Value>
    <Value>2000</Value>
    <Value>1750</Value>
    <Value>1500</Value>
    <Value>1250</Value>
    <Value>1000</Value>
    <Value>750</Value>
    <Value>500</Value>
   </Values>
   <Values Variant="Hengemast Cariboni">
    <Value>5000</Value>
    <Value>4750</Value>
    <Value>4500</Value>
    <Value>4250</Value>
    <Value>4000</Value>
    <Value>3750</Value>
    <Value>3500</Value>
    <Value>3250</Value>
    <Value>3000</Value>
    <Value>2750</Value>
    <Value>2500</Value>
    <Value>2250</Value>
    <Value>2000</Value>
    <Value>1750</Value>
    <Value>1500</Value>
    <Value>1250</Value>
    <Value>1000</Value>
    <Value>750</Value>
    <Value>500</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Collection" Name="Spanlength" DisplayName="Spennlengde" DefaultValue="0.0" Description="The span length (sl) [m] denotes the distance traveled along the associated alignment's reference alignment (projected onto the XY plane) from this pole to the closest next pole, related using '&quot;..rel_OcsPole_HasNext_OcsPole..&quot;'/'&quot;..rel_OcsPole_HasPrevious_OcsPole..&quot;'."/>
  <LuaExpression Name="Spanlength">
   <Formula>_JBTEH_MAS_getSpanlengths()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="SpanlengthDisplay" DisplayName="Spennlengde visning" DefaultValue="" Description="The span length value [m] being displayed close to the OCS pole."/>
  <LuaExpression Name="SpanlengthDisplay">
   <Formula>_JBTEH_MAS_SpanlengthDisplay()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="SpanlengthDisplay" CadAttributeTag="SPENNLENGDE" X="15" Y="5" Layer="JBTEH@SPENNLENGDE" Justify="MiddleCenter" Height="0.9" Width="0" Rotation="0" ObliqueAngle="0" Constant="false" Invisible="false" Lock="false" MText="false"/>
  <CustomProperty DataType="Double" Name="SpanlengthTextLateralOffset" DisplayName="Sideveis spennlengdetekst offset" DefaultValue="0" Description="The span length(s) text lateral offset [m] denotes the distance, transversal to the pole's local track direction, to offset the text element(s)."/>
  <CustomProperty DataType="Double" Name="SpanlengthTextLongitudinalOffset" DisplayName="Longitudinal offset for Spanlength text" DefaultValue="0" Description="The span length(s) text longitudinal offset [m] denotes the distance, along the pole's local track direction, to offset the text element(s)."/>
  <TextPositionLuaExpression Name="SPENNLENGDE">
   <Formula>_JBTEH_MAS_SpanlengthTextPosition(SpanlengthTextLateralOffset,SpanlengthTextLongitudinalOffset)</Formula>
  </TextPositionLuaExpression>
  <TextRotationLuaExpression Name="SPENNLENGDE">
   <Formula>_JBTEH_MAS_SpanlengthTextRotation()</Formula>
  </TextRotationLuaExpression>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>JBTEH_MAS_nonPortalPole_code()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>_JBTEH_MAS_DropArmUnderBridgeOrTunnel_VerticalOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAS_DropArmUnderBridgeOrTunnel_VerticalOffset()" ReturnType="Double" HideFromUser="false" Description="Returns the relative elevation for a OCS pole suspended from a portal, based on the portal's type and relative elevation.">
   <Signature>Double _JBTEH_MAS_DropArmUnderBridgeOrTunnel_VerticalOffset()</Signature>
   <Formula>
				function _JBTEH_MAS_DropArmUnderBridgeOrTunnel_VerticalOffset()
					local s = rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation
					local r,n = getRelatedObjects(s)
					if n == 0 then
						-- Belongs to a bridge underside (with no bolt group/foundation object), or has not (yet) received its bolt group relation:
						return 7.0, _info(
						"UNFINISHED - Relate pole with '"..rel_OcsPoleOrAnchoringFootplate_Has_OcsFoundation.."' to OCS ceiling bolt group, or delete formula and replace by actual relative height if bolt group is irrelevant.")
					else
						-- Has bolt group:
						return r[0].VerticalOffset, _info("Value obtained from foundation '"..RC__identify(r[0]).."'.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_MAS_DropArmForBridgeOrTunnel_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAS_DropArmForBridgeOrTunnel_Geometry3DName()" ReturnType="String" Description="Obtains the 3D geometry's 'Name' for this OCS drop arm.">
   <Signature>String _JBTEH_MAS_DropArmForBridgeOrTunnel_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_MAS_DropArmForBridgeOrTunnel_Geometry3DName()
					local h = (math.floor((250/2 + OcsPoleHeight) / 250)) * 250 -- Assume 3D models in steps of 250 mm
					if Variant == "Hengemast for bru og tunnel" then
						if (OcsPoleCrossSection == "Sirkulær, Ø120") then
							return "NO-BN-3D-EH-MAS-HENGEMAST-FOR-BRU-OG-TUNNEL-350x350xM24-Ø120-"..h
						elseif (OcsPoleCrossSection == "Kvadratisk, 100x100") then 
							return "NO-BN-3D-EH-MAS-HENGEMAST-FOR-BRU-OG-TUNNEL-350x350xM24-HUP-100x100-"..h
						elseif (OcsPoleCrossSection == "Rektangulær, 100x150") then 
							return "NO-BN-3D-EH-MAS-HENGEMAST-FOR-BRU-OG-TUNNEL-350x350xM24-HUP-100x150-"..h
						elseif (OcsPoleCrossSection == "Rektangulær, 100x200") then
							return "NO-BN-3D-EH-MAS-HENGEMAST-FOR-BRU-OG-TUNNEL-350x350xM24-HUP-100x200-"..h
						end
					elseif Variant:match("Hengemast Cariboni") then
						if (OcsPoleCrossSection == "Rektangulær, 100x150") then 
							return "NO-BN-3D-EH-MAS-HENGEMAST-FOR-BRU-OG-TUNNEL-350x350xM24-HUP-100x150-"..h
						end
					else 
						return "Bad OCS drop arm Variant ["..Variant.."].",_warning
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Hengemast for bru og tunnel" DisplayBlockName="NO-BN-2D-JBTEH_MAS-HENGEMAST-FOR-TUNNEL-OG-BRU-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="2.65" SubGroup="Hengemast for bru og tunnel">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0"/>
  </InsertPointObject>
  <InsertPointObject Name="Hengemast Cariboni" DisplayBlockName="NO-BN-2D-JBTEH_MAS-HENGEMAST-CARIBONI-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1.2" SubGroup="Hengemast for bru og tunnel">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_MAS
				HENGEMAST
				{% if Variant == 'Hengemast for bru og tunnel' %}FOR-TUNNEL-OG-BRU
				{% elsif Variant == 'Hengemast Cariboni' %}CARIBONI
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="skilt"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="seksjonsutliggerkonsoll"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="utligger"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="kl-fundament"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="avskjerming"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="forankring_på_mast"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_OcsDropArmUnderPortal" Name="JBTEH_MAS Hengemast i åk" Layer="JBTEH_MAS_HGM_ÅK" Color="ByLayer" Group="Kontaktledning/Master" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>kl-mast</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextPositionLuaExpression Name="OBJEKTNAVN">
   <Formula>RC__TextAttributePosition(0,8)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTID">
   <Formula>RC__TextAttributePosition(-1.5,8)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTINFO">
   <Formula>RC__TextAttributePosition(1.5,8)</Formula>
  </TextPositionLuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Hengemast i åk">
   <Variant Name="Hengemast i åk">
    <SetValue Key="OcsPoleCrossSection" Value="Rektangulær, 100x150"/>
    <SetValue Key="OcsPoleHeight" Value="3100"/>
   </Variant>
  </Variants>
  <TextPositionLuaExpression Name="OBJEKTNAVN">
   <Formula>RC__TextAttributePosition(0,10)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTID">
   <Formula>RC__TextAttributePosition(2,10)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTINFO">
   <Formula>RC__TextAttributePosition(4,10)</Formula>
  </TextPositionLuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_OtherObjectsToBeModelchecked" DisplayName="Andre objekter som modelsjekkes" Description="When this OCS drop arm is refreshed, then its portal with other OCS poles are modelchecked as well."/>
  <LuaExpression Name="mc_OtherObjectsToBeModelchecked" IsModelCheck="true">
   <Formula>JBTEH_MAS_getOtherObjectsToModelcheck()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="NewOrExisting" DisplayName="Ny eller eksisterende" DefaultValue="Ny" Description="The overhead catenary system (OCS) pole's age [Ny | Eksisterende].">
   <Values>
    <Value>Ny</Value>
    <Value>Eksisterende</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="OcsPoleCrossSection" DisplayName="Masteprofil" DefaultValue="Rektangulær, 100x150" Description="The overhead catenary system (OCS) drop arm profile (smp) [ Kvadratisk, 100x100 | Rektangulær, 100x150 | Rektangulær, 100x200 ].">
   <Values>
    <Value>Kvadratisk, 100x100</Value>
    <Value>Rektangulær, 100x150</Value>
    <Value>Rektangulær, 100x200</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="OcsPoleHeight" DisplayName="Høyde" DefaultValue="3100" Description="The overhead catenary system (OCS) drop arm height, given in predefined lengths 1.0 - 5.0 m in 100 millimeter steps.">
   <Values>
    <Value>5000</Value>
    <Value>4900</Value>
    <Value>4800</Value>
    <Value>4700</Value>
    <Value>4600</Value>
    <Value>4500</Value>
    <Value>4400</Value>
    <Value>4300</Value>
    <Value>4200</Value>
    <Value>4100</Value>
    <Value>4000</Value>
    <Value>3900</Value>
    <Value>3800</Value>
    <Value>3700</Value>
    <Value>3600</Value>
    <Value>3500</Value>
    <Value>3400</Value>
    <Value>3300</Value>
    <Value>3200</Value>
    <Value>3100</Value>
    <Value>3000</Value>
    <Value>2900</Value>
    <Value>2800</Value>
    <Value>2700</Value>
    <Value>2600</Value>
    <Value>2500</Value>
    <Value>2400</Value>
    <Value>2300</Value>
    <Value>2200</Value>
    <Value>2100</Value>
    <Value>2000</Value>
    <Value>1900</Value>
    <Value>1800</Value>
    <Value>1700</Value>
    <Value>1600</Value>
    <Value>1500</Value>
    <Value>1400</Value>
    <Value>1300</Value>
    <Value>1200</Value>
    <Value>1100</Value>
    <Value>1000</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Double" Name="DropArmAlongOffset" DisplayName="Hengemast offset langs egen akse" DefaultValue="0" Description="The drop arm's offset from center of portal, colinear to the drop arm's own alignments' tangent direction."></CustomProperty>
  <CustomProperty DataType="Collection" Name="Spanlength" DisplayName="Spennlengde" DefaultValue="0.0" Description="The span length (sl) [m] denotes the distance traveled along the associated alignment's reference alignment (projected onto the XY plane) from this pole to the closest next pole, related using '&quot;..rel_OcsPole_HasNext_OcsPole..&quot;'/'&quot;..rel_OcsPole_HasPrevious_OcsPole..&quot;'."/>
  <LuaExpression Name="Spanlength">
   <Formula>_JBTEH_MAS_getSpanlengths()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="SpanlengthDisplay" DisplayName="Spennlengde visning" DefaultValue="" Description="The span length value [m] being displayed close to the OCS pole."/>
  <LuaExpression Name="SpanlengthDisplay">
   <Formula>_JBTEH_MAS_SpanlengthDisplay()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="SpanlengthDisplay" CadAttributeTag="SPENNLENGDE" X="15" Y="5" Layer="JBTEH@SPENNLENGDE" Justify="MiddleCenter" Height="0.9" Width="0" Rotation="0" ObliqueAngle="0" Constant="false" Invisible="false" Lock="false" MText="false"/>
  <CustomProperty DataType="Double" Name="SpanlengthTextLateralOffset" DisplayName="Sideveis spennlengdetekst offset" DefaultValue="0" Description="The span length(s) text lateral offset [m] denotes the distance, transversal to the pole's local track direction, to offset the text element(s)."/>
  <CustomProperty DataType="Double" Name="SpanlengthTextLongitudinalOffset" DisplayName="Longitudinal offset for Spanlength text" DefaultValue="0" Description="The span length(s) text longitudinal offset [m] denotes the distance, along the pole's local track direction, to offset the text element(s)."/>
  <TextPositionLuaExpression Name="SPENNLENGDE">
   <Formula>_JBTEH_MAS_SpanlengthTextPosition(SpanlengthTextLateralOffset,SpanlengthTextLongitudinalOffset)</Formula>
  </TextPositionLuaExpression>
  <TextRotationLuaExpression Name="SPENNLENGDE">
   <Formula>_JBTEH_MAS_SpanlengthTextRotation()</Formula>
  </TextRotationLuaExpression>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>_JBTEH_MAS_DropArmUnderPortal_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAS_DropArmUnderPortal_code()" ReturnType="String" Description="Obtains the code for this OCS drop arm.">
   <Signature>String _JBTEH_MAS_DropArmUnderPortal_code()</Signature>
   <Formula>
				function _JBTEH_MAS_DropArmUnderPortal_code()
					local portalRelation = rel_OcsPole_IsDropArmUnder_OcsPortal
					local portals, nPortals = getRelatedObjects(portalRelation)
					if nPortals == 0 then
						return "UNFINISHED - Relate with '"..portalRelation.."'."
					elseif nPortals &gt; 1 then
							return _warning, "UNFINISHED - Suspended OCS pole belongs to more than one portal "
									.." - remove unintended relations '"..portalRelation.."' or adjust the active stage using layer names."
					else
						--One portal:
						local rSupportPoles,nSupportPoles = getRelatedObjects(rel_OcsPortal_IsSupportedBy_OcsPole,portals[0]) 
						if nSupportPoles == 0 then 
							return "UNFINISHED - Cannot deduce suspended OCS pole name since portal '"..RC__identify(portals[0]).."' has no support pole yet."
						else
							--Find the reference support pole - being closest to the portal's own insertion point (there may be many portal support poles):
							local shortestDist = math.huge
							local referenceSupportPole = nil 
							for i = 0, nSupportPoles-1 do
								local newDist = RC__getDistance2D(portals[0].geoCoord,rSupportPoles[i].geoCoord)
								if newDist &lt; shortestDist then
									shortestDist = newDist
									referenceSupportPole = i
								end
							end
					
							--Start suspended pole's code with support pole's code,
							--assign sequence number to this suspended OCS pole (counted from the support pole closest to portal's insertion point):
							local rDropArms, nDropArms = getRelatedObjects(rel_OcsPortal_IsDropArmSupportFor_OcsPole,portals[0])
					
							local sequenceNumber = 0
							for i = 0, nDropArms-1 do
								if rDropArms[i].id == this.id then
									sequenceNumber = i + 1
								end
							end
							return rSupportPoles[referenceSupportPole].code..string.format("-%02d",sequenceNumber),
								_info("Code deduced from portal '"..portals[0].code.."' and its related components.")
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_MAS_DropArmUnderPortal_Mileage(DropArmAlongOffset)</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAS_DropArmUnderPortal_Mileage()" ReturnType="Double" Description="Deduces the portal drop arm's mileage, based on its relation to a portal/gantry and this one's support pole(s). If provided, the offset is added to the computed mileage.">
   <Signature>Double _JBTEH_MAS_DropArmUnderPortal_Mileage([Double offset])</Signature>
   <Formula>
				function _JBTEH_MAS_DropArmUnderPortal_Mileage(offset)
					offset = offset or 0.0 --Note: The offset is "brutally" added to mileage, also when the portal does not cross tracks at a straight angle.
					local ps = rel_OcsPole_IsDropArmUnder_OcsPortal
					local pr,pn = getRelatedObjects(ps)
					if pn == 0 then
						return getPropertyValue("Mileage"), _info("UNFINISHED - Relate to portal/gantry with '"..ps.."' to set mileage automatically.")
				
					elseif pn &gt; 1 then
						return _error,getPropertyValue("Mileage"),
							_info("ERROR - Drop arm is related to more than one portal ("..RC__identify(pr[0])..", "..RC__identify(pr[1])..").")
						
					else
						--pn == 1
						local portal = pr[0]
						local s = rel_OcsPortal_IsSupportedBy_OcsPole
						local r,n = getRelatedObjects(s,portal)
						if n == 0 then
							return offset + portal.Mileage,
								_info("Mileage was deduced from a portal/gantry lacking support pole(s) '"..RC__identify(portal).."'.")
					
						elseif n == 1 then 
							--Gantry:
							return offset + RC__getMileageFromRelatedObject(s,portal), _info("Mileage deduced from support pole '"..RC__identify(portal).."'.")
							
						elseif n &gt;= 2 then
							--Our drop arm is suspended from a portal being supported by two OCS poles:
							local p1 = r[0]
							local p2 = r[1]
							local x1 = p1.geoCoord.X		
							local y1 = p1.geoCoord.Y
							local dx = p2.geoCoord.X - x1
							local dy = p2.geoCoord.Y - y1
							
							--Find point Q on the straight line betweeen p1 and p2 with the portal drop arm's specified DistanceToAlignment:
							local function err(t) 
								local Qx = x1 + t*dx  
								local Qy = y1 + t*dy  
								return getAlignmentInfo(Alignment.id,Qx,Qy).DistanceToAlignment - this.DistanceToAlignment
							end
							local tq = getZeros(err,{tolerance = 1e-4, interval = {0,1}, timeLimit = 3})[0]
							local Qx = x1 + tq*dx  
							local Qy = y1 + tq*dy  
							return offset + getAlignmentInfo(Alignment.id,Qx,Qy).Mileage
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="VerticalOffset">
   <Formula>_JBTEH_MAS_DropArmUnderPortal_VerticalOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAS_DropArmUnderPortal_VerticalOffset()" ReturnType="Double" HideFromUser="false" Description="Returns the relative elevation for a drop arm under a portal, based on the portal's type and relative elevation.">
   <Signature>Double _JBTEH_MAS_DropArmUnderPortal_VerticalOffset()</Signature>
   <Formula>
				function _JBTEH_MAS_DropArmUnderPortal_VerticalOffset()
					local extensionAboveTopOfPortal = 0.10
					local s = rel_OcsPole_IsDropArmUnder_OcsPortal
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return 0.0, _info("UNFINISHED - Relate with '"..s.."' to its OCS portal.") 
					else 
						local e = (r[0].geoCoord.Z - getAlignmentInfo().Elevation) --Portal's elevation above this drop arm's own alignment
						local v = r[0].Variant
						if v == "Type 12" then return e + 0.8 + extensionAboveTopOfPortal
						elseif v == "OCS gantry" then return e + 0.8 + extensionAboveTopOfPortal --Uses Type 12, 6m.
						elseif v == "Type 14" then return e + 1.2 + extensionAboveTopOfPortal
						elseif v == "Type 40" then return e + 0.4 + extensionAboveTopOfPortal
						else
							return 0.0,_error, _info("Bad related OCS portal '"..RC__identify(r[0]).."' Variant: ["..v.."].")
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="AngularOffset">
   <Formula>_JBTEH_MAS_DropArmUnderPortal_AngularOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAS_DropArmUnderPortal_AngularOffset()" ReturnType="Double" HideFromUser="false" Description="Returns an angular offset, to orient the drop arm colinearly with its portal (if any).">
   <Signature>Double _JBTEH_MAS_DropArmUnderPortal_AngularOffset()</Signature>
   <Formula>
				function _JBTEH_MAS_DropArmUnderPortal_AngularOffset()
					local ps = rel_OcsPole_IsDropArmUnder_OcsPortal
					local pr,pn = getRelatedObjects(ps)
					if pn == 0 then
						return getPropertyValue("AngularOffset"), _info("UNFINISHED - relate drop arm to portal with '"..ps.."'.")
				
					else
						local portal = pr[0]
						local s = rel_OcsPortal_IsSupportedBy_OcsPole
						local r,n = getRelatedObjects(s,portal)
				
						if n == 0 then
							return getPropertyValue("AngularOffset"),_error,
								_info("ERROR Drop arm has bad connection to gantry '"..RC__identify(portal).."'.")
				
						elseif n == 1 then
							--Gantry:
							return getPropertyValue("AngularOffset"),
								_info("DropArm is connected to a gantry '"..RC__identify(portal)..
								"' - adjust drop arm's angular offset manually or change gantry into portal (which has one more portal support pole).")
						
						elseif n == 2 then
							--Assume that the first two related poles are located at the portal's extremities:
							local p1 = r[0]
							local p2 = r[1]
							local x1 = p1.geoCoord.X		
							local y1 = p1.geoCoord.Y
							local x2 = p2.geoCoord.X
							local y2 = p2.geoCoord.Y
							local portalDir = math.deg(math.atan(y2-y1,x2-x1)) % 180.0
							local tg = getAlignmentInfo().Tangent
							local trackDir = math.deg(math.atan(tg.Y,tg.X))
							local info = "Angular Offset deduced using portal support poles '"..RC__identify(p1).."' and '"..RC__identify(p2).."'."
							return (360.0 + RC__round(90 - (trackDir - portalDir),3)) % 360.0, _info(info)
				
						else
							--TODO: Locate the two support poles at each end of portal, uses this to find angular offset, then turn yourself if you 
							--are a support pole at one or the other end, or just adapt if you are in between ends.
							return getPropertyValue("AngularOffset"),
								_info("DropArm is connected to a portal '"..RC__identify(portal).." with total 3 or more supporting poles"..
								"' - adjust pole's angular offset manually.")
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_MAS_DropArmUnderPortal_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAS_DropArmUnderPortal_Geometry3DName()" ReturnType="String" Description="Obtains the 3D geometry's 'Name' for this OCS drop arm.">
   <Signature>String _JBTEH_MAS_DropArmUnderPortal_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_MAS_DropArmUnderPortal_Geometry3DName()
					return "NO-BN-3D-EH-MAS-HENGEMAST-I-ÅK-HUP-"..(OcsPoleCrossSection:match("(%d+x%d+)")).."-"..OcsPoleHeight
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Hengemast i åk" DisplayBlockName="NO-BN-2D-JBTEH_MAS-HENGEMAST-I-ÅK-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="2.65" SubGroup="Hengemast i åk">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_MAS-HENGEMAST-I-ÅK-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="skilt"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="seksjonsutliggerkonsoll"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="utligger"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="avskjerming"/>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="forankring_på_mast"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_OcsPortal" Name="JBTEH_AAK Åk" Layer="JBTEH_AAK" Color="ByLayer" Group="Kontaktledning/Åk" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>åk</RelationSpace>
  <AttachmentCategory Name="åk"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="20" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="22" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="24" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Type 12">
   <Variant Name="Type 12">
    <SetValue Key="code" Value="Type 12"/>
    <SetValue Key="Length" Value="11m"/>
   </Variant>
   <Variant Name="Type 14">
    <SetValue Key="code" Value="Type 14"/>
    <SetValue Key="Length" Value="28m"/>
   </Variant>
   <Variant Name="Type 40">
    <SetValue Key="code" Value="Type 40"/>
    <SetValue Key="Length" Value="10m"/>
   </Variant>
   <Variant Name="OCS gantry">
    <SetValue Key="code" Value="OCS gantry"/>
   </Variant>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D"/>
  <CustomProperty DataType="Enumeration" Name="Length" DisplayName="Lengde" DefaultValue="11m" Description="The overhead catenary system (OCS) portal length (oyl), given in predefined lengths in 1 meter steps. Each may be composed of subparts, where the joints may hinder drop arm mounting.">
   <Values Variant="Type 12">
    <Value Description="Type XXIII">33m</Value>
    <Value>32m</Value>
    <Value>31m</Value>
    <Value>30m</Value>
    <Value>29m</Value>
    <Value>28m</Value>
    <Value>27m</Value>
    <Value>26m</Value>
    <Value>25m</Value>
    <Value>24m</Value>
    <Value>23m</Value>
    <Value>22m</Value>
    <Value>21m</Value>
    <Value>20m</Value>
    <Value>19m</Value>
    <Value>18m</Value>
    <Value>17m</Value>
    <Value>16m</Value>
    <Value>15m</Value>
    <Value>14m</Value>
    <Value>13m</Value>
    <Value>12m</Value>
    <Value>11m</Value>
   </Values>
   <Values Variant="Type 14">
    <Value>43m</Value>
    <Value>42m</Value>
    <Value>41m</Value>
    <Value>40m</Value>
    <Value>39m</Value>
    <Value>38m</Value>
    <Value>37m</Value>
    <Value>36m</Value>
    <Value>35m</Value>
    <Value>34m</Value>
    <Value>33m</Value>
    <Value>32m</Value>
    <Value>31m</Value>
    <Value>30m</Value>
    <Value>29m</Value>
    <Value>28m</Value>
   </Values>
   <Values Variant="Type 40">
    <Value>16m</Value>
    <Value>15m</Value>
    <Value>14m</Value>
    <Value>13m</Value>
    <Value>12m</Value>
    <Value>11m</Value>
    <Value>10m</Value>
   </Values>
   <Values Variant="OCS gantry">
    <Value>6m</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_OtherObjectsToBeModelchecked" DisplayName="Andre objekter som modelsjekkes" Description="The number of other items to modelcheck, and a table with references to them."/>
  <LuaExpression Name="mc_OtherObjectsToBeModelchecked" IsModelCheck="true">
   <Formula>_JBTEH_AAK_getOtherObjectsToModelcheck()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AAK_getOtherObjectsToModelcheck()" ReturnType="String" Description="Returns the number of other items to modelcheck, and a table with references to them.">
   <Signature>_JBTEH_AAK_getOtherObjectsToModelcheck()</Signature>
   <Formula>
				function _JBTEH_AAK_getOtherObjectsToModelcheck()
					local sPole = rel_OcsPortal_IsSupportedBy_OcsPole
					local rPole,nPole = getRelatedObjects(sPole)
					local t = {} --Collection of other objects to check
					local first = true
					local txt = ""
					for i = 0, nPole-1 do 
						table.insert(t,rPole[i])
						txt = first and "{"..RC__identify(rPole[i]) or txt..","..RC__identify(rPole[i])
						first = false
					end
					local sDropArm = rel_OcsPortal_IsDropArmSupportFor_OcsPole
					local rDropArm,nDropArm = getRelatedObjects(sDropArm)
					for i = 0, nDropArm-1 do
						table.insert(t,rDropArm[i])
						txt = first and "{"..RC__identify(rDropArm[i]) or txt..","..RC__identify(rDropArm[i])
						first = false
					end
					local n = nPole + nDropArm
					if n == 0 then
						return 0,{}, _info("{}")
					else
						return n,t, _info(n..": "..txt.."}")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>"KL-åk "..code.." ("..Variant..", "..Length..")"</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>_JBTEH_AAK_LateralOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AAK_LateralOffset()" ReturnType="Enum" Description="Returns the distance to alignment for the portal.">
   <Signature>Double _JBTEH_AAK_LateralOffset()</Signature>
   <Formula>
				function _JBTEH_AAK_LateralOffset()
					-- Ref Bane NOR, lærebok "Bygging av kontaktledningsanlegg" Del 2:2, Kap. 14
				
					function _JBTEH_AAK_get_supportPoleLateralOffset(pole)
						if pole.Alignment == nil then 
							return RightSided and 1e-3 or -1e-3,_warning, _info("Closest OCS support pole is not connected to a track (own alignment).")
						else
							local mv = pole.Variant
							local mp = pole.OcsPoleCrossSection
							local d
							if mv:match("Bjelkemast") then
								d = string.sub(mp,4,6)/2000 --Assume pole profile names "HEB200", "HEB220" etc
							elseif mv:match("GMB%-mast") then
								d = string.sub(mp,4,6)/2000 --Assume pole profile names "HEB200", "HEB220" etc TODO: Find the real profile for Gardermobanen pole
							elseif mv:match("B%-mast") then
								d = (pole.OcsPoleHeight - VerticalOffset) * math.tan(23/1000000)
							elseif mv:match("H%-mast") then
								d = (pole.OcsPoleHeight - VerticalOffset) * math.tan(1/50000)
							elseif mv:lower():match("hengemast") then
								if (mp == 'Sirkulær, Ø120') then 
									d = 0.06
								elseif (mp == 'Kvadratisk, 100x100') then 
									d = 0.05
								elseif (mp == 'Rektangulær, 100x150') then
									d = 0.075
								elseif (mp == 'Rektangulær, 100x200') then 
									d = 0.1
								else
									return 0,_warning, _info("Bad OCS pole profile ["..mp.."].")
								end
							else 
								return 0,_warning, _info("Bad OCS pole variant ["..mv.."].")
							end
							-- OCS pole and portal may belong to different tracks (when OCS pole is located between tracks):
							local mdist = getAlignmentInfo(Alignment.id,pole.geoCoord.X,pole.geoCoord.Y).DistanceToAlignment --Distance from center closest OCS pole to portal's alignment
							if (pole.RightSided) then
								if (pole.Alignment.id == Alignment.id) then return mdist-d else return mdist+d end
							else
								if (pole.Alignment.id == Alignment.id) then return mdist+d else return mdist-d end
							end
						end
					end --function
				
					local s = rel_OcsPortal_IsSupportedBy_OcsPole
					local r,n = getRelatedObjects(s)

					if n == 0 then
						if Variant == "OCS gantry" then
							--Merk: Utliggeråk benytter en 6m mellomramme for Åk type 12.
							return getPropertyValue("LateralOffset"),_warning, _info("UNFINISHED: Relate gantry to an OCS pole with relation '"..s.."'.")
						else
							return getPropertyValue("LateralOffset"),_warning, _info(
								"UNFINISHED: Relate portal to OCS pole(s) with relation '"..s.."', or change Variant to gantry.")
						end
				
					elseif n == 1 then
						if Variant == "OCS gantry" then 
							--Merk: Utliggeråk benytter en 6m mellomramme for Åk type 12.
							return _JBTEH_AAK_get_supportPoleLateralOffset(r[0]), _info("Gantry portal (Utliggeråk) extending from pole '"..RC__identify(r[0]).."'.")
						else
							return getPropertyValue("LateralOffset"),_warning, _info(
								"UNFINISHED: Relate portal to one more OCS pole with relation '"..rel_OcsPortal_IsSupportedBy_OcsPole.."', or change Variant to gantry.")
						end
				
					elseif n &gt;= 2 then 
						local m1 = r[0]
						local m2 = r[1]
						if RC__getDistance2D(this,m1) &gt; RC__getDistance2D(this,m2) then m1,m2 = m2,m1 end 
						local d1 = RC__getDistance2D(m1,m2)
						local L = math.floor(1.500 + d1) --Assume min 0.5 and max 1.5 meter total portal length overshoot
						local d2 = 0.5 * (L - d1) --Share overshoot between poles
						local x1 = m1.geoCoord.X		
						local y1 = m1.geoCoord.Y
						local x2 = m2.geoCoord.X
						local y2 = m2.geoCoord.Y
						local x = x1 - (d2/d1)*(x2-x1)
						local y = y1 - (d2/d1)*(y2-y1)
						local info = "Distance to alignment deduced through support pole '"..RC__identify(m1).."' related by '"..s.."'."
						return getAlignmentInfo(Alignment.id,x,y).DistanceToAlignment, _info(info)
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="Length">
   <Formula>_JBTEH_AAK_Length()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AAK_Length()" ReturnType="Enum" Description="Returns the length of the portal, being the support's pole-to-pole center distance plus 1.50 meter, rounded down.">
   <Signature>Enum _JBTEH_AAK_Length()</Signature>
   <Formula>
				function _JBTEH_AAK_Length()
					-- Ref Bane NOR, lærebok "Bygging av kontaktledningsanlegg" Del 2:2, Kap. 14
					local RelationName = rel_OcsPortal_IsSupportedBy_OcsPole
					local r,n = getRelatedObjects(RelationName)
					local L
					if n == 0 then
						if Variant == "OCS gantry" then 
							--Merk: Utliggeråk benytter en 6m mellomramme for Åk type 12. Se sammenstillingstegning E-7507 = EH-707507, samt mellomramme 6m type 12 = EH-707448.
							L = "6m"
							return L,_warning, _info("UNFINISHED: Relate gantry to an OCS pole with relation '"..RelationName.."'.")
						else
							if Variant == "Type 12" then L = "11m"
							elseif Variant == "Type 14" then L = "28m"
							elseif Variant == "Type 40" then L = "10m"
							end
							return L,_warning, _info(
								"UNFINISHED: Relate portal to OCS pole(s) with relation '"..RelationName.."', or change Variant to gantry (Utliggeråk).")
						end
				
					elseif n == 1 then
						local m1 = r[0]
						if Variant == "OCS gantry" then 
							return "6m", _info("Gantry portal (Utliggeråk) extending from OCS pole "..m1.code..".")
						else
							if Variant == "Type 12" then L = "11m"
							elseif Variant == "Type 14" then L = "28m"
							elseif Variant == "Type 40" then L = "10m"
							end
							return L,_warning, _info(
								"UNFINISHED: Relate portal to one more OCS poles with relation '"..RelationName.."', or change Variant to gantry (Utliggeråk).")
						end
				
					elseif n &gt;= 2 then 
						local m1 = r[0]
						local m2 = r[1]
						local p1 = m1.geoCoord
						local p2 = m2.geoCoord
						local len = RC__getDistance2D(p1,p2)
						L = math.floor(len + 1.5)
						if Variant == "Type 12" then
							if L &lt; 11 then return "11m",_warning, _info("L="..L.." required, but Type 12 portals can't be shorter than 11 meter. Change to type 40 or gantry (Utliggeråk).")
							elseif L &gt; 33 then return "33m",_warning, _info("L="..L.." required, but Type 12 portals can't be longer than 33 meter, change to Type 14.")
							end
						elseif Variant == "Type 14" then
							if L &lt; 28 then return "28m",_warning, _info("L="..L.." required, but Type 14 portals can't be made shorter than 28 meter. Change to Type 12 or 40.")
							elseif L &gt; 43 then return "43m",_warning, _info("L="..L.." required, but Type 14 portals can't be made longer than 43 meter.")
							end
						elseif Variant == "Type 40" then
							if L &lt; 10 then return "10m",_warning, _info("L="..L.." required, but Type 40 portals can't be made shorter than 10 meter. Change to gantry (Utliggeråk).")
							elseif L &gt; 16 then return "16m",_warning, _info("L="..L.." required, but Type 40 portals can't be made longer than 16 meter, change to Type 12 or 14.")
							end
						else
							return getPropertyValue("Length"),_error, _info("Remove excess portal support pole(s), or change portal Variant into Type 12/14/40.")
						end
						return L.."m", _info("Length deduced from support pole "..m1.code.." and "..m2.code.." ("..RC__round(len,3).." m).")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="AngularOffset">
   <Formula>_JBTEH_AAK_AngularOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AAK_AngularOffset()" ReturnType="Double" HideFromUser="false" Description="Returns the angular offset needed to orient the portal between its two poles, or a gantry according to its pole.">
   <Signature>Double _JBTEH_AAK_AngularOffset()</Signature>
   <Formula>
				function _JBTEH_AAK_AngularOffset()
					local RelationName = rel_OcsPortal_IsSupportedBy_OcsPole
					local r,n = getRelatedObjects(RelationName)

					if n == 0 then
						return getPropertyValue("AngularOffset"), _info("No control input - adjust angular offset manually. Relate to one (gantry) or two (portal) poles using '"..RelationName.."' to set angular offset automatically.")

					elseif n == 1 then 
						-- Gantry "åk-unge", "utliggeråk"
						-- Assume gantry belongs to same alignment as the supporting OCS pole
						return r[0].AngularOffset, _info("AngularOffset for gantry deduced from object '"..RC__identify(r[0]).."' related by '"..RelationName.."'.")

					elseif n == 2 then 
						--Assume that the first two related OCS poles are located at the portal's extremities:
						local m1 = r[0]
						local m2 = r[1]
						local x1 = m1.geoCoord.X
						local y1 = m1.geoCoord.Y
						local x2 = m2.geoCoord.X
						local y2 = m2.geoCoord.Y
						local portalDir = math.deg(math.atan(y2-y1,x2-x1))
						local tg = getAlignmentInfo().Tangent
						local trackDir = math.deg(math.atan(tg.Y,tg.X)) - RC__getAngleFromDir()
						local info = "AngularOffset for portal deduced from its support poles '"..
							RC__identify(m1).."' and '"..RC__identify(m2).."' related by '"..RelationName.."'."
						return RC__round((2*360 + portalDir - trackDir) % 360, 3), _info(info)

					else
						--TODO: Locate the two support poles at each end of portal, uses thes to find angular offset, then turn yourself if you 
						--are a support pole at one or the other end, or just adapt if you are in between ends.
						return getPropertyValue("AngularOffset"),
							_info("Mast is connected to a portal '"..RC__identify(portal).." with total 3 or more supporting poles"..
							"' - adjust pole's angular offset manually.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_AAK_Mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AAK_Mileage()" ReturnType="Double" Description="Deduces the gantry's / portal's mileage, based on relation to one or two portal support poles.">
   <Signature>Double _JBTEH_AAK_Mileage()</Signature>
   <Formula>
				function _JBTEH_AAK_Mileage()
					local s = rel_OcsPortal_IsSupportedBy_OcsPole
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return getPropertyValue("Mileage"),
							_info("No control input - adjust mileage manually. Relate portal to one or two poles using '"..s.."' to set mileage automatically.")
				
					elseif n == 1 then 
						-- Move to related mast (assuming gantry (Utliggeråk))
						return RC__getMileageFromRelatedObject(s), _info("Mileage deduced from support pole '"..RC__identify(r[0]).."'.")
						
					elseif n &gt;= 2 then
						local m1 = r[0]
						local m2 = r[1]
						if RC__getDistance2D(this,m1) &gt; RC__getDistance2D(this,m2) then m1,m2 = m2,m1 end 
						local d1 = RC__getDistance2D(m1,m2)
						local L = math.floor(1.500 + d1) --Assume min 0.5 and max 1.5 meter total portal length overshoot
						local d2 = 0.5 * (L - d1) --Share overshoot between poles
						local x1 = m1.geoCoord.X		
						local y1 = m1.geoCoord.Y
						local x2 = m2.geoCoord.X
						local y2 = m2.geoCoord.Y
						local x = x1 - (d2/d1)*(x2-x1)
						local y = y1 - (d2/d1)*(y2-y1)
						local info = "Mileage deduced through support pole '"..RC__identify(m1).."' related by '"..s.."'."
						return getAlignmentInfo(Alignment.id,x,y).Mileage, _info(info)
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_AAK_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AAK_Geometry3DName()" ReturnType="String" Description="Returns the portal's 3D object model name.">
   <Signature>String _JBTEH_AAK_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_AAK_Geometry3DName()
					if Variant == "Type 12" then 
						return string.upper(string.format("NO-BN-3D-EH-AAK-KONTAKTLEDNINGSÅK-TYPE-12-%02d-%s",Length:sub(1,-2)-10,Length))
					elseif Variant == "Type 14" then 
						return string.upper(string.format("NO-BN-3D-EH-AAK-KONTAKTLEDNINGSÅK-TYPE-14-%02d-%s",Length:sub(1,-2)-27,Length))
					elseif Variant == "Type 40" then 
						return string.upper(string.format("NO-BN-3D-EH-AAK-KONTAKTLEDNINGSÅK-TYPE-40-%02d-%s",Length:sub(1,-2)-9,Length))
					elseif Variant == "OCS gantry" then
						return "NO-BN-3D-EH-AAK-UTLIGGERÅK-6M"
					else
						return "Bad OCS portal Variant ["..Variant.."]",_warning
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Type 12" DisplayBlockName="NO-BN-2D-JBTEH_AAK-KONTAKTLEDNINGSÅK-11000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="VerticalOffset" Value="7.90"/>
  </InsertPointObject>
  <InsertPointObject Name="Type 14" DisplayBlockName="NO-BN-2D-JBTEH_AAK-KONTAKTLEDNINGSÅK-28000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="VerticalOffset" Value="7.90"/>
  </InsertPointObject>
  <InsertPointObject Name="Type 40" DisplayBlockName="NO-BN-2D-JBTEH_AAK-KONTAKTLEDNINGSÅK-10000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="VerticalOffset" Value="7.90"/>
  </InsertPointObject>
  <InsertPointObject Name="OCS gantry" DisplayName="Utliggeråk" DisplayBlockName="NO-BN-2D-JBTEH_AAK-KONTAKTLEDNINGSÅK-UTLIGGERÅK-6000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="VerticalOffset" Value="7.90"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_AAK
				{% if Variant == 'OCS gantry' %}KONTAKTLEDNINGSÅK-UTLIGGERÅK-6000
				{% elsif Length == '10m' %}KONTAKTLEDNINGSÅK-10000
				{% elsif Length == '11m' %}KONTAKTLEDNINGSÅK-11000
				{% elsif Length == '12m' %}KONTAKTLEDNINGSÅK-12000
				{% elsif Length == '13m' %}KONTAKTLEDNINGSÅK-13000
				{% elsif Length == '14m' %}KONTAKTLEDNINGSÅK-14000
				{% elsif Length == '15m' %}KONTAKTLEDNINGSÅK-15000
				{% elsif Length == '16m' %}KONTAKTLEDNINGSÅK-16000
				{% elsif Length == '17m' %}KONTAKTLEDNINGSÅK-17000
				{% elsif Length == '18m' %}KONTAKTLEDNINGSÅK-18000
				{% elsif Length == '19m' %}KONTAKTLEDNINGSÅK-19000
				{% elsif Length == '20m' %}KONTAKTLEDNINGSÅK-20000
				{% elsif Length == '21m' %}KONTAKTLEDNINGSÅK-21000
				{% elsif Length == '22m' %}KONTAKTLEDNINGSÅK-22000
				{% elsif Length == '23m' %}KONTAKTLEDNINGSÅK-23000
				{% elsif Length == '24m' %}KONTAKTLEDNINGSÅK-24000
				{% elsif Length == '25m' %}KONTAKTLEDNINGSÅK-25000
				{% elsif Length == '26m' %}KONTAKTLEDNINGSÅK-26000
				{% elsif Length == '27m' %}KONTAKTLEDNINGSÅK-27000
				{% elsif Length == '28m' %}KONTAKTLEDNINGSÅK-28000
				{% elsif Length == '29m' %}KONTAKTLEDNINGSÅK-29000
				{% elsif Length == '30m' %}KONTAKTLEDNINGSÅK-30000
				{% elsif Length == '31m' %}KONTAKTLEDNINGSÅK-31000
				{% elsif Length == '32m' %}KONTAKTLEDNINGSÅK-32000
				{% elsif Length == '33m' %}KONTAKTLEDNINGSÅK-33000
				{% elsif Length == '34m' %}KONTAKTLEDNINGSÅK-34000
				{% elsif Length == '35m' %}KONTAKTLEDNINGSÅK-35000
				{% elsif Length == '36m' %}KONTAKTLEDNINGSÅK-36000
				{% elsif Length == '37m' %}KONTAKTLEDNINGSÅK-37000
				{% elsif Length == '38m' %}KONTAKTLEDNINGSÅK-38000
				{% elsif Length == '39m' %}KONTAKTLEDNINGSÅK-39000
				{% elsif Length == '40m' %}KONTAKTLEDNINGSÅK-40000
				{% elsif Length == '41m' %}KONTAKTLEDNINGSÅK-41000
				{% elsif Length == '42m' %}KONTAKTLEDNINGSÅK-42000
				{% elsif Length == '43m' %}KONTAKTLEDNINGSÅK-43000
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="kl-mast"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_MultiCantileverConsole" Name="JBTEH_UTK Seksjonsutliggerkonsoll" Layer="JBTEH_UTK" Color="ByLayer" Group="Kontaktledning/Konsoller" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>seksjonsutliggerkonsoll</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Seksjonsutliggerkonsoll H-300">
   <Variant Name="Seksjonsutliggerkonsoll B-120"></Variant>
   <Variant Name="Seksjonsutliggerkonsoll B-140"></Variant>
   <Variant Name="Seksjonsutliggerkonsoll B-160"></Variant>
   <Variant Name="Seksjonsutliggerkonsoll B-180"></Variant>
   <Variant Name="Seksjonsutliggerkonsoll B-200"></Variant>
   <Variant Name="Seksjonsutliggerkonsoll H-270"></Variant>
   <Variant Name="Seksjonsutliggerkonsoll H-300"></Variant>
   <Variant Name="Seksjonsutliggerkonsoll H-330"></Variant>
   <Variant Name="Seksjonsutliggerkonsoll H-360"></Variant>
   <Variant Name="Seksjonsutliggerkonsoll H-390"></Variant>
  </Variants>
  <LuaExpression Name="name">
   <Formula>Variant</Formula>
  </LuaExpression>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_UTK_Mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTK_Mileage()" ReturnType="Double" Description="Returns the mileage for this multi-cantilever console, deduced from its OCS pole.">
   <Signature>Double _JBTEH_UTK_Mileage()</Signature>
   <Formula>
				function _JBTEH_UTK_Mileage()
					return RC__getMileageFromRelatedObject(rel_MultiCantileverConsole_IsInstalledOn_OcsPole)
	       		end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="LateralOffset">
   <Formula>_JBTEH_UTK_LateralOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTK_LateralOffset()" ReturnType="Double" Description="Returns the distance to alignment for this multi-cantilever console, moved to the same side of its OCS pole as the cantilevers it serves.">
   <Signature>Double _JBTEH_UTK_LateralOffset()</Signature>
   <Formula>
				function _JBTEH_UTK_LateralOffset()
					local sPol = rel_MultiCantileverConsole_IsInstalledOn_OcsPole
					local sCnt = rel_MultiCantileverConsole_IsMountingSurfaceFor_Cantilever
					local rPol,nPol = getRelatedObjects(sPol)
					local rCnt,nCnt = getRelatedObjects(sCnt)
					if nPol == 0 then
						return getPropertyValue("LateralOffset")
					else
						local pol = rPol[0]
						if this.Alignment.id ~= pol.Alignment.id then
							return _error,"ERROR - Multi-cantilever console must belong to the same track ("..pol.Alignment.code..") as its OCS pole."
						end
						if nCnt == 0 then
							--Assume that console will be needed on the track side of its OCS pole (cantilevers will be added afterwards). It may change sides when cantilevers are added.
							return _JBTEH_UTL_LateralOffset(cnt) - (RightSided and 1 or -1) * defaultConsoleDepth
						else
							local cnt = rCnt[0]
							--Place console on the same side of its OCS pole as the first cantilever being related to the console.
							--The height-on-pole is decided by the cantilever's relative elevation - which may be relative to another track:
							--NB We must assume that pole and console have the same own alignment (track).
							--NB The cantilever may belong to a different track, e.g. at the deviating track in a switch.
							local dPol = pol.DistanceToAlignment
							local dCnt = cnt:getAlignmentInfo(pol.Alignment.id).DistanceToAlignment
							local d = NOBN_ocs_getPoleHalfWidth(pol,this.VerticalOffset)
							if math.abs(dCnt) &lt; math.abs(dPol) then
								--Place on front side of its OCS pole (facing the track):
								return dPol - (RightSided and 1 or -1) * d
							else
								--Place on rear side of OCS pole:
								return dPol + (RightSided and 1 or -1) * d
							end
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="dir">
   <Formula>_JBTEH_UTK_dir()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTK_dir()" ReturnType="String" Description="Returns the 'dir' for this multi-cantilever console, deduced from its OCS pole and its cantilevers.">
   <Signature>String _JBTEH_UTK_dir()</Signature>
   <Formula>
				function _JBTEH_UTK_dir()
					local sPol = rel_MultiCantileverConsole_IsInstalledOn_OcsPole
					local sCnt = rel_MultiCantileverConsole_IsMountingSurfaceFor_Cantilever
					local rPol,nPol = getRelatedObjects(sPol)
					local rCnt,nCnt = getRelatedObjects(sCnt)
					if nPol == 0 then
						return getPropertyValue("LateralOffset")
					else
						local pol = rPol[0]
						if this.Alignment.id ~= pol.Alignment.id then
							return _error,"ERROR - Multi-cantilever console must belong to the same track ("..pol.Alignment.code..") as its OCS pole."
						end
						if nCnt == 0 then
							--Assume that console will be needed on the track side of its OCS pole (cantilevers will be added afterwards).
							--Note: It may change sides when the cantilevers are related to it.
							return _JBTEH_UTL_LateralOffset(cnt) - (RightSided and 1 or -1) * defaultConsoleDepth
						else
							local cnt = rCnt[0]
							--Place console on the same side of its OCS pole as the first cantilever being related to the console.
							--The height-on-pole is decided by the cantilever's relative elevation - which may be relative to another track:
							--NB We must assume that pole and console have the same own alignment (track).
							--NB The cantilever may belong to a different track, e.g. at the deviating track in a switch.
							local dPol = pol.DistanceToAlignment
							local dCnt = cnt:getAlignmentInfo(pol.Alignment.id).DistanceToAlignment
							if math.abs(dCnt) &lt; math.abs(dPol) then
								--Placed on front side of its OCS pole (facing the track):
								return "both"
							else
								--Placed on rear side of OCS pole:
								return "none"
							end
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>"NO-BN-3D-EH-UTK-SEKSJONSUTLIGGERKONSOLL-1440-"..Variant:match("%a-([BH]+%-%d+)$")</Formula>
  </LuaExpression>
  <InsertPointObject Name="Seksjonsutliggerkonsoll H-300" DisplayBlockName="NO-BN-2D-JBTEH_UTK-KONSOLL-FOR-SEKSJONSUTLIGGER-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_UTK-KONSOLL-FOR-SEKSJONSUTLIGGER-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="utligger"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <LuaFunction Name="NOBN_ocs_getCantileverStandardValues()" ReturnType="Table[8*Double]" Description="Returns a table with standard cantilever values, indexed as follows:
		\n
		\n[cwh]   Contact wire height
		\n[sh]    System height
		\n[shmin] Minimum system height
		\n[shmax] Maximum system height
		\n[lco]   Lower console offset from upper console
		\n[wco]   Contact wire clamp offset from upper console
		\n[drMat] Dropper material
		\n[swMat] Stitch wire material ('None': cantilever has no stitch wire)
		\n">
  <Signature>Table[8*Double] NOBN_ocs_getCantileverStandardValues(OcsSystem os = Variant)</Signature>
  <Formula>
			function NOBN_ocs_getCantileverStandardValues(os)
				--This function is declared as global in the DNA, accessible from all object types and scripts.
				os = os or Variant --The Variant is also the OCS system's name.
				local CantileverValues = {
					--Note: Siemens' catenary wire clamp is about 12 cm high (117mm), above the upper tube
					["Unknown"]  = {cwh=0.00, sh=0.00, shmin=0.00, shmax=0.00, lco=-0.00, wco=-0.00,  drMat="",            swMat=""          },
					["S25"]      = {cwh=5.10, sh=1.80, shmin=0.70, shmax=1.80, lco=-2.05, wco=-1.70,  drMat="Bz II 10/49", swMat="Bz II 35/7"},
					["S20A"]     = {cwh=5.60, sh=1.60, shmin=1.20, shmax=1.60, lco=-1.80, wco=-1.50,  drMat="Bz II 10/49", swMat="Bz II 25/7"},
					["S20AR"]    = {cwh=5.60, sh=1.60, shmin=1.20, shmax=1.60, lco=-1.80, wco=-1.50,  drMat="Bz II 10/49", swMat="Bz II 25/7"},
					["S20B"]     = {cwh=5.60, sh=1.60, shmin=1.20, shmax=1.60, lco=-1.80, wco=-1.50,  drMat="Bz II 10/49", swMat="Bz II 25/7"},
					["S20BR"]    = {cwh=5.60, sh=1.60, shmin=1.20, shmax=1.60, lco=-1.80, wco=-1.50,  drMat="Bz II 10/49", swMat="Bz II 25/7"},
					["S20C1"]    = {cwh=5.30, sh=0.75, shmin=0.75, shmax=1.60, lco=-0.95, wco=-0.65,  drMat="Bz II 10/49", swMat="Bz II 25/7"},
					["S20C2"]    = {cwh=5.30, sh=0.75, shmin=0.75, shmax=1.60, lco=-0.95, wco=-0.65,  drMat="Bz II 10/49", swMat="Bz II 25/7"},
					["S35"]      = {cwh=5.60, sh=1.60, shmin=1.20, shmax=1.60, lco=-1.80, wco=-1.50,  drMat="Bz II 10/49", swMat="Bz II 25/7"},
					["S35MS"]    = {cwh=5.60, sh=1.60, shmin=1.20, shmax=1.60, lco=-1.80, wco=-1.50,  drMat="Bz II 10/49", swMat="Bz II 25/7"},
					["Cariboni"] = {cwh=5.05, sh=0.60, shmin=0.25, shmax=0.60, lco= 0.00, wco=-0.70,  drMat="Bz II 10/49", swMat="Bz II 25/7"},
					["TET08"]    = {cwh=5.05, sh=0.25, shmin=0.10, shmax=0.30, lco= 0.00, wco=-0.075, drMat="Bz II 10/49", swMat="Bz II 25/7"}
				} 
				return CantileverValues[os]
			end 
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_ocs_getPoleHalfWidth()" ReturnType="Double" Description="Returns an OCS pole's half width (assuming symmetry around its insertion point), at insertion point level or at a specified height above insertion point.">
  <Signature>Double NOBN_ocs_getPoleHalfWidth([ObjRef ocsPole [, Double heightOnPole]])</Signature>
  <Formula>
			function NOBN_ocs_getPoleHalfWidth(ocsPole,height)
				local pol = ocsPole or this
				if not pol.RcType:match("JBTEH_MAS") then return 0,_error, _info("ERROR - function works only for OCS poles or drop arms") end
				local h = heightOnPole or 0
				local pv = pol.Variant
				local pp = pol.OcsPoleCrossSection
				local d = 0.999 --default value - a sizeable pole diameter...a bad value which is easily recognized as such.
			
				if pv == "Bjelkemast" then
					d = string.sub(pp,4,6)/2 * (1/1000) --[m] Assume pole profile names "HEB200", "HEB220" etc
		
				elseif pv == "GMB-mast" then
					d = string.sub(pp,4,6)/2 * (1/1000) --[m] Assume pole profile names "HEB200", "HEB220" etc TODO: Find the real profiles for for "GMB-mast" poles
		
				elseif pv == "H-mast" then
					d = (pol.OcsPoleHeight - h) * (1/50) * (1/1000) --[m] 1:50 approx. angle on side of pole (0.020000)
		
				elseif pv == "B-mast" then
					d = (pol.OcsPoleHeight - h) * (1/50) * (1/1000) --[m] 1:50 approx. angle on side of pole (1/44 = 0.023 for B2, but 1/50.5 = 0.0.019789 for B3, B4, B5, B6)
		
				elseif pv == "Betongmast" then
					d = 0.13
		
				elseif pv == "Tremast" then
					d = 0.13
		
				elseif pv == "Hengemast for bru og tunnel" then
					if (pp == "Sirkulær, Ø120") then 
						d = 0.060
					elseif (pp == "Kvadratisk, 100x100") then
						d = 0.050
					elseif (pp == "Rektangulær, 100x150") then
						d = 0.075
					elseif (pp == "Rektangulær, 100x200") then 
						d = 0.100
					else
						return 0,_warning, _info("Bad OCS pole profile ["..pp.."].")
					end
		
				elseif pv == "Hengemast i åk" then
					if (pp == "Kvadratisk, 100x100") then 
						d = 0.05
					elseif (pp == "Rektangulær, 100x150") then 
						d = 0.075
					elseif (pp == "Rektangulær, 100x200") then 
						d = 0.100
					end
		
				elseif pv == "Hengemast Cariboni" then
					if (pp == "Rektangulær, 100x150") then 
						d = 0.075
					end
		
				elseif pv == "Hengemast TET08" then
					if (pp == "U-bjelke") then 
						d = 0.075
					end
	
				else 
					return 0,_warning, _info("Bad OCS pole variant ["..pv.."].")
				end
				return d
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_ocs_getWireClampPoint3D()" ReturnType="Point3D" HideFromUser="false" Description="Returns the World Coordinate System 3D coordinates of a cantilever's contact wire clamp position.">
  <Signature>Double NOBN_ocs_getWireClampPoint3D(objRef Cantilever)</Signature>
  <Formula>
			function NOBN_ocs_getWireClampPoint3D(cnt)
				local function rot(x,y,phi) return x*math.cos(phi) - y*math.sin(phi), x*math.sin(phi) + y*math.cos(phi) end
				local trackId = cnt.Alignment.id
				local ai = getAlignmentInfo(trackId,cnt.geoCoord.X,cnt.geoCoord.Y)
				local sign = cnt.rightsided and -1 or 1
				local cwh = cnt.ContactWireHeight
				local zigzag = cnt.stagger
				local h = ai.Cant/1000.0
				local cr = ai.CantRotation
				local theta = math.atan(h/cnt.Alignment.AlignmentSystem.CantGauge)
				theta = cr and (cr == "CW" and theta or -theta) or 0
				local centreTrack = ai.Point  --The point where the cantilever is projected onto its track
				local phi = math.atan(ai.Tangent.Y, ai.Tangent.X)  --This cantilever's track's tangential direction angle in radians in WCS
				--(x,0,z) -- No longitudinal wire clamp offset:
				local x = cwh*math.sin(theta) + sign*zigzag*math.cos(theta)
				local y = 0
				local z = h/2 + cwh*math.cos(theta) - sign*zigzag*math.sin(theta)
				--(X,Y,Z):
				local X,Y = rot(-y,x,phi) -- Adjust for potential cosmetic angular offset (typically adding 17 degrees visually in 2D to better show cantilevers under portals)
				local Z = z
				return getPoint3D(centreTrack.X + X, centreTrack.Y + Y, centreTrack.Z + Z)
			end
		</Formula>
 </LuaFunction>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_Cantilever" Name="JBTEH_UTL Utligger" Layer="JBTEH_UTL" Color="ByLayer" Group="Kontaktledning/Utliggere" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>utligger</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="20" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="20" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="20" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D"/>
  <Variants DefaultValue="S20A">
   <Variant Name="Unknown" Description="System-type har ikke blitt definert."></Variant>
   <Variant Name="S25" Description="System 25: 250 km/h (1 strømavtager) / 210 km/h (2 strømavtagere). Alle strekninger."></Variant>
   <Variant Name="S20A" Description="System 20A: 200 km/h (1 strømavtager) / 160 km/h (2 strømavtagere). Fri strekning."></Variant>
   <Variant Name="S20AR" Description="System 20A redusert: 180 km/h (1 strømavtager) / 160 km/h (2 strømavtagere). Der traseens horisontalkurvatur i hovedsak er mindre enn 500 meter og ved endringer på eksisterende bane som har system 35."></Variant>
   <Variant Name="S20B" Description="System 20B: 160 km/h (1 strømavtager) / 130 km/h (2 strømavtagere). Fri strekning under lave konstruksjoner."></Variant>
   <Variant Name="S20BR" Description="System 20B redusert: 150 km/h (1 strømavtager) / 130 km/h (2 strømavtagere). Der traseens horisontalkurvatur i hovedsak er mindre enn 500 meter og ved endringer på eksisterende bane som har system 35MS."></Variant>
   <Variant Name="S20C1" Description="System 20C1: 200 km/h (1 strømavtager) / 160 km/h (2 strømavtagere). Tunnel."></Variant>
   <Variant Name="S20C2" Description="System 20C2: 160 km/h (1 strømavtager) / 130 km/h (2 strømavtagere). Trang tunnel."></Variant>
   <Variant Name="S35" Description="System 35: 150 km/h (1 strømavtager) / 130 km/h (2 strømavtagere). Eldre strekninger. Ved endringer på strekning som har S35 brukes i stedet S20B med redusert innspenningskraft (S20BR)."></Variant>
   <Variant Name="S35MS" Description="System 35MS: 130 km/h (1 strømavtager) / 120 km/h (2 strømavtagere). Eldre strekninger. Ved endringer på strekning som har S35 brukes i stedet S20B med redusert innspenningskraft (S20BR)."></Variant>
   <Variant Name="Cariboni" Description="Cariboni: 200 km/h (1 strømavtager) / 160 km/h (2 strømavtagere). Tunnel."></Variant>
   <Variant Name="TET08" Description="TET-08: 200 km/h (1 strømavtager) / 160 km/h (2 strømavtagere). Tunnel.">
    <SetValue Key="PushDirection" Value="PULL"/>
   </Variant>
  </Variants>
  <SetValue Key="PushDirection" Value="PULL"/>
  <LuaExpression Name="ReferenceMileage">
   <Formula>_JBTEH_UTL_ReferenceMileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_ReferenceMileage()" ReturnType="Double" Description="Returns cantilever's reference mileage, based on its OCS pole's reference mileage. If more cantilevers are located on one side of the pole, they will arbitrate positions." HideFromUser="false">
   <Signature>Double _JBTEH_UTL_ReferenceMileage()</Signature>
   <Formula>
				function _JBTEH_UTL_ReferenceMileage()
					local StandardCantileverSpacing = 1.20 --[m] Separation to allow cantilevers to swing +/- 60 cm towards each other with temperature-induced movement.
					local sPol = rel_Cantilever_BelongsTo_OcsPole
					local rPol,nPol = getRelatedObjects(sPol)
					if nPol == 0 then
						if (Alignment == nil) then
							return 0, _info("UNFINISHED - Relate with '"..sPol.."' to OCS pole and assign cantilever to an aligment.")
						else
							return getPropertyValue("ReferenceMileage") == nil and 0 or getPropertyValue("ReferenceMileage"),
								_info("UNFINISHED - Relate with '"..sPol.."' to OCS pole.")
						end
					else
						local pol = rPol[0]
						local sCnt = rel_OcsPole_Has_Cantilever
						local rCnt,nCnt = pol:getRelatedObjects(sCnt)
						local me = nil --who am I?
						for i = 0, nCnt-1 do
							if id == rCnt[i].id then
								me = i 
							end
						end
						if me == nil then 
							return pol.ReferenceMileage,_warning, _info("Corrupt relation '"..sCnt.."' to OCS pole - cannot compute cantilever position.")
						end
						--Anyone else on my side of OCS pole?
						--Note: Cantilevers on same side may serve the same track (change of OCS wire) or different tracks (in a switch)
						local d1 = getAlignmentInfo(Alignment.id,pol.geoCoord.X, pol.geoCoord.Y).DistanceToAlignment --distance from OCS to my cantilever's alignment
						local myLastPal = nil
						local nPals = 0
						for i = 0, nCnt-1 do
							if i ~= me then
								--find signed distance from pole to both cantilever's alignments - if same sign, then they are on the same side: 
								local d2 = getAlignmentInfo(rCnt[i].Alignment.id,pol.geoCoord.X,pol.geoCoord.Y).DistanceToAlignment
								if d1 * d2 &gt; 0 then
									--same side
									myLastPal = i
									nPals = nPals + 1
								end
							end
						end
						if nPals == 0 then
							return pol.ReferenceMileage 
						elseif nPals == 1 then
							if me &lt; myLastPal then 
								return pol.ReferenceMileage - StandardCantileverSpacing/2
							else
								return pol.ReferenceMileage + StandardCantileverSpacing/2
							end
						else 
							return pol.ReferenceMileage,_warning, _info("Too many ["..(nPals+1).."] cantilevers on same side of OCS pole.")
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="code">
   <Formula>_JBTEH_UTL_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_code()" ReturnType="String" Description="Obtains the 'code' for this OCS cantilever, consisting of the pole's code, a slash '/', and the contact wire's literal name. Missing info is shown as '?'.
						\n
						\nExample:
						\nPole code	Wire name 	Cantilever code
						\n71-13		L30-447		71-13/L30-447
						\n">
   <Signature>String _JBTEH_UTL_code()</Signature>
   <Formula>
				function _JBTEH_UTL_code()
					local pol = getRelatedObjects(rel_Cantilever_BelongsTo_OcsPole)[0]
					local cow = getRelatedObjects(rel_Cantilever_Holds_ContactWire)[0]
					return (pol and pol.code or "?") .."/".. (cow and cow.code or "?")
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="LateralOffset">
   <Formula>_JBTEH_UTL_LateralOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_LateralOffset()" ReturnType="Double" Description="Returns cantilever's distance to own alignment, based on its OCS pole's type and position. (2020-02-16: Formula does not take into account the angularOffset of the pole.)">
   <Signature>Double _JBTEH_UTL_LateralOffset(ObjRef Cantilever = this)</Signature>
   <Formula>
				function _JBTEH_UTL_LateralOffset(cnt)
					cnt = cnt or this
					if (Alignment == nil) then 
						--If cantilever has no alignment, set insignificant but noticeable value (maintain sideOfAlignment)
						return RightSided and 1e-3 or -1e-3,_warning, _info("Cantilever is not connected to a track (own alignment).")
					end
					local sPol = rel_Cantilever_BelongsTo_OcsPole
					local rPol,nPol = getRelatedObjects(sPol,cnt)
					if nPol == 0 then
						return RightSided and 1e-3 or -1e-3,_warning, _info("Cantilever is missing relation '"..sPol.."' to OCS pole.")
					else
						-- Cantilever's OCS pole does not have to be connected a track - this Lua snippet works fine without.
						local pol = rPol[0]
						local d = NOBN_ocs_getPoleHalfWidth(pol,this.VerticalOffset)

						-- OCS pole and cantilever may belong to different tracks (when OCS pole is located between tracks):
						--Distance from center OCS pole to the *cantilever's* alignment:
						local mdist = getAlignmentInfo(Alignment.id,pol.geoCoord.X,pol.geoCoord.Y).DistanceToAlignment
						if mdist &gt; 0 then 
							return mdist - d
						else
							return mdist + d
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>ContactWireHeight - NOBN_ocs_getCantileverStandardValues(Variant)["wco"]</Formula>
  </LuaExpression>
  <CustomProperty DataType="Double" Name="Stagger" DisplayName="Sikk-sakk" DefaultValue="0.000" Description="Stagger [m] (zigzag) denotes the distance from contact wire clamp to centre track, measured co-linearly with the top-of-rail plane. A positive stagger means pushing away from pole, negative means pulling towards pole."/>
  <CustomProperty DataType="Double" Name="ContactWireHeight" DisplayName="Kontakttrådhøyde" DefaultValue="5.00" Description="The contact wire height (cwh) [m] denotes the orthogonal distance from the rolling plane formed by the top-of-rails to the contact wire clamp."/>
  <LuaExpression Name="ContactWireHeight">
   <Formula>NOBN_ocs_getCantileverStandardValues(Variant)["cwh"]</Formula>
  </LuaExpression>
  <CustomProperty DataType="Double" Name="SystemHeight" DisplayName="Systemhøyde" DefaultValue="1.00" Description="The cantilever system height (sh) [m] denotes the vertical Z coordinate difference from the contact wire clamp to the catenary clamp."/>
  <LuaExpression Name="SystemHeight">
   <Formula>NOBN_ocs_getCantileverStandardValues(Variant)["sh"]</Formula>
  </LuaExpression>
  <CustomProperty DataType="Double" Name="StitchWireLength" DisplayName="Y-line lengde" DefaultValue="0.00" Description="The stitch wire length (swl) [m] denotes the length, measured as a difference in mileage, from start to end (where it attaches to the catenary wire). Zero length means 'no stitch wire'."/>
  <CustomProperty DataType="Enumeration" Name="PushDirection" DisplayName="Kraftretning" DefaultValue="Pull" Description="The cantilever push direction (cpd) [Push | Pull] is denoted 'Pull' if the cantilever pulls the contact wire towards the cantilever console(s), and 'Push' if it pushes it away.">
   <Values Variant="S20A">
    <Value DisplayName="Strekk" Description="Utliggeren strekkes (trekker ledningen til seg)">Pull</Value>
    <Value DisplayName="Trykk" Description="Utliggeren sammentrykkes (skyver ledningen fra seg)">Push</Value>
   </Values>
   <Values Variant="S20AR">
    <Value DisplayName="Strekk" Description="Utliggeren strekkes (trekker ledningen til seg)">Pull</Value>
    <Value DisplayName="Trykk" Description="Utliggeren sammentrykkes (skyver ledningen fra seg)">Push</Value>
   </Values>
   <Values Variant="S20B">
    <Value DisplayName="Strekk" Description="Utliggeren strekkes (trekker ledningen til seg)">Pull</Value>
    <Value DisplayName="Trykk" Description="Utliggeren sammentrykkes (skyver ledningen fra seg)">Push</Value>
   </Values>
   <Values Variant="S20BR">
    <Value DisplayName="Strekk" Description="Utliggeren strekkes (trekker ledningen til seg)">Pull</Value>
    <Value DisplayName="Trykk" Description="Utliggeren sammentrykkes (skyver ledningen fra seg)">Push</Value>
   </Values>
   <Values Variant="S20C1">
    <Value DisplayName="Strekk" Description="Utliggeren strekkes (trekker ledningen til seg)">Pull</Value>
    <Value DisplayName="Trykk" Description="Utliggeren sammentrykkes (skyver ledningen fra seg)">Push</Value>
   </Values>
   <Values Variant="S20C2">
    <Value DisplayName="Strekk" Description="Utliggeren strekkes (trekker ledningen til seg)">Pull</Value>
    <Value DisplayName="Trykk" Description="Utliggeren sammentrykkes (skyver ledningen fra seg)">Push</Value>
   </Values>
   <Values Variant="S25">
    <Value DisplayName="Strekk" Description="Utliggeren strekkes (trekker ledningen til seg)">Pull</Value>
    <Value DisplayName="Trykk" Description="Utliggeren sammentrykkes (skyver ledningen fra seg)">Push</Value>
   </Values>
   <Values Variant="S35">
    <Value DisplayName="Strekk" Description="Utliggeren strekkes (trekker ledningen til seg)">Pull</Value>
    <Value DisplayName="Trykk" Description="Utliggeren sammentrykkes (skyver ledningen fra seg)">Push</Value>
   </Values>
   <Values Variant="S35MS">
    <Value DisplayName="Strekk" Description="Utliggeren strekkes (trekker ledningen til seg)">Pull</Value>
    <Value DisplayName="Trykk" Description="Utliggeren sammentrykkes (skyver ledningen fra seg)">Push</Value>
   </Values>
   <Values Variant="Cariboni">
    <Value DisplayName="Strekk" Description="Cariboni-utliggeren har horisontalt justeringsmonn og skal alltid være montert i strekk">Pull</Value>
   </Values>
   <Values Variant="TET08">
    <Value DisplayName="Strekk" Description="TET08-utliggeren har ikke justeringsmonn og skal alltid være montert i strekk">Pull</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="PushDirection">
   <Formula>_JBTEH_UTL_PushDirection()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_PushDirection()" ReturnType="String" Description="Returns the cantilever's push/pull direction, deduced from the contact wire's angular change at this cantilever. Direction change angle [DD] and lateral force [N] are shown as tooltip info.">
   <Signature>String _JBTEH_UTL_PushDirection()</Signature>
   <Formula>
				function _JBTEH_UTL_PushDirection()
					--[=[
						Returns the cantilever's push/pull direction, deduced from the contact wire's angular change at this cantilever.
						The trick is to check the sign of the Z component of the cross product of vectors from the middle wire clamp to the prev/next
						wire clamp (or the prev/next wire tension balancer = OCS pole insertion point). The next/prev vectors are treated in the XY plane.
						.
						Find the net force acting on a cantilever, return Push or Pull accordingly.
						p2 = this cantilever
						wc = this cantilever's contact wire clamp
						.
						.   (prev)  (this)   (next)
						.     p1      p2      p3     Cantilevers (attached to OCS pole). Note: The very first p1 can be a WTB.
						.      |       |       |
						.     U|      V|      W|     Vectors from cantilever's insertion point to corresponding wire clamp (in 2D but including cant effect) 
						.   ---v-------^-------v---  Contact wire
						.     wc1     wc2     wc3    Wire clamps
						.
						.   All coordinates are in WCS.
					--]=]
					local function p2s(u) return string.format(" (%.03f,%.03f)",u.X,u.Y) end --Used for debugging purposes, pretty-print 2D point
				
					--Previous:
					local prev = getRelatedObjects(rel_CantileverOrWtb_HasPrevious_CantileverOrWtb)[0]
					local p1 = getPoint3D(prev.geoCoord.X, prev.geoCoord.Y)

					local wc1
					if prev.RcType == rctype_WireTensioningBalancer then
						--Preceded by a Wire Tension Balancer.
						wc1 = p1
					else
						--Preceded by a cantilever.
						--Add vector from insertion point to contact wire clamp, in WCS coordinates:
						local t = getAlignmentInfo(prev.Alignment.id,p1).Tangent
						local tg = math.atan(t.Y,t.X)
						local U = getPoint3D(RC__getWcsVectorFromAcsVector(prev.WireClampLateralOffset - prev.DistanceToAlignment, 0, tg))
						wc1 = getVectorSum(p1,U)
					end
				
					--This:
					local p2 = getPoint3D(this.geoCoord.X, this.geoCoord.Y)
					--Add vector from insertion point to contact wire clamp, in WCS coordinates:
					local t = getAlignmentInfo(this.Alignment.id,p2).Tangent
					local tg = math.atan(t.Y,t.X)
					local V = getPoint3D(RC__getWcsVectorFromAcsVector(this.WireClampLateralOffset - this.DistanceToAlignment, 0, tg))
					local wc2 = getVectorSum(p2,V)
				
					--Next:
					local nxt = getRelatedObjects(rel_CantileverOrWtb_HasNext_CantileverOrWtb)[0]
					local p3 = getPoint3D(nxt.geoCoord.X, nxt.geoCoord.Y)
					local wc3
					if nxt.RcType == rctype_WireTensioningBalancer then
						--Followed by a Wire Tension Balancer.
						wc3 = p3
					else
						--Followed by a cantilever.
						--Add vector from insertion point to contact wire clamp, in WCS coordinates:
						t = getAlignmentInfo(nxt.Alignment.id,p3).Tangent --local track tangent vector t.XYZ
						tg = math.atan(t.Y,t.X)
						W = getPoint3D(RC__getWcsVectorFromAcsVector(nxt.WireClampLateralOffset - nxt.DistanceToAlignment, 0, tg))
						wc3 = getVectorSum(p3,W)
					end
				
					local toPrev = getVectorDifference(wc1,wc2)
					local toNext = getVectorDifference(wc3,wc2)
					local crossProduct = getVectorCrossProduct(toPrev,toNext)
				
					--Find contact wire lateral force:
					local contactWireTension = NOBN_ocs_getWireTensioningDataTable(Variant).cwtf * 1000 --Table contains kN values
					local toPrevForceVector =  getVectorScalarProduct(contactWireTension,getVectorNormalized(toPrev))
					local toNextForceVector = getVectorScalarProduct(contactWireTension,getVectorNormalized(toNext))
					local lateralForceVector = getVectorSum(toPrevForceVector,toNextForceVector)
					local lateralForce = getVectorModulus(lateralForceVector)
					local directionChangeDD = (crossProduct.Z &gt; 0 and -1 or 1) * getVectorAngleDD(getVectorScalarProduct(-1,toPrev),toNext)
					local forceDirection = (RightSided and crossProduct.Z &gt; 0 or LeftSided and crossProduct.Z &lt; 0) and "Push" or "Pull"
					--if true then return p2s(toPrevForceVector),p2s(toNextForceVector),p2s(lateralForceVector),lateralForce,directionChangeDD end
				
					local msg = string.format("'%s' with lateral force %.01f Newton and direction change %.03f decimal degrees"
						.." was deduced from previous cantilever/WTB '%s', this cantilever '%s'"
						.." and next cantilever/WTB '%s'.",
						forceDirection,lateralForce,directionChangeDD,RC__identify(prev),RC__identify(this),RC__identify(nxt))
				
					return forceDirection, _info(msg)
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" Name="StaggerDisplay" DisplayName="Sikk-sakk visning" DefaultValue="" Description="The stagger value, as shown next to the cantilever [cm]."/>
  <TextAttribute Annotative="true" BindingProperty="StaggerDisplay" CadAttributeTag="SIKKSAKK" X="-2.75" Y="-6" Layer="JBTEH@SIKKSAKK" Justify="MiddleCenter" Height="1.25" Width="0" Rotation="0" ObliqueAngle="0" Constant="false" Invisible="false" Lock="false" MText="false"/>
  <LuaExpression Name="StaggerDisplay">
   <Formula>_JBTEH_UTL_StaggerDisplay()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_StaggerDisplay()" ReturnType="Double" HideFromUser="false" Description="Returns the rounded stagger value in centimeters. A negative stagger means that the cantilever holds the contact wire in a position such that it touches a passing train's pantograph side which is closest to the OCS pole. Note that the tip of the cantilever's 2D symbol is located in 2D relative to the track's 2D polyline representation, which does not show the effect of cant. The actual contact wire position in 3D is shifted sideways as a function of the track's cant. The net effect is that the 2D cantilever's tip is located at the stagger distance from the 2D contact wire.">
   <Signature>Double _JBTEH_UTL_StaggerDisplay()</Signature>
   <Formula>
				function _JBTEH_UTL_StaggerDisplay()
					return string.format("%.0f",Stagger*100) --Centimeters
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Double" Name="CantileverLength" DisplayName="Utliggerlengde" DefaultValue="4.0" Description="The cantilever's length [m] is measured from console (pole side) to contact wire clamp, perpendicularly to the track. The Cariboni variant has a constant length of 1200 mm."></CustomProperty>
  <LuaExpression Name="CantileverLength">
   <Formula>_JBTEH_UTL_CantileverLength()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_CantileverLength()" ReturnType="String" Description="Returns the cantilever's length, adjusted for OCS pole placement and pole profile, pole's side of track, stagger and local cant. Cariboni is always 1200 mm long.">
   <Signature>Double _JBTEH_UTL_CantileverLength(Double CantileverLength)</Signature>
   <Formula>
				function _JBTEH_UTL_CantileverLength()
					if Variant == "Cariboni" then
						return 1.200
					else
						local cl = math.abs(DistanceToAlignment) + Stagger
						return string.format("%.03f",cl)
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Int32" Name="CantileverLengthDisplay" DisplayName="Utliggerlengde visning" DefaultValue="4000" Description="The cantilever's display length [mm] [1000..6000], rounded to closest multiple of 10 mm. Cariboni is always 1200 mm long."></CustomProperty>
  <LuaExpression Name="CantileverLengthDisplay">
   <Formula>_JBTEH_UTL_CantileverLengthDisplay(CantileverLength)</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_CantileverLengthDisplay()" ReturnType="String" Description="Returns the cantilever's display length, min 1000mm, max 6000mm, rounded to nearest multiple of 100mm. Cariboni is always 1200 mm long.">
   <Signature>Int _JBTEH_UTL_CantileverLengthDisplay(Double CantileverLength)</Signature>
   <Formula>
				function _JBTEH_UTL_CantileverLengthDisplay(CantileverLength)
					if Variant == "Cariboni" then
						return "1200"
					else
						--NB! Step size, minimum and maximum lengths must be consistent with the 2D library file:
						local step = 10 --mm (10 mm in DNA NO-BN-2024.a, was 50 mm in 2021.a)
						local minL = 500 --mm
						local maxL = 6000 --mm
						local L = step * ((1000*CantileverLength + step/2)//step)
						if L &lt; minL then 
							return minL
						elseif L &gt; maxL then 
							return maxL
						else 
							return RC__toInt(L)
						end
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Double" Name="CantileverSpanlength" DisplayName="Utligger spennlengde" DefaultValue="0.0" Description="The cantilever span length (sl) [m] denotes the 2D straight line distance (projected onto the XY plane) from this cantilever's contact wire clamp to the next, related using '&quot;..rel_CantileverOrWtb_HasNext_CantileverOrWtb..&quot;'/'&quot;..rel_CantileverOrWtb_HasPrevious_CantileverOrWtb..&quot;'."/>
  <LuaExpression Name="CantileverSpanlength">
   <Formula>_JBTEH_UTL_Spanlength()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_Spanlength()" ReturnType="Double" HideFromUser="false" Description="Returns the straight-line 2D distance span length [m] between this cantilever's wire clamp and its related next cantilever's wire clamp (this is the wire's 2D length - the 3D length is slightly longer).">
   <Signature>Double _JBTEH_UTL_Spanlength()</Signature>
   <Formula>
			function _JBTEH_UTL_Spanlength()
				return 34.567
			end
		</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" Name="ContactWireNameDisplay" DisplayName="Ledningsnavn visning" DefaultValue="" Description="The cantilever's associated OCS wire. Uses relation '&quot;..rel_Cantilever_Holds_ContactWire..&quot;' to access the related object's data."/>
  <TextAttribute Annotative="true" BindingProperty="ContactWireNameDisplay" CadAttributeTag="UTLIGGER_LEDNING" X="0" Y="-6" Layer="JBTEH@UTLIGGER_LEDNING" Justify="MiddleCenter" Height="0.9" Width="0" Rotation="0" ObliqueAngle="0" Constant="false" Invisible="false" Lock="false" MText="false"/>
  <LuaExpression Name="ContactWireNameDisplay">
   <Formula>_JBTEH_UTL_ContactWireNameDisplay()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_ContactWireNameDisplay()" ReturnType="String" Description="Identifies this cantilever's associated OCS wire. Uses relation '&quot;..rel_Cantilever_Holds_ContactWire..&quot;' to access the related object's data.">
   <Signature>String _JBTEH_UTL_ContactWireNameDisplay(cantilever)</Signature>
   <Formula>
				function _JBTEH_UTL_ContactWireNameDisplay(cantilever)
					if cantilever == nil then cantilever = this end
					if cantilever.RcType ~= rctype_Cantilever then
						return nil, _info("Unrecognised calling object type ["..cantilever.RcType.."].")
					end
					local s = rel_Cantilever_Holds_ContactWire
					local r,n = getRelatedObjects(s)
					if n == 1 then return 
						RC__identify(r[0])
					else
						return "CW=?"
					end		
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Double" Name="WireClampLateralOffset" DisplayName="Kontakttråd sideavsett" DefaultValue="0.00" Description="The contact wire clamp's lateral offset (wclo) [m] denotes the horizontal distance from the track's gradient curve (XYZ before cant effects) to the contact wire clamp (center of contact wire). It depends on contact wire height, stagger (zigzag) and track cant."/>
  <LuaExpression Name="WireClampLateralOffset">
   <Formula>_JBTEH_UTL_WireClampLateralOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_WireClampLateralOffset()" ReturnType="String" Description="Returns the horizontal offset from the track's gradient curve (before cant) to the cantilever's associated OCS wire, taking contact wire height, stagger and track cant into consideration.">
   <Signature>String _JBTEH_UTL_WireClampLateralOffset()</Signature>
   <Formula>
				function _JBTEH_UTL_WireClampLateralOffset()
					--TODO: Adapt function to dual cant.
					local ai = getAlignmentInfo()
					local c = ai.Cant
					local h = RC__isNan(c) and 0 or c/1000.0
					if h == 0 then 
						return (LeftSided and 1 or -1)*Stagger
					else
						local ss = h/Alignment.AlignmentSystem.CantGauge --sin(theta)
						local cc = math.sqrt(1 - ss^2) --cos(theta)
						return RC__round((ai.CantRotation == "CW" and 1 or -1)*ss*ContactWireHeight + (LeftSided and 1 or -1)*cc*Stagger,3)
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Double" Name="WireClampVerticalOffset" DisplayName="Kontakttråd høydeavsett" DefaultValue="0.00" Description="The contact wire clamp's vertical offset (wcvo) [m] denotes the vertical distance from the track's gradient curve (XYZ before cant effects) to the contact wire clamp (center of contact wire). It depends on contact wire height, stagger (zigzag), cant and the cantilever being LeftSided or RightSided."/>
  <LuaExpression Name="WireClampVerticalOffset">
   <Formula>_JBTEH_UTL_WireClampVerticalOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_WireClampVerticalOffset()" ReturnType="String" Description="Returns the vertical offset from the track's gradient curve (before cant) to the cantilever's associated OCS wire, taking contact wire height, stagger, track cant and cantilever side-of-track into consideration.">
   <Signature>String _JBTEH_UTL_WireClampVerticalOffset()</Signature>
   <Formula>
				function _JBTEH_UTL_WireClampVerticalOffset()
					--TODO: Adapt function to dual cant.
					local ai = getAlignmentInfo()
					local c = ai.Cant
					local h = RC__isNan(c) and 0 or c/1000.0
					if h == 0 then 
						return RC__round(ContactWireHeight,3)
					else
						local ss = h/Alignment.AlignmentSystem.CantGauge --sine
						local cc = math.sqrt(1 - ss^2) --cosine
						return RC__round(h/2 + cc*ContactWireHeight + (ai.CantRotation == "CW" and -1 or 1)*ss*Stagger,3)
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Double" Name="CatenaryClampLateralOffset" DisplayName="Bæreline sideavsett" DefaultValue="0.00" Description="The catenary clamp's lateral offset (cclo) [m] denotes the horizontal distance from the track's gradient curve (XYZ before cant effects) to the catenary clamp (center of catenary wire). We assume that it is situated at the system height, straight above the contact wire clamp."/>
  <LuaExpression Name="CatenaryClampLateralOffset">
   <Formula>_JBTEH_UTL_CatenaryClampLateralOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_CatenaryClampLateralOffset()" ReturnType="String" Description="Returns the horizontal offset from the track's gradient curve (before cant) to the cantilever's associated OCS catenary wire, assuming that it is situated at the system height, straight above the contact wire clamp.\n\nWe assume that the catenary/contact wire is a vertical wire suspension system, also for curves with large cant.">
   <Signature>String _JBTEH_UTL_CatenaryClampLateralOffset()</Signature>
   <Formula>
				function _JBTEH_UTL_CatenaryClampLateralOffset()
					return WireClampLateralOffset
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Double" Name="CatenaryClampVerticalOffset" DisplayName="Bæreline høydeavsett" DefaultValue="0.00" Description="The catenary clamp's vertical offset (ccvo) [m] denotes denotes the vertical distance from the track's gradient curve (XYZ before cant effects) to the catenary wire clamp (center of catenary wire). We assume that it is situated at the system height, straight above the contact wire clamp."/>
  <LuaExpression Name="CatenaryClampVerticalOffset">
   <Formula>_JBTEH_UTL_CatenaryClampVerticalOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_CatenaryClampVerticalOffset()" ReturnType="String" Description="Returns the vertical offset from the track's gradient curve (before cant) to the cantilever's associated OCS catenary wire, assuming that it is situated at the system height, straight above the contact wire clamp.\n\nWe assume that the catenary/contact wire is a vertical wire suspension system, also for curves with large cant.">
   <Signature>String _JBTEH_UTL_CatenaryClampVerticalOffset()</Signature>
   <Formula>
				function _JBTEH_UTL_CatenaryClampVerticalOffset()
					return WireClampVerticalOffset + SystemHeight
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="DropperWireMaterial" DisplayName="Hengetråd materiale" DefaultValue="" Description="The overhead catenary system (OCS) dropper wire material.">
   <Values>
    <Value>None</Value>
    <Value>Bz II 10/49</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="DropperWireMaterial">
   <Formula>_JBTEH_UTL_DropperWireMaterial()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_DropperWireMaterial()" ReturnType="String" Description="Obtains the standard stitch wire material according to OCS system.">
   <Signature>String _JBTEH_UTL_DropperWireMaterial()</Signature>
   <Formula>
				function _JBTEH_UTL_DropperWireMaterial()
					return NOBN_ocs_getCantileverStandardValues()["drMat"]
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="StitchWireMaterial" DisplayName="Y-line materiale" DefaultValue="" Description="The overhead catenary system (OCS) stitch wire material.">
   <Values>
    <Value>None</Value>
    <Value>Bz II 25/7</Value>
    <Value>Bz II 35/7</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="StitchWireMaterial">
   <Formula>_JBTEH_UTL_StitchWireMaterial()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_StitchWireMaterial()" ReturnType="String" Description="Obtains the standard stitch wire material according to OCS system.">
   <Signature>String _JBTEH_UTL_StitchWireMaterial()</Signature>
   <Formula>
				function _JBTEH_UTL_StitchWireMaterial()
					return NOBN_ocs_getCantileverStandardValues()["swMat"]
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Double" Name="AddVisual2dAngularOffset" DisplayName="2D vinkeltillegg" DefaultValue="0" Description="The 'AddVisual2dAngularOffset' [Double] adds 16.7 decimal degrees to the 2D symbol's angle. Cantilevers mounted in a portal or gantry will not be visible unless the 2D symbol is given an extra angle."/>
  <LuaExpression Name="AddVisual2dAngularOffset">
   <Formula>_JBTEH_UTL_AddVisual2dAngularOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_AddVisual2dAngularOffset()" ReturnType="Double" Description="Adds 17 Decimal Degrees rotation to the cantilever's angle in 2D whenever it is located in a portal or in a gantry, to make it visible in 2D drawings. AngularOffset and 3D rendering are not affected">
   <Signature>Double _JBTEH_UTL_AddVisual2dAngularOffset()</Signature>
   <Formula>
				function _JBTEH_UTL_AddVisual2dAngularOffset()
					local s = rel_Cantilever_BelongsTo_OcsPole
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return 0, _info("UNFINISHED - Relate cantilever to an OCS pole, portal drop arm or tunnel / bridge drop arm.")
					else 
						--Cantilever mounted under portal?
						--Make cantilever "rod" visible if located under a portal, by visually adding 17 degrees:
						local pol = r[0]
						local _r1,n1 = pol:getRelatedObjects(rel_OcsPole_IsSupportFor_OcsPortal)
						if n1 == 0 then 
							return 0, _info("No visual angular offset added since cantilever is not mounted on a drop arm (hidden by a portal).")
						else
							-- TODO: Detect if cantilever is located on the other side of one of the portal's support poles - and not under the next portal, if another portal continues...
							return 17, _info("Visual angular offset added since cantilever might otherwise be visually hidden under a portal.")
						end
					end
				end
			</Formula>
  </LuaFunction>
  <TextPositionLuaExpression Name="UTLIGGER_LEDNING">
   <Formula>_JBTEH_UTL_TextAttributeAcsToWcsPosition(-9,-4)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="SIKKSAKK">
   <Formula>_JBTEH_UTL_TextAttributeAcsToWcsPosition(-11,-4)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTNAVN">
   <Formula>_JBTEH_UTL_TextAttributeAcsToWcsPosition(-14,-4)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTID">
   <Formula>_JBTEH_UTL_TextAttributeAcsToWcsPosition(-16,-4)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTINFO">
   <Formula>_JBTEH_UTL_TextAttributeAcsToWcsPosition(-18,-4)</Formula>
  </TextPositionLuaExpression>
  <LuaFunction Name="_JBTEH_UTL_TextAttributeAcsToWcsPosition()" ReturnType="Vector2D" HideFromUser="false" Description="Returns a World Coordinate System offset vector in the current drawing scale for a text attribute, placed according to there being 1, 2, 3 or 4 cantilevers. Input coordinates provide the acsX = lateral offset (positive to the right side of the object's alignment) and acsY = the longitudinal offset (positive in the direction of increasing mileages), both stated for drawing scale 1:1 (1:1000).">
   <Signature>{Double,Double} _JBTEH_UTL_TextAttributeAcsToWcsPosition(Double LateralOffset, Double LongitudinalOffset)</Signature>
   <Formula>
				function _JBTEH_UTL_TextAttributeAcsToWcsPosition(LateralOffset,LongitudinalOffset)
					local scale = DocumentData.Document.Database.Cannoscale.Scale --CAD system's annotative scale
					LateralOffset = (LateralOffset or 5)/scale
					LongitudinalOffset = (LongitudinalOffset or 0)/scale
					--Place text as a function of rightsided/leftsided, and move sideways if two cantilevers on same side of OCS pole: 
					local sPole = rel_HvSwitch_IsInstalledOn_OcsPole
					local rPoles,nPoles = getRelatedObjects(sPole)
					local sCantilever = rel_OcsPole_Has_Cantilever
					local rCantilevers,nCantilevers = getRelatedObjects(sCantilever,rPoles[0])

					if nCantilevers == 1 then
						--(it is always at least 1...)
						return RC__getWcsVectorFromAcsVector(
							RightSided and LateralOffset or -LateralOffset, 
							RightSided and -LongitudinalOffset or LongitudinalOffset)

					else
						--Two or more cantilevers: count them and separate them in left-sided and rightsided, count each side.
						local nRightSided = 0 --Cantilevers placed to the right of its own alignment, regardless of what alignment the OCS pole has.
						for i = 0,nCantilevers-1 do
							if rCantilevers[i].RightSided then
								nRightSided = nRightSided + 1
							end
						end
						local index = 1 --Sort the cantilevers on the same side as 'this' cantilever
						for i = 0,nCantilevers-1 do
							Cantilever = rCantilevers[i]
							if (this.id ~= Cantilever.id) and (this.SideOfAlignment == Cantilever.SideOfAlignment) then
								if this.ReferenceMileage &gt; Cantilever.ReferenceMileage then
									index = index + 1
								end
							end
						end
						return RC__getWcsVectorFromAcsVector(
							RightSided and LateralOffset or -LateralOffset,
							index == 1 and LongitudinalOffset or -LongitudinalOffset)
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_UTL_Geometry3DName(CantileverLengthDisplay)</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir(0.0)</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_Geometry3DName()" ReturnType="String" Description="Returns cantilever's 3D model name, based on its OCS pole's type, push/pull setting and cantilever's length [mm].">
   <Signature>String _JBTEH_UTL_Geometry3DName(int CantileverLengthDisplay)</Signature>
   <Formula>
				function _JBTEH_UTL_Geometry3DName(CantileverLengthDisplay)
				CantileverLengthDisplay = CantileverLengthDisplay or 4000 --Default is 4m from insertion point to CW wire clamp
				--[[
					--TODO: Lage flere 3D-modeller for alle utligger-varianter.
					--TODO: ...men siden 20, 25 og 35 er veldig like, så bruker vi S20 som 3D-modell for alle sammen inntil videre.
					if (Variant == "S20A") then 
						if (PushDirection == "Pull") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-STREKK-"..CantileverLengthDisplay
						elseif (PushDirection == "Push") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-TRYKK-"..CantileverLengthDisplay
						else return "Ukjent Kraftretning ["..PushDirection.."]",_warning
						end
					if (Variant == "S20AR") then 
						if (PushDirection == "Pull") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-STREKK-"..CantileverLengthDisplay
						elseif (PushDirection == "Push") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-TRYKK-"..CantileverLengthDisplay
						else return "Ukjent Kraftretning ["..PushDirection.."]",_warning
						end
					elseif (Variant == "S20B") then 
						if (PushDirection == "Pull") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-STREKK-"..CantileverLengthDisplay
						elseif (PushDirection == "Push") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-TRYKK-"..CantileverLengthDisplay
						else return "Ukjent Kraftretning ["..PushDirection.."]",_warning
						end
					elseif (Variant == "S20BR") then 
						if (PushDirection == "Pull") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-STREKK-"..CantileverLengthDisplay
						elseif (PushDirection == "Push") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-TRYKK-"..CantileverLengthDisplay
						else return "Ukjent Kraftretning ["..PushDirection.."]",_warning
						end
					elseif (Variant == "S20C1") then 
						if (PushDirection == "Pull") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-STREKK-"..CantileverLengthDisplay
						elseif (PushDirection == "Push") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-TRYKK-"..CantileverLengthDisplay
						else return "Ukjent Kraftretning ["..PushDirection.."]",_warning
						end
					elseif (Variant == "S20C2") then 
						if (PushDirection == "Pull") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-STREKK-"..CantileverLengthDisplay
						elseif (PushDirection == "Push") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-TRYKK-"..CantileverLengthDisplay
						else return "Ukjent Kraftretning ["..PushDirection.."]",_warning
						end
					elseif (Variant == "S25") then 
						if (PushDirection == "Pull") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-STREKK-"..CantileverLengthDisplay
						elseif (PushDirection == "Push") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-TRYKK-"..CantileverLengthDisplay
						else return "Ukjent Kraftretning ["..PushDirection.."]",_warning
						end
					elseif (Variant == 'S35') then
						if (PushDirection == "Pull") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-STREKK-"..CantileverLengthDisplay
						elseif (PushDirection == "Push") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-TRYKK-"..CantileverLengthDisplay
						else return "Ukjent Kraftretning ["..PushDirection.."]",_warning
						end
					elseif (Variant == 'S35MS') then
						if (PushDirection == "Pull") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-STREKK-"..CantileverLengthDisplay
						elseif (PushDirection == "Push") then return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-TRYKK-"..CantileverLengthDisplay
						else return "Ukjent Kraftretning ["..PushDirection.."]",_warning
						end
					elseif (Variant == "Cariboni") then
						return "NO-BN-3D-EH-UTL-UTLIGGER-CARIBONI"
					elseif (Variant == "TET08") then
						return "NO-BN-3D-EH-UTL-UTLIGGER-TET08"
					else
						return "Ukjent Variant ["..Variant.."].",_warning
					end
				--]]
					if (Variant == "Cariboni") then
						return "NO-BN-3D-EH-UTL-UTLIGGER-CARIBONI"
					elseif (Variant == "TET08") then
						--TODO: Create TET08 3D model in 3D library:
						return "NO-BN-3D-EH-UTL-UTLIGGER-TET08"
					else
						--The remaining variants must feature a push or pull:
						if (PushDirection == "Push") then	
							--Just an example - fits only ONE cantilever length...:
							return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-TRYKK-L3706-V1690-SH1768"
						elseif (PushDirection == "Pull") then
							--Just an example - fits only ONE cantilever length...:
							return "NO-BN-3D-EH-UTL-UTLIGGER-SYSTEM-20-STREKK-L2895-V1693-SH1776"
						else
							return "Ingen 3D-modell er forberedt i DNA for variant ["..Variant.."] eller kraftretning ["..PushDirection.."]", _warning
						end
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" Name="mc_OcsSystemHeight" DisplayName="Systemhøyde" ReadOnly="true" Category="Model check" Description="Check that cantilever system height (sh) [m] conforms to Technical Regulations for the chosen Variant / SubVariant."/>
  <LuaExpression Name="mc_OcsSystemHeight" IsModelCheck="true">
   <Formula>_JBTEH_UTL_chkSystemHeight()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_chkSystemHeight()" ReturnType="String" Description="Checks the cantilever's height as a function of selected OCS system variant's min and max heights.">
   <Signature>String _JBTEH_UTL_chkSystemHeight()</Signature>
   <Formula>
				function _JBTEH_UTL_chkSystemHeight()
					local min = NOBN_ocs_getCantileverStandardValues(Variant)["shmin"]
					local max = NOBN_ocs_getCantileverStandardValues(Variant)["shmax"]
					local sh = SystemHeight
					local v = Variant
					if sh &lt; min then
						return string.format("%.02f: WARNING - system height is below %s limit (%.02f).",sh,v,min),_warning
					elseif sh &gt; max then
						return string.format("%.02f: WARNING - system height is above %s limit (%.02f).",sh,v,max),_warning
					else
						return string.format("%.02f: OK - system height is within %s limits [%.02f-%0.2f].",sh,v,min,max),_ok
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" Name="mc_OcsUpperTubeAngle" DisplayName="Strekkstagvinkel" ReadOnly="true" Category="Model check" Description="The cantilever upper tube's angle [DD] above the horizontal position. We assume that the catenary wire clamp is situated 11 cm above the center of the upper tube."/>
  <LuaExpression Name="mc_OcsUpperTubeAngle" IsModelCheck="true">
   <Formula>_JBTEH_UTL_chkUpperTubeAngle()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_chkUpperTubeAngle()" ReturnType="String" Description="Checks that the cantilever upper tube's angle [DD] is near zero (except for the lifted wire at wire changeovers). We assume that the catenary wire clamp is situated 11 cm above the center of the upper tube.">
   <Signature>String _JBTEH_UTL_chkUpperTubeAngle()</Signature>
   <Formula>
				function _JBTEH_UTL_chkUpperTubeAngle()
					-- Assume that the catenary wire clamp holds the catenary 11.7 cm above the upper tube's center:
					local vDiff = CatenaryClampVerticalOffset - 0.117 - VerticalOffset
					local hDiff = math.abs(CatenaryClampLateralOffset - DistanceToAlignment)
					local angle = math.deg(math.atan(vDiff,hDiff))
					local min = -5.0 --Decimal Degrees
					local max = 5.0 --Decimal Degrees
					if angle &lt; min then
						return string.format("%.01f: WARNING - upper tube angle is below low limit (%.01f DD).",angle,min),_warning
					elseif angle &gt; max then
						return string.format("%.01f: WARNING - upper tube angle is above high limit (%.01f DD).",angle,max),_warning
					else
						return string.format("%.01f: OK - system height is within limits [%.01f  to %0.1f DD].",angle,min,max),_ok
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" Name="mc_OcsCantileverSequence" DisplayName="Utligger- og avspenningsekvens" ReadOnly="true" Category="Model check" Description="Each cantilever shall feature exactly one preceding cantilever (but the first one is preceded by a wire tensioning balancer), and shall be followed by exactly one cantilever (but the last one is followed by a wire tensioning balancer)."/>
  <LuaExpression Name="mc_OcsCantileverSequence" IsModelCheck="true">
   <Formula>_JBTEH_UTL_chkCantileverSequence()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_UTL_chkCantileverSequence()" ReturnType="String" Description="Checks the cantilever sequence: Preceded and followed by exactly one cantilever (or wire tension balancer).">
   <Signature>String _JBTEH_UTL_chkCantileverSequence()</Signature>
   <Formula>
				function _JBTEH_UTL_chkCantileverSequence()
					local sPrev = rel_CantileverOrWtb_HasPrevious_CantileverOrWtb
					local rPrev,nPrev = getRelatedObjects(sPrev)
					local sNext = rel_CantileverOrWtb_HasNext_CantileverOrWtb
					local rNext,nNext = getRelatedObjects(sNext)
					if nPrev == 1 and nNext == 1 then
						return string.format("%d / %d: OK - Preceded by %s '%s' / followed by %s '%s'.", nPrev,nNext,
								rPrev[0].RcType == this.RcType and "cantilever" or "wire tension balancer", RC__identify(rPrev[0]),
								rNext[0].RcType == this.RcType and "cantilever" or "wire tension balancer", RC__identify(rNext[0])
							),_ok
					elseif nPrev == 0 and nNext == 0 then
						return _unfinished,string.format("UNFINISHED - Relate to preceding / following cantilever (or wire tension balancer) with '%s' / '%s'.",sPrev,sNext)
					elseif nPrev == 0 and nNext == 1 then
						return _unfinished,string.format("UNFINISHED - Relate to preceding cantilever (or wire tension balancer) with '%s'.",sPrev)
					elseif nPrev == 1 and nNext == 0 then
						return _unfinished,string.format("UNFINISHED - Relate to following cantilever (or wire tension balancer) with '%s'.",sNext)
					else
						return _warning,string.format("%d / %d: ERROR - Too many related cantilevers (or wire tension balancers), remove the wrong ones or check construction phase settings and refresh the object.", nPrev,nNext)
					end
				end
			</Formula>
  </LuaFunction>
  <LuaFunction Name="_JBTEH_UTL_getContactWireHeightFromRelatedContactWireClamp()" ReturnType="String" Description="Returns the Contact Wire Height (measured perpendicularly above the rolling plane), computed from a surveyed contact wire clamp related with '&quot;..rel_Cantilever_Has_OcsWireClamp..&quot;'.">
   <Signature>String _JBTEH_UTL_getContactWireHeightFromRelatedContactWireClamp()</Signature>
   <Formula>
				function _JBTEH_UTL_getContactWireHeightFromRelatedContactWireClamp()
					local s = rel_Cantilever_Has_OcsWireClamp
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."' to its cantilever."
					else
						local p = r[0].geoCoord --CW clamp coordinates in WCS
						local ai = getAlignmentInfo(p.X,p.Y) --Project CW clamp onto the cantilever's alignment
						local h = (ai.Cant or 0) / 1000.0 --[m] Could be nil
						local H = p.Z - (ai.Point.Z + h/2) --survey point Z relative to this track's center track after cant
						local d = ai.DistanceToAlignment
						local ss = h / Alignment.AlignmentSystem.CantGauge -- equals the sine of the cant angle
						ss = ss * (ai.CantRotation == "CW" and 1 or -1)
						local cc = math.sqrt(1 - ss^2) --the cosine
						local cwh = ss*d + cc*H
						return cwh --Intended for the ContactWireHeight property
					end
				end
			</Formula>
  </LuaFunction>
  <LuaFunction Name="_JBTEH_UTL_getStaggerFromRelatedContactWireClamp()" ReturnType="String" Description="Returns the Stagger (measured colinearly to the rolling plane), computed from a surveyed contact wire clamp related with '&quot;..rel_Cantilever_Has_OcsWireClamp..&quot;'.">
   <Signature>String _JBTEH_UTL_getStaggerFromRelatedContactWireClamp()</Signature>
   <Formula>
				function _JBTEH_UTL_getStaggerFromRelatedContactWireClamp()
					local s = rel_Cantilever_Has_OcsWireClamp
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."' to its cantilever."
					else
						local p = r[0].geoCoord --CW clamp coordinates in WCS
						local ai = getAlignmentInfo(p.X,p.Y) --Project CW clamp onto the cantilever's alignment
						local h = (ai.Cant or 0) / 1000.0 --[m] Could be nil
						local H = p.Z - (ai.Point.Z + h/2) --survey point Z relative to this track's center track after cant
						local d = ai.DistanceToAlignment
						local ss = h / Alignment.AlignmentSystem.CantGauge -- equals the sine of the cant angle
						local cc = math.sqrt(1 - ss^2) --the cosine
						local zigzag = (ss*H - cc*d) * (RightSided and 1 or -1)
						return zigzag --Intended for the Stagger property
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="S25" DisplayName="System 25" DisplayBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-25-S-4000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="CantileverLength" Value="4.0"/>
  </InsertPointObject>
  <InsertPointObject Name="S20A" DisplayName="System 20A" DisplayBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-20A-S-4000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="CantileverLength" Value="4.0"/>
  </InsertPointObject>
  <InsertPointObject Name="S20AR" DisplayName="System 20A redusert" DisplayBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-20A-S-4000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="CantileverLength" Value="4.0"/>
  </InsertPointObject>
  <InsertPointObject Name="S20B" DisplayName="System 20B" DisplayBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-20B-S-4000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="CantileverLength" Value="4.0"/>
  </InsertPointObject>
  <InsertPointObject Name="S20BR" DisplayName="System 20B redusert" DisplayBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-20B-S-4000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="CantileverLength" Value="4.0"/>
  </InsertPointObject>
  <InsertPointObject Name="S20C1" DisplayName="System 20C1" DisplayBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-20C-S-4000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="CantileverLength" Value="4.0"/>
  </InsertPointObject>
  <InsertPointObject Name="S20C2" DisplayName="System 20C2" DisplayBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-20C-S-4000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="CantileverLength" Value="4.0"/>
  </InsertPointObject>
  <InsertPointObject Name="S35" DisplayName="System 35" DisplayBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-35-S-4000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="CantileverLength" Value="4.0"/>
  </InsertPointObject>
  <InsertPointObject Name="S35MS" DisplayName="System 35MS" DisplayBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-35-S-4000-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="CantileverLength" Value="4.0"/>
  </InsertPointObject>
  <InsertPointObject Name="Cariboni" DisplayBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-CARIBONI-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1.2">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="PushDirection" Value="Strekk"/>
   <SetValue Key="CantileverLength" Value="1.2"/>
  </InsertPointObject>
  <InsertPointObject Name="TET08" DisplayBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-TET08-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1.001">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="PushDirection" Value="Strekk"/>
   <SetValue Key="CantileverLength" Value="1.001"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_UTL-UTLIGGER-20B-{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset|plus:AddVisual2dAngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset|plus:AddVisual2dAngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset|plus:AddVisual2dAngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset|plus:AddVisual2dAngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset|plus:AddVisual2dAngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset|plus:AddVisual2dAngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_UTL-UTLIGGER
				{% if Variant == 'S20A' %}20A{% if PushDirection == 'Pull' %}-S{% else %}-T{% endif %}-{{CantileverLengthDisplay}}
				{% elsif Variant == 'S20AR' %}20A{% if PushDirection == 'Pull' %}-S{% else %}-T{% endif %}-{{CantileverLengthDisplay}}
				{% elsif Variant == 'S20B' %}20B{% if PushDirection == 'Pull' %}-S{% else %}-T{% endif %}-{{CantileverLengthDisplay}}
				{% elsif Variant == 'S20BR' %}20B{% if PushDirection == 'Pull' %}-S{% else %}-T{% endif %}-{{CantileverLengthDisplay}}
				{% elsif Variant == 'S20C1' %}20C{% if PushDirection == 'Pull' %}-S{% else %}-T{% endif %}-{{CantileverLengthDisplay}}
				{% elsif Variant == 'S20C2' %}20C{% if PushDirection == 'Pull' %}-S{% else %}-T{% endif %}-{{CantileverLengthDisplay}}
				{% elsif Variant == 'S25' %}25{% if PushDirection == 'Pull' %}-S{% else %}-T{% endif %}-{{CantileverLengthDisplay}}
				{% elsif Variant == 'S35' %}35{% if PushDirection == 'Pull' %}-S{% else %}-T{% endif %}-{{CantileverLengthDisplay}}
				{% elsif Variant == 'S35MS' %}35{% if PushDirection == 'Pull' %}-S{% else %}-T{% endif %}-{{CantileverLengthDisplay}}
				{% elsif Variant == 'Cariboni' %}CARIBONI
				{% elsif Variant == 'TET08' %}TET08
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{% if SymbolMode == 'Schematic' %}Schematic{% else %}Metric{% endif %}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_ContactWireClamp" Name="JBTEH_KLK Kontakttrådklemme" Layer="JBTEH_KLK" Color="ByLayer" Group="Kontaktledning/Klemmer" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>kontakttrådklemme</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Kontakttrådklemme">
   <Variant Name="Kontakttrådklemme">
    <SetValue Key="name" Value="Tr.kl."/>
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-EH-KLK-KONTAKTTRÅDKLEMME"/>
   </Variant>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTEH_KLK_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KLK_code()" ReturnType="String" Description="Copies the cantilever's code.">
   <Signature>String _JBTEH_KLK_code()</Signature>
   <Formula>
				function _JBTEH_KLK_code()
					local s = rel_OcsWireClamp_BelongsTo_Cantilever
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."' to its cantilever."
					else
						return r[0].code
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Alignment">
   <Formula>_JBTEH_KLK_Alignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KLK_Alignment()" ReturnType="String" Description="Obtains the 'Alignment' property for this OCS contact wire clamp, deduced via its cantilever.">
   <Signature>String _JBTEH_KLK_Alignment()</Signature>
   <Formula>
				function _JBTEH_KLK_Alignment()
					local s = rel_OcsWireClamp_BelongsTo_Cantilever
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."' to its cantilever."
					else
						return r[0].Alignment
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_KLK_Mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KLK_Mileage()" ReturnType="Double" Description="Returns contact wire clamp's reference mileage, equal to its cantilever's reference mileage.">
   <Signature>Double _JBTEH_KLK_Mileage()</Signature>
   <Formula>
				function _JBTEH_KLK_Mileage()
					local s = rel_OcsWireClamp_BelongsTo_Cantilever
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return _info("UNFINISHED - Relate with '"..s.."' to its cantilever.")
					else
						return r[0].Mileage
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="LateralOffset">
   <Formula>_JBTEH_KLK_LateralOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KLK_LateralOffset()" ReturnType="Double" Description="Copies the cantilever's lateral offset (distance to alignment).">
   <Signature>Double _JBTEH_KLK_LateralOffset()</Signature>
   <Formula>
				function _JBTEH_KLK_LateralOffset()
					local s = rel_OcsWireClamp_BelongsTo_Cantilever
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."' to its cantilever."
					else
						return r[0].DistanceToAlignment
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="VerticalOffset">
   <Formula>_JBTEH_KLK_VerticalOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_KLK_VerticalOffset()" ReturnType="Double" Description="Copies the cantilever's vertical offset (relative elevation).">
   <Signature>Double _JBTEH_KLK_VerticalOffset()</Signature>
   <Formula>
				function _JBTEH_KLK_VerticalOffset()
					local s = rel_OcsWireClamp_BelongsTo_Cantilever
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."' to its cantilever."
					else
						return r[0].VerticalOffset
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Kontakttrådklemme" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-USPESIFISERT-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTRC_THUMBNAIL-USPESIFISERT-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="utligger"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_HvSwitch" Name="JBTEH_BRY KL-bryter" Layer="JBTEH_BRY" Color="ByLayer" Group="Kontaktledning/Brytere" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>kl-bryter</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Object"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Skillebryter">
   <Variant Name="Skillebryter">
    <SetValue Key="name" Value="Skillebryter"/>
   </Variant>
   <Variant Name="Lastskillebryter">
    <SetValue Key="name" Value="Lastskillebryter"/>
   </Variant>
   <Variant Name="Jordingsbryter">
    <SetValue Key="name" Value="Jordingsbryter"/>
   </Variant>
   <Variant Name="Effektbryter">
    <SetValue Key="name" Value="Effektbryter"/>
   </Variant>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="NormalPosition" DisplayName="Grunnstilling" DefaultValue="Open" Description="Switch circuit normal position [Open | Closed].">
   <Values>
    <Value DisplayName="Åpen">Open</Value>
    <Value DisplayName="Lukket">Closed</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="Motorized" DisplayName="Motorisert" DefaultValue="No" Description="OCS power switch motorization [Yes | No].">
   <Values>
    <Value DisplayName="Ja">Yes</Value>
    <Value DisplayName="Nei">No</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Motorized">
   <Formula>_JBTEH_BRY_getMotorizationFromRelatedActuator()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BRY_getMotorizationFromRelatedActuator()" ReturnType="String" Description="Checks if the OCS power switch has a related actuator (motor). If there is, returns 'Yes', else returns 'No'.">
   <Signature>String _JBTEH_BRY_getMotorizationFromRelatedActuator()</Signature>
   <Formula>
				function _JBTEH_BRY_getMotorizationFromRelatedActuator()
					local _r,n = getRelatedObjects(rel_HvSwitch_Has_HvSwitchActuator)
					if n &gt; 0 then
						return "Yes"
					else
						return "No"
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="Poles" DisplayName="Poler" DefaultValue="One" Description="The number of conductors which are opened or closed when using the switch [One | Two | Three].">
   <Values>
    <Value DisplayName="En">One</Value>
    <Value DisplayName="To">Two</Value>
    <Value DisplayName="Tre">Three</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="dir">
   <Formula>"none"</Formula>
  </LuaExpression>
  <InsertPointObject Name="Skillebryter" DisplayName="Skillebryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-SKILLEBRYTER-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="One"/>
  </InsertPointObject>
  <InsertPointObject Name="Skillebryter" DisplayName="Topols Skillebryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-SKILLEBRYTER-TOPOLET-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="Two"/>
  </InsertPointObject>
  <InsertPointObject Name="Skillebryter" DisplayName="Trepols Skillebryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-SKILLEBRYTER-TREPOLET-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="Three"/>
  </InsertPointObject>
  <InsertPointObject Name="Lastskillebryter" DisplayName="Lastskillebryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-LASTSKILLEBRYTER-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="One"/>
  </InsertPointObject>
  <InsertPointObject Name="Lastskillebryter" DisplayName="Topols Lastskillebryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-LASTSKILLEBRYTER-TOPOLET-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="Two"/>
  </InsertPointObject>
  <InsertPointObject Name="Lastskillebryter" DisplayName="Trepols Lastskillebryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-LASTSKILLEBRYTER-TREPOLET-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="Three"/>
  </InsertPointObject>
  <InsertPointObject Name="Jordingsbryter" DisplayName="Jordingsbryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-JORDINGSBRYTER-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="One"/>
  </InsertPointObject>
  <InsertPointObject Name="Jordingsbryter" DisplayName="Topols Jordingsbryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-JORDINGSBRYTER-TOPOLET-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="Two"/>
  </InsertPointObject>
  <InsertPointObject Name="Jordingsbryter" DisplayName="Trepols Jordingsbryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-JORDINGSBRYTER-TREPOLET-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="Three"/>
  </InsertPointObject>
  <InsertPointObject Name="Effektbryter" DisplayName="Effektbryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-EFFEKTBRYTER-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="One"/>
  </InsertPointObject>
  <InsertPointObject Name="Effektbryter" DisplayName="Topols Effektbryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-EFFEKTBRYTER-TOPOLET-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="Two"/>
  </InsertPointObject>
  <InsertPointObject Name="Effektbryter" DisplayName="Trepols Effektbryter" DisplayBlockName="NO-BN-2D-JBTEH_BRY-EFFEKTBRYTER-TREPOLET-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="0.6">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="Poles" Value="Three"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_BRY-SKILLEBRYTER-ÅPEN-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_BRY
				{% if Variant == 'Skillebryter' %}SKILLEBRYTER
				{% elsif Variant == 'Lastskillebryter' %}LASTSKILLEBRYTER
				{% elsif Variant == 'Jordingsbryter' %}JORDINGSBRYTER
				{% elsif Variant == 'Effektbryter' %}EFFEKTBRYTER
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{% if Poles == 'Two' %}TOPOLET
				{% elsif Poles == 'Three' %}TREPOLET
				{% endif %}
				{% if NormalPosition == 'Open' %}ÅPEN
				{% elsif NormalPosition == 'Closed' %}LUKKET
				{% else %}BAD_NormalPosition_{{NormalPosition}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="manøvermaskin"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_HvSwitchActuator" Name="JBTEH_MAN Manøvermaskin" Layer="JBTEH_MAN" Color="ByLayer" Group="Kontaktledning/Brytere" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>manøvermaskin</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Object"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Manøvermaskin">
   <Variant Name="Manøvermaskin"/>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTEH_MAN_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAN_code()" ReturnType="String" Description="Obtains its code from its related OCS power switch.">
   <Signature>String _JBTEH_MAN_code()</Signature>
   <Formula>
				function _JBTEH_MAN_code()
					local s = rel_HvSwitchActuator_Actuates_HvSwitch
					local r,n = getRelatedObjects(s)
					if n &gt; 0 then
						return r[0].code
					else
						return getPropertyValue("code"),_unfinished, _info("UNFINISHED - No related power switch, relate with '"..s.."'.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>_JBTEH_MAN_getLateralOffsetFromRelatedSwitch()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAN_getLateralOffsetFromRelatedSwitch()" ReturnType="String" Description="Obtains the DistanceToAlignmentfrom its related OCS power switch.">
   <Signature>String _JBTEH_MAN_getLateralOffsetFromRelatedSwitch()</Signature>
   <Formula>
				function _JBTEH_MAN_getLateralOffsetFromRelatedSwitch()
					local s = rel_HvSwitchActuator_Actuates_HvSwitch
					local r,n = getRelatedObjects(s)
					if n &gt; 0 then
						return r[0].LateralOffset
					else
						return getPropertyValue("LateralOffset"),_unfinished, _info("UNFINISHED - No related power switch, relate with '"..s.."'.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_MAN_getMileageFromRelatedSwitch()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAN_getMileageFromRelatedSwitch()" ReturnType="String" Description="Obtains the mileagefrom its related OCS power switch.">
   <Signature>String _JBTEH_MAN_getMileageFromRelatedSwitch()</Signature>
   <Formula>
				function _JBTEH_MAN_getMileageFromRelatedSwitch()
					local s = rel_HvSwitchActuator_Actuates_HvSwitch
					local r,n = getRelatedObjects(s)
					if n &gt; 0 then
						return r[0].Mileage
					else
						return getPropertyValue("Mileage"),_unfinished, _info("UNFINISHED - No related power switch, relate with '"..s.."'.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="dir">
   <Formula>_JBTEH_MAN_getDirFromRelatedSwitch()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAN_getDirFromRelatedSwitch()" ReturnType="String" Description="Obtains the dirfrom its related OCS power switch.">
   <Signature>String _JBTEH_MAN_getDirFromRelatedSwitch()</Signature>
   <Formula>
				function _JBTEH_MAN_getDirFromRelatedSwitch()
					local s = rel_HvSwitchActuator_Actuates_HvSwitch
					local r,n = getRelatedObjects(s)
					if n &gt; 0 then
						return r[0].dir
					else
						return getPropertyValue("dir"),_unfinished, _info("UNFINISHED - No related power switch, relate with '"..s.."'.")
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="NormalPosition" DisplayName="Grunnstilling" DefaultValue="OPEN" Description="Switch circuit normal position [Open | Closed].">
   <Values>
    <Value DisplayName="Åpen">OPEN</Value>
    <Value DisplayName="Lukket">CLOSED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="NormalPosition">
   <Formula>_JBTEH_MAN_getNormalPositionFromRelatedSwitch()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_MAN_getNormalPositionFromRelatedSwitch()" ReturnType="String" Description="Obtains the normal position of the related switch.">
   <Signature>String _JBTEH_MAN_getNormalPositionFromRelatedSwitch()</Signature>
   <Formula>
				function _JBTEH_MAN_getNormalPositionFromRelatedSwitch()
					local s = rel_HvSwitchActuator_Actuates_HvSwitch
					local r,n = getRelatedObjects(s)
					if n &gt; 0 then
						return r[0].NormalPosition
					else
						return getPropertyValue("NormalPosition"),_unfinished, _info("UNFINISHED - No related power switch, relate with '"..s.."'.")
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Manøvermaskin" DisplayName="Manøvermaskin" DisplayBlockName="NO-BN-2D-JBTEH_MAN-MANØVERMASKIN-ÅPEN-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_MAN-MANØVERMASKIN
				{% if NormalPosition == 'OPEN' %}ÅPEN
				{% elsif NormalPosition == 'CLOSED' %}LUKKET
				{% else %}BAD_NormalPosition_ {{NormalPosition}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_BoosterTransformer" Name="JBTEH_SUG Sugetransformator" Layer="JBTEH_SUG" Color="ByLayer" Group="Kontaktledning/Sugetransformatorer" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>sugetransformator</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Object"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Sugetransformator">
   <Variant Name="Sugetransformator"/>
   <Variant Name="Sugetransformator i kiosk"/>
  </Variants>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <InsertPointObject Name="Sugetransformator" DisplayBlockName="NO-BN-2D-JBTEH_SUG-SUGETRANSFORMATOR-I-MAST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
   <SetValue Key="name" Value="SUGETRANSFORMATOR"/>
  </InsertPointObject>
  <InsertPointObject Name="Sugetransformator i kiosk" DisplayBlockName="NO-BN-2D-JBTEH_SUG-SUGETRANSFORMATOR-I-KIOSK-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
   <SetValue Key="name" Value="SUGETRANSFORMATOR i kiosk"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_SUG
				{% if Variant == 'Sugetransformator' %}SUGETRANSFORMATOR-I-MAST
				{% elsif Variant == 'Sugetransformator i kiosk' %}SUGETRANSFORMATOR-I-KIOSK
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_AutoTransformer" Name="JBTEH_AUT Autotransformator" Layer="JBTEH_AUT" Color="ByLayer" Group="Kontaktledning/Autotransformatorer" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>autotransformator</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Object"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Autotransformator">
   <Variant Name="Autotransformator"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_AUT_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_AUT_Geometry3DName()" ReturnType="String" Description="Returns the 3D model name for an autotransformer housing.">
   <Signature>String _JBTEH_AUT_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_AUT_Geometry3DName()
					return "NO-BN-3D-EH-AUT-AT-KIOSK-3230x2930x3035-MED-FUNDAMENT-1515-0300"
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Autotransformator" DisplayBlockName="NO-BN-2D-JBTEH_AUT-AUTOTRANSFORMATOR-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
   <SetValue Key="name" Value="Autotrafo"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_AUT
				{% if Variant == 'Autotransformator' %}AUTOTRANSFORMATOR
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_OcsProtectiveScreen" Name="JBTEH_ASK Avskjerming" Layer="JBTEH_ASK" Color="ByLayer" Group="Kontaktledning/Avskjerming" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>avskjerming</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Avskjerming 2x900x1400xØ32 på betongmast / bjelkemast">
   <Variant Name="Avskjerming 2x900x1400xØ32 på tunnelmast / tremast"></Variant>
   <Variant Name="Avskjerming 2x900x1400xØ32 på betongmast / bjelkemast"></Variant>
   <Variant Name="Avskjerming 2x900x1400xØ32 på B-mast bredside"></Variant>
   <Variant Name="Avskjerming 2x900x1400xØ32 på B-mast smalside / H-mast"></Variant>
   <Variant Name="Avskjerming 2x900x1400xØ32 på hengemast"></Variant>
   <Variant Name="Avskjerming 2000x775xØ32 i åk, ett felt"></Variant>
   <Variant Name="Avskjerming 2000x775xØ32 i åk, to felt"></Variant>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="Tilt" DisplayName="Tilt" Description="900x1400 protective screen inclination [00|01|10|11]: 00=none tilted, 01=tilted right, 10=tilted left, 11=both tilted.">
   <Values>
    <Value>00</Value>
    <Value>01</Value>
    <Value>10</Value>
    <Value>11</Value>
   </Values>
  </CustomProperty>
  <TextPositionLuaExpression Name="OBJEKTNAVN">
   <Formula>RC__TextAttributePosition(23,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTID">
   <Formula>RC__TextAttributePosition(25,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTINFO">
   <Formula>RC__TextAttributePosition(27,0)</Formula>
  </TextPositionLuaExpression>
  <LuaExpression Name="name">
   <Formula>
				if Variant:match("Avskjerming") then return "Avskjerming"
				else return "Unknown protective screen variant ["..Variant.."].",_warning
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>
				local s = "NO-BN-3D-EH-ASK-AVSKJERMING-2x900x1400xØ32-UTF"
				local t = "NO-BN-3D-EH-ASK-AVSKJERMING-2000x775xØ32"
				if Variant == "Avskjerming 2x900x1400xØ32 på tunnelmast / tremast" then 
					return string.format("%s-%d-%02d",s,1,tonumber(Tilt))
				elseif Variant == "Avskjerming 2x900x1400xØ32 på betongmast / bjelkemast" then 
					return string.format("%s-%d-%02d",s,2,tonumber(Tilt))
				elseif Variant == "Avskjerming 2x900x1400xØ32 på B-mast bredside" then 
					return string.format("%s-%d-%02d",s,3,tonumber(Tilt))
				elseif Variant == "Avskjerming 2x900x1400xØ32 på B-mast smalside / H-mast" then 
					return string.format("%s-%d-%02d",s,45,tonumber(Tilt))
				elseif Variant == "Avskjerming 2x900x1400xØ32 på hengemast" then 
					return string.format("%s-%d-%02d",s,6,tonumber(Tilt))
				elseif Variant == "Avskjerming 2000x775xØ32 i åk, ett felt" then 
					return string.format("%s-%s",t,"A")
				elseif Variant == "Avskjerming 2000x775xØ32 i åk, to felt" then 
					return string.format("%s-%s",t,"B")
				else 
					return "Unknown protective screen Variant ["..Variant.."].",_warning
				end
			</Formula>
  </LuaExpression>
  <InsertPointObject Name="Avskjerming 2x900x1400xØ32 på tunnelmast / tremast" DisplayBlockName="NO-BN-2D-JBTEH_ASK-AVSKJERMING-1-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="Tilt" Value="00"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="VerticalOffset" Value="6.8"/>
  </InsertPointObject>
  <InsertPointObject Name="Avskjerming 2x900x1400xØ32 på betongmast / bjelkemast" DisplayBlockName="NO-BN-2D-JBTEH_ASK-AVSKJERMING-2-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="Tilt" Value="00"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="VerticalOffset" Value="6.8"/>
  </InsertPointObject>
  <InsertPointObject Name="Avskjerming 2x900x1400xØ32 på B-mast bredside" DisplayBlockName="NO-BN-2D-JBTEH_ASK-AVSKJERMING-3-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="Tilt" Value="00"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="VerticalOffset" Value="6.8"/>
  </InsertPointObject>
  <InsertPointObject Name="Avskjerming 2x900x1400xØ32 på B-mast smalside / H-mast" DisplayBlockName="NO-BN-2D-JBTEH_ASK-AVSKJERMING-45-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="Tilt" Value="00"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="VerticalOffset" Value="6.8"/>
  </InsertPointObject>
  <InsertPointObject Name="Avskjerming 2x900x1400xØ32 på hengemast" DisplayBlockName="NO-BN-2D-JBTEH_ASK-AVSKJERMING-6-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="Tilt" Value="00"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="VerticalOffset" Value="6.8"/>
  </InsertPointObject>
  <InsertPointObject Name="Avskjerming 2000x775xØ32 i åk, ett felt" DisplayBlockName="NO-BN-2D-JBTEH_ASK-AVSKJERMING-704042-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="Tilt" Value="00"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="VerticalOffset" Value="6.8"/>
  </InsertPointObject>
  <InsertPointObject Name="Avskjerming 2000x775xØ32 i åk, to felt" DisplayBlockName="NO-BN-2D-JBTEH_ASK-AVSKJERMING-704042-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="Tilt" Value="00"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="VerticalOffset" Value="6.8"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_ASK-AVSKJERMING-1-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_ASK
				AVSKJERMING
				{% if Variant == 'Avskjerming 2x900x1400xØ32 på tunnelmast / tremast' %}1
				{% elsif Variant == 'Avskjerming 2x900x1400xØ32 på betongmast / bjelkemast' %}2
				{% elsif Variant == 'Avskjerming 2x900x1400xØ32 på B-mast bredside' %}3
				{% elsif Variant == 'Avskjerming 2x900x1400xØ32 på B-mast smalside / H-mast' %}45
				{% elsif Variant == 'Avskjerming 2x900x1400xØ32 på hengemast' %}6
				{% elsif Variant == 'Avskjerming 2000x775xØ32 i åk, ett felt' %}704042
				{% elsif Variant == 'Avskjerming 2000x775xØ32 i åk, to felt' %}704042
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETEContinuation" Class="RailwayPlacedObject" LuaName="rctype_OcsSectioningIsolator" Name="JBTEH_SIL Seksjonsisolator" Layer="JBTEH_SIL" Color="ByLayer" Group="Kontaktledning/Isolatorer" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>seksjonsisolator</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="5" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="3" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="7" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="GCS"/>
   <LuaExpression Name="Rotation.Y">
    <Formula>NOBN_com_getRollFromCantInterpretedAsDecimalDegrees()</Formula>
   </LuaExpression>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Seksjonsisolator">
   <Variant Name="Seksjonsisolator"></Variant>
  </Variants>
  <TextPositionLuaExpression Name="OBJEKTNAVN">
   <Formula>RC__TextAttributePosition(3,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTID">
   <Formula>RC__TextAttributePosition(5,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTINFO">
   <Formula>RC__TextAttributePosition(7,0)</Formula>
  </TextPositionLuaExpression>
  <LuaExpression Name="code">
   <Formula>Variant</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>"Seksj.isol."</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>
				-- Ref. EK.704790, for speeds up to 80 km/h. Not drawn entirely to scale!
				if Variant == "Seksjonsisolator" then return "NO-BN-3D-EH-SIL-SEKSJONSISOLATOR-BICC"
				else return "Unknown section insulator variant ["..Variant.."].",_warning
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="Alignment">
   <Formula>_JBTEH_SIL_Alignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_SIL_Alignment()" ReturnType="Double" Description="Obtains the mileage from its alignment.">
   <Signature>Double _JBTEH_SIL_Alignment()</Signature>
   <Formula>
				function _JBTEH_SIL_Alignment()
					local tol = 1 --[m]
					local closestAlignments = getNearbyAlignments(rctype_ContactWire, tol)
					local a1 = closestAlignments[0]
					local a2 = closestAlignments[1]
					if a2 and RC__getDistance2D(a2.RcAlignment.EndPoint) &lt; tol then
						return a2, _info("Own alignment "..a2.code.." selected as CW, being the closest alignment with an end point within "..tol.." m from this object.")
					else
						return a1, _info("Own alignment "..a1.code.." selected as CW.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="TargetAlignment">
   <Formula>_JBTEH_SIL_TargetAlignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_SIL_TargetAlignment()" ReturnType="Double" Description="Obtains the target alignment, as long as its snaps to own alignment close to this continuation object (this isolator). The isolator is supposed to connect two contact wires. Note that breaking the contact wire alignment is only needed if you want the visual 2D linetype to change / to let the 3D expression change automatically here.">
   <Signature>ObjRef _JBTEH_SIL_TargetAlignment()</Signature>
   <Formula>
				function _JBTEH_SIL_TargetAlignment()
					local tol = 1 --[m]
					local ta = getNearbyAlignments(Alignment.RcType):filter(function (x) return x.id ~= Alignment.id end)[0]
					if ta and RC__getDistance2D(this,ta.RcAlignment.StartPoint) &lt; tol then
						return ta, _info("Target alignment "..ta.code.." selected as the closest other CW alignment with a start point within "..tol.." m from this object.")
					else
						return nil, _info("No target CW alignment selected - Move within "..tol.." m from a CW start point to snap to start.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_SIL_mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_SIL_mileage()" ReturnType="Double" Description="Returns 'mileage', snapped to a compatible alignment if within 1m from object.">
   <Signature>Double _JBTEH_SIL_mileage()</Signature>
   <Formula>
				function _JBTEH_SIL_mileage()
					local tol = 1 --[m] Snap to end point of own alignment if it is used as a connecting object, and if it is already close to its alignment's end point
					if RC__getDistance2D(Alignment.RcAlignment.EndPoint) &lt; tol then
						if RC__isNan(getAlignmentInfo().RelativePosition) then
							return _warning,getPropertyValue("Mileage"), _info("No projection onto own alignment: Move object within reach of own alignment to snap to endpoint")
						else
							return Alignment.RcAlignment.EndMileage, _info("Snapped to endpoint of own alignment")
						end
					else
						return getPropertyValue("Mileage"), _info("No snapping because we are far from own alignment's endpoint")
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Seksjonsisolator" DisplayBlockName="NO-BN-2D-JBTEH_SIL-ISOLATOR-SEKSJONSISOLATOR-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_SIL-ISOLATOR-SEKSJONSISOLATOR-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="true"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_SIL
				ISOLATOR
				{% if Variant == 'Seksjonsisolator' %}SEKSJONSISOLATOR
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETEContinuation" Class="RailwayPlacedObject" LuaName="rctype_OcsIsolator" Name="JBTEH_ISO Lineisolator" Layer="JBTEH_ISO" Color="ByLayer" Group="Kontaktledning/Isolatorer" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>lineisolator</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="5" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="3" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="7" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="GCS"/>
   <LuaExpression Name="Rotation.Y">
    <Formula>NOBN_com_getRollFromCantInterpretedAsDecimalDegrees()</Formula>
   </LuaExpression>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_AlignmentType" DisplayName="Alignment type" Description="The alignments must be compatible."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Continuity" DisplayName="Continuity" Description="The alignments shall end in the same XY point (seen from the above)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Tangent" DisplayName="Tangent direction" Description="The alignments shall share the same tangent (i.e., XY-plane differentiability)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Elevation" DisplayName="Elevation" Description="The alignments shall share the same elevation (Z-coordinate)."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Gradient" DisplayName="Gradient" Description="The alignments shall share the same gradient (pitch [o/oo])."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_Cant" DisplayName="Cant" Description="The alignments shall share the same cant (roll / superelevation [mm]) where they meet."/>
  <LuaExpression Name="mc_AlignmentType" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionAlignmentCompatibility()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Continuity" IsModelCheck="true">
   <Formula>NOBN_com_chkConnectionContinuity()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Tangent" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionTangentMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Elevation" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionElevationMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Gradient" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionGradientMatch()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_Cant" IsModelCheck="true">
   <Formula>NOBN_trk_chkConnectionCantMatch()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Lineisolator">
   <Variant Name="Lineisolator"></Variant>
  </Variants>
  <TextPositionLuaExpression Name="OBJEKTNAVN">
   <Formula>RC__TextAttributePosition(3,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTID">
   <Formula>RC__TextAttributePosition(5,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTINFO">
   <Formula>RC__TextAttributePosition(7,0)</Formula>
  </TextPositionLuaExpression>
  <LuaExpression Name="code">
   <Formula>Variant</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>"Isol."</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>
				if Variant == "Lineisolator" then
					return "NO-BN-3D-EH-ISO-LINEISOLATOR-600x100"
				else
					return _warning,"Unrecognized variant ["..Variant.."]."
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="Alignment">
   <Formula>_JBTEH_ISO_Alignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_ISO_Alignment()" ReturnType="Double" Description="Obtains the mileage from its alignment.">
   <Signature>Double _JBTEH_ISO_Alignment()</Signature>
   <Formula>
				function _JBTEH_ISO_Alignment()
					local tol = 1 --[m]
					local closestAlignments = getNearbyAlignments(tol):filter(function (x) return RC__isMemberOf({rctype_ContactWire,rctype_MidpointAnchorLine},x.RcType) end)
					local a1 = closestAlignments[0]
					local a2 = closestAlignments[1]
					if a1.RcType == rctype_MidpointAnchorLine then 
						return a1, _info("Own alignment "..a1.code.." selected as midpoint anchor line.")
					elseif a1.RcType == rctype_ContactWire then
						--see if we are close to an end point where two contact wires meet:
						if a2 and RC__getDistance2D(a2.RcAlignment.EndPoint) &lt; tol then
							return a2, _info("Own alignment "..a2.code.." selected as CW, being the closest alignment with an end point within "..tol.." m from this object.")
						else
							return a1, _info("Own alignment "..a1.code.." selected as CW.")
						end
					else
						return _error,nil, _info("ERROR - Isolator was inserted too far from a compatible alignment - move closer.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="TargetAlignment">
   <Formula>_JBTEH_ISO_TargetAlignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_ISO_TargetAlignment()" ReturnType="Double" Description="Obtains the target alignment, as long as its snaps to own alignment close to this continuation object (this isolator). The isolator is supposed to connect a contact wire with a contact wire tensioning wire, or to connect two parts of a tensioning wire. Note that breaking the contact wire alignment is only needed if you want the visual 2D linetype to change / to let the 3D expression change automatically here.">
   <Signature>ObjRef _JBTEH_ISO_TargetAlignment()</Signature>
   <Formula>
				function _JBTEH_ISO_TargetAlignment()
					local tol = 1 --[m]
					if Alignment.RcType == rctype_ContactWire then
						local ta = getNearbyAlignments(Alignment.RcType):filter(function (x) return x.id ~= Alignment.id end)[0]
						if ta and RC__getDistance2D(this,ta.RcAlignment.StartPoint) &lt; tol then
							return ta, _info("Target alignment "..ta.code.." selected as the closest other CW alignment with a start point within "..tol.." m from this object.")
						else
							return nil, _info("No target CW alignment selected - Move within "..tol.." m from a CW start point to snap to start.")
						end
					elseif Alignment.RcType == rctype_MidpointAnchorLine then
						return nil,_noSymbol, _info("No target alignment selected since midpoint anchor lines shall not be split in several alignment parts.")
					else
						return nil,_error, _info("ERROR - Unexpected alignment type '"..Alignment.RcType.."'.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_ISO_mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_ISO_mileage()" ReturnType="Double" Description="Returns 'mileage', snapped to a compatible alignment if within 1m from object.">
   <Signature>Double _JBTEH_ISO_mileage()</Signature>
   <Formula>
				function _JBTEH_ISO_mileage()
					local tol = 1 --[m] Snap to end point of own alignment if it is used as a connecting object, and if it is already close to its alignment's end point
					if RC__getDistance2D(Alignment.RcAlignment.EndPoint) &lt; tol then
						if RC__isNan(getAlignmentInfo().RelativePosition) then
							return _warning,getPropertyValue("Mileage"), _info("No projection onto own alignment: Move object within reach of own alignment to snap to endpoint")
						else
							return Alignment.RcAlignment.EndMileage, _info("Snapped to endpoint of own alignment")
						end
					else
						return getPropertyValue("Mileage"), _info("No snapping because we are far from own alignment's endpoint")
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Lineisolator" DisplayBlockName="NO-BN-2D-JBTEH_ISO-ISOLATOR-LINEISOLATOR-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>fixline</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>kl-bardun</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_ISO-ISOLATOR-LINEISOLATOR-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="true"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_ISO
				ISOLATOR
				{% if Variant == 'Lineisolator' %}LINEISOLATOR
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETEContinuation" Class="RailwayPlacedObject" LuaName="rctype_OcsRodIsolator" Name="JBTEH_ISS Stavisolator" Layer="JBTEH_ISS" Color="ByLayer" Group="Kontaktledning/Isolatorer" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>stavisolator</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="5" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="3" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="7" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="GCS"/>
   <LuaExpression Name="Rotation.Y">
    <Formula>NOBN_com_getRollFromCantInterpretedAsDecimalDegrees()</Formula>
   </LuaExpression>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Stavisolator">
   <Variant Name="Stavisolator"></Variant>
  </Variants>
  <LuaExpression Name="code">
   <Formula>Variant</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>"Stavisol."</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>
				if Variant == "Stavisolator" then return "NO-BN-3D-EH-ISS-STAVISOLATOR"
				else return "Unrecognized variant ["..Variant.."].",_warning
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="Alignment">
   <Formula>_JBTEH_ISS_Alignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_ISS_Alignment()" ReturnType="Double" Description="Obtains the mileage from its alignment.">
   <Signature>Double _JBTEH_ISS_Alignment()</Signature>
   <Formula>
				function _JBTEH_ISS_Alignment()
					local tol = 1 --[m]
					local closestAlignments = getNearbyAlignments(rctype_ContactWire, tol)
					local a1 = closestAlignments[0]
					local a2 = closestAlignments[1]
					if a2 and RC__getDistance2D(a2.RcAlignment.EndPoint) &lt; tol then
						return a2, _info("Own alignment "..a2.code.." selected as CW, being the closest alignment with an end point within "..tol.." m from this object.")
					else
						return a1, _info("Own alignment "..a1.code.." selected as CW.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="TargetAlignment">
   <Formula>_JBTEH_ISS_TargetAlignment()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_ISS_TargetAlignment()" ReturnType="Double" Description="Obtains the target alignment, as long as its snaps to own alignment close to this continuation object (this isolator). The isolator is supposed to connect two contact wires. Note that breaking the contact wire alignment is only needed if you want the visual 2D linetype to change / to let the 3D expression change automatically here.">
   <Signature>ObjRef _JBTEH_ISS_TargetAlignment()</Signature>
   <Formula>
				function _JBTEH_ISS_TargetAlignment()
					local tol = 1 --[m]
					local ta = getNearbyAlignments(Alignment.RcType):filter(function (x) return x.id ~= Alignment.id end)[0]
					if ta and RC__getDistance2D(this,ta.RcAlignment.StartPoint) &lt; tol then
						return ta, _info("Target alignment "..ta.code.." selected as the closest other CW alignment with a start point within "..tol.." m from this object.")
					else
						return nil, _info("No target CW alignment selected - Move within "..tol.." m from a CW start point to snap to start.")
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Mileage">
   <Formula>_JBTEH_ISS_mileage()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_ISS_mileage()" ReturnType="Double" Description="Returns 'mileage', snapped to a compatible alignment if within 1m from object.">
   <Signature>Double _JBTEH_ISS_mileage()</Signature>
   <Formula>
				function _JBTEH_ISS_mileage()
					local tol = 1 --[m] Snap to end point of own alignment if it is used as a connecting object, and if it is already close to its alignment's end point
					if RC__getDistance2D(Alignment.RcAlignment.EndPoint) &lt; tol then
						if RC__isNan(getAlignmentInfo().RelativePosition) then
							return _warning,getPropertyValue("Mileage"), _info("No projection onto own alignment: Move object within reach of own alignment to snap to endpoint")
						else
							return Alignment.RcAlignment.EndMileage, _info("Snapped to endpoint of own alignment")
						end
					else
						return getPropertyValue("Mileage"), _info("No snapping because we are far from own alignment's endpoint")
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Stavisolator" DisplayBlockName="NO-BN-2D-JBTEH_ISS-ISOLATOR-STAVISOLATOR-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_ISS-ISOLATOR-STAVISOLATOR-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="true"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_ISS
				ISOLATOR
				{% if Variant == 'Stavisolator' %}STAVISOLATOR
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="eCrossing" Class="RailwayPlacedObject" LuaName="rctype_FloatingWireCrossing" Name="JBTEH_SVE Svevende kryss" Layer="JBTEH_SVE" Color="ByLayer" Group="Kontaktledning/Svevende kryss" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>svevende_kryss</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Svevende kryss">
   <Variant Name="Svevende kryss"></Variant>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTEH_SVE_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_SVE_code()" ReturnType="String" Description="Returns a formated string containing the code properties '[Code1] -X- [Code2]' for the two contact wires that meet in a floating crossing.">
   <Signature>String _JBTEH_SVE_code()</Signature>
   <Formula>
				function _JBTEH_SVE_code()
					local first,second
					if RcType ~= rctype_FloatingWireCrossing then
						return "Bad object type ["..RcType.."], '"..rctype_FloatingWireCrossing.."' was expected."
					else
						first = Alignment
						if first == nil then
							return "Bad or missing alignment reference",_warning
						end
						second = TargetAlignment
						if second == nil then
							return "Bad or missing intersecting alignment reference",_warning
						end
						if first.id == second.id then
							return "Alignment and intersecting alignment cannot be the same ["..first.code.."]"
						end
						if MileageIncreasesTowardsLeft then
							first,second = second,first 
						end
						return "["..first.code.."] -X- ["..second.code.."]"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>
				if Variant == "Svevende kryss" then return "NO-BN-3D-EH-SVE-SVEVENDE-KRYSS-2500"
				else return _error, "Bad OCS crossing lines connector variant ["..Variant.."]."
				end
			</Formula>
  </LuaExpression>
  <InsertPointObject Name="Svevende kryss" DisplayBlockName="NO-BN-2D-JBTEH_SVE-FORBINDELSE-SVEVENDE-KRYSS-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <SetValue Key="name" Value="Svevende kryss"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_SVE-FORBINDELSE-SVEVENDE-KRYSS-{{SymbolMode}}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_SVE-FORBINDELSE
				{% if Variant == 'Svevende kryss' %}SVEVENDE-KRYSS
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_CurrentBridge" Name="JBTEH_FOR Forbindelse, strømbro" Layer="JBTEH_FOR" Color="ByLayer" Group="Kontaktledning/Forbindelser" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>kl-forbindelse</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="18" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="16" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="22" Layer="JBTEH@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Strømbro">
   <Variant Name="Strømbro"></Variant>
  </Variants>
  <TextPositionLuaExpression Name="OBJEKTNAVN">
   <Formula>RC__TextAttributePosition(5,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTID">
   <Formula>RC__TextAttributePosition(7,0)</Formula>
  </TextPositionLuaExpression>
  <TextPositionLuaExpression Name="OBJEKTINFO">
   <Formula>RC__TextAttributePosition(9,0)</Formula>
  </TextPositionLuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <InsertPointObject Name="Strømbro" DisplayBlockName="NO-BN-2D-JBTEH_FOR-FORBINDELSE-STROEMBRO-H-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfLeftSideOfAlignment="true"/>
   <OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
   <SetValue Key="name" Value="Strømbro"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_SVE-FORBINDELSE-STROEMBRO-{% if dir == 'up' %}{% if RightSided %}H{% else %}V{% endif %}{% else %}{% if LeftSided %}H{% else %}V{% endif %}{% endif %}">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if RightSided %}{{0.0|plus:AngularOffset}}{% else %}{{180.0|plus:AngularOffset}}{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_FOR
				FORBINDELSE
				{% if Variant == 'Strømbro' %}STROEMBRO
					{% if dir == 'up' %}{% if RightSided %}H{% else %}V{% endif %}{% else %}{% if RightSided %}V{% else %}H{% endif %}{% endif %}
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_Building" Name="JBTEH_TER Tekniske bygninger og rom" Layer="JBTEH_TER" Color="ByLayer" Group="Kontaktledning/Tekniske Bygninger" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>høyspent-teknisk_bygg</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Kontaktledning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Object"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Teknisk hus"/>
  </Variants>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D"/>
  <SetValue Key="name" Value="Teknisk hus"/>
  <InsertPointObject Name="Teknisk hus" DisplayBlockName="NO-BN-2D-JBTEH_TER-TEKNISK-BYGNING-{{SymbolMode}}" DefaultSnapMode="None" SnapToAlignment="true" SnapDistance="15">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfLeftSideOfAlignment="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="true" AddAngle="{% if RightSided %}0{% else %}180{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_TER-TEKNISK-BYGNING
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <LuaFunction Name="NOBN_sig_getCabinetName()" ReturnType="String" Description="Returns a string for each cabinet variant. Keylock cabinets receive a code based on the object's OCP area and the 'Seq' property.">
  <Signature>String NOBN_sig_getCabinetName()</Signature>
  <Formula>
			function NOBN_sig_getCabinetName()
				if string.find(Variant, "apparat") then
					return "As."..code
				elseif string.find(Variant, "Nøkkel") then 
					local v = "Arbeidsområde"
					local n,a
					n,a = RC__getAreasOfVariant(v)
					if n == 1 then
						return "Nøk."..NOBN_com_getOcpCode().." "..a[0].code.."-"..Seq 
					else 
						return "*** Zero or multiple ("..n..") areas found of Variant '"..v.."' - cannot deduce a unique name for keylock cabinet." 
					end
				elseif string.find(Variant, "Sveiv") then
					return "Ss."..code
				elseif string.find(Variant, "Kabel") then
					return "Kabelboks "..code
				else
					return "Unknown variant",_warning
				end
			end
		</Formula>
 </LuaFunction>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_LockTypeS" Name="JBTSA_SAM S-lås" Layer="JBTSA_SAM" Color="ByLayer" Group="Signal/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>s_lås</RelationSpace>
  <AttachmentCategory Name="s_lås"/>
  <AttachTo Category="stolpe_med_fot"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="S-lås">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-SA-SAM-SAMLELÅS"/>
    <SetValue Key="Geometry3D_0.Offset.Z" Value="1.25"/>
   </Variant>
  </Variants>
  <LuaExpression Name="name">
   <Formula>"S-lås."..code</Formula>
  </LuaExpression>
  <InsertPointObject Name="S-lås" DisplayBlockName="NO-BN-2D-JBTSA_SAM-SAMLELAAS-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_SAM-SAMLELAAS-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				{% if Variant == 'S-lås' %}NO-BN-2D-JBTSA_SAM-SAMLELAAS
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{code}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="0.0" TargetSpace="stolpe_med_fot"/>
   </SnapPoints>
  </DockPointDefinitions>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_ShortPoleWithSteelbase" Name="JBTSA_FUN Stolpe med fot" Layer="JBTSA_FUN" Color="ByLayer" Group="Signal/Stolpe med fot" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>stolpe_med_fot</RelationSpace>
  <AttachmentCategory Name="stolpe_med_fot" PassAttachmentToTarget="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="SupplierName" DisplayName="Supplier Name" DefaultValue="Bane NOR"/>
  <CustomProperty DataType="String" Name="SupplierArchive" DisplayName="Supplier Archive" DefaultValue="SIGNAL"/>
  <CustomProperty DataType="String" Name="SupplierModelName" DisplayName="Supplier Model Name"/>
  <CustomProperty DataType="String" Name="SupplierPartName" DisplayName="Supplier Part Name"/>
  <CustomProperty DataType="String" Name="SupplierDrawingNumber" DisplayName="Supplier Drawing Number"/>
  <CustomProperty DataType="String" Name="SupplierDrawingTitle" DisplayName="Supplier Drawing Title"/>
  <Variants>
   <Variant Name="Stolpe for enkel S-lås">
    <SetValue Key="name" Value="Stolpe, S-lås"/>
   </Variant>
   <Variant Name="Stolpe for dobbel S-lås">
    <SetValue Key="name" Value="Stolpe, S-lås x2"/>
   </Variant>
   <Variant Name="Stolpe for lokalstiller">
    <SetValue Key="name" Value="Stolpe, Lok."/>
   </Variant>
   <Variant Name="Stolpe for overdragstrafo">
    <SetValue Key="name" Value="Stolpe, Lok."/>
   </Variant>
   <Variant Name="Rørmast Ø76 for togsporsignal og dvergsignal, 2m">
    <SetValue Key="name" Value="Stolpe Ø76, 2m"/>
    <SetValue Key="SupplierModelName" Value="Rørmast for dverg- og togsporsignal, normal høyde med L-jern S.005382/S.030065"/>
    <SetValue Key="SupplierPartName" Value="Pos.2,3,4"/>
    <SetValue Key="SupplierDrawingNumber" Value="S.022896-014"/>
    <SetValue Key="SupplierDrawingTitle" Value="Sikringsanlegg, utvendig; Togsporsignal, sammenstilling"/>
   </Variant>
   <Variant Name="Rørmast Ø76 for togsporsignal og dvergsignal, 3m">
    <SetValue Key="name" Value="Stolpe Ø76, 3m"/>
    <SetValue Key="SupplierModelName" Value="Rørmast for dverg- og togsporsignal, høy med L-jern S.005382/S.030065"/>
    <SetValue Key="SupplierPartName" Value="Pos.2,3,4"/>
    <SetValue Key="SupplierDrawingNumber" Value="S.022896-014"/>
    <SetValue Key="SupplierDrawingTitle" Value="Sikringsanlegg, utvendig; Togsporsignal, sammenstilling"/>
   </Variant>
   <Variant Name="Rørmast Ø76 for kryssvekselsignal, 1.6m">
    <SetValue Key="name" Value="Stolpe Ø76, 1.6m"/>
    <SetValue Key="SupplierModelName" Value="Rørmast for kryssvekselsignal, med L-jern S.005382/S.030065"/>
    <SetValue Key="SupplierPartName" Value="Pos.4,5,6"/>
    <SetValue Key="SupplierDrawingNumber" Value="S.004463-000"/>
    <SetValue Key="SupplierDrawingTitle" Value="Sikringsanlegg, utvendig; Kryssvekselsignal; Sammenstilling"/>
   </Variant>
   <Variant Name="Rørmast Ø127 for jernbanesignal, 3.2m">
    <SetValue Key="name" Value="Rørmast Ø127, 3.2m"/>
    <SetValue Key="SupplierModelName" Value="Rørmast for jernbanesignal, lav med L-jern S.005382/S.030065"/>
    <SetValue Key="SupplierPartName" Value=""/>
    <SetValue Key="SupplierDrawingNumber" Value="S.013354-000"/>
    <SetValue Key="SupplierDrawingTitle" Value="Sikringsanlegg, utvendig; Rørmast for jernbanesignal; Lavt, uten fundament; F.nr.708.215.540"/>
   </Variant>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_FUN_ShortPoleWithSteelbase_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_FUN_ShortPoleWithSteelbase_Geometry3DName()" ReturnType="String" Description="Returns the pole's 3D geometry name.">
   <Signature>String _JBTSA_FUN_ShortPoleWithSteelbase_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_FUN_ShortPoleWithSteelbase_Geometry3DName()
					if Variant == "Stolpe for enkel S-lås" then
						return "NO-BN-3D-SA-FUN-NSI63-STOLPE-UNP80-MED-LJERN-FOR-ENKEL-SAMLELÅS"
					elseif Variant == "Stolpe for dobbel S-lås"	then
						return "NO-BN-3D-SA-FUN-NSI63-STOLPE-UNP80-MED-LJERN-FOR-DOBBEL-SAMLELÅS"
					elseif Variant == "Stolpe for lokalstiller"	then
						return "NO-BN-3D-SA-FUN-NSI63-STOLPE-UNP80-MED-LJERN-FOR-LOKALSTILLER"
					elseif Variant == "Stolpe for overdragstrafo"	then
						return "NO-BN-3D-SA-FUN-NSI63-STOLPE-UNP80-MED-LJERN-FOR-OVERDRAGSTRAFO"
					elseif Variant == "Rørmast Ø76 for togsporsignal og dvergsignal, 2m"	then
						return "NO-BN-3D-SA-FUN-NSI63-RØRMAST-Ø76-MED-LJERN-FOR-TSS-OG-DS-2000"
					elseif Variant == "Rørmast Ø76 for togsporsignal og dvergsignal, 3m"	then
						return "NO-BN-3D-SA-FUN-NSI63-RØRMAST-Ø76-MED-LJERN-FOT-FOR-HØYT-TSS-OG-DS-3000"
					elseif Variant == "Rørmast Ø76 for kryssvekselsignal, 1.6m"	then
						return "NO-BN-3D-SA-FUN-NSI63-RØRMAST-Ø76-MED-LJERN-FOT-FOR-KRYSSVEKSELSIGNAL-1600"
					elseif Variant == "Rørmast Ø127 for jernbanesignal, 3.2m"	then
						return "NO-BN-3D-SA-FUN-NSI63-RØRMAST-Ø76-MED-LJERN-FOT-FOR-SIGNAL-3200"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Stolpe for enkel S-lås" DisplayBlockName="NO-BN-2D-JBTSA_FUN-STOLPE-MED-LJERN-FOR-ENKEL-SAMLELAAS-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Stolpe for dobbel S-lås" DisplayBlockName="NO-BN-2D-JBTSA_FUN-STOLPE-MED-LJERN-FOR-DOBBEL-SAMLELAAS-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Stolpe for lokalstiller" DisplayBlockName="NO-BN-2D-JBTSA_FUN-STOLPE-MED-LJERN-FOR-LOKALSTILLER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="2.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Stolpe for overdragstrafo" DisplayBlockName="NO-BN-2D-JBTSA_FUN-STOLPE-MED-LJERN-FOR-OVERDRAGSTRAFO-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="2.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Rørmast Ø76 for togsporsignal og dvergsignal, 2m" DisplayBlockName="NO-BN-2D-JBTSA_FUN-RØRMAST-76-MED-LJERN-FOR-DS-OG-TSS-2000-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Rørmast Ø76 for togsporsignal og dvergsignal, 3m" DisplayBlockName="NO-BN-2D-JBTSA_FUN-RØRMAST-76-MED-LJERN-FOR-HOEY-DS-OG-TSS-3000-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Rørmast Ø76 for kryssvekselsignal, 1.6m" DisplayBlockName="NO-BN-2D-JBTSA_FUN-RØRMAST-76-MED-LJERN-FOR-KRYSSVEKSELSIGNAL-1600-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Rørmast Ø127 for jernbanesignal, 3.2m" DisplayBlockName="NO-BN-2D-JBTSA_FUN-RØRMAST-127-MED-LJERN-FOR-SIGNAL-3200-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_FUN-RØRMAST-127-MED-LJERN-FOR-SIGNAL-3200-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_FUN
				{% if Variant == 'Stolpe for enkel S-lås' %}STOLPE-MED-LJERN-FOR-ENKEL-SAMLELAAS
				{% elsif Variant == 'Stolpe for dobbel S-lås' %}STOLPE-MED-LJERN-FOR-DOBBEL-SAMLELAAS
				{% elsif Variant == 'Stolpe for lokalstiller' %}STOLPE-MED-LJERN-FOR-LOKALSTILLER
				{% elsif Variant == 'Stolpe for overdragstrafo' %}STOLPE-MED-LJERN-FOR-OVERDRAGSTRAFO
				{% elsif Variant == 'Rørmast Ø76 for togsporsignal og dvergsignal, 2m' %}RØRMAST-76-MED-LJERN-FOR-DS-OG-TSS-2000
				{% elsif Variant == 'Rørmast Ø76 for togsporsignal og dvergsignal, 3m' %}RØRMAST-76-MED-LJERN-FOR-HOEY-DS-OG-TSS-3000
				{% elsif Variant == 'Rørmast Ø76 for kryssvekselsignal, 1.6m' %}RØRMAST-76-MED-LJERN-FOR-KRYSSVEKSELSIGNAL-1600
				{% elsif Variant == 'Rørmast Ø127 for jernbanesignal, 3.2m' %}RØRMAST-127-MED-LJERN-FOR-SIGNAL-3200
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_DerailedAxleIndicator" Name="JBTSA_AVI Avsporingsindikator" Layer="JBTSA_AVI" Color="ByLayer" Group="Signal/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>avsporingsindikator</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>NOBN_trk_getLateralOffsetFromCantAndTrackPlaneDistance(RightSided and 1e-3 or -1e-3)</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Avsporingsindikator">
    <SetValue Key="name" Value="Ai."/>
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-SA-AVI-AVSPORINGSINDIKATOR"/>
   </Variant>
  </Variants>
  <InsertPointObject Name="Avsporingsindikator" DisplayBlockName="NO-BN-2D-JBTSA_AVI-AVSPORINGSINDIKATOR-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_AVI-AVSPORINGSINDIKATOR-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="true"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tDerailer" Class="RailwayPlacedObject" LuaName="rctype_Derailer" Name="JBTSA_SSP Sporsperre" Layer="JBTSA_SSP" Color="ByLayer" Group="Signal/Sporsperrer">
  <ObjectTypeAttribute Key="quadrant" Value="{% if dir == 'up' and LeftSided == 'True' %}1{% elsif dir == 'down' and LeftSided == 'True' %}2{% elsif dir == 'down' and RightSided == 'True' %}3{% elsif dir== 'up' and RightSided == 'True' %}4{% endif %}"/>
  <RelationSpace>sporsperre</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Enkel sporsperre">
   <Variant Name="Enkel sporsperre" Description="Single-sided derailer">
    <SetValue Key="kind" Value="blockDerail"/>
   </Variant>
   <Variant Name="Dobbel sporsperre" Description="Double-sided derailer">
    <SetValue Key="kind" Value="blockDerail"/>
   </Variant>
   <Variant Name="Enkel avsporingstunge" Description="Single catch points">
    <SetValue Key="kind" Value="singleCatchPoints"/>
   </Variant>
   <Variant Name="Dobbel avsporingstunge" Description="Double catch points">
    <SetValue Key="kind" Value="doubleCatchPoints"/>
   </Variant>
  </Variants>
  <LuaExpression Name="name">
   <Formula>return "Sp."..code</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>_JBTSA_SSP_LateralOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SSP_LateralOffset()" ReturnType="Double" Description="Returns the XY plane distance to alignment for a derailer or catch points (cant taken into consideration).">
   <Signature>Double _JBTSA_SSP_LateralOffset()</Signature>
   <Formula>
				function _JBTSA_SSP_LateralOffset()
					return NOBN_trk_getLateralOffsetFromCantAndTrackPlaneDistance(RightSided and 0.75 or -0.75)
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="Enumeration" Name="DerailerState" DisplayName="SporsperreStilling" DefaultValue="DERAILING" Description="The 'DerailerState' custom attribute [Inaktiv (Inactive) | Avsporende (Derailing)] reflects the activation state of the derailer.">
   <Values>
    <Value DisplayName="Inaktiv">INACTIVE</Value>
    <Value DisplayName="Avsporende">DERAILING</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="derailSide">
   <Formula>_JBTSA_SSP_derailSide()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SSP_derailSide()" ReturnType="String" Description="Returns the derail side ('Avsporingsretning') for a derailer, deduced from its dir and mounting side (left/right rail).">
   <Signature>String _JBTSA_SSP_derailSide()</Signature>
   <Formula>
				function _JBTSA_SSP_derailSide()
					return ((dir == 'up' and LeftSided) or (dir == 'down' and RightSided)) and "left" or "right"
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_SSP_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SSP_Geometry3DName()" ReturnType="String" Description="Returns the 3D model name for a derailer object (we have no catch points in 3D yet).">
   <Signature>String _JBTSA_SSP_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_SSP_Geometry3DName()
					--Ignore the DerailerState property - always draw the derailer in its derailing state.
					local t = "NO-BN-3D-SA-SSP-SPORSPERRE"
					if Variant:lower():match("enkel") then t = t.."-ENKEL" 
					elseif Variant:lower():match("dobbel") then t = t.."-DOBBEL" 
					else t = t.."-BAD_Variant"
					end
					if derailSide == 'left' then t = t.."-VSIDE"
					elseif derailSide == 'right' then t = t.."-VSIDE"
					else t = t.."-BAD_derailSide"
					end
					return t
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Enkel sporsperre" DisplayBlockName="NO-BN-2D-JBTSA_SSP-SPORSPERRE-ENKEL-AVSPORENDE-1-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="0.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Dobbel sporsperre" DisplayBlockName="NO-BN-2D-JBTSA_SSP-SPORSPERRE-DOBBEL-AVSPORENDE-1-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="0.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Enkel avsporingstunge" DisplayBlockName="NO-BN-2D-JBTSA_SSP-AVSPORINGSTUNGE-ENKEL-AVSPORENDE-1-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="0.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Dobbel avsporingstunge" DisplayBlockName="NO-BN-2D-JBTSA_SSP-AVSPORINGSTUNGE-DOBBEL-INAKTIV-1-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="0.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_THUMBNAIL-USPESIFISERT-Schematic" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="0"/>
   <BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSA_SSP
			{% if Variant == 'Enkel sporsperre' %}SPORSPERRE-ENKEL
			{% elsif Variant == 'Dobbel sporsperre' %}SPORSPERRE-DOBBEL
			{% elsif Variant == 'Enkel avsporingstunge' %}AVSPORINGSTUNGE-ENKEL
			{% elsif Variant == 'Dobbel avsporingstunge' %}AVSPORINGSTUNGE-DOBBEL
			{% else %}BAD_Variant_{{Variant}}
			{% endif %}
			{% if DerailerState == 'INACTIVE' %}INAKTIV
			{% elsif DerailerState == 'DERAILING' %}AVSPORENDE
			{% else %}BAD_DerailerState_{{DerailerState}}
			{% endif %}
			{{quadrant}}
			{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints MirrorAboutAlignmentNormal="{% if dir == 'down' %}true{% else %}false{% endif %}" MirrorAboutAlignmentTangent="{% if RightSided %}true{% else %}false{% endif %}">
    <SnapPoint X="-1.0" Y="1.0" TargetSpace="lokalstiller"/>
    <SnapPoint X="-1.0" Y="-2.5" TargetSpace="lokalstiller"/>
   </SnapPoints>
   <SnapPoints MirrorAboutAlignmentTangent="{% if RightSided %}true{% else %}false{% endif %}">
    <SnapPoint X="0.0" Y="1.0" TargetSpace="sporsperredrivmaskin"/>
    <SnapPoint X="0.0" Y="-2.5" TargetSpace="sporsperredrivmaskin"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_SignallingCabinet" Name="JBTSA_APS Apparatskap" Layer="JBTSA_APS" Color="ByLayer" Group="Signal/Apparatskap" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>apparatskap</RelationSpace>
  <AttachmentCategory Name="signalskap"/>
  <AttachTo Category="apparatskapfundament"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Stort apparatskap, venstrehengslet"/>
   <Variant Name="Stort apparatskap, høyrehengslet"/>
   <Variant Name="Stort apparatskap, dobbeldør"/>
  </Variants>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getCabinetName()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>if Variant:find("stort") ~= 0 then return -0.1 else return 0.95 end</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_APS_SignallingCabinet_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_APS_SignallingCabinet_Geometry3DName()" ReturnType="String" Description="Returns the signalling cabinet's 3D geometry name.">
   <Signature>String _JBTSA_APS_SignallingCabinet_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_APS_SignallingCabinet_Geometry3DName()
					if Variant == "Stort apparatskap, venstrehengslet" then
						return "NO-BN-3D-FE-DIV-UKJENT"
					elseif Variant == "Stort apparatskap, høyrehengslet"	then
						return "NO-BN-3D-FE-DIV-UKJENT"
					elseif Variant == "Stort apparatskap, dobbeldør"	then
						return "NO-BN-3D-SA-APS-APPARATSKAP-STORT-1200x1200x400-MED-SOKKEL"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Stort apparatskap, venstrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-APPARATSKAP-STORT-VHENGSLET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Stort apparatskap, høyrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-APPARATSKAP-STORT-HHENGSLET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Stort apparatskap, dobbeldør" DisplayBlockName="NO-BN-2D-JBTSA_APS-APPARATSKAP-STORT-DOBBEL-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_APS-APPARATSKAP-STORT-VHENGSLET-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_APS-APPARATSKAP
				{% if Variant == 'Stort apparatskap, venstrehengslet' %}STORT-VHENGSLET
				{% elsif Variant == 'Stort apparatskap, høyrehengslet' %}STORT-HHENGSLET
				{% elsif Variant == 'Stort apparatskap, dobbeldør' %}STORT-DOBBEL
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{Name}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="apparatskapfundament"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_SignallingCableDistributionBox" Name="JBTSA_APS Lite skap og boks" Layer="JBTSA_APS" Color="ByLayer" Group="Signal/Skap og bokser" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>kabelboks</RelationSpace>
  <AttachmentCategory Name="kabelboks"/>
  <AttachTo Category="signalfundament"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Nøkkelskap, venstrehengslet"/>
   <Variant Name="Nøkkelskap, høyrehengslet"/>
   <Variant Name="Sveivskap, venstrehengslet"/>
   <Variant Name="Sveivskap, høyrehengslet"/>
   <Variant Name="Lite apparatskap, venstrehengslet"/>
   <Variant Name="Lite apparatskap, høyrehengslet"/>
   <Variant Name="Kabelboks 280x190x100 på Ø76 rørmast, venstrehengslet"/>
   <Variant Name="Kabelboks 280x190x100 på Ø76 rørmast, høyrehengslet"/>
   <Variant Name="Kabelboks 280x190x100 på Ø127 rørmast, venstrehengslet"/>
   <Variant Name="Kabelboks 280x190x100 på Ø127 rørmast, høyrehengslet"/>
   <Variant Name="Kabelboks 280x190x165 på Ø76 rørmast, venstrehengslet"/>
   <Variant Name="Kabelboks 280x190x165 på Ø76 rørmast, høyrehengslet"/>
   <Variant Name="Kabelboks 280x190x165 på Ø127 rørmast, venstrehengslet"/>
   <Variant Name="Kabelboks 280x190x165 på Ø127 rørmast, høyrehengslet"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>(Variant:lower():find("nøkkelskap") or Variant:lower():find("sveivskap")) and 1.50 or 1.20</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>"Vertical"</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_APS_SignallingCableDistributionBox_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_APS_SignallingCableDistributionBox_Geometry3DName()" ReturnType="String" Description="Returns the signalling cable distribution box's 3D geometry name.">
   <Signature>String _JBTSA_APS_SignallingCableDistributionBox_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_APS_SignallingCableDistributionBox_Geometry3DName()
					if Variant == "Nøkkelskap, venstrehengslet" then
						return "NO-BN-3D-SA-NØK-NØKKELSKAP-250x350x230-Ø76"
					elseif Variant == "Nøkkelskap, høyrehengslet"	then
						return "NO-BN-3D-SA-NØK-NØKKELSKAP-250x350x230-Ø76"
					elseif Variant == "Stort apparatskap, dobbeldør"	then
						return "NO-BN-3D-SA-APS-APPARATSKAP-STORT-1200x1200x400-MED-SOKKEL"
					elseif Variant == "Sveivskap, venstrehengslet"	then
						return "NO-BN-3D-SA-SVB-SVEIVSKAP-500x760x320-Ø76"
					elseif Variant == "Sveivskap, høyrehengslet"	then
						return "NO-BN-3D-SA-SVB-SVEIVSKAP-500x760x320-Ø76"
					elseif Variant == "Lite apparatskap, venstrehengslet"	then
						return "NO-BN-3D-FE-DIV-UKJENT"
					elseif Variant == "Lite apparatskap, høyrehengslet"	then
						return "NO-BN-3D-FE-DIV-UKJENT"
					elseif Variant == "Kabelboks 280x190x100 på Ø76 rørmast, venstrehengslet"	then
						return "NO-BN-3D-SA-SIG-NSI63-KABELBOKS-190x280x100-Ø76"
					elseif Variant == "Kabelboks 280x190x100 på Ø76 rørmast, høyrehengslet"	then
						return "NO-BN-3D-SA-SIG-NSI63-KABELBOKS-190x280x100-Ø76"
					elseif Variant == "Kabelboks 280x190x100 på Ø127 rørmast, venstrehengslet"	then
						return "NO-BN-3D-SA-SIG-NSI63-KABELBOKS-190x280x100-Ø127"
					elseif Variant == "Kabelboks 280x190x100 på Ø127 rørmast, høyrehengslet"	then
						return "NO-BN-3D-SA-SIG-NSI63-KABELBOKS-190x280x100-Ø127"
					elseif Variant == "Kabelboks 280x190x165 på Ø76 rørmast, venstrehengslet"	then
						return "NO-BN-3D-SA-SIG-NSI63-KABELBOKS-190x280x165-Ø76"
					elseif Variant == "Kabelboks 280x190x165 på Ø76 rørmast, høyrehengslet"	then
						return "NO-BN-3D-SA-SIG-NSI63-KABELBOKS-190x280x165-Ø76"
					elseif Variant == "Kabelboks 280x190x165 på Ø127 rørmast, venstrehengslet"	then
						return "NO-BN-3D-SA-SIG-NSI63-KABELBOKS-190x280x165-Ø127"
					elseif Variant == "Kabelboks 280x190x165 på Ø127 rørmast, høyrehengslet"	then
						return "NO-BN-3D-SA-SIG-NSI63-KABELBOKS-190x280x165-Ø127"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getCabinetName()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBaneDataID">
   <Formula>
				if Variant:lower():match("nøkkel") then return "SA-NØK-000000"
				elseif Variant:lower():match("sveiv") then return "SA-SVB-000000"
				elseif Variant:lower():match("apparat") then return "SA-APS-000000"
				elseif Variant:lower():match("boks") then return "SA-APS-000000"
				else return "UNFINISHED - Unrecognized variant ["..Variant.."] - cannot deduce BaneNORBaneDataID."
				end
			</Formula>
  </LuaExpression>
  <InsertPointObject Name="Nøkkelskap, venstrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-NØKKELSKAP-VHENGSLET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Nøkkelskap, høyrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-NØKKELSKAP-HHENGSLET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Sveivskap, venstrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-SVEIVSKAP-VHENGSLET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Sveivskap, høyrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-SVEIVSKAP-HHENGSLET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Lite apparatskap, venstrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-APPARATSKAP-LITE-VHENGSLET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Lite apparatskap, høyrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-APPARATSKAP-LITE-HHENGSLET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Kabelboks 280x190x100 på Ø76 rørmast, venstrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-KABELBOKS-VHENGSLET-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Kabelboks 280x190x100 på Ø76 rørmast, høyrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-KABELBOKS-HHENGSLET-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Kabelboks 280x190x100 på Ø127 rørmast, venstrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-KABELBOKS-VHENGSLET-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Kabelboks 280x190x100 på Ø127 rørmast, høyrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-KABELBOKS-HHENGSLET-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Kabelboks 280x190x165 på Ø76 rørmast, venstrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-KABELBOKS-VHENGSLET-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Kabelboks 280x190x165 på Ø76 rørmast, høyrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-KABELBOKS-HHENGSLET-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Kabelboks 280x190x165 på Ø127 rørmast, venstrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-KABELBOKS-VHENGSLET-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Kabelboks 280x190x165 på Ø127 rørmast, høyrehengslet" DisplayBlockName="NO-BN-2D-JBTSA_APS-KABELBOKS-HHENGSLET-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_APS-APPARATSKAP-STORT-VHENGSLET-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_APS
				{% if Variant == 'Nøkkelskap, venstrehengslet' %}NØKKELSKAP-VHENGSLET
				{% elsif Variant == 'Nøkkelskap, høyrehengslet' %}NØKKELSKAP-HHENGSLET
				{% elsif Variant == 'Sveivskap, venstrehengslet' %}SVEIVSKAP-VHENGSLET
				{% elsif Variant == 'Sveivskap, høyrehengslet' %}SVEIVSKAP-HHENGSLET
				{% elsif Variant == 'Lite apparatskap, venstrehengslet' %}APPARATSKAP-LITE-VHENGSLET
				{% elsif Variant == 'Lite apparatskap, høyrehengslet' %}APPARATSKAP-LITE-HHENGSLET
				{% elsif Variant == 'Kabelboks 280x190x100 på Ø76 rørmast, venstrehengslet' %}KABELBOKS-VHENGSLET
				{% elsif Variant == 'Kabelboks 280x190x100 på Ø127 rørmast, venstrehengslet' %}KABELBOKS-VHENGSLET
				{% elsif Variant == 'Kabelboks 280x190x165 på Ø76 rørmast, venstrehengslet' %}KABELBOKS-VHENGSLET
				{% elsif Variant == 'Kabelboks 280x190x165 på Ø127 rørmast, venstrehengslet' %}KABELBOKS-VHENGSLET
				{% elsif Variant == 'Kabelboks 280x190x100 på Ø76 rørmast, høyrehengslet' %}KABELBOKS-HHENGSLET
				{% elsif Variant == 'Kabelboks 280x190x100 på Ø127 rørmast, høyrehengslet' %}KABELBOKS-HHENGSLET
				{% elsif Variant == 'Kabelboks 280x190x165 på Ø76 rørmast, høyrehengslet' %}KABELBOKS-HHENGSLET
				{% elsif Variant == 'Kabelboks 280x190x165 på Ø127 rørmast, høyrehengslet' %}KABELBOKS-HHENGSLET
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{Name}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="signalfundament"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_TechnicalBuilding" Name="JBTSA_TER Tekniske bygninger og rom" Layer="JBTSA_TER" Color="ByLayer" Group="Signal/Tekniske Bygninger" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>signalteknisk_bygg</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Object"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <SetValue Key="name" Value="Relerom"/>
  <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-FE-DIV-UKJENT"/>
  <SetValue Key="name" Value="Relerom uten betjeningsplass"/>
  <Variants>
   <Variant Name="Relerom uten betjeningsplass"/>
   <Variant Name="Relerom med betjeningsplass, pos 1"/>
   <Variant Name="Relerom med betjeningsplass, pos 2"/>
   <Variant Name="Relerom med betjeningsplass, pos 3"/>
   <Variant Name="Relerom med betjeningsplass, pos 4"/>
  </Variants>
  <InsertPointObject Name="Relerom uten betjeningsplass" DisplayBlockName="NO-BN-2D-JBTSA_TER-TEKNISK-BEBYGGELSE-RELEROM-0-{{SymbolMode}}" DefaultSnapMode="None" SnapToAlignment="true" SnapDistance="15">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfLeftSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Relerom med betjeningsplass, pos 1" DisplayBlockName="NO-BN-2D-JBTSA_TER-TEKNISK-BEBYGGELSE-RELEROM-1-{{SymbolMode}}" DefaultSnapMode="None" SnapToAlignment="true" SnapDistance="15">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfLeftSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Relerom med betjeningsplass, pos 2" DisplayBlockName="NO-BN-2D-JBTSA_TER-TEKNISK-BEBYGGELSE-RELEROM-2-{{SymbolMode}}" DefaultSnapMode="None" SnapToAlignment="true" SnapDistance="15">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfLeftSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Relerom med betjeningsplass, pos 3" DisplayBlockName="NO-BN-2D-JBTSA_TER-TEKNISK-BEBYGGELSE-RELEROM-3-{{SymbolMode}}" DefaultSnapMode="None" SnapToAlignment="true" SnapDistance="15">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfLeftSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Relerom med betjeningsplass, pos 4" DisplayBlockName="NO-BN-2D-JBTSA_TER-TEKNISK-BEBYGGELSE-RELEROM-4-{{SymbolMode}}" DefaultSnapMode="None" SnapToAlignment="true" SnapDistance="15">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfLeftSideOfAlignment="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="true" AddAngle="{% if RightSided %}0{% else %}180{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_TER-TEKNISK-BEBYGGELSE-RELEROM
				{% if Variant contains '1' %}1
				{% elsif Variant contains '2' %}2
				{% elsif Variant contains '3' %}3
				{% elsif Variant contains '4' %}4
				{% else %}0
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETESection" Class="RailwayPlacedObject" LuaName="rctype_AxleCounterSection" Name="JBTSA_TEA Togdeteksjonsavsnitt for akseltellere" Layer="JBTSA_TEA" Color="ByLayer" Group="Signal/Togdeteksjon/Akseltellere" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Togdeteksjonsavsnitt for akseltellere"></Variant>
  </Variants>
  <SetValue Key="code" Value="OOO"/>
  <LuaExpression Name="name">
   <Formula>"Ta("..code..")"</Formula>
  </LuaExpression>
  <InsertPointObject Name="Togdeteksjonsavsnitt for akseltellere" DisplayBlockName="NO-BN-2D-JBTRC_SEKSJON-INNSETTING-SYMBOL-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="SymbolFrame" Value="Symbolramme-R2.75"/>
   <LuaExpression Name="DelimiterType">
    <Formula>rctype_AxleCounterSensor</Formula>
   </LuaExpression>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_SEK-SEKSJON-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <SymbolAttribute Tag="X">
    <Value>{{code}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tTrainDetector" Class="RailwayPlacedObject" LuaName="rctype_AxleCounterSensor" Name="JBTSA_TEL Akselteller sensor" Layer="JBTSA_TEL" Color="ByLayer" Group="Signal/Togdeteksjon/Akseltellere" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>tellepunkt</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="20" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="22" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="24" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Tellepunkt">
    <SetValue Key="controllerRef" Value=""/>
    <SetValue Key="detectionObject" Value="axle"/>
    <SetValue Key="medium" Value="magnetic"/>
    <SetValue Key="directionDetection" Value="false"/>
    <SetValue Key="model" Value=""/>
    <SetValue Key="axleCounting" Value="true"/>
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-SA-TEL-L905-TELLEPUNKT-SK30K"/>
   </Variant>
  </Variants>
  <LuaExpression Name="LateralOffset">
   <Formula>_JBTSA_TEL_LateralOffset()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_TEL_LateralOffset()" ReturnType="String" Description="Returns the distance to alignment for an axle counter sensor, either +/- 1.5 in schematic drawings or  otherwise +/-0.75.">
   <Signature>Double _JBTSA_TEL_LateralOffset()</Signature>
   <Formula>
				function _JBTSA_TEL_LateralOffset()
					local cg2 = Alignment.AlignmentSystem.CantGauge/2
					if SymbolMode == "Schematic" then 
						return RightSided and 2 or -2  --TODO: Only guessing...
					else 
						return NOBN_trk_getLateralOffsetFromCantAndTrackPlaneDistance(RightSided and cg2 or -cg2)
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="code">
   <Formula>_JBTSA_TEL_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_TEL_code()" ReturnType="String" Description="Returns a text string 'DownSection/UpSection' for an axle counter sensor.">
   <Signature>_JBTSA_TEL_code()</Signature>
   <Formula>
				function _JBTSA_TEL_code()
					local first = "-"
					local shortestDistanceSoFar = math.huge
					for i = 0, DownSections.Count-1 do
						local obj = DownSections[i]
						if obj and obj:isVisible() then
							local dist = getDistance(obj)
							if dist &lt; shortestDistanceSoFar then
								first = DownSections[i].code
								shortestDistanceSoFar = dist
							end
						end
					end
					local second = "-"
					shortestDistanceSoFar = math.huge
					for i = 0, UpSections.Count-1 do
						local obj = UpSections[i]
						if obj and obj:isVisible() then 
							local dist = getDistance(obj)
							if dist &lt; shortestDistanceSoFar then
								second = UpSections[i].code
								shortestDistanceSoFar = dist
							end
						end
					end
					if MileageIncreasesTowardsLeft then first,second = second,first end
					if first == "-" and second == "-" then
						return first.."/"..second, _info("UNFINISHED - Create axle counter Section object(s) to obtain the section numbers 'a/b' for the sensor.")
					else
						return first.."/"..second
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>"Tp("..code..")"</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="posInTrack">
   <Formula>RightSided and "leftRail" or "rightRail"</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToPreviousAxleCounter" DisplayName="Avstand til forrige tellepunkt" Description="Axle counters need at least 21 m between any two consecutive sensors, preferably 23 m, such that the longest admissible wagon will not free the track occupation under the wagon."/>
  <LuaExpression Name="mc_DistanceToPreviousAxleCounter" IsModelCheck="true">
   <Formula>JBTSA_TEL_chkDistanceToPreviousAxleCounter()</Formula>
  </LuaExpression>
  <LuaFunction Name="JBTSA_TEL_chkDistanceToPreviousAxleCounter()" ReturnType="String" Description="Checks distance to previous axle counter. Error if below 21 m, warning if below 23 m.">
   <Signature>String JBTSA_TEL_chkDistanceToPreviousAxleCounter()</Signature>
   <Formula>
				function JBTSA_TEL_chkDistanceToPreviousAxleCounter()
					return NOBN_com_chkDistanceToClosestNeighbour(rctype_AxleCounterSensor,21,23,"down")
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToNextAxleCounter" DisplayName="Avstand til neste tellepunkt" Description="Axle counters need at least 21 m between any two consecutive sensors, preferably 23 m, such that the longest admissible wagon will not free the track occupation under the wagon."/>
  <LuaExpression Name="mc_DistanceToNextAxleCounter" IsModelCheck="true">
   <Formula>_JBTSA_TEL_chkDistanceToNextAxleCounter()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_TEL_chkDistanceToNextAxleCounter()" ReturnType="String" Description="Checks distance to next axle counter. Error if below 21 m, warning if below 23 m.">
   <Signature>String _JBTSA_TEL_chkDistanceToNextAxleCounter()</Signature>
   <Formula>
				function _JBTSA_TEL_chkDistanceToNextAxleCounter()
					return NOBN_com_chkDistanceToClosestNeighbour(rctype_AxleCounterSensor,21,23,"up")
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_OtherAxleCountersToBeModelchecked" DisplayName="Andre objekter som modelsjekkes" Description="When this section object is refreshed, then the neighbouring limiting objects on either side are modelchecked as well."/>
  <LuaExpression Name="mc_OtherAxleCountersToBeModelchecked" IsModelCheck="true">
   <Formula>NOBN_com_triggerNeighbourObjectModelchecks(rctype_AxleCounterSensor)</Formula>
  </LuaExpression>
  <InsertPointObject Name="Tellepunkt" DisplayBlockName="NO-BN-2D-JBTSA_TEL-AKSELTELLER-SENSOR-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="0.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_TEL-AKSELTELLER-SENSOR-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat>NO-BN-2D-JBTSA_TEL-AKSELTELLER-SENSOR-{{SymbolMode}}</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat>{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTSA_TEL-AKSELTELLER-SENSOR-Metric{% endif %}</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="3.0" TargetSpace="akselteller_tuningenhet"/>
    <SnapPoint X="0.0" Y="4.5" TargetSpace="akselteller_tuningenhet"/>
    <SnapPoint X="0.0" Y="-3.0" TargetSpace="akselteller_tuningenhet"/>
    <SnapPoint X="0.0" Y="-4.5" TargetSpace="akselteller_tuningenhet"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_AxleCounterTuningUnit" Name="JBTSA_TET Akselteller tuningenhet" Layer="JBTSA_TET" Color="ByLayer" Group="Signal/Togdeteksjon/Akseltellere" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>akselteller_tuningenhet</RelationSpace>
  <AttachmentCategory Name="akselteller_tuningenhet" PassAttachmentToTarget="true"/>
  <AttachTo Category="akselteller_tuningenhet"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="24" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="26" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="28" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Akselteller tuningenhet"></Variant>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="Mounting" DisplayName="Montering" DefaultValue="UPRIGHT" Description="The axle counter tuning unit may be mounted as [ Flatt (flat) | Stående (upright) | Vegg (wall) | Som nummer to (as number two) ]. The flat mounting (aka 'mushroom') means a flat-lying tuning unit mounted on top of a short pole, the pole's foot is meant for shallow burying in ballast. The 'Stående' (upright) method implies a slightly taller ballast foot with an upright tuning unit mounted to the side of this pole. The 'Vegg' (wall) method has no foot, just a bracket allowing fitting of an upright tuning unit to a wall, for instance in a tunnel under the hand rail.">
   <Values>
    <Value DisplayName="Flatt" Description="Flat-lying tuning unit mounted on top of a short pole with a ballast-buried foot.">FLAT</Value>
    <Value DisplayName="Oppreist" Description="Upright tuning unit mounted to the side of a medium tall pole with a ballast-buried foot.">UPRIGHT</Value>
    <Value DisplayName="Vegg" Description="Upright tuning unit without pole or foot, for fitting to a wall.">WALL</Value>
    <Value DisplayName="Som nummer to" Description="Upright tuning unit without pole or foot, for fitting to an existing other upright tuning.">SECOND</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="CableLength" DisplayName="Kabellengde" DefaultValue="MEDIUM" Description="The axle counter tuning unit will usually benefit from a pre-fabricated standard coaxial cable with a low-pass filter. These cable come in a several standard lengths. The cable will be descend from the track-mounted sensor into the ballast, typically follow the ballast under the cable duct, turning left or right, then mounting along the foot of the axle counter tuning unit stand. Therefore, the required cable length is approcimately 0.3m + LateralOffset + AlongOffset + 0.7m = 1m + LateralOffset + AlongOffset. One supplier has standard coax cables of lengths 4, 5.5 or 8 meter. Another supplier has standard coax cable lengths up to 15m.">
   <Values>
    <Value DisplayName="15.0 m prefab" Description="Lateral offset plus along-offset should be around 6.0 to 14.0 meters">EXTRALONG</Value>
    <Value DisplayName="8.0 m prefab" Description="Lateral offset plus along-offset should be around 4.5 to 6.0 meters">LONG</Value>
    <Value DisplayName="5.5 m prefab" Description="Lateral offset plus along-offset should be around 3.0 to 4.5 meters">MEDIUM</Value>
    <Value DisplayName="4.0 m prefab" Description="Lateral offset plus along-offset should be around 2.5 to 3.0 meters">SHORT</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_CableDistanceFromTuningUnitToAxleCounter" DisplayName="Kabelavstand fra tuningenhet til tellepunkt" Description="Axle counters send very weak signals to the nearby tuning unit, using impedance-matched coaxial cables of predefined lengths, typically 4, 5.5, 8 or 15 meters."/>
  <LuaExpression Name="mc_CableDistanceFromTuningUnitToAxleCounter" IsModelCheck="true">
   <Formula>_JBTSA_TET_chkCableDistanceFromTuningUnitToAxleCounter()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_TET_chkCableDistanceFromTuningUnitToAxleCounter()" ReturnType="String" Description="Checks 'grid distance' (perp to track + along track), from axle counter tuning unit to its axle counter sensor. Error if more than 1 meter outside stated tolerance, warning if outside expected value but less than 1 meter off.">
   <Signature>String _JBTSA_TET_chkCableDistanceFromTuningUnitToAxleCounter()</Signature>
   <Formula>
				function _JBTSA_TET_chkCableDistanceFromTuningUnitToAxleCounter()
					--Assume tuning unit has same own alignment and approximate position as the axle counter it belongs to:
					local s = rel_AxleCounterTuningUnit_FeedsAndReads_AxleCounter
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."' to  its axle counter sensor."
					else
						local tol = 1.0 -- meter
						local lo = { SHORT = 2.5, MEDIUM = 3.0, LONG = 4.5, EXTRALONG = 6.0 }
						local hi = { SHORT = 3.0, MEDIUM = 4.5, LONG = 6.0, EXTRALONG = 14.0 }
						local cLen = { SHORT = "short", MEDIUM = "medium", LONG = "long", EXTRALONG = "extra long" }
						lo = lo[CableLength]
						hi = hi[CableLength]
						cLen = cLen[CableLength]
						local ac = r[0] --trigger modelcheck in related objects as well
						local gridLateralOffset = math.abs(LateralOffset - ac.LateralOffset)
						local gridAlongOffset = math.abs(Mileage - ac.Mileage)
						-- Their sum is a square-grid metric:
						local gridDistance = RC__round(gridLateralOffset + gridAlongOffset,1)
						local msg = "Grid distance is the sum of "..RC__round(gridLateralOffset,1).." (perpendicular to alignment) and "..RC__round(gridAlongOffset,1).." (along the alignment)"
						local gt = string.format("%.1f=%.03f+%.03f", gridDistance, gridLateralOffset, gridAlongOffset)
						if (gridDistance &lt; lo-tol) then return gt..": ERROR - Tuner is located too close to axle counter wrt minimum tolerance, change prefab cable length.",{ac},_error, _info(msg)
						elseif (gridDistance &gt;= lo-tol and gridDistance &lt; lo) then return gt..": WARNING - Tuner is located close to axle counter but above the minimum - try increase to " ..lo..".",{ac},_warning, _info(msg)
						elseif (gridDistance &gt;= lo and gridDistance &lt; hi) then return gt..": OK - Distance from tuner to axle counter is suitable for the "..cLen.." cable type",{ac},_ok, _info(msg)
						elseif (gridDistance &gt;= hi and gridDistance &lt;= hi+tol) then return gt..": WARNING - Tuner is located far from axle counter, but below the maximum - try reduce to "..hi..".",{ac},_warning, _info(msg)
						else return gt..": ERROR - Tuner is located too far from axle counter, change prefab cable length.",{ac},_error, _info(msg) end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="dir">
   <Formula>Mounting == "SECOND" and "none" or "both"</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>_JBTSA_TET_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_TET_code()" ReturnType="String" Description="Obtains the 'code' for axle counter tuning unit. Uses relation '&quot;..rel_AxleCounterTuningUnit_FeedsAndReads_AxleCounter..&quot;'.">
   <Signature>String _JBTSA_TET_code()</Signature>
   <Formula>
				function _JBTSA_TET_code()
					s = "Er akseltellersopp for tellepunkt"
					r,n = RC__getCollectionOfRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."' to  its axle counter sensor."
					elseif n == 1 then
						return tostring(r[0].code)
					elseif n == 2 then
						return r[0].code.."+"..r[1].code
					else
						return "*** ERROR - Too many axle counters sensors related to mushroom with '"..s.."."
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_TET_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_TET_Geometry3DName()" ReturnType="String" Description="Obtains the '3D model name' for the axle counter tuning unit. Uses relation '&quot;..rel_AxleCounterTuningUnit_FeedsAndReads_AxleCounter..&quot;'.">
   <Signature>String _JBTSA_TET_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_TET_Geometry3DName()
					local t = "NO-BN-3D-SA-TET-TELLEPUNKT-TUNINGENHET-EAK30K" --Thales product
					if Mounting == "FLAT" then
						return t.."-FLATT"
					elseif Mounting == "UPRIGHT" then 
						return t.."-OPPREIST"
					elseif Mounting == "WALL" then 
						return t.."-VEGG"
					elseif Mounting == "SECOND" then 
						return t.."-VEGG"
					else
						return "Bad Variant ["..Variant.."]."
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Offset.Y">
   <Formula>_JBTSA_TET_Offset3DY()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_TET_Offset3DY()" ReturnType="String" Description="Obtains the 3D Offset3D Y coordinate for the axle counter tuning unit, depending on the selected mounting method.">
   <Signature>Double _JBTSA_TET_Offset3DY()</Signature>
   <Formula>
				function _JBTSA_TET_Offset3DY()
					if Mounting == "SECOND" then
						return -0.35 --Assume it has direction 'none', placed on the rear side of another upright tuning unit placed in the 'both' direction.
					else
						return 0.000 --at insertion point
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>_JBTSA_TET_Offset3DZ()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_TET_Offset3DZ()" ReturnType="String" Description="Obtains the 3D Offset3D Z coordinate for the axle counter tuning unit, depending on the selected mounting method.">
   <Signature>Double _JBTSA_TET_Offset3DZ()</Signature>
   <Formula>
				function _JBTSA_TET_Offset3DZ()
					if Mounting == "FLAT" then 
						return 0.000
					elseif Mounting == "UPRIGHT" then 
						return 0.000
					elseif Mounting == "WALL" then 
						return 0.700	-- Typically, under the hand-rail in a tunnel
					elseif Mounting == "SECOND" then
						return 0.686 --Rear side of upright pole, matching the height above ground
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>"Tptu("..code..")"</Formula>
  </LuaExpression>
  <LuaExpression Name="Mileage">
   <Formula>RC__getMileageFromRelatedObject(rel_AxleCounterTuningUnit_FeedsAndReads_AxleCounter)</Formula>
  </LuaExpression>
  <InsertPointObject Name="Akselteller tuningenhet" DisplayBlockName="NO-BN-2D-JBTSA_TET-AKSELTELLER-TUNING-ENHET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.75" AskForAttachment="false">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <CustomProperty DataType="String" Name="NamePlateText" DisplayName="Tekst på 3D-modellens merkeskilt" DefaultValue="" ReadOnly="true" Description="Holds the section numbers to be displayed on the 3D model's name plate. The numbers are arranged such that the detection section number at lower mileage is mentioned on the side of the board being closest to the low mileages. The text is parsed from the associated axle counter's code."></CustomProperty>
  <LuaExpression Name="NamePlateText">
   <Formula>_JBTSA_TET_NamePlateText3D()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_TET_NamePlateText3D()" ReturnType="String" Description="Obtains the section numbers to show on the 3D model's name plate.">
   <Signature>String _JBTSA_TET_NamePlateText3D()</Signature>
   <Formula>
				function _JBTSA_TET_NamePlateText3D()
					local s = rel_AxleCounterTuningUnit_FeedsAndReads_AxleCounter
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."' to  its axle counter sensor."
					else
						local acc = r[0].code
						local lo, hi
						if acc == "-/-" then
							return "-/-"
						elseif acc:match("%w+/%-") then
							lo = acc:match("(%w+)/%-")
							hi = "-"
						elseif acc:match("%-/%w+") then
							lo = "-"
							hi = acc:match("%-/(%w+)")
						else
							lo,hi = acc:match("(%w+)/(%w+)")
						end
						return dir == "both" and hi.."/"..lo or lo.."/"..hi
					end
				end
			</Formula>
  </LuaFunction>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_TET-AKSELTELLER-TUNING-ENHET-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{NamePlateText}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETESection" Class="RailwayPlacedObject" LuaName="rctype_TrackCircuitSection" Name="JBTSA_SPF Sporfelt" Layer="JBTSA_SPF" Color="ByLayer" Group="Signal/Togdeteksjon/Sporfelt" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Sporfelt"></Variant>
  </Variants>
  <SetValue Key="code" Value="OOO"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_IsolatedJointsToBeModelchecked" DisplayName="Isolated joints to modelcheck." Description="When this section object is refreshed, then the nearest limiting object on each side is refreshed as well."/>
  <LuaExpression Name="mc_IsolatedJointsToBeModelchecked" IsModelCheck="true">
   <Formula>NOBN_sig_chkTriggerNeighbourIsolatedJoints()</Formula>
  </LuaExpression>
  <LuaFunction Name="NOBN_sig_chkTriggerNeighbourIsolatedJoints()" ReturnType="String" Description="Triggers modelchecking in neighbour isolated joints.">
   <Signature>NOBN_sig_chkTriggerNeighbourIsolatedJoints()</Signature>
   <Formula>
				function NOBN_sig_chkTriggerNeighbourIsolatedJoints()
					if Alignment == nil then return "UNFINISHED - Missing own alignment.",_error end
					local n = 0
					local t = {}
					local prev = getDownObject(rctype_InsulatedRailJoint)
					if prev then 
						n = n + 1
						table.insert(t,prev)
					end
					local next = getUpObject(rctype_InsulatedRailJoint)
					if next then 
						n = n + 1
						table.insert(t,next)
					end
					return n,t, _info(n.." isolated joints have been modelchecked.")
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Sporfelt" DisplayBlockName="NO-BN-2D-JBTRC_SEKSJON-INNSETTING-SYMBOL-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="SymbolFrame" Value="Symbolramme-R2.75"/>
   <LuaExpression Name="DelimiterType">
    <Formula>rctype_InsulatedRailJoint</Formula>
   </LuaExpression>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_SEK-SEKSJON-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <SymbolAttribute Tag="X">
    <Value>{{code}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tTrackCircuitBorder" Class="RailwayPlacedObject" LuaName="rctype_InsulatedRailJoint" Name="JBTKO_SKJ Skinneskjøt" Layer="JBTKO_SKJ" Color="ByLayer" Group="Signal/Togdeteksjon/Sporfelt" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skinneskjøt</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Overbygning"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>NOBN_trk_getLiftFromCant()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Skinneskjøt" Description="The object represents an isolated joint plus the isolation of left/right or both rails from here an onwards.">
    <SetValue Key="insulatedRail" Value="both"/>
   </Variant>
  </Variants>
  <LuaExpression Name="LateralOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <CustomProperty DataType="Boolean" Name="UpSectionLeftRailDetection" DisplayName="Deteksjon venstreskinne i stigende kilometerretning" DefaultValue="false"/>
  <CustomProperty DataType="Boolean" Name="UpSectionRightRailDetection" DisplayName="Deteksjon høyreskinne i stigende kilometerretning" DefaultValue="false"/>
  <CustomProperty DataType="Boolean" Name="DownSectionLeftRailDetection" DisplayName="Deteksjon venstreskinne i synkende kilometerretning" DefaultValue="false"/>
  <CustomProperty DataType="Boolean" Name="DownSectionRightRailDetection" DisplayName="Deteksjon høyreskinne i synkende kilometerretning" DefaultValue="false"/>
  <LuaExpression Name="name">
   <Formula>"Iso("..code..")"</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>_JBTKO_SKJ_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKJ_code()" ReturnType="String" Description="Returns a text string 'DownSection/UpSection' for an isolated joint.">
   <Signature>_JBTKO_SKJ_code()</Signature>
   <Formula>
				function _JBTKO_SKJ_code()
					local first = "-"
					local shortestDistanceSoFar = math.huge
					for i = 0, DownSections.Count-1 do
						local obj = DownSections[i]
						if obj and obj:isVisible() then
							local dist = getDistance(obj)
							if dist &lt; shortestDistanceSoFar then
								first = DownSections[i].code
								shortestDistanceSoFar = dist
							end
						end
					end
					local second = "-"
					shortestDistanceSoFar = math.huge
					for i = 0, UpSections.Count-1 do
						local obj = UpSections[i]
						if obj and obj:isVisible() then 
							local dist = getDistance(obj)
							if dist &lt; shortestDistanceSoFar then
								second = UpSections[i].code
								shortestDistanceSoFar = dist
							end
						end
					end
					if MileageIncreasesTowardsLeft then first,second = second,first end
					if first == "-" and second == "-" then
						return first.."/"..second, _info("UNFINISHED - Create the adjacent track circuit Section object(s) to obtain the section numbers 'a/b'.")
					else
						return first.."/"..second
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="UpSectionLeftRailDetection">
   <Formula>insulatedRail == "left" or insulatedRail == "both"</Formula>
  </LuaExpression>
  <LuaExpression Name="UpSectionRightRailDetection">
   <Formula>insulatedRail == "right" or insulatedRail == "both"</Formula>
  </LuaExpression>
  <LuaExpression Name="DownSectionLeftRailDetection">
   <Formula>
				local prev = getDownObject(RcType)
				if prev == nil then return false 
				else
					return prev.insulatedRail == "left" or prev.insulatedRail == "both"
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="DownSectionRightRailDetection">
   <Formula>
				local prev = getDownObject(RcType)
				if prev == nil then return false 
				else
					return prev.insulatedRail == "right" or prev.insulatedRail == "both"
				end
			</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToPreviousIsolatedJoint" DisplayName="Avstand til forrige isolerte skinneskjøt" Description="isolated joints need at least 21 m between any two joints, preferably 23 m, such that the longest admissible wagon will not free the track occupation under the wagon."/>
  <LuaExpression Name="mc_DistanceToPreviousIsolatedJoint" IsModelCheck="true">
   <Formula>_JBTKO_SKJ_chkDistanceToPreviousIsolatedJoint()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKJ_chkDistanceToPreviousIsolatedJoint()" ReturnType="String" Description="Checks distance to previous axle counter. Error if below 21 m, warning if below 23 m.">
   <Signature>String _JBTKO_SKJ_chkDistanceToPreviousIsolatedJoint()</Signature>
   <Formula>
				function _JBTKO_SKJ_chkDistanceToPreviousIsolatedJoint()
					return NOBN_com_chkDistanceToClosestNeighbour(rctype_InsulatedRailJoint,21,23,"down")
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToNextIsolatedJoint" DisplayName="Avstand til neste isolerte skinneskjøt" Description="isolated joints need at least 21 m between any two joints, preferably 23 m, such that the longest admissible wagon will not free the track occupation under the wagon."/>
  <LuaExpression Name="mc_DistanceToNextIsolatedJoint" IsModelCheck="true">
   <Formula>_JBTKO_SKJ_chkDistanceToNextIsolatedJoint()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKJ_chkDistanceToNextIsolatedJoint()" ReturnType="String" Description="Checks distance to previous axle counter. Error if below 21 m, warning if below 23 m.">
   <Signature>String _JBTKO_SKJ_chkDistanceToNextIsolatedJoint()</Signature>
   <Formula>
				function _JBTKO_SKJ_chkDistanceToNextIsolatedJoint()
					return NOBN_com_chkDistanceToClosestNeighbour(rctype_InsulatedRailJoint,21,23,"up")
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_OtherObjectsToBeModelchecked" DisplayName="Andre objekter som modelsjekkes" Description="When this section object is refreshed, then the neighbouring limiting objects on either side are modelchecked as well."/>
  <LuaExpression Name="mc_OtherObjectsToBeModelchecked" IsModelCheck="true">
   <Formula>NOBN_com_triggerNeighbourObjectModelchecks(rctype_InsulatedRailJoint)</Formula>
  </LuaExpression>
  <InsertPointObject Name="Skinneskjøt" DisplayBlockName="NO-BN-2D-JBTKO_SKJ-SKINNESKJOET-0-0-0-0-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="false"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true" Layer="0" Color="ByLayer">
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTKO_SKJ-SKINNESKJOET
				{% if UpSectionRightRailDetection %}1{% else %}0{% endif %}
				{% if DownSectionRightRailDetection %}1{% else %}0{% endif %}
				{% if DownSectionLeftRailDetection %}1{% else %}0{% endif %}
				{% if UpSectionLeftRailDetection %}1{% else %}0{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="RailCOMPLETESection" Class="RailwayPlacedObject" LuaName="rctype_FtgsSection" Name="JBTSA_SFA Togdeteksjonsavsnitt for FTGS" Layer="JBTSA_SFA" Color="ByLayer" Group="Signal/Togdeteksjon/FTGS" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <CustomProperty DataType="Enumeration" Name="Derogation" DisplayName="Dispensasjon" DefaultValue="NORMED" Category="Model check" Description="The 'Derogation' enumeration property [ Overholder regelverk (NORMED) | Ikke iht regelverk (DEVIATING) | Fravikssøknad sendt (REQUESTED) | Dispensasjon innvilget (GRANTED) ] reflects the status of the entire object in relation to applicable rules and regulations. The Derogation property is initially NORMED, as long as all modelchecks result in 'Unfinished', 'OK' or 'Warning'. The Derogation property changes from NORMED to DEVIATING if one or more modelchecks result in 'Error'. If the user manages to modify the model and thereby remove the errors, then status changes backed to 'Normed'. Whenever the user instead chooses to file an application for derogation, the user is expected to manually change status to REQUESTED (using F4, not deleting the Lua formula). When a positive answer is received, the user is expected to change status to GRANTED. If instead a negative answer is received, the user is expected to change status manually back to DEVIATING and take new steps from there. Note: 'Derogation' is a regular property that can be set/reset by the user, even if it appears in the 'Model check' category in the Property Manager.">
   <Values>
    <Value DisplayName="Overholder regelverk" Description="All modelchecks are showing either Unfinished, OK or Warning">NORMED</Value>
    <Value DisplayName="Ikke iht regelverk" Description="One or more modelchecks show an Error, but no derogation has been requested or granted">DEVIATING</Value>
    <Value DisplayName="Fravikssøknad sendt" Description="One or more modelchecks show an Error, a derogation has been requested but not yet granted">REQUESTED</Value>
    <Value DisplayName="Dispensasjon innvilget" Description="One or more modelchecks show an Error, a derogation has been granted">GRANTED</Value>
   </Values>
  </CustomProperty>
  <LuaExpression Name="Derogation">
   <Formula>RC__assessDerogation()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Togdeteksjonsavsnitt for FTGS"></Variant>
  </Variants>
  <SetValue Key="code" Value="OOO"/>
  <LuaExpression Name="name">
   <Formula>"Sf("..code..")"</Formula>
  </LuaExpression>
  <InsertPointObject Name="Togdeteksjonsavsnitt for FTGS" DisplayBlockName="NO-BN-2D-JBTRC_SEKSJON-INNSETTING-SYMBOL-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   <SetValue Key="SymbolFrame" Value="Symbolramme-R2.75"/>
   <LuaExpression Name="DelimiterType">
    <Formula>rctype_FtgsBond</Formula>
   </LuaExpression>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTFE_SEK-SEKSJON-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <SymbolAttribute Tag="X">
    <Value>{{code}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
 </ObjectType>
 <ObjectType DataType="tTrainDetector" Class="RailwayPlacedObject" LuaName="rctype_FtgsBond" Name="JBTSA_SFS FTGS forbinder" Layer="JBTSA_SFS" Color="ByLayer" Group="Signal/Togdeteksjon/FTGS" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>FTGS_forbinder</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="20" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="22" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="24" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>NOBN_trk_getLiftFromCant()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Kort/kort S-forbinder"/>
   <Variant Name="Kort/lang S-forbinder"/>
   <Variant Name="Lang/kort S-forbinder"/>
   <Variant Name="Lang/lang S-forbinder"/>
   <Variant Name="FTGS endeforbinder"/>
   <Variant Name="FTGS sporkryss forbinder"/>
  </Variants>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>_JBTSA_SFS_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SFS_code()" ReturnType="String" Description="Returns a text string 'DownSection/UpSection' for an FTGS connector.">
   <Signature>_JBTSA_SFS_code()</Signature>
   <Formula>
				function _JBTSA_SFS_code()
					local first = "-"
					local shortestDistanceSoFar = math.huge
					for i = 0, DownSections.Count-1 do
						local obj = DownSections[i]
						if obj and obj:isVisible() then
							local dist = getDistance(obj)
							if dist &lt; shortestDistanceSoFar then
								first = DownSections[i].code
								shortestDistanceSoFar = dist
							end
						end
					end
					local second = "-"
					shortestDistanceSoFar = math.huge
					for i = 0, UpSections.Count-1 do
						local obj = UpSections[i]
						if obj and obj:isVisible() then 
							local dist = getDistance(obj)
							if dist &lt; shortestDistanceSoFar then
								second = UpSections[i].code
								shortestDistanceSoFar = dist
							end
						end
					end
					if MileageIncreasesTowardsLeft then first,second = second,first end
					if first == "-" and second == "-" then
						return first.."/"..second, _info("UNFINISHED - Create FTGS connector Section object(s) to obtain the section numbers 'a/b' for the FTGS connector.")
					else
						return first.."/"..second
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>"Sf("..code..")"</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToPreviousFtgsConnector" DisplayName="Avstand til forrige FTGS forbinder" Description="FTGS connectors need at least 21 m between any two consecutive loops, preferably 23 m, such that the longest admissible wagon will not free the track occupation under the wagon."/>
  <LuaExpression Name="mc_DistanceToPreviousFtgsConnector" IsModelCheck="true">
   <Formula>_JBTSA_SFS_chkDistanceToPreviousFtgsConnector()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SFS_chkDistanceToPreviousFtgsConnector()" ReturnType="String" Description="Checks distance to previous FTGS connector. Error if below 21 m, warning if below 23 m.">
   <Signature>String _JBTSA_SFS_chkDistanceToPreviousFtgsConnector()</Signature>
   <Formula>
				function _JBTSA_SFS_chkDistanceToPreviousFtgsConnector()
					return NOBN_com_chkDistanceToClosestNeighbour(rctype_FtgsBond,21,23,"down")
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToNextFtgsConnector" DisplayName="Avstand til neste FTGS forbinder" Description="FTGS connectors need at least 21 m between any two consecutive loops, preferably 23 m, such that the longest admissible wagon will not free the track occupation under the wagon."/>
  <LuaExpression Name="mc_DistanceToNextFtgsConnector" IsModelCheck="true">
   <Formula>_JBTSA_SFS_chkDistanceToNextFtgsConnector()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SFS_chkDistanceToNextFtgsConnector()" ReturnType="String" Description="Checks distance to next axle counter. Error if below 21 m, warning if below 23 m.">
   <Signature>String _JBTSA_SFS_chkDistanceToNextFtgsConnector()()</Signature>
   <Formula>
				function _JBTSA_SFS_chkDistanceToNextFtgsConnector()
					return NOBN_com_chkDistanceToClosestNeighbour(rctype_FtgsBond,21,23,"up")
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_OtherObjectsToBeModelchecked" DisplayName="Andre objekter som modelsjekkes" Description="When this section object is refreshed, then the neighbouring limiting objects on either side are modelchecked as well."/>
  <LuaExpression Name="mc_OtherObjectsToBeModelchecked" IsModelCheck="true">
   <Formula>NOBN_com_triggerNeighbourObjectModelchecks(rctype_FtgsBond)</Formula>
  </LuaExpression>
  <InsertPointObject Name="Kort/kort S-forbinder" DisplayBlockName="NO-BN-2D-JBTSA_SFS_FTGS-FORBINDER-KORT-KORT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject Name="Kort/lang S-forbinder" DisplayBlockName="NO-BN-2D-JBTSA_SFS_FTGS-FORBINDER-KORT-LANG-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject Name="Lang/kort S-forbinder" DisplayBlockName="NO-BN-2D-JBTSA_SFS_FTGS-FORBINDER-LANG-KORT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject Name="Lang/lang S-forbinder" DisplayBlockName="NO-BN-2D-JBTSA_SFS_FTGS-FORBINDER-LANG-LANG-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject Name="FTGS endeforbinder" DisplayBlockName="NO-BN-2D-JBTSA_SFS_FTGS-FORBINDER-ENDE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <InsertPointObject Name="FTGS sporkryss forbinder" DisplayBlockName="NO-BN-2D-JBTSA_SFS_FTGS-FORBINDER-SPORKRYSS-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="MileageIncreasesTowardsLeft" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_THUMBNAIL-USPESIFISERT-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_SFS-FTGS-FORBINDER
				{% if Variant == "Kort/kort S-forbinder" %}KORT-KORT
				{% elsif Variant == "Kort/lang S-forbinder" %}KORT-LANG
				{% elsif Variant == "Lang/kort S-forbinder" %}LANG-KORT
				{% elsif Variant == "Lang/lang S-forbinder" %}LANG-LANG
				{% elsif Variant == "FTGS endeforbinder" %}ENDE
				{% elsif Variant == "FTGS sporkryss forbinder" %}SPORKRYSS
				{% else %}BAD_VARIANT
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat>{% if SymbolMode == 'Geographic' %}NO-BN-2D-JBTSA_SFS-FTGS-FORBINDER-Metric{% endif %}</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0.0" Y="3.0" TargetSpace="FTGS_tuningenhet"/>
    <SnapPoint X="0.0" Y="4.5" TargetSpace="FTGS_tuningenhet"/>
    <SnapPoint X="0.0" Y="-3.0" TargetSpace="FTGS_tuningenhet"/>
    <SnapPoint X="0.0" Y="-4.5" TargetSpace="FTGS_tuningenhet"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_FtgsTuningUnit" Name="JBTSA_SFT FTGS tuningenhet" Layer="JBTSA_SFT" Color="ByLayer" Group="Signal/Togdeteksjon/FTGS" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>FTGS_tuningenhet</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="24" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="26" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="28" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Sender/Sender"/>
   <Variant Name="Sender/Mottager"/>
   <Variant Name="Mottager/Sender"/>
   <Variant Name="Mottager/Mottager"/>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="Mounting" DisplayName="Montering" DefaultValue="FLAT" Description="The FTGS tuning unit may be mounted as [ Flatt (flatt/flat) | Oppreist (upright) | Vegg (wall) ]. The oppreist (aka 'Sopp' (mushroom)) mounting means a flat-lying tuning unit mounted on top of a short pole, the pole's foot is meant for shallow burying in ballast. The 'Stående' (upright) method implies a slightly taller ballast foot with an upright tuning unit mounted to the side of this pole. The 'Vegg' (wall) method has no foot, just a bracket allowing fitting of an upright tuning unit to a wall, for instance in a tunnel under the hand rail.">
   <Values>
    <Value DisplayName="Sopp" Description="Flat-lying tuning unit mounted on top of a short pole with a ballast-buried foot.">FLAT</Value>
    <Value DisplayName="Stående" Description="Upright tuning unit mounted to the side of a medium tall pole with a ballast-buried foot.">UPRIGHT</Value>
    <Value DisplayName="Vegg" Description="Upright tuning unit without pole or foot, for fitting to a wall.">WALL</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="CableLength" DisplayName="Kabellengde" DefaultValue="MEDIUM" Description="The FTGS tuning unit will usually benefit from a pre-fabricated standard coaxial cable with a low-pass filter. These cable come in a several standard lengths. The cable will be descend from the track-mounted sensor into the ballast, typically follow the ballast under the cable duct, turning left or right, then mounting along the foot of the axle counter tuning unit stand. Therefore, the required cable length is approcimately 0.3m + LateralOffset + AlongOffset + 0.7m = 1m + LateralOffset + AlongOffset. One supplier has standard coax cables of lengths 4, 5.5 or 8 meter. Another supplier has standard coax cable lengths up to 15m.">
   <Values>
    <Value DisplayName="15.0 m prefab" Description="Lateral offset plus along-offset should be around 6.0 to 14.0 meters">EXTRALONG</Value>
    <Value DisplayName="8.0 m prefab" Description="Lateral offset plus along-offset should be around 4.5 to 6.0 meters">LONG</Value>
    <Value DisplayName="5.5 m prefab" Description="Lateral offset plus along-offset should be around 3.0 to 4.5 meters">MEDIUM</Value>
    <Value DisplayName="4.0 m prefab" Description="Lateral offset plus along-offset should be around 2.5 to 3.0 meters">SHORT</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_CableDistanceFromTuningUnitToFtgsConnector" DisplayName="Kabelavstand fra tuningenhet til FTGS forbinder" Description="FTGS connectors send very weak signals to the nearby tuning unit, using impedance-matched coaxial cables of predefined lengths, typically from 4 to 15 meters."/>
  <LuaExpression Name="mc_CableDistanceFromTuningUnitToFtgsConnector" IsModelCheck="true">
   <Formula>_JBTSA_SFT_chkCableDistanceFromTuningUnitToFtgsConnector()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SFT_chkCableDistanceFromTuningUnitToFtgsConnector()" ReturnType="String" Description="Checks 'grid distance' (perp to track + along track), from axle counter tuning unit to its axle counter sensor. Error if more than 1 meter outside stated tolerance, warning if outside expected value but less than 1 meter off.">
   <Signature>String _JBTSA_SFT_chkCableDistanceFromTuningUnitToFtgsConnector()</Signature>
   <Formula>
				function _JBTSA_SFT_chkCableDistanceFromTuningUnitToFtgsConnector()
					--Assume FTGS mushroom has same own alignment and approximate position as the FTGS feed / return it belongs to:
					local s = rel_FtgsSbond_IsFedAndReadBy_FtgsTuningUnit
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."' to  its FTGS connector."
					else
						local tol = 1.0 -- meter
						local lo = { SHORT = 2.5, MEDIUM = 3.0, LONG = 4.5, EXTRALONG = 6.0 }
						local hi = { SHORT = 3.0, MEDIUM = 4.5, LONG = 6.0, EXTRALONG = 14.0 }
						local cLen = { SHORT = "short", MEDIUM = "medium", LONG = "long", EXTRALONG = "extra long" }
						lo = lo[CableLength]
						hi = hi[CableLength]
						cLen = cLen[CableLength]
						local fc = r[0] --trigger modelcheck in related objects as well
						local gridLateralOffset = math.abs(LateralOffset - fc.LateralOffset)
						local gridAlongOffset = math.abs(Mileage - fc.Mileage)
						-- Their sum is a square-grid metric:
						local gridDistance = RC__round(gridLateralOffset + gridAlongOffset,1)
						local msg = "Grid distance is the sum of "..RC__round(gridLateralOffset,1).." (perpendicular to alignment) and "..RC__round(gridAlongOffset,1).." (along the alignment)"
						local gt = string.format("%.1f=%.03f+%.03f", gridDistance, gridLateralOffset, gridAlongOffset)
						if (gridDistance &lt; lo-tol) then return gt..": ERROR - Tuner is located too close to axle counter wrt minimum tolerance, change prefab cable length.",{fc},_error, _info(msg)
						elseif (gridDistance &gt;= lo-tol and gridDistance &lt; lo) then return gt..": WARNING - Tuner is located close to axle counter but above the minimum - try increase to " ..lo..".",{fc},_warning, _info(msg)
						elseif (gridDistance &gt;= lo and gridDistance &lt; hi) then return gt..": OK - Distance from tuner to axle counter is suitable for the "..cLen.." cable type",{ac},_ok, _info(msg)
						elseif (gridDistance &gt;= hi and gridDistance &lt;= hi+tol) then return gt..": WARNING - Tuner is located far from axle counter, but below the maximum - try reduce to "..hi..".",{fc},_warning, _info(msg)
						else return gt..": ERROR - Tuner is located too far from axle counter, change prefab cable length.",{fc},_error, _info(msg) end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>_JBTSA_SFT_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SFT_code()" ReturnType="String" Description="Obtains the 'code' for FTGS connector tuning unit. Uses relation '&quot;..rel_FtgsSbond_IsFedAndReadBy_FtgsTuningUnit..&quot;'.">
   <Signature>String _JBTSA_SFT_code()</Signature>
   <Formula>
				function _JBTSA_SFT_code()
					local s = rel_FtgsSbond_IsFedAndReadBy_FtgsTuningUnit
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."' to  its FTGS connector."
					elseif n == 1 then
						return "Ftu("..r[0].code..")"
					elseif n == 2 then
						return "Ftu("..r[0].code.."+"..r[1].code..")"
					elseif n &gt;= 3 then
						return "ERROR - Too many FTGS connectors related to FTGS tuning unit with '"..s.."."
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_SFT_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SFT_Geometry3DName()" ReturnType="String" Description="Obtains the '3D model name' for the FTGS connector tuning unit. Uses relation '&quot;..rel_FtgsSbond_IsFedAndReadBy_FtgsTuningUnit..&quot;'.">
   <Signature>String _JBTSA_SFT_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_SFT_Geometry3DName()
					local t = "NO-BN-3D-SA-SFT-SPORFELT-TUNINGENHET-FTGS"
					if Mounting == "FLAT" 
						then return t.."-FLATT"
					elseif Mounting == "UPRIGHT" then 
						return t.."-OPPREIST"
					elseif Mounting == "WALL" then 
						return t.."-VEGG"
					end
					return t.."Bad Variant ["..Variant.."]."
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>"Ftu("..code..")"</Formula>
  </LuaExpression>
  <LuaExpression Name="Mileage">
   <Formula>RC__getMileageFromRelatedObject(rel_FtgsSbond_IsFedAndReadBy_FtgsTuningUnit)</Formula>
  </LuaExpression>
  <InsertPointObject Name="FTGS tuningenhet" DisplayBlockName="NO-BN-2D-JBTSA_SFT-SPORFELT-TUNINGENHET-FTGS-FLATT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.75" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_SFT-FTGS-TUNING-ENHET-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_PointMachine" Name="JBTSA_DRV Sporvekseldrivmaskin" Layer="JBTSA_DRV" Color="ByLayer" Group="Signal/Drivmaskiner" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>sporvekseldrivmaskin</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>NOBN_trk_getLateralOffsetFromCantAndTrackPlaneDistance(RightSided and 1.75 or -1.75)</Formula>
  </LuaExpression>
  <CustomProperty DataType="Boolean" Name="HasHeatingElement" DisplayName="Har varmeelement" DefaultValue="false">
   <Values>
    <Value>true</Value>
    <Value>false</Value>
   </Values>
  </CustomProperty>
  <Variants DefaultValue="Uspesifisert">
   <Variant Name="Uspesifisert"></Variant>
   <Variant Name="Alstom MET"></Variant>
   <Variant Name="Siemens Bsg9"></Variant>
   <Variant Name="Siemens ELS 710"></Variant>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTSA_DRV_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_DRV_code()" ReturnType="String" Description="Obtains the code for a point machine, derived from the switch it is related to with '&quot;..rel_PointMachine_BelongsTo_Switch..&quot;'.">
   <Signature>String _JBTSA_DRV_code()</Signature>
   <Formula>
				function _JBTSA_DRV_code()
					local s,r,n,d,sw,pm,nPm,j
					s = rel_PointMachine_BelongsTo_Switch
					r,n = getRelatedObjects(s)
					if n == 0 then
						return "Relate with '"..s.."' to switch object (turnout).",
							_info("Point machines derive their code from the switch they are related to with '"..s.."'.")
					else
						sw = r[0]
						pm,nPm = getRelatedObjects(rel_Switch_Has_PointMachine,sw)
						j = 0
						for i = 0, nPm-1 do 
							d = (sw.dir == "up") and 1 or -1
							if ((ReferenceMileage - pm[i].ReferenceMileage)*d &gt;= 0) then 
								j = j + 1 
							end
						end
						return string.format("%s.%d",sw.code,j)
					end
				end	
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>"Drv."..code</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>_JBTSA_DRV_dir()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_DRV_dir()" ReturnType="String" Description="Obtains the direction (dir) for a point machine, derived from the switch it is related to with '&quot;..rel_PointMachine_BelongsTo_Switch..&quot;'.">
   <Signature>String _JBTSA_DRV_dir()</Signature>
   <Formula>
				function _JBTSA_DRV_dir()
					local s,sw,n
					s = rel_PointMachine_BelongsTo_Switch
					sw,n = getRelatedObjects(s)
					if n == 0 then
						return "unknown", _info("Point machines derive their direction from the switch they are related to with '"..s.."'.")
					else
						return sw[0].dir
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_DRV_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_DRV_Geometry3DName()" ReturnType="String" Description="Obtains the 3D geometry's 'Name'  for a point machine, derived from its Variant, direction (dir) and side of alignment (distanceToAlignment).">
   <Signature>String _JBTSA_DRV_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_DRV_Geometry3DName()
					local t = ""
					if Variant == "Uspesifisert" then
						return "NO-BN-3D-FE-DIV-UKJENT"
					elseif Variant == "Alstom MET" then 
						t = "NO-BN-3D-SA-DRV-SPORVEKSELDRIVMASKIN-ALSTOM-MET-"
					elseif Variant == "Siemens Bsg9" then
						t = "NO-BN-3D-SA-DRV-SPORVEKSELDRIVMASKIN-SIEMENS-BSG9-"
					elseif Variant == "Siemens ELS 710" then
						t = "NO-BN-3D-SA-DRV-SPORVEKSELDRIVMASKIN-SIEMENS-ELS710-"
					else
						return "NO-BN-3D-FE-DIV-UKJENT",_error, _info("Unrecognized variant ["..Variant.."].")
					end
					if ((dir == "up" and RightSided) or (dir == "down" and LeftSided)) then 
						return t.."HSIDE"
					elseif ((dir == "up" and LeftSided) or (dir == "down" and RightSided)) then 
						return t.."VSIDE"
					else
						return "Cannot determine side of track for point machine.",_error
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Uspesifisert" DisplayBlockName="NO-BN-2D-JBTSA_DRV-SPORVEKSELDRIVMASKIN-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Alstom MET" DisplayBlockName="NO-BN-2D-JBTSA_DRV-SPORVEKSELDRIVMASKIN-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Siemens Bsg9" DisplayBlockName="NO-BN-2D-JBTSA_DRV-SPORVEKSELDRIVMASKIN-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Siemens ELS 710" DisplayBlockName="NO-BN-2D-JBTSA_DRV-SPORVEKSELDRIVMASKIN-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_DRV-SPORVEKSELDRIVMASKIN-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="true"/>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{code}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_DerailerMachine" Name="JBTSA_SPD Sporsperredrivmaskin" Layer="JBTSA_SPD" Color="ByLayer" Group="Signal/Drivmaskiner" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>sporsperredrivmaskin</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>NOBN_trk_getLateralOffsetFromCantAndTrackPlaneDistance(RightSided and 1.75 or -1.75)</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>_JBTSA_SPD_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SPD_code()" ReturnType="String" Description="Obtains the code for a derailer machine, derived from the derailer it is related to with '&quot;..rel_DerailerMachine_BelongsTo_Derailer..&quot;'.">
   <Signature>String _JBTSA_SPD_code()</Signature>
   <Formula>
				function _JBTSA_SPD_code()
					local s = rel_DerailerMachine_BelongsTo_Derailer
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Missing relation '"..s.."' to derailer object.",_warning
					else
						return r[0].code
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>return "Spd."..code</Formula>
  </LuaExpression>
  <SetValue Key="dir" Value="both"/>
  <Variants DefaultValue="BELA">
   <Variant Name="BELA">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-SA-SPD-SPORSPERREDRIVMASKIN-BELA"/>
   </Variant>
  </Variants>
  <InsertPointObject Name="BELA" DisplayBlockName="NO-BN-2D-JBTSA_SPD-SPORSPERREDRIVMASKIN-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_SPD-SPORSPERREDRIVMASKIN-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="true"/>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{code}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_LocalControlPanel" Name="JBTSA_LOK Lokalstiller" Layer="JBTSA_LOK" Color="ByLayer" Group="Signal/Lokalstillere" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>lokalstiller</RelationSpace>
  <AttachmentCategory Name="lokalstiller"/>
  <AttachTo Category="stolpe_med_fot"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>Variant:match("vegg") and 1.25 or 0</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>Variant:match("vegg") and "None" or "Vertical"</Formula>
  </LuaExpression>
  <Variants DefaultValue="Lokalstiller, 1 knapp/enkel veksel, på stolpe">
   <Variant Name="Lokalstiller, 1 knapp/enkel veksel, på stolpe"/>
   <Variant Name="Lokalstiller, 1 knapp/enkel veksel, på vegg"/>
   <Variant Name="Lokalstiller, 1 knapp/koblet veksel, på stolpe"/>
   <Variant Name="Lokalstiller, 1 knapp/koblet veksel, på vegg"/>
   <Variant Name="Lokalstiller, 2 knapper/enkel veksel, på stolpe"/>
   <Variant Name="Lokalstiller, 2 knapper/enkel veksel, på vegg"/>
   <Variant Name="Lokalstiller, 2 knapper/koblet veksel, på stolpe"/>
   <Variant Name="Lokalstiller, 2 knapper/koblet veksel, på vegg"/>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTSA_LOK_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_LOK_code()" ReturnType="String" Description="Obtains the code for a local control panel, derived from the switch or derailer it is related to with '&quot;..rel_LocalControlPanel_Actuates_SwitchOrDerailer..&quot;'.">
   <Signature>String _JBTSA_LOK_code()</Signature>
   <Formula>
				function _JBTSA_LOK_code()
					local s = rel_LocalControlPanel_Actuates_SwitchOrDerailer
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Missing relation '"..s.."' to switch object or derailer object.",_warning,
						_info("A local control panel derives its code property from the switch or derailer which it is related to.")
					elseif n == 1 then
						if r[0].RcType == rctype_Switch then 
							local coupledSwitch,ncsw = getRelatedObjects(rel_Switch_IsCoupledWith_Switch,r[0])
							if ncsw == 0 then
								return r[0].code
							else
								return coupledSwitch[0].code.."/"..r[0].code
							end
						elseif r[0].RcType == rctype_Derailer then
							return r[0].code
						else
							return "ERROR - Bad RcType ["..r[0].RcType.."] for object related to Local control panel.",_error
						end
					else
						return "ERROR - More than 1 ["..n.."] object related to Local control panel.",_error
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>"Lok."..code</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>_JBTSA_LOK_dir()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_LOK_dir()" ReturnType="String" Description="Obtains the dir (direction) for a local control panel, derived from the switch or derailer it is related to with '&quot;..rel_LocalControlPanel_Actuates_SwitchOrDerailer..&quot;'.">
   <Signature>String _JBTSA_LOK_dir()</Signature>
   <Formula>
				function _JBTSA_LOK_dir()
					local s = rel_LocalControlPanel_Actuates_SwitchOrDerailer
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "unknown"
					else
						if r[0].RcType == rctype_LocalControlPanel then 
							return "both" 
						else 
							return r[0].dir
						end
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_LOK_LocalControlPanel_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_LOK_LocalControlPanel_Geometry3DName()" ReturnType="String" Description="Returns the signalling local control panel's 3D geometry name.">
   <Signature>String _JBTSA_LOK_LocalControlPanel_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_LOK_LocalControlPanel_Geometry3DName()
					if Variant == "Lokalstiller, 1 knapp/enkel veksel, på stolpe" then
						return "NO-BN-3D-SA-LOK-LOKALSTILLER-1-KNAPP-ENKEL-VEKSEL-MED-STOLPE"
					elseif Variant == "Lokalstiller, 1 knapp/enkel veksel, på vegg" 	then
						return "NO-BN-3D-SA-LOK-LOKALSTILLER-1-KNAPP-ENKEL-VEKSEL"
					elseif Variant == "Lokalstiller, 1 knapp/koblet veksel, på stolpe"	then
						return "NO-BN-3D-SA-LOK-LOKALSTILLER-1-KNAPP-KOBLET-VEKSEL-MED-STOLPE"
					elseif Variant == "Lokalstiller, 1 knapp/koblet veksel, på vegg"	then
						return "NO-BN-3D-SA-LOK-LOKALSTILLER-1-KNAPP-KOBLET-VEKSEL"
					elseif Variant == "Lokalstiller, 2 knapper/enkel veksel, på stolpe"	then
						return "NO-BN-3D-SA-LOK-LOKALSTILLER-2-KNAPPER-ENKEL-VEKSEL-MED-STOLPE"
					elseif Variant == "Lokalstiller, 2 knapper/enkel veksel, på vegg"	then
						return "NO-BN-3D-SA-LOK-LOKALSTILLER-2-KNAPPER-ENKEL-VEKSEL"
					elseif Variant == "Lokalstiller, 2 knapper/koblet veksel, på stolpe"	then
						return "NO-BN-3D-SA-LOK-LOKALSTILLER-2-KNAPPER-KOBLET-VEKSEL-MED-STOLPE"
					elseif Variant == "Lokalstiller, 2 knapper/koblet veksel, på vegg"	then
						return "NO-BN-3D-SA-LOK-LOKALSTILLER-2-KNAPPER-KOBLET-VEKSEL"				
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Lokalstiller, 1 knapp/enkel veksel, på stolpe" DisplayBlockName="NO-BN-2D-JBTSA_LOK-LOKALSTILLER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="2.4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Lokalstiller, 1 knapp/enkel veksel, på vegg" DisplayBlockName="NO-BN-2D-JBTSA_LOK-LOKALSTILLER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Lokalstiller, 1 knapp/koblet veksel, på stolpe" DisplayBlockName="NO-BN-2D-JBTSA_LOK-LOKALSTILLER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="2.4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Lokalstiller, 1 knapp/koblet veksel, på vegg" DisplayBlockName="NO-BN-2D-JBTSA_LOK-LOKALSTILLER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Lokalstiller, 2 knapper/enkel veksel, på stolpe" DisplayBlockName="NO-BN-2D-JBTSA_LOK-LOKALSTILLER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="2.4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Lokalstiller, 2 knapper/enkel veksel, på vegg" DisplayBlockName="NO-BN-2D-JBTSA_LOK-LOKALSTILLER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Lokalstiller, 2 knapper/koblet veksel, på stolpe" DisplayBlockName="NO-BN-2D-JBTSA_LOK-LOKALSTILLER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="2.4">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Lokalstiller, 2 knapper/koblet veksel, på vegg" DisplayBlockName="NO-BN-2D-JBTSA_LOK-LOKALSTILLER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_LOK-LOKALSTILLER-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{code}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="stolpe_med_fot"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="-1.75" Y="0.75"/>
    <SnapPoint X="-1.75" Y="-0.75"/>
    <SnapPoint X="1.75" Y="0.75"/>
    <SnapPoint X="1.75" Y="-0.75"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <LuaFunction Name="NOBN_sig_getBaliseGroupDirection()" ReturnType="String" Description="Returns the source object balise's balise group direction [up/down/unknown].">
  <Signature>String NOBN_sig_getBaliseGroupDirection(ObjRef balise = this)</Signature>
  <Formula>
			function NOBN_sig_getBaliseGroupDirection(balise)
				--TODO: Replace with a function which finds out where the closest cable duct is, and rotates the balise with the cable towards that duct.
				balise = balise or this
				local s = balise.RcType:match("ETCS") and rel_EtcsBalise_BelongsTo_EtcsBaliseGroup or rel_NssBalise_BelongsTo_NssBaliseGroup
				local r,n = getRelatedObjects(s,balise)
				if n == 0 then
					return "unknown", _info("UNFINISHED - Relate balise with '"..s.."' to a balise group to inherit direction.")
				else
					return r[0].dir
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_chkBaliseDistanceToPreviousBalise()" ReturnType="String" Description="Checks distance to previous balise. Error if too close (2.35) or not far enough (10.5), warning if (2.35 - 2.8) or (3.2 - 3.5) or (10.5 11.8).">
  <Signature>String NOBN_sig_chkBaliseDistanceToPreviousBalise(ObjRef balise = this)</Signature>
  <Formula>
			function NOBN_sig_chkBaliseDistanceToPreviousBalise(balise)
				balise = balise or this
				local searchDir = "down"
				if balise.Alignment == nil then return "UNFINISHED - Missing own alignment.",_error end
				local nextBalise = getDownObject(balise.RcType)
				if nextBalise == nil then return "OK - No "..balise.RcType:sub(8).." within reach in the '"..searchDir.."' direction.",_ok end
				local dist = getDistance(balise,nextBalise)
				local t = string.format("%.03f", dist)
			
				if (dist &lt; 2.35 ) then
					return t..": ERROR - Balise magnetic fields may merge - increase distance.",{nextBalise},_error
				elseif (dist &gt;= 2.35 and dist &lt; 2.8) then
					return t..": WARNING - Outside recommended tolerance - increase distance.",{nextBalise},_warning
				elseif (dist &gt;= 2.8 and dist &lt; 3.2) then
					return t..": OK - The train will treat the balises as belonging to the same group.",{nextBalise},_ok
				elseif (dist &gt;= 3.2 and dist &lt; 3.5) then
					return t..": WARNING - Outside recommended tolerance - decrease distance.",{nextBalise},_warning
				elseif (dist &gt;= 3.5 and dist &lt; 10.5) then
					return t..": ERROR - The train cannot determine which balise group the balise belongs to.",{nextBalise},_error
				elseif (dist &gt;= 10.5 and dist &lt; 11.8) then
					return t..": WARNING - Outside recommended tolerance - increase distance.",{nextBalise},_warning
				elseif (dist &gt; 11.8) then
					return t..": OK - The train will treat the balises as belonging to different balise groups.",{nextBalise},_ok
				else
					return "ERROR - Bad calculation of distance to neighbour object.",_error,
						_info("DNA error - please notify your DNA agent company - send to support@railcomplete.com.")
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_chkBaliseDistanceToNextBalise()" ReturnType="String" Description="Checks distance to next balise. Error if too close (2.35) or not far enough (10.5), warning if (2.35 - 2.8) or (3.2 - 3.5) or (10.5 11.8).">
  <Signature>String NOBN_sig_chkBaliseDistanceToNextBalise(ObjRef balise = this)</Signature>
  <Formula>
			function NOBN_sig_chkBaliseDistanceToNextBalise(balise)
				balise = balise or this
				local searchDir = "up"
				if balise.Alignment == nil then return "UNFINISHED - Missing own alignment.",_error end
				local nextBalise = getUpObject(balise.RcType)
				if nextBalise == nil then return "OK - No "..balise.RcType:sub(8).." within reach in the '"..searchDir.."' direction.",_ok end
				local dist = getDistance(balise,nextBalise)
				local t = string.format("%.03f", dist)
			
				if (dist &lt; 2.35 ) then
					return t..": ERROR - Balise magnetic fields may merge - increase distance.",{nextBalise},_error
				elseif (dist &gt;= 2.35 and dist &lt; 2.8) then
					return t..": WARNING - Outside recommended tolerance - increase distance.",{nextBalise},_warning
				elseif (dist &gt;= 2.8 and dist &lt; 3.2) then
					return t..": OK - The train will treat the balises as belonging to the same group.",{nextBalise},_ok
				elseif (dist &gt;= 3.2 and dist &lt; 3.5) then
					return t..": WARNING - Outside recommended tolerance - decrease distance.",{nextBalise},_warning
				elseif (dist &gt;= 3.5 and dist &lt; 10.5) then
					return t..": ERROR - The train cannot determine which balise group the balise belongs to.",{nextBalise},_error
				elseif (dist &gt;= 10.5 and dist &lt; 11.8) then
					return t..": WARNING - Outside recommended tolerance - increase distance.",{nextBalise},_warning
				elseif (dist &gt; 11.8) then
					return t..": OK - The train will treat the balises as belonging to different balise groups.",{nextBalise},_ok
				else
					return "ERROR - Bad calculation of distance to neighbour object.",_error,
						_info("DNA error - please notify your DNA agent company - send to support@railcomplete.com.")
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_chkBaliseDistanceToTrackVertically()" ReturnType="String" Description="Checks vertical distance to track above or below balise.">
  <Signature>String NOBN_sig_chkBaliseDistanceToTrackVertically(ObjRef balise = this)</Signature>
  <Formula>
			function NOBN_sig_chkBaliseDistanceToTrackVertically(balise)
				balise = balise or this
				if (balise.Alignment == nil) then return "UNFINISHED - Missing own alignment.",_error end
				local closestTracks = getNearbyAlignments(balise,rctype_Track)
				local nearestId = ""
				local nearestDist = math.huge
				local i = 0
				while (closestTracks[i]) do
					local aId = closestTracks[i].id
					local sDist = math.abs(getAlignmentInfo(balise,aId).DistanceToAlignment)
					if (balise.Alignment.id ~= aId and sDist &lt; nearestDist) then
						nearestId = aId
						nearestDist = sDist
					else
						i = i + 1
					end
				end
				-- Consider only other alignments being no more than 5 meter sideways apart from balise 
				if (nearestDist &gt; 3.0) then return "OK - No conflicting tracks within 3 meters sideways.",_ok end
				local hDiff = math.abs(getAlignmentInfo(balise).Elevation - getAlignmentInfo(balise,nearestId).Elevation)
				if (hDiff &lt;= 0.8) then
					-- Assume that closest other track is part of a point or crossing, but still accept 80 cm difference for diverging track profiles
					return string.format("%.3f",hDiff)..": OK - Balise is close to a neighbouring track which we consider to be part of a switch or crossing.",_ok
				elseif (hDiff &gt; 0.8 and hDiff &lt;= 7.0) then 
					return string.format("%.3f",hDiff)..": ERROR - Balise may be read by a train running in a track above/under us - increase vertical track separation or move balise.",_error
				elseif (distance &lt;= 8.0) then 
					return string.format("%.3f",hDiff)..": WARNING - Outside recommended tolerance - increase vertical track separation or move balise.",_warning
				else 
					return string.format("%.3f",hDiff)..": OK - A Train in a track above/under us will pass without reading the balise.",_ok 
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_chkBaliseDistanceToTrackSideways()" ReturnType="String" Description="Checks distance from balise to neighbour tracks">
  <Signature>String NOBN_sig_chkBaliseDistanceToTrackSideways(ObjRef balise = this)</Signature>
  <Formula>
			function NOBN_sig_chkBaliseDistanceToTrackSideways(balise)
				balise = balise or this
				if (balise.Alignment == nil) then return "UNFINISHED - Missing own alignment.",_error end
				local closestTracks = getNearbyAlignments(balise,rctype_Track)
				local nearestId = ""
				local i = 0
				while (closestTracks[i]) do
					if (balise.Alignment.id ~= closestTracks[i].id) then
						nearestId = closestTracks[i].id
						break
					else
						i = i+1
					end
				end
				if (nearestId == "") then return "OK - No neighbouring track(s).",_ok end
				local sDist = math.abs(getAlignmentInfo(balise,nearestId).DistanceToAlignment)
				if RC__isNan(sDist) then return "No sideways distance found.", _noSymbol end
				if (sDist &lt; 1.4) then 
					return string.format("%.3f",sDist)..": ERROR – Balise may be read by a train in a neighbouring track – increase distance.",_error
				elseif (sDist &lt; 2.0) then 
					return string.format("%.3f",sDist)..": WARNING – Allowed on condition that at least one of the group's A- and B-balise is above 2.6 meter from neighbouring track (large balise) resp. 2.3 meter (minibalise) – increase distance.",_warning
				else
					return string.format("%.3f",sDist)..": OK – a Train in neighbouring track will pass without reading the balise.",_ok
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ETB_positionInGroup()" ReturnType="String" Description="Returns the number #0..#7 of the ETCS balise in its ETCS balise group.">
  <Signature>String _JBTSA_ETB_positionInGroup(objRef balise = this)</Signature>
  <Formula>
			function _JBTSA_ETB_positionInGroup(balise)
				balise = balise or this
				local baliseGroups,nBaliseGroups = balise:getRelatedObjects(rel_EtcsBalise_BelongsTo_EtcsBaliseGroup)
				if nBaliseGroups == 0 then
					return "?",_info("Connect the ETCS balise to its ETCS balise group with '"..rel_EtcsBalise_BelongsTo_EtcsBaliseGroup.."' to get the number of the balise within the balise group.")
				else
					local bg = baliseGroups[0]
					local balises,nBalises = bg:getRelatedObjects(rel_EtcsBaliseGroup_Contains_EtcsBalise)
			
					if nBalises == 0 then
						--Should never happen!
						return "?",_info("Connect this balise group with '"..rel_EtcsBaliseGroup_Contains_EtcsBalise.."' to its ETCS balises so that the balises are numbered #0,#1.. and the balise group is positioned on balise #0.")
			
					elseif nBalises == 1 then
						return 0
			
					else --nBalises >= 2:
						if bg.dir ~= 'up' and bg.dir ~= 'down' then
							return "?",_info("The balise group connected to this balise does not have the direction 'up' or 'down' - correct the  direction of the balise group so that the number of this balise in the balise group can be determined.")
						end
						local t = {}
						for i = 0,nBalises-1 do table.insert(t,{id = balises[i].id, pos = balises[i]:getAlignmentInfo().RelativePosition}) end --Assume they are in same RSM track edge
						table.sort(t, function (a,b) local sgn = (bg.dir == 'up' and 1 or -1) return sgn*a.pos &lt; sgn*b.pos end)
						t = getCollectionFromTable(t) --Collections are indexed from 0 to #-1
						for i = 0,nBalises-1 do
							if balise.id == t[i].id then
								return i,_info("Position #"..i.." in direction '"..bg.dir.."' within the balise group '"..RC__identify(bg).."'.")
							end
						end
					end
				end
			end 
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ETB_TextAbove()" ReturnType="String" Description="Returns text above the ETCS balise 2D symbol.">
  <Signature>String _JBTSA_ETB_TextAbove()</Signature>
  <Formula>
			function _JBTSA_ETB_TextAbove()
				return "#".._JBTSA_ETB_positionInGroup()
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ETB_TextBelow()" ReturnType="String" Description="Returns text below the ETCS balise 2D symbol.">
  <Signature>String _JBTSA_ETB_TextBelow()</Signature>
  <Formula>
			function _JBTSA_ETB_TextBelow()
				return "" --TODO: define _JBTSA_ETB_TextBelow()
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ETB_code()" ReturnType="String" Description="Returns the 'Code' property of the ETCS balise, extracted from its balise group and its position #0..#7 within the group.">
  <Signature>String _JBTSA_ETB_code()</Signature>
  <Formula>
			function _JBTSA_ETB_code()
				local baliseGroups,nBaliseGroups = this:getRelatedObjects(rel_EtcsBalise_BelongsTo_EtcsBaliseGroup)
				if nBaliseGroups == 0 then
					return _warning,"WARNING - No related balise group"
				elseif nBaliseGroups &gt; 1 then
					return _error,"ERROR - Balise can only belong to one balise group"
				else 
					local bg = baliseGroups[0]
					return string.format(bg.code).."-".._JBTSA_ETB_TextAbove()
				end
			end 
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ETC_dir()" ReturnType="String" Description="Checks the direction of the ETCS balise group, returns the already defined  direction [ up | down | none ].">
  <Signature>String _JBTSA_ETC_dir(objRef bg = this)</Signature>
  <Formula>
			function _JBTSA_ETC_dir(bg)
				bg = bg or this
				local infoMsg,symbol
				if bg.dir ~= 'up' and bg.dir ~= 'down' and bg.dir ~= 'none' then
					infoMsg = "ERROR - The  direction of a balise group must be either 'up', 'down' or 'none'."
					symbol = _error
				else
					infoMsg = "The user is expected to set the direction of the balise group."
					symbol = _ok
				end
				return getPropertyValue("dir"),_info(infoMsg),symbol
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ETC_Mileage()" ReturnType="String" Description="Places the ETCS balise group at its balise #0:
			\n
			\n1) The user inserts the balise group and specifies the direction of the balise group. The variant will be set automatically based on the balises related to (contained in) the balise group.
			\n2) The user inserts balises and relates them to the balise group. The number of balises defines the variant of the balise group.
			\n3) RC displays the 2D symbol that corresponds to the variant and the balise group direction.
			\n4) The balise group is in the same position as its balise #0, which becomes the first balise in the direction of the balise group.">
  <Signature>String _JBTSA_ETC_Mileage(ObjRef bg = this)</Signature>
  <Formula>
			function _JBTSA_ETC_Mileage(bg)
				bg = bg or this
				local s = rel_EtcsBaliseGroup_Contains_EtcsBalise
				local balises,nBalises = bg:getRelatedObjects(s)
				if nBalises == 0 then
					return bg:getPropertyValue("mileage"),_info("Relate the balise group with '"..s.."' to its ETCS balises so that the balises are numbered #0,#1.. and the balise group is positioned on balise #0.")
				elseif nBalises == 0 then
					return balises[0].mileage
				else
					local t = {}
					for i = 0,nBalises-1 do table.insert(t,{id = balises[i].id, pos = balises[i].pos, mileage = balises[i].mileage }) end --Assume they are in same RSM track edge
					table.sort(t, function (a,b) local sgn = (dir == 'up' and 1 or -1) return sgn*a.pos &lt; sgn*b.pos end)
					return t[1].mileage,_info("Position erhalten von ETCS-Balise "..RC__identify(getObjectFromId(t[1].id)))
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ETC_chk_BaliseGroupTypes()" ReturnType="String" Description="Checks that the 'Packages' property is syntactically correct.
				\nSee DBAG Ril.819.1344A01 p.60.
				\nExamples: '21&lt;', '&gt;21', '21&lt;&gt;26', '24,28&lt;37&gt;21'.
				\n
				\nTODO: Adapt this code to Bane NOR regulations.">
  <Signature>String _JBTSA_ETC_chk_BaliseGroupTypes(objRef baliseGroup = this)</Signature>
  <Formula>
			function _JBTSA_ETC_chk_BaliseGroupTypes(bg)
				bg = bg or this

				--Find target distance if defined (shortest of all available target distances)
				local r,n = bg:getRelatedObjects(rel_EtcsBaliseGroup_AppliesTo_Object)
				local shortest = math.huge
				local shortestIndex = nil
				for i=0,n-1 do
					local d = getDistance(bg,r[i])
					if d &lt; shortest then 
						shortest = d
						shortestIndex = i
					end
				end

				local t = (shortest == math.huge) 
					and " @ (INCOMPLETE - no target distance/target object)" 
					or string.format("@%.0f:%s %s", shortest, r[shortestIndex].RcType:sub(6,8), RC__identify(r[shortestIndex])) .. (n &gt; 1 and "..("..n..")" or "")

				local function pretty()
					--DP Type with separators:
					local sepLeft = (left or middle) and "&lt;" or ""
					local sepRight = (middle or right) and "&gt;" or ""
					return (left or "")..sepLeft..(middle or "")..sepRight..(right or "")..t
				end

				local bgTypes = tostring(bg.BaliseGroupTypes):gsub("[\t ]","")
				if bgTypes == nil or bgTypes == "" then 
					return _unfinished,"Balise group type?"
				else
					local src = tostring(bgTypes):gsub("%s","") --Remove whitespace
					src = tostring(src):gsub("/",",") --Slash is synonymous to comma
					local check = tostring(src):gsub("[%&lt;%&gt;,0-9 ]","")
					if check ~= "" then
						return _warning,"WARNING - Invalid characters found in the source string ["..check.."]."
					end
					--TODO: Adapt DB rules to Bane NOR rules, write this check properly:
					--Analyze according to Ril.819.1344A01 page 60-75 Table 9:
					--Note: "Left"/"Right" require that the bg's own alignment has mileage increasing towards the right as seen on-screen.
					--Parse all combinations:
					local left = nil
					local middle = nil
					local right = nil
					if src:match("^&lt;([0-9,]+)$") 
						or src:match("^([0-9,]+)&lt;([0-9,]+)$")
						or src:match("^([0-9,]+)&gt;$")
						or src:match("^([0-9,]+)&gt;([0-9,]+)$")
					then
						return _warning,"WARNING - Invalid direction specified in the source string ["..src.."]."
					end
					left,middle,right = src:match("^([0-9,]+)&lt;([0-9,]+)&gt;([0-9,]+)$")
					if left and middle and right then return pretty() end
					left,middle = src:match("^([0-9,]+)&lt;([0-9,])&gt;$")
					if left and middle then return pretty() end
					left,right = src:match("^([0-9,]+)&lt;&gt;([0-9,]+)$")
					if left and right then return pretty() end
					middle,right = src:match("^&lt;([0-9,]+)&gt;([0-9,]+)$")
					if middle and right then return pretty() end
					left = src:match("^([0-9,]+)&lt;$")
					if left then return pretty() end
					middle = src:match("^&lt;([0-9,]+)&gt;$")
					if middle then return pretty() end
					right = src:match("^&gt;([0-9,]+)$")
					if right then return pretty() end
					local implicitDirection = src:match("^[0-9,]+$")
					if implicitDirection then
						if dir == 'up' then 
							right = implicitDirection
						else
							left = implicitDirection
						end
						return pretty()
					end
					return pretty("Incorrect balise group type syntax:"..tostring(bgTypes)) 
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ETC_code()" ReturnType="String" Description="The ETCS balise group's code property shall be defined by the user.">
  <Signature>String _JBTSA_ETC_code()</Signature>
  <Formula>
			function _JBTSA_ETC_code()
				return "Delete this text/formula, enter a valid balise group id number."
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ETC_name()" ReturnType="String" Description="Returns the name property of the ETCS balise group, which results from its ETCS area number, its balise group number and balise group packets.
				\nThe ETCS area number is taken from an RC area of the type 'ETCS area (NID_C)', which encloses the ETCS objects.
				\nThe balise group number is taken from the 'Code' property (NID_BG).
				\nThe data point packets are taken from the 'Data point packets' string.">
  <Signature>String _JBTSA_ETC_name(objRef baliseGroup = this)</Signature>
  <Formula>
			function _JBTSA_ETC_name(bg)
				bg = bg or this
				local etcsAreas = bg.RcArea:filter(function (x) return x.Variant == "ETCS-Bereich (NID_C)" and x:isVisible() end)
				local nEtcsAreas = getCollectionLength(etcsAreas)
				local infoMsg,NID_C
				if nEtcsAreas == 0 then
					NID_C = "ETCS-Area (NID_C)?"
					infoMsg = "The balise group is not located in an ETCS area."
				elseif nEtcsAreas > 1 then
					NID_C = string.format("%03d",etcsAreas[0].code)
					infoMsg = "The balise group is located in several ETCS areas."
				else
					NID_C = string.format("%03d",etcsAreas[0].code)
					infoMsg = nil
				end

				NID_BG = type(bg.code) == "number" and string.format("%05d",bg.code) or "Code (NID_BG)?"
				
				return string.format("%s %s %s", NID_C,NID_BG,tostring(bg.BaliseGroupTypes)),infoMsg and _info(infoMsg)
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ETC_eng_balise_bgTypes2packets()" ReturnType="String" Description="Returns a collection of ETCS packets as a function of DB Netz Balise Group Type(s).
			\nRef: Grundsätze zur Erstellung der Ausführungsplanung PT1 für ETCS Level 2 – Streckenausrüstung nach LH BTSF3 V2.2 819.1344A01, Kap. 5.1 Datenpunkttypen.">
  <Signature>String _JBTSA_ETC_eng_balise_bgTypes2packets(collectionOfBaliseGroupTypes bgTypes)</Signature>
  <Formula>
			function _JBTSA_ETC_eng_balise_bgTypes2packets(bgTypes)
				--TODO: Adapt the balise group type table to Bane NOR regulations:
				local etcsBalisePacketTable = {
					--DP-Typ","Beschreibung","Balisenanzahl","Enthaltene Pakete","Wirkrichtung Pakete","Wirkrichtung DP"
					{1,"Netzeinwahl-Datenpunkt","2","45","→","Ri L2"},
					{2,"Funkaufbau-Datenpunkt","2","42","→","Ri L2"},
					{3,"Ortungs-Datenpunkt vor Einstieg","2","-","-","Ri L2"},
					{4,"Einstiegs-Grenzdatenpunkt","2","3","46","↔","→","Ri Einstieg"},
					{5,"Abbruch-Datenpunkt vor Einstiegs-Grenzdatenpunkt","2","32, 42","→","Ri LNTC"},
					{6,"Erster Abbruch-DP für Rückrichtung an Einstiegs-Grenz-DP","2","32, 41, 42","→","Ri LNTC"},
					{8,"Datenpunkt für nationale Werte an Ländergrenze","2","3, 41","→","Ri D"},
					{9,"Datenpunkt zur Unterdrückung einer Zwangsbremsung bei startenden Zügen","2","145","→","Ri DP"},
					{20,"Datenpunkt an Signalen","2","137","→","Ri Signal"},
					{21,"Datenpunkt an Ausfahrsignalen","2","423, 45","46, 137","↔","→","Ri Signal"},
					{22,"Datenpunkt an Blockkennzeichen","1","-","-","Ri Signal"},
					{23,"Erster Ortungs-Datenpunkt vor Signalen","1","-","-","Ri Signal"},
					{24,"Zweiter Ortungs-Datenpunkt vor Signalen","1","-","-","Ri Signal"},
					{25,"Allgemeiner Ortungs-Datenpunkt","1","-","-","beide Ri"},
					{26,"TSR-Datenpunkt","2","654, 1414","→","Ri Signal"},
					{27,"Datenpunkt für Trusted Areas","2","-","-","beide Ri"},
					{28,"Datenpunkt für Start of Mission (SoM)","1 / 2","-","-","Ri Signal"},
					{29,"Metallwarnungs-Da-tenpunkt","2","67","→","Ri BMM"},
					{30,"Halt-Datenpunkt 1","1","12, 21, 27, 41, 254","→","Ri Signal"},
					{31,"Halt-Datenpunkt 2","1","41","↔","Ri Signal"},
					{32,"Datenpunkt zur Erhöhung der SR-Geschwindigkeit","2","3, 655, 141","→","RFR"},
					{33,"Datenpunkt zur Herabsetzung der SR-Geschwindigkeit","2","3, 66","→","RFR"},
					{34,"Datenpunkt zur TSR-Wiederholung","2","65, 141","→","RFR"},
					{35,"Zufahrtsicherungsdatenpunkt","2","41","→","Ri L2oS"},
					{36,"TSR-Datenpunkt 2","2","65, 141","→","Ri TSR"},
					{37,"Datenpunkt für Rücknahme TSR","1 / 2","66","→","RN TSR"},
					{38,"Datenpunkt für nationale Werte","2","3","↔","Ri L2 / Ri Bf"},
					{43,"Datenpunkt für Bahnübergänge mit Überwachungssignalen","2","656, 886, 141","254","→","↔","Ri ÜS"},
					{44,"Ortungsdatenpunkt für Bahnübergänge mit Überwachungssignalen","2","65","254","→","↔","Ri BÜ"},
					{45,"Datenpunkt für Einschaltstrecke von Bahnübergängen mit Überwachungssignalen oder fernüberwacht","2","72","→","Ri BÜ"},
					{50,"Grenz-Datenpunkt RBC-Wechsel","2","3, 45, 131","→","Ri Signal"},
					{60,"Grenz-Datenpunkt für reguläre Ausstiege","2","37, 41, 42, 658, 729, 1418","→","Ri LNTC"},
					{61,"Grenz-Datenpunkt für harte Ausstiege","2","36, 41, 42","→","Ri LNTC"},
					{62,"Hilfs-Grenzdatenpunkt 1","2","41","→","Ri LNTC","63","Hilfs-Grenzdatenpunkt 2","2","46","4110","→","←","Ri LNTC / Ri L2mS"}
				}
				--local tmp = tostring(bgTypes):gsub(","," "):gsub("/"," ")
				--iterator = for i,t in pairs(tmp) do return v end
				return etcsBalisePacketTable[1]
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ATC_code()" ReturnType="String" Description="Returns balise group object ID (7 chars) (Ref Signal-Prosj-ATC-7.11-Baliseidentitet).">
  <Signature>String _JBTSA_ATC_code()</Signature>
  <Formula>
			function _JBTSA_ATC_code()
				local a
				if Variant == "Hastighetsbalisegruppe" then
					a = "-H"
				elseif Variant == "Signalhøyningsbalisegruppe" then
					a = "-S"
				elseif Variant == "Grensebalisegruppe" then
					a = "-G"
				elseif Variant == "Lenkingsbalisegruppe" then
					a = "-L"
				elseif Variant == "Sporvekselbalisegruppe" then
					a = "-V"
				elseif Variant == "Hovedsignalbalisegruppe" then 
					a = "_"
				elseif Variant == "Forsignalbalisegruppe" then
					a = "F"
				elseif Variant == "Repeterbalisegruppe" then
					local s = rel_NssBaliseGroup_AppliesTo_Object
					local r,n = getRelatedObjects(s)
					if n == 0 then
						-- Balise group has no relation to a signal yet:
						return "UNFINISHED - Relate with '"..s.."'."
					else
						local sig = r[0] --should be a signal here, repeater groups don't repeat switches directly
						local bg = getRelatedObjects(rel_Object_Has_NssBaliseGroup,sig)
						bg = bg:filter(function (x) return x.Variant == "Repeterbalisegruppe" end)
						local nbg = getCollectionLength(bg)

						if nbg == 0 then
							--I am here, so n *must* be greater than zero:
							return "Should not happen - bad relation loop." 

						elseif nbg == 1 then
							-- I am the only repeater group:
							a = "R"

						elseif nbg == 2 then
							-- Assign 'R' to the one farthest away, 'U' to the one closest to signal: 
							local b1 = bg[0]
							local b2 = bg[1]
							if getDistance(b1,sig) &lt; getDistance(b2,sig) then
								b1,b2 = b2,b1
								--Now b1 is the first repeater group in the driving direction
							end
							if this.id == b1.id then
								--I am the closest repeater group:
								a = "U"
							else
								--I am the farthest repeater group:
								a = "R"
							end

						elseif nbg == 3 then
							-- Assign 'R' to the one farthest away, then 'U' and then 'V' to the one closest to signal:
							local b1 = bg[0]
							local b2 = bg[1]
							local b3 = bg[2]
							--Bubble sort, n=3
							if getDistance(b1,sig) &lt; getDistance(b2,sig) then b1,b2 = b2,b1 end	-- Pass 1
							if getDistance(b2,sig) &lt; getDistance(b3,sig) then b2,b3 = b3,b2 end	-- Pass 1
							if getDistance(b1,sig) &lt; getDistance(b2,sig) then b1,b2 = b2,b1 end	-- Pass 2
							if this.id == b1.id then
								--I am the first repeater group in the driving direction:
								a = "R"
							elseif this.id == b2.id then
								--I am the middle repeater group:
								a = "U"
							else 
								a = "V"
							end

						elseif nbg == 4 then
							-- Assign 'R' to the one farthest away, then 'U', 'V' and then 'W' to the one closest to signal:
							local b1 = bg[0]
							local b2 = bg[1]
							local b3 = bg[2]
							local b4 = bg[3]
							--Bubble sort, n=4
							if getDistance(b1,sig) &lt; getDistance(b2,sig) then b1,b2 = b2,b1 end	-- Pass 1
							if getDistance(b2,sig) &lt; getDistance(b3,sig) then b2,b3 = b3,b2 end	-- Pass 1
							if getDistance(b3,sig) &lt; getDistance(b4,sig) then b3,b4 = b4,b3 end	-- Pass 1
							if getDistance(b1,sig) &lt; getDistance(b2,sig) then b1,b2 = b2,b1 end	-- Pass 2
							if getDistance(b2,sig) &lt; getDistance(b3,sig) then b2,b3 = b3,b2 end	-- Pass 2
							if getDistance(b1,sig) &lt; getDistance(b2,sig) then b1,b2 = b2,b1 end	-- Pass 3
							if this.id == b1.id then
								--I am the first repeater group in the driving direction:
								a = "R"
							elseif this.id == b2.id then
								--I am the second repeater group in the driving direction:
								a = "U"
							elseif this.id == b3.id then
								--I am the third repeater group in the driving direction:
								a = "V"
							else --this.id == b4.id
								--I am the fourth and last repeater group in the driving direction, closest to the signal:
								a = "W"
							end
						end
					end
				end
				local ocpMsg = "Create an Operation / Control Point (OCP) area around your object and refresh it to replace '???' with the relevant OCP's codes."
				if Variant == "Hastighetsbalisegruppe" then
					local r,n = getRelatedObjects(rel_NssBaliseGroup_HasBrakingCurveTargetIn_NssBaliseGroup)
					local ocp
					if n == 0 then
						--Group is braking curve target:
						ocp = NOBN_com_getOcpCode(getObjectFromId(id))
					else
						--Warning board, use target's ocp:
						ocp = NOBN_com_getOcpCode(r[0])
					end
					return ocp..a..string.format("%02d",Seq)
				elseif Variant == "Signalhøyningsbalisegruppe" or Variant == "Sporvekselbalisegruppe" then
					local ocp = NOBN_com_getOcpCode(this)
					if Seq == 0 then
						return ocp..a.."UNFINISHED - Set balise group's 'Seq' property to the required balise group number (01..99), use '100' for '0'."
					else
						return ocp..a..string.format("%02d",Seq%100)
					end
				elseif Variant =="Lenkingsbalisegruppe" or Variant == "Grensebalisegruppe" then
					local s = rel_NssBaliseGroup_LinksTo_NssBaliseGroup
					local r,n = getRelatedObjects(s)
					local ocp
					if n == 0 then
						ocp = NOBN_com_getOcpCode(getObjectFromId(id))
					else
						ocp = NOBN_com_getOcpCode(r[0])
					end
					if Seq == 0 then
						return ocp..a.."UNFINISHED - Set balise group's 'Seq' property to the required balise group number (01..99), use '100' for '0'."
					else
						return ocp..a..string.format("%02d",Seq%100)
					end
				else
					local s = rel_NssBaliseGroup_AppliesTo_Object
					local r,n = getRelatedObjects(s)
					if n == 0 then
						return "UNFINISHED - Relate with '"..s.."'."
					else
						--Assume r[0] holds object dictating the group's number:
						local ocp = NOBN_com_getOcpCode(r[0])
						if r[0].code == nil then 
							return ocp..a.."???", _info(ocpMsg)
						elseif tostring(r[0].code):match("%d+") == nil then
							return ocp..a.."???", _info(ocpMsg)
						else
							return ocp..a..tostring(r[0].code):match("%d+"):sub(-3) 
						end 
					end
				end
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ATB_code()" ReturnType="String" Description="Returns balise object Id (8 chars) from the 7-char balise group ID and the P/A/B/C balise type (Ref Signal-Prosj-ATC-7.11-Baliseidentitet).">
  <Signature>String _JBTSA_ATB_code()</Signature>
  <Formula>
			function _JBTSA_ATB_code()
				local s = rel_NssBalise_BelongsTo_NssBaliseGroup
				local r,n = getRelatedObjects(s)
				local bg
				if n == 0 then  
					return "UNFINISHED - Relate with '"..s.."' to balise group.",
							_info("Balises derive their ID (code property) from their balise group's code, direction, and the balise's relative position within the balise group. The 'A' balise must be related to the balise group using the relation for position defining balise.")
				else
					bg = r[0]
				end
				if bg.dir ~= "up" and bg.dir ~= "down" then 
					return "Bad direction ["..bg.dir.."]",_warning 
				end
				
				local sq = rel_NssBaliseGroup_HasPositionDeterminedBy_NssBalise
				local q,nq = getRelatedObjects(sq,bg)
				local isA
				local siblings, nsiblings
				local Abalise
				if nq == 0 then 
					return "UNFINISHED - No A-balise in balise group - relate to balise group with '"..sq.."'."
				else
					Abalise = q[0]
					local _qq,nqq = getRelatedObjects(rel_NssBalise_DeterminesPositionFor_NssBaliseGroup)
					isA = (nqq == 1) --it's me...
					siblings,nsiblings = getRelatedObjects(rel_NssBaliseGroup_Contains_NssBalise,bg)
				end

				local suffix
			
				if isA == true then
					suffix = "A"
				else
					if nsiblings == 2 then
						suffix = "B"            
					elseif nsiblings &gt; 2 then
						local Pbalise={id=0, diff=math.huge}
						local Bbalise={id=0, diff=math.huge}
						local Cbalise={id=0, diff=math.huge}
						for i = 0, nsiblings-1 do
							local diff = (bg.dir == "up") and (siblings[i].ReferenceMileage - Abalise.ReferenceMileage) or (Abalise.ReferenceMileage - siblings[i].ReferenceMileage)
							if (diff &lt; 0) then
								if Pbalise.id == 0 then
									Pbalise.id = siblings[i].id
									Pbalise.diff = diff
								elseif Pbalise.diff &gt; diff then
									Pbalise.id = siblings[i].id
									Pbalise.diff = diff
								end                
							elseif (diff &gt; 0) then
								if Bbalise.id == 0 then
									Bbalise.id = siblings[i].id
									Bbalise.diff = diff
								elseif Bbalise.diff &gt; diff then
									Cbalise.id = Bbalise.id
									Cbalise.diff = Bbalise.diff
									Bbalise.id = siblings[i].id
									Bbalise.diff = diff                    
								elseif Cbalise.diff &gt; diff then
									Cbalise.id = siblings[i].id
									Cbalise.diff = diff                    
								end                        
							else
								--diff==0: Do nothing
							end
						end    
						if this.id == Bbalise.id then 
							suffix = "B"
						elseif this.id == Cbalise.id then
							suffix = "C"
						elseif this.id == Pbalise.id then
							suffix = "P"
						else
							suffix = "WARNING - Bad balise group configuration - cannot determine PABC type.",_warning
						end
					end
				end
				local groupId = RC__identify(bg)
				return groupId:sub(1,2):lower():match("unfinished") and suffix or groupId..suffix
			end 
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ATB_TextAbove()" ReturnType="String" Description="Returns text over the NSS balise 2D symbol (Ref Signal-Prosj.-ATC-7.1/7.2-Enkeltrettede/Dobbeltrettede balisegrupper).">
  <Signature>String _JBTSA_ATB_TextAbove()</Signature>
  <Formula>
			function _JBTSA_ATB_TextAbove()
				local s = rel_NssBalise_BelongsTo_NssBaliseGroup
				local r,n = getRelatedObjects(s)
				if n == 0 then
					return "UNFINISHED - Relate with '"..s.."' to NSS balise group."
				else
					local bg = r[0]
					local t = code:sub(-1)
					if bg.Variant == "Hastighetsbalisegruppe" then
						if t == "A" then
							return "H"
						elseif t == "B" then
							if Variant:lower():match("fylt") then
								return "H"
							else
								return ""
							end
						elseif t == "C" then
							return ""
						else
							return "?",_warning, _info("WARNING - Cannot determine text above balise symbol (balise is neither A, B or C balise).")
						end
					elseif bg.Variant == "ET-balisegruppe" then
						if t == "A" then
							return "EH"
						elseif t == "B" then
							if Variant:lower():match("fylt") then
								return "EH"
							else
								return ""
							end
						elseif t == "C" then
							return ""
						else
							return "?",_warning, _info("WARNING - Cannot determine text above balise symbol (balise is neither A, B or C balise).")
						end
					elseif code:sub(-1) == "P" then
						return "P"
					else
						return ""
					end
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="_JBTSA_ATB_TextBelow()" ReturnType="String" Description="Returns text below the NSS balise 2D symbol (Ref Signal-Prosj.-ATC-7.1/7.2-Enkeltrettede/Dobbeltrettede balisegrupper).">
  <Signature>String _JBTSA_ATB_TextBelow()</Signature>
  <Formula>
			function _JBTSA_ATB_TextBelow()
				local r,n = getRelatedObjects(rel_EtcsBalise_DeterminesPositionFor_EtcsBaliseGroup)
				if n &gt; 0 then
					return RC__identify(r[0])
				else
					return ""
				end
			end
		</Formula>
 </LuaFunction>
 <ObjectType DataType="tMarker" Class="RailwayPlacedObject" LuaName="rctype_EtcsBaliseGroup" Name="JBTSA_ETC ETCS balisegruppe" Layer="JBTSA_ETC" Color="ByLayer" Group="Signal/Hastighetskontroll/ETCS" AttMirrorX="{% if dir == 'down' %}true{% else %}false{% endif %}" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>ETCS_balisegruppe</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="ETCS L2 balisegruppe, enkel">
   <Variant Name="ETCS L2 balisegruppe, enkel"/>
   <Variant Name="ETCS L2 balisegruppe, dobbel"/>
  </Variants>
  <CustomProperty DataType="String" Name="BaliseGroupTypes" DisplayName="Balise group types" DefaultValue="BG type?" Description="ETCS balise group packet content.
				\nSee DB Netz Ri 819.1344A01, 'Grundsätze zur Erstellung der Ausführungsplanung PT1 für ETCS Level 2 – Streckenausrüstung nach LH BTSF3 V2.2, Tabelle 9.'
				\n
				\nTODO: Adapt code to a similar document for Bane NOR."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_BaliseGroupTypes" DisplayName="Validation of the balise group type coding" Description="Validation of the balise group type coding, according to DBAG Ri 819.1344A01 p. 60.
				\nExamples: '21&lt;', '&gt;21', '21&lt;&gt;26', '24,28&lt;37&gt;21'.
				\n
				\nTODO: Adapt to the corresponding Bane NOR regulations."/>
  <LuaExpression Name="mc_BaliseGroupTypes" IsModelCheck="true">
   <Formula>_JBTSA_ETC_chk_BaliseGroupTypes()</Formula>
  </LuaExpression>
  <SetValue Key="code" Value="NID_BG?"/>
  <LuaExpression Name="name">
   <Formula>_JBTSA_ETC_name()</Formula>
  </LuaExpression>
  <LuaExpression Name="Mileage">
   <Formula>_JBTSA_ETC_Mileage()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * 1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="Variant">
   <Formula>_JBTSA_ETC_Variant()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_ETC_Variant()" ReturnType="String" Description="Specifies the variant, depending on the number of balises in the group and the group's direction property ('up'/'down').">
   <Signature>String _JBTSA_ETC_Variant()</Signature>
   <Formula>
				function _JBTSA_ETC_Variant()
					local balises,nBalises = getRelatedObjects(rel_EtcsBaliseGroup_Contains_EtcsBalise)
					if nBalises == 0 then
						return getPropertyValue("Variant"),_info("UNFINISHED - Balise group has no balises")
					elseif nBalises == 1 then
						return "ETCS L2 balisegruppe, enkel"
					elseif nBalises &gt;= 2 then
						return "ETCS L2 balisegruppe, dobbel"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>Variant</Formula>
  </LuaExpression>
  <TextPositionLuaExpression Name="NAME">
   <Formula>RC__TextAttributePosition((RightSided and 1 or -1)*5.25, 0)</Formula>
  </TextPositionLuaExpression>
  <TextRotationLuaExpression Name="NAME">
   <Formula>RC__TextAttributeRotation(0)</Formula>
  </TextRotationLuaExpression>
  <InsertPointObject Name="ETCS L2 balisegruppe, enkel" DisplayBlockName="NO-BN-2D-JBTSA_ETC-ETCS-BALISEGRUPPE-ENKEL-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="ETCS L2 balisegruppe, dobbel" DisplayBlockName="NO-BN-2D-JBTSA_ETC-ETCS-BALISEGRUPPE-DOBBEL-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true">
   <Rotation AddAngle="{% if dir == 'up' %}0{% elsif dir == 'down' %}180{% else %}45{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_ETC-ETCS-BALISEGRUPPE
				{% if Variant contains "enkel" %}ENKEL
				{% elsif Variant contains "dobbel" %}DOBBEL
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="TEKSTOVER">
    <Value>"TODO: tekst over"</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TEKSTUNDER">
    <Value>"TODO: tekst under"</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="-3" Y="0" TargetSpace="ETCS_balise"/>
    <SnapPoint X="0" Y="0" TargetSpace="ETCS_balise"/>
    <SnapPoint X="3" Y="0" TargetSpace="ETCS_balise"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tBalise" Class="RailwayPlacedObject" LuaName="rctype_EtcsBalise" Name="JBTSA_ETB ETCS balise" Layer="JBTSA_ETB" Color="ByLayer" Group="Signal/Hastighetskontroll/ETCS" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>ETCS_balise</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="ETCS-balise, fast">
   <Variant Name="ETCS-balise, fast"></Variant>
   <Variant Name="ETCS-balise, styrt"></Variant>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="BaliseType" DefaultValue="ETCS Eurobalise">
   <Values>
    <Value>ETCS Eurobalise</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="String" Name="TextAbove" DisplayName="Tekst over" DefaultValue="" Description="Text above balise symbol [string] according to Bane NOR TRV 550 ch. 10 ATC tables 7.1 and 7.2." ReadOnly="false" StandardValuesFromLuaFormula="false" StandardValuesExclusive="false" InvertOnAlignmentReverse="false"/>
  <LuaExpression Name="TextAbove">
   <Formula>_JBTSA_ETB_TextAbove()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="TextBelow" DisplayName="Tekst under" DefaultValue="" Description="Returns Text below  balise symbol [string] according to Bane NOR TRV 550 ch. 10 ATC table 7.11." ReadOnly="false" StandardValuesFromLuaFormula="false" StandardValuesExclusive="false" InvertOnAlignmentReverse="false"/>
  <LuaExpression Name="TextBelow">
   <Formula>_JBTSA_ETB_TextBelow()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_ETB_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_ETB_Geometry3DName()" ReturnType="String" Description="Returns the 3D model name for an ETCS balise.">
   <Signature>String _JBTSA_ETB_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_ETB_Geometry3DName()
					local s = "NO-BN-3D-SA-ETB-ETCS"
					if BaliseType == "ETCS Eurobalise" then s = s.."-EUROBALISE"
					else return "Unknown BaliseType ["..BaliseType.."].",_warning
					end
					if Variant:lower():match("fast") then s = s.."-FAST"
					elseif Variant:lower():match("styrt") then s = s.."-STYRT"
					else return "Unknown Variant ["..Variant.."].",_warning
					end
					return s, _info(Variant.." "..BaliseType.." balise.")
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToNextBalise" DisplayName="Avstand til neste balise" Description="
			Below 2.35 m: ERROR - Balise magnetic fields may merge - increase distance\n
			2.35-2.8 m: WARNING - Outside recommended tolerance - increase distance\n
			2.8-3.2 m: OK - The train will treat the balises as in the same group\n
			3.2-3.5 m: WARNING - Outside recommended tolerance - decrease distance\n
			3.5-10.5 m: ERROR - The train cannot determine balise group assignment\n
			10.5-11.8 m: WARNING - Outside recommended tolerance - Increase distance\n
			Above 11.8 m: OK - The train will treat the balises as belonging to different groups"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToPreviousBalise" DisplayName="Avstand til forrige balise" Description="
			Below 2.35 m: ERROR - Balise magnetic fields may merge - increase distance\n
			2.35-2.8 m: WARNING - Outside recommended tolerance - increase distance\n
			2.8-3.2 m: OK - The train will treat the balises as in the same group\n
			3.2-3.5 m: WARNING - Outside recommended tolerance - decrease distance\n
			3.5-10.5 m: ERROR - The train cannot determine balise group assignment\n
			10.5-11.8 m: WARNING - Outside recommended tolerance - Increase distance\n
			Above 11.8 m: OK - The train will treat the balises as belonging to different groups"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToTrackVertically" DisplayName="Avstand til spor i høyden" Description="
			&lt; 0.8 m: OK - Balise is close to a neighbouring track which we consider to be part of a switch or crossing\n
			0.8-7.0 m: ERROR - Balise may be read by a train running in a track above/under us - increase vertical track separation or move balise\n
			7.0-8.0 m: WARNING - Outside recommended tolerance - increase vertical track separation or move balise\n
			&gt; 8.0m: OK - A Train in a track above/under us will pass without reading the balise"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToTrackSideways" DisplayName="Avstand til nabospor" Description="
			Below 2 m: ERROR – Balise may be read by a train in the neighbouring track – increase distance\n
			2-2.6 m: WARNING – Allowed on condition that at least one of the group's A- and B-balise is above 2.6 m from neighbouring track (large balise) resp. 2.3 m (minibalise) – increase distance\n
			Over 2.6 m: OK – Train in neighbouring track will pass without reading the balise"/>
  <LuaExpression Name="code">
   <Formula>_JBTSA_ETB_code()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>code:lower():match("unfinished") and code or ""</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>NOBN_sig_getBaliseGroupDirection()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_DistanceToPreviousBalise" IsModelCheck="true">
   <Formula>NOBN_sig_chkBaliseDistanceToPreviousBalise()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_DistanceToNextBalise" IsModelCheck="true">
   <Formula>NOBN_sig_chkBaliseDistanceToNextBalise()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_DistanceToTrackVertically" IsModelCheck="true">
   <Formula>NOBN_sig_chkBaliseDistanceToTrackVertically()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_DistanceToTrackSideways" IsModelCheck="true">
   <Formula>NOBN_sig_chkBaliseDistanceToTrackSideways()</Formula>
  </LuaExpression>
  <InsertPointObject Name="ETCS-balise, fast" DisplayBlockName="NO-BN-2D-JBTSA_ETB-ETCS-BALISE-FAST-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="ETCS-balise, styrt" DisplayBlockName="NO-BN-2D-JBTSA_ETB-ETCS-BALISE-STYRT-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_ETB-ETCS-BALISE
				{% if Variant contains 'fast' %}FAST
				{% elsif Variant contains 'styrt' %}STYRT
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="TEKSTOVER">
    <Value>{{TextAbove}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TEKSTUNDER">
    <Value>{{TextBelow}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="false">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_ETB-ETCS-BALISE
				{% if Variant contains 'fast' %}FAST
				{% elsif Variant contains 'styrt' %}STYRT
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				Metric
			</BlockNameFormat>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{code}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="-3" Y="0" TargetSpace="ETCS_balisegruppe"/>
    <SnapPoint X="0" Y="0" TargetSpace="ETCS_balisegruppe"/>
    <SnapPoint X="3" Y="0" TargetSpace="ETCS_balisegruppe"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tMarker" Class="RailwayPlacedObject" LuaName="rctype_BaliseGroup" Name="JBTSA_ATC NSS balisegruppe" Layer="JBTSA_ATC" Color="ByLayer" Group="Signal/Hastighetskontroll/NSS (ATC2)" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>NSS_balisegruppe</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Hovedsignalbalisegruppe">
   <Variant Name="Hovedsignalbalisegruppe"/>
   <Variant Name="Forsignalbalisegruppe"/>
   <Variant Name="Repeterbalisegruppe"/>
   <Variant Name="Sporvekselbalisegruppe"/>
   <Variant Name="Hastighetsbalisegruppe"/>
   <Variant Name="Lenkingsbalisegruppe"/>
   <Variant Name="Signalhøyningsbalisegruppe"/>
   <Variant Name="ET-balisegruppe"/>
   <Variant Name="Grensebalisegruppe"/>
   <Variant Name="Radioområdebalisegruppe"/>
   <Variant Name="Diversebalisegruppe"/>
  </Variants>
  <LuaExpression Name="code">
   <Formula>_JBTSA_ATC_code()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>code</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>Variant</Formula>
  </LuaExpression>
  <InsertPointObject Name="Hovedsignalbalisegruppe" DisplayBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="10">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Forsignalbalisegruppe" DisplayBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="10">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Repeterbalisegruppe" DisplayBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="10">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Sporvekselbalisegruppe" DisplayBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="10">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Hastighetsbalisegruppe" DisplayBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="10">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Lenkingsbalisegruppe" DisplayBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="10">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Signalhøyningsbalisegruppe" DisplayBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="10">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="ET-balisegruppe" DisplayBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="10">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Grensebalisegruppe" DisplayBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="10">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Radioområdebalisegruppe" DisplayBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="10">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <InsertPointObject Name="Diversebalisegruppe" DisplayBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="10">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_ATC-NSS-BALISEGRUPPE-STANDARD-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="-3" Y="0" TargetSpace="NSS_balise"/>
    <SnapPoint X="0" Y="0" TargetSpace="NSS_balise"/>
    <SnapPoint X="3" Y="0" TargetSpace="NSS_balise"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tBalise" Class="RailwayPlacedObject" LuaName="rctype_Balise" Name="JBTSA_ATB NSS balise" Layer="JBTSA_ATB" Color="ByLayer" Group="Signal/Hastighetskontroll/NSS (ATC2)" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>NSS_balise</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="MileageIncreasesTowardsLeft" DisplayName="Km stiger mot venstre" DefaultValue="false" Category="Presentation" Description="The 'MileageIncreasesTowardsLeft' property [boolean] shows whether the object's own alignment has mileage which increases towards the left in the drawing, with the UCS Y-axis pointing upwards. Usage: Used in DNA for orienting 2D symbols correctly of for adjusting left/right parts of texts etc."/>
  <LuaExpression Name="MileageIncreasesTowardsLeft">
   <Formula>NOBN_com_mileageIncreasesTowardsLeft()</Formula>
  </LuaExpression>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>0</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="CCS"/>
   <LuaExpression Name="Rotation.Z">
    <Formula>NOBN_trk_getYawFromDir()</Formula>
   </LuaExpression>
  </DynamicProperty>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Balise fylt/fast">
   <Variant Name="Fylt/fast"></Variant>
   <Variant Name="Fylt/styrt"></Variant>
   <Variant Name="Tom/fast"></Variant>
   <Variant Name="Tom/styrt"></Variant>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="BaliseType" DefaultValue="NSS parallellbalise">
   <Values>
    <Value>NSS parallellbalise</Value>
    <Value>NSS seriebalise, stor</Value>
    <Value>NSS seriebalise, mini</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="String" Name="TextAbove" DisplayName="Tekst over" DefaultValue="" Description="Text above balise symbol [string] according to Bane NOR TRV 550 ch. 10 ATC tables 7.1 and 7.2." ReadOnly="false" StandardValuesFromLuaFormula="false" StandardValuesExclusive="false" InvertOnAlignmentReverse="false"/>
  <CustomProperty DataType="String" Name="TextBelow" DisplayName="Tekst under" DefaultValue="" Description="Text below  balise symbol [string] according to Bane NOR TRV 550 ch. 10 ATC table 7.11." ReadOnly="false" StandardValuesFromLuaFormula="false" StandardValuesExclusive="false" InvertOnAlignmentReverse="false"/>
  <CustomProperty DataType="Boolean" Name="FirstInGroup" DisplayName="Første i gruppe" DotLiquidExpression="
         {% if Variant == 'Fylt/fast' %}True
         {% elsif Variant == 'Fylt/styrt' %}True
         {% elsif Variant == 'Tom/fast' %}False
         {% elsif Variant == 'Tom/styrt' %}False
         {% endif %}"/>
  <CustomProperty DataType="Boolean" Name="Switchable" DisplayName="Styrt" DotLiquidExpression="
				{% if Variant == 'Fylt/fast' %}False
				{% elsif Variant == 'Fylt/styrt' %}True
				{% elsif Variant == 'Tom/fast' %}False
				{% elsif Variant == 'Tom/styrt' %}True
				{% endif %}"/>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_ATB_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_ATB_Geometry3DName()" ReturnType="String" Description="Returns the 3D model name for an NSS balise.">
   <Signature>String _JBTSA_ATB_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_ATB_Geometry3DName()
					local s = "NO-BN-3D-SA-ATB-NSS"
					if BaliseType == "NSS parallellbalise" then s = s.."-PARALLELLBALISE"
					elseif BaliseType == "NSS seriebalise, stor" then s = s.."-SERIEBALISE"
					elseif BaliseType == "NSS seriebalise, mini" then s = s.."-MINIBALISE"
					else return "Unknown BaliseType ["..BaliseType.."].",_warning
					end
					if Variant:lower():match("fast") then s = s.."-FAST"
					elseif Variant:lower():match("styrt") then s = s.."-STYRT"
					else return "Unknown Variant ["..Variant.."].",_warning
					end
					return s, _info(Variant.." "..BaliseType.." balise.")
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToNextBalise" DisplayName="Avstand til neste balise" Description="
			Below 2.35 m: ERROR - Balise magnetic fields may merge - increase distance\n
			2.35-2.8 m: WARNING - Outside recommended tolerance - increase distance\n
			2.8-3.2 m: OK - The train will treat the balises as in the same group\n
			3.2-3.5 m: WARNING - Outside recommended tolerance - decrease distance\n
			3.5-10.5 m: ERROR - The train cannot determine balise group assignment\n
			10.5-11.8 m: WARNING - Outside recommended tolerance - Increase distance\n
			Above 11.8 m: OK - The train will treat the balises as belonging to different groups"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToPreviousBalise" DisplayName="Avstand til forrige balise" Description="
			Below 2.35 m: ERROR - Balise magnetic fields may merge - increase distance\n
			2.35-2.8 m: WARNING - Outside recommended tolerance - increase distance\n
			2.8-3.2 m: OK - The train will treat the balises as in the same group\n
			3.2-3.5 m: WARNING - Outside recommended tolerance - decrease distance\n
			3.5-10.5 m: ERROR - The train cannot determine balise group assignment\n
			10.5-11.8 m: WARNING - Outside recommended tolerance - Increase distance\n
			Above 11.8 m: OK - The train will treat the balises as belonging to different groups"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToTrackVertically" DisplayName="Avstand til spor i høyden" Description="
			&lt; 0.8 m: OK - Balise is close to a neighbouring track which we consider to be part of a switch or crossing\n
			0.8-7.0 m: ERROR - Balise may be read by a train running in a track above/under us - increase vertical track separation or move balise\n
			7.0-8.0 m: WARNING - Outside recommended tolerance - increase vertical track separation or move balise\n
			&gt; 8.0m: OK - A Train in a track above/under us will pass without reading the balise"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_DistanceToTrackSideways" DisplayName="Avstand til nabospor" Description="
			Below 2 m: ERROR – Balise may be read by a train in the neighbouring track – increase distance\n
			2-2.6 m: WARNING – Allowed on condition that at least one of the group's A- and B-balise is above 2.6 m from neighbouring track (large balise) resp. 2.3 m (minibalise) – increase distance\n
			Over 2.6 m: OK – Train in neighbouring track will pass without reading the balise"/>
  <LuaExpression Name="TextAbove">
   <Formula>_JBTSA_ATB_TextAbove()</Formula>
  </LuaExpression>
  <LuaExpression Name="TextBelow">
   <Formula>_JBTSA_ATB_TextBelow()</Formula>
  </LuaExpression>
  <LuaExpression Name="code">
   <Formula>_JBTSA_ATB_code()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>code:lower():match("unfinished") and code or ""</Formula>
  </LuaExpression>
  <LuaExpression Name="dir">
   <Formula>NOBN_sig_getBaliseGroupDirection()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 0.01 or -0.01</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_DistanceToNextBalise" IsModelCheck="true">
   <Formula>NOBN_sig_chkBaliseDistanceToNextBalise()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_DistanceToPreviousBalise" IsModelCheck="true">
   <Formula>NOBN_sig_chkBaliseDistanceToPreviousBalise()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_DistanceToTrackVertically" IsModelCheck="true">
   <Formula>NOBN_sig_chkBaliseDistanceToTrackVertically()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_DistanceToTrackSideways" IsModelCheck="true">
   <Formula>NOBN_sig_chkBaliseDistanceToTrackSideways()</Formula>
  </LuaExpression>
  <InsertPointObject Name="Fylt/fast" DisplayName="Balise fylt/fast" DisplayBlockName="NO-BN-2D-JBTSA_ATB-NSS-BALISE-FYLT-FAST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateWithUcs="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Fylt/styrt" DisplayName="Balise fylt/styrt" DisplayBlockName="NO-BN-2D-JBTSA_ATB-NSS-BALISE-FYLT-STYRT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateWithUcs="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Tom/fast" DisplayName="Balise tom/fast" DisplayBlockName="NO-BN-2D-JBTSA_ATB-NSS-BALISE-TOM-FAST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateWithUcs="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Tom/styrt" DisplayName="Balise tom/styrt" DisplayBlockName="NO-BN-2D-JBTSA_ATB-NSS-BALISE-TOM-STYRT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateWithUcs="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_ATB-NSS-BALISE-TOM-FAST-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_ATB-NSS-BALISE
				{% if Variant == 'Fylt/fast'or Variant == 'Fylt/styrt' %}FYLT
				{% else %}TOM
				{% endif %}
				{% if Variant == 'Fylt/styrt' or Variant == 'Tom/styrt' %}STYRT
				{% else %}FAST
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="TEKSTOVER">
    <Value>{{TextAbove}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TEKSTUNDER">
    <Value>{{TextBelow}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_ATB-NSS-BALISE-TOM-FAST-Metric" AllowSymbolMove="false">
   <Rotation AddAngle="{% if MileageIncreasesTowardsLeft %}180{% else %}0{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_ATB-NSS-BALISE
				{% if Variant == 'Fylt/fast'or Variant == 'Fylt/styrt' %}FYLT
				{% else %}TOM
				{% endif %}
				{% if Variant == 'Fylt/styrt' or Variant == 'Tom/styrt' %}STYRT
				{% else %}FAST
				{% endif %}
				Metric
			</BlockNameFormat>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{code}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="-3" Y="0" TargetSpace="NSS_balisegruppe"/>
    <SnapPoint X="0" Y="0" TargetSpace="NSS_balisegruppe"/>
    <SnapPoint X="3" Y="0" TargetSpace="NSS_balisegruppe"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <LuaFunction Name="NOBN_sig_getSignalNumber()" ReturnType="String" Description="Returns the number extracted from the signal's Code, e.g. '4313UL' or 'UL4313' or '4313' => '4313'.">
  <Signature>String NOBN_sig_getSignalNumber(tSignal s)</Signature>
  <Formula>
			function NOBN_sig_getSignalNumber(s)
				if s == nil then s = getObjectFromId(id) end -- Assume object really IS a signal...
				local c = tostring(s.code)
				if c == nil then return "" end
				if c:match("%d+%D+") then
					-- digits + nondigits:
					return c:match("%d+%D+"):match("%d+")
				elseif c:match("%D+%d+") then
					-- nondigits + digits:
					return c:match("%D+%d+"):match("%d+")
				elseif c:match("%d+") then
					-- just digits:
					return c:match("%d+")
				else
					-- just nondigits, or empty:
					return ""
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_getSignalLitra()" ReturnType="String" Description="Returns the litra extracted from the signal's Code, e.g. '4313UL' or 'UL4313' or 'UL' => 'UL'.">
  <Signature>String NOBN_sig_getSignalLitra(tSignal s)</Signature>
  <Formula>
			function NOBN_sig_getSignalLitra(s)
				if s == nil then s = getObjectFromId(id) end -- Assume object really IS a signal...
				local c = tostring(s.code)
				if c == nil then return "" end
				if c:match("%d+%D+") then
					-- digits + nondigits:
					return c:match("%d+%D+"):match("%D+")
				elseif c:match("%D+%d+") then
					-- nondigits + digits:
					return c:match("%D+%d+"):match("%D+")
				elseif c:match("%D+") then
					-- just nondigits:
					return c:match("%D+")
				else
					-- just digits, or empty:
					return ""
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_getSignalShortName()" ReturnType="String" Description="Returns the formated short name extracted from a main/distant signal's Code, e.g. '4313UL' or 'UL4313' => '4313(UL)'.">
  <Signature>NOBN_sig_getSignalShortName()</Signature>
  <Formula>
			function NOBN_sig_getSignalShortName()
				if NOBN_sig_getSignalLitra() == "" then 
					return NOBN_sig_getSignalNumber()
				else
					return NOBN_sig_getSignalLitra().."("..NOBN_sig_getSignalNumber()..")"
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_getSignalFullName()" ReturnType="String" Description="Returns the elaborate name of the signal, formated according to Bane NOR standard practice.">
  <Signature>String NOBN_sig_getSignalFullName()</Signature>
  <Formula>
function NOBN_sig_getSignalFullName()
	local t
	if RcType == rctype_SignErtmsMarkerBoard then t = "Mb."
		
	elseif RcType == rctype_SignErtmsShuntingSignal then return "EDs.R"..NOBN_sig_getSignalNumber()
	
	elseif RcType == rctype_SignErtmsElectrificationBoard then
		if Variant == "E65H Lowering of pantograph, announcement" then t = "E65H"
		elseif Variant == "E65J Lowering of pantograph, location" then t = "E65J"
		elseif Variant == "E65K Raising of pantograph, location" then t = "E65K"
		elseif Variant == "E65L Dead section, announcement" then t = "E65L"
		elseif Variant == "E65M Disconnection in dead section" then t = "E65M"
		elseif Variant == "E65N Connection after dead section" then t = "E65N"
		end
		
	elseif RcType == rctype_SignErtmsTemporarySpeedRestrictionBoard then
		if Variant == "E200 Speed restriction lifted" then t = "E200"
		elseif Variant == "E201 Speed restriction 10" then t = "E201"
		elseif Variant == "E202 Speed restriction 20" then t = "E202"
		elseif Variant == "E203 Speed restriction 30" then t = "E203"
		end
	
	elseif RcType == rctype_SignErtmsMiscBoard then
		if Variant == "E36A Level crossing, location" then t = "E36"
		elseif Variant == "E36B Level crossing, announcement" then t = "E36"
		elseif Variant == "E37A Level transition" then t = "E37A"
		elseif Variant == "E37B Level zero" then t = "E37B"
		elseif Variant == "E38 Avalanche area" then t = "E38"
		elseif Variant == "E39 Frost gate" then t = "E39"
		elseif Variant == "E106 Stop for shunting" then t = "E106"
		elseif Variant == "E107 Unsecured area with handoperated points" then t = "E107"
		elseif Variant == "E204 GSM-R network Norway" then t = "E204"
		end
	
	elseif RcType == rctype_Signal then
		if (MainSignal == "Hs1") then
			t = "Stopplykt"
		elseif (MainSignal == "RepHs1" or MainSignal == "RepHs2") then 
			t = "Rep.Hs."
		elseif (MainSignal ~= "-") then 
			t = "Hs."
		elseif (DistantSignal ~= "-") then
			t = "Fs."
		elseif (EndOfTrainRouteSignal ~= "-") then
			t = "S66."
		elseif (DwarfSignal ~= "-") then
			return "Ds.R"..NOBN_sig_getSignalNumber()
		elseif (HighShuntingSignal ~= "-") then
			return "Z."..code
		else
			t = "Sig." --Covers all the remaining - MKs, FKs, Ls, LHs, AVs, BPs
		end
	
	elseif RcType == rctype_FictitiousSignal then
		t = "Fik."
		if Variant == "Viapunkt for betjeningsanlegg" then return t..code
		elseif Variant == "Fiktivt sluttpunkt for togvei" then return t..NOBN_sig_getSignalShortName().." (HTv)"
		elseif Variant == "Fiktivt sluttpunkt for skiftevei" then return t..NOBN_sig_getSignalShortName().." (DTv)"
		elseif Variant == "Fiktivt sluttpunkt for togvei og skiftevei" then return t..NOBN_sig_getSignalShortName().." (HTv/DTv)"
		else 
			return t..NOBN_sig_getSignalShortName().." (Unrecognized variant ["..Variant.."])",_warning  
		end

	elseif RcType == rctype_TrackSignal then
		t = "Tsp."..code
		
	elseif RcType == rctype_BridgeAndFrostDoorSignal then
		t = "Brusignal/Frostportsignal"..code
		
	elseif RcType == rctype_AvalancheSignal then
		t = "Rasvarslingssignal "..code
		
	elseif RcType == rctype_LevelCrossingSignalTowardsRoad then
		t = "Veisignal "..code
		
	elseif RcType == rctype_LevelCrossingSignalTowardsRail then
		t = (Variant:match("forsignal") and "PLO-Fs." or "PLO.")..code

	else
		t = "Bad signal type ["..RcType.."] (code='"..code.."').",_warning
	end
	return t..NOBN_sig_getSignalShortName()
end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_getSignalPartNames()" ReturnType="String" Description="Returns the signal component names, formated according to Bane NOR standard practice.">
  <Signature>String NOBN_sig_getSignalPartNames()</Signature>
  <Formula>
function NOBN_sig_getSignalPartNames()
	local s = ""
	local errMsg = "*** Unrecognized signal configuration ***"
	if RcType == rctype_SignErtmsMarkerBoard then 
		s = "E35"
		
	elseif RcType == rctype_SignErtmsShuntingSignal then 
		s = "EDS"
		
	elseif RcType == rctype_SignErtmsElectrificationBoard then
		if Variant == "E65H Lowering of pantograph, announcement" then t = "E65H"
		elseif Variant == "E65J Lowering of pantograph, location" then t = "E65J"
		elseif Variant == "E65K Raising of pantograph, location" then t = "E65K"
		elseif Variant == "E65L Dead section, announcement" then t = "E65L"
		elseif Variant == "E65M Disconnection in dead section" then t = "E65M"
		elseif Variant == "E65N Connection after dead section" then t = "E65N"
		end
		
	elseif RcType == rctype_SignErtmsTemporarySpeedRestrictionBoard then
		if Variant == "E200 Speed restriction lifted" then t = "E200"
		elseif Variant == "E201 Speed restriction 10" then t = "E201"
		elseif Variant == "E202 Speed restriction 20" then t = "E202"
		elseif Variant == "E203 Speed restriction 30" then t = "E203"
		end
		
	elseif RcType == rctype_SignErtmsMiscBoard then
		if Variant == "E36A Level crossing, location" then t = "E36"
		elseif Variant == "E36B Level crossing, announcement" then t = "E36"
		elseif Variant == "E37A Level transition" then t = "E37A"
		elseif Variant == "E37B Level zero" then t = "E37B"
		elseif Variant == "E38 Avalanche area" then t = "E38"
		elseif Variant == "E39 Frost gate" then t = "E39"
		elseif Variant == "E106 Stop for shunting" then t = "E106"
		elseif Variant == "E107 Unsecured area with handoperated points" then t = "E107"
		elseif Variant == "E204 GSM-R network Norway" then t = "E204"
		end
		
	elseif RcType == rctype_Signal then
		if (MainSignal ~= "-") then s = s..MainSignal:upper() end
		if (DistantSignal ~= "-") then s = s.."-FS" end
		if (EndOfTrainRouteSignal ~= "-") then s = s.."-TVS" end
		if (DwarfSignal ~= "-") then s = s.."-DS" end
		if (HighShuntingSignal ~= "-") then s = s.."-ZS" end
		if (PositionLamp ~= "-") then s = s.."-MKS" end
		if (CautiousDrivingSignal ~= "-") then s = s.."-FKS" end
		if (LineSignal ~= "-") then s = s.."-LS" end
		if (OpticalSpeedSignal ~= "-") then s = s.."-LHS" end
		if (DepartureSignal ~= "-") then s = s.."-AVS" end
		if (BrakeTestSignal ~= "-") then s = s.."-BPS" end
		--TODO: More complete check of unrecognized combination
	elseif RcType == rctype_TrackSignal then
		s = "Togsporsignal"
	elseif RcType == rctype_BridgeAndFrostDoorSignal then
		s = "Brusignal/Frostportsignal"
	elseif RcType == rctype_AvalancheSignal then
		s = "Rasvarslingssignal"
	elseif RcType == rctype_LevelCrossingSignalTowardsRoad then
		s = "Veisignal"   
	elseif RcType == rctype_LevelCrossingSignalTowardsRail then
		s = "Planovergangssignal"
	elseif RcType == rctype_FictitiousSignal then
		s = "Fiktivt punkt"
	else
		s = "Bad signal type ["..RcType.."].",_warning
	end
	if s:match("^-.+") then s = s:sub(2) end --Strip off leading dash character '-', if any
	return s
end	 

return NOBN_sig_getSignalPartNames()
		</Formula>
 </LuaFunction>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_FictitiousSignal" Name="JBTSA_FIK Fiktivt punkt" Layer="JBTSA_FIK" Color="ByLayer" Group="Signal/Fiktive punkter" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>signal</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Viapunkt for betjeningsanlegg"></Variant>
   <Variant Name="Fiktivt sluttpunkt for togvei"></Variant>
   <Variant Name="Fiktivt sluttpunkt for skiftevei"></Variant>
   <Variant Name="Fiktivt sluttpunkt for togvei og skiftevei"></Variant>
  </Variants>
  <InsertPointObject Name="Viapunkt for betjeningsanlegg" DisplayBlockName="NO-BN-2D-JBTSA_FIK-VIAPUNKT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Fiktivt sluttpunkt for togvei" DisplayBlockName="NO-BN-2D-JBTSA_FIK-FIKTIVT-SLUTTPUNKT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Fiktivt sluttpunkt for skiftevei" DisplayBlockName="NO-BN-2D-JBTSA_FIK-FIKTIVT-SLUTTPUNKT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Fiktivt sluttpunkt for togvei og skiftevei" DisplayBlockName="NO-BN-2D-JBTSA_FIK-FIKTIVT-SLUTTPUNKT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_FIK-FIKTIVT-SLUTTPUNKT-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="true"/>
   <BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSA_FIK
			{% if Variant == 'Viapunkt for betjeningsanlegg' %}VIAPUNKT
			{% else %}FIKTIVT-SLUTTPUNKT
			{% endif %}
			{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_SignErtmsMarkerBoard" Name="JBTSA_ERT ERTMS Marker board" Layer="JBTSA_ERT" Color="ByLayer" Group="Signal/Klasse-A signaler (ERTMS)" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <AttachmentCategory Name="ertms_marker_board" PassAttachmentToTarget="true"/>
  <RelationSpace>ertms_marker_board</RelationSpace>
  <AttachTo Category="signalfundament"/>
  <AttachTo Category="skiltfeste"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_sig_getSignalSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>NOBN_sig_getSignalPartNames()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 3.5 or -3.5</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>PortalMounted and 8.0 or 0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="E35 Stop sign, side of track">
    <SetValue Key="type" Value="main"/>
    <SetValue Key="function" Value="blocking"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="false"/>
    <SetValue Key="ruleCode" Value=""/>
    <SetValue Key="PortalMounted" Value="false"/>
   </Variant>
   <Variant Name="E35 Stop sign, above track">
    <SetValue Key="type" Value="main"/>
    <SetValue Key="function" Value="intermediate"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="false"/>
    <SetValue Key="ruleCode" Value=""/>
    <SetValue Key="PortalMounted" Value="true"/>
   </Variant>
  </Variants>
  <SetValue Key="code" Value="Kode?"/>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>_JBTSA_ERT_Offset3DZ()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_ERT_Offset3DZ()" ReturnType="Double" HideFromUser="false" Description="Returns the height of the stop sign, placing it right under the corresponding ID sign (if it exists).">
   <Signature>Double _JBTSA_ERT_Offset3DZ()</Signature>
   <Formula>
function _JBTSA_ERT_Offset3DZ()
	function getAttachedIdSign()
		if AttachedElements == nil or AttachedElements.Count == 0 then return nil end
	
		for i = 0, AttachedElements.Count - 1 do
			if AttachedElements[i].RcType == rctype_SignErtmsIdBoard then
				if (AttachedElements[i].Variant == "E101-A ID board, intermediate stop sign, 400x325, white" 
				or AttachedElements[i].Variant == "E101-B ID board, entry stop sign, 400x325, yellow" 
				or AttachedElements[i].Variant == "E101-C ID board, exit stop sign, Ø400, yellow" 
				or AttachedElements[i].Variant == "E101-D ID board, blocking stop sign, Ø400, white") then
					return AttachedElements[i]
				end
			end
		end
		
		return nil
	end

	local idSign = getAttachedIdSign()
	if idSign == nil then return 2.88 end -- Corresponds to idSignZOffset = 2.5 and idSignHeight = 0.325.

	local idSignZOffset = idSign.Geometry3D_0.Offset.Z

	local idSignHeight = 0.325 -- Default height
	if idSign.Variant == "E101-A ID board, intermediate stop sign, 400x325, white" then idSignHeight = 0.325
	elseif idSign.Variant == "E101-B ID board, entry stop sign, 400x325, yellow" then idSignHeight = 0.325
	elseif idSign.Variant == "E101-C ID board, exit stop sign, Ø400, yellow" then idSignHeight = 0.400
	elseif idSign.Variant == "E101-D ID board, blocking stop sign, Ø400, white" then idSignHeight = 0.400 end

	local stopSignHeight = 0.400
	local minimumGap = 0.010

	local nominalZOffset = idSignZOffset + idSignHeight / 2+ stopSignHeight / 2 + minimumGap 
	local roundedZOffset = tonumber(string.format("%.2f", nominalZOffset + 0.005)) -- Round up to nearest cm.

	return roundedZOffset
end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_ERT_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_ERT_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the 3D model name [String] for the current ERTMS board. Covers position/stop marker boards. See also JBTSA_ERP ERTMS boards.">
   <Signature>String _JBTSA_ERT_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_ERT_Geometry3DName()
					local t = "NO-BN-3D-SA-SIG-ERTMS-E35"

					if Variant == "E35 Stop sign, side of track" then
						t = t..(((RightSided and dir == "up") or (LeftSided and dir == "down")) and "-HSIDE" or "-VSIDE")
					end
					
					if Variant == "E35 Stop sign, above track" then
						t = t.."-OVER"
					end
					
					return t
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="E35 Stop sign, side of track" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-ERTMS-E35-HSIDE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true" MirrorAboutJigXAxisIfLeftSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E35 Stop sign, above track" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-ERTMS-E35-OVER-AAK-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="0.01">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTRC_THUMBNAIL-USPESIFISERT-Schematic">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_SIG-SIGNAL
				{% if Variant == 'E35 Stop sign, side of track' %}
					{% if RightSided and dir == 'up' %}ERTMS-E35-HSIDE
					{% elsif LeftSided and dir == 'down' %}ERTMS-E35-HSIDE
					{% else %}ERTMS-E35-VSIDE
					{% endif %}
				{% elsif Variant == 'E35 Stop sign, above track' %}ERTMS-E35-OVER
				{% endif %}
				{% if PortalMounted %}AAK{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_SignErtmsShuntingSignal" Name="JBTSA_SIG ERTMS Shunting signal" Layer="JBTSA_SIG" Color="ByLayer" Group="Signal/Klasse-A signaler (ERTMS)" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <AttachmentCategory Name="ertms_shunting_signal" PassAttachmentToTarget="true"/>
  <RelationSpace>ertms_shunting_signal</RelationSpace>
  <AttachTo Category="signalfundament"/>
  <AttachTo Category="skiltfeste"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_sig_getSignalSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>NOBN_sig_getSignalPartNames()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 3.5 or -3.5</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>PortalMounted and 8.0 or 0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Side of track">
    <SetValue Key="type" Value="shunting"/>
    <SetValue Key="function" Value="intermediate"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="false"/>
    <SetValue Key="ruleCode" Value=""/>
    <SetValue Key="PortalMounted" Value="false"/>
   </Variant>
   <Variant Name="Above track">
    <SetValue Key="type" Value="shunting"/>
    <SetValue Key="function" Value="intermediate"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="false"/>
    <SetValue Key="ruleCode" Value=""/>
    <SetValue Key="PortalMounted" Value="true"/>
   </Variant>
  </Variants>
  <SetValue Key="code" Value="Kode?"/>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>_JBTSA_SIG_ShuntingOffset3DZ()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SIG_ShuntingOffset3DZ()" ReturnType="Double" HideFromUser="false" Description="Returns the height of the current shunting signal.">
   <Signature>Double _JBTSA_SIG_ShuntingOffset3DZ()</Signature>
   <Formula>
function _JBTSA_SIG_ShuntingOffset3DZ()
	local standardHeight = 1.500 -- Standard height is 1500mm to the middle of the first light source. See 1000001649 - Design requirements - Signs and boards, 10 SIGNAL POST ARRANGEMENT.
	local internalOffsetZ = 0.247 -- The distance between the insertion point and the middle of the first light source.
	local totalHeight = standardHeight + internalOffsetZ
	
	if Variant == "Side of track" 
		then return totalHeight
	elseif Variant == "Above track" 
		then return -totalHeight
	else 
		return 0.0 
	end
end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_SIG_ShuntingGeometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SIG_ShuntingGeometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the 3D model name [String] for the current shunting signal.">
   <Signature>String _JBTSA_SIG_ShuntingGeometry3DName()</Signature>
   <Formula>
function _JBTSA_SIG_ShuntingGeometry3DName()
	return "NO-BN-3D-SA-SIG-ERTMS-DS"
end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Side of track" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-DS-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true" MirrorAboutJigXAxisIfLeftSideOfAlignment="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Above track" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-DS-AAK-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="0.01">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTRC_THUMBNAIL-USPESIFISERT-Schematic">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_SIG-SIGNAL-DS
				{% if PortalMounted %}AAK{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <LuaFunction Name="NOBN_sig_chkSafetyDistanceFromSignalToOcsPole()" ReturnType="String" Description="Checks whether this signal object is inside a radius of 6 meter from an OCS pole.">
  <Signature>String NOBN_sig_chkSafetyDistanceFromSignalToOcsPole()</Signature>
  <Formula>
			function NOBN_sig_chkSafetyDistanceFromSignalToOcsPole()
				local tolerance = 6 --Tolerance in meters
			
				--Preamble - called from a relevant object type?
				if      RcType ~= rctype_SignErtmsMarkerBoard
					and RcType ~= rctype_SignErtmsShuntingSignal
					and RcType ~= rctype_Signal
					and RcType ~= rctype_TrackSignal
					and RcType ~= rctype_BridgeAndFrostDoorSignal
					and RcType ~= rctype_LevelCrossingSignalTowardsRoad
					and RcType ~= rctype_LevelCrossingSignalTowardsRoad
				then 
					return "Bad signal type ["..RcType.."] (code='"..code.."'.",_warning
						
				elseif PortalMounted then
					return "WARNING - Check manually that no high voltage installation is within safety distance from object in portal.",_warning

				elseif RcType == rctype_SignErtmsMarkerBoard then
					return "OK - Markerboard on the ground - Safety distance to OCS pole is not relevant.",_ok
					
				elseif RcType == rctype_SignErtmsShuntingSignal then
					return "OK - Shunting signal on the ground - Safety distance to OCS pole is not relevant.",_ok
			
				elseif RcType == rctype_TrackSignal then
					return "OK - Track signal (togsporsignal) - Safety distance to OCS pole is not relevant.",_ok 

				else
					if RcType == rctype_Signal then
						if HighShuntingSignal == "-" and MainSignal == "-" then 
							return "OK - Free-standing low signal - Safety distance to OCS pole is not relevant.",_ok 
						end
					end

					local c1 = getNearbyPointObjects2D(rctype_OcsPole, tolerance)
					local c2 = getNearbyPointObjects2D(rctype_OcsDropArmForBridgeOrTunnel, tolerance)
					local c3 = getNearbyPointObjects2D(rctype_OcsDropArmUnderPortal, tolerance)
					local nearbyObjects = getUnionOfCollections({c1,c2,c3})
					local count = getCollectionLength(nearbyObjects)
					local UpdateObjects = {}
					if count == 0 then 
						return "OK - No OCS pole within tolerance "..tolerance.." meters.",_ok
					else
						local i = 0
						local shortestDistance = math.huge
						local s = "WARNING - OCS pole"..(count &gt; 1 and "s " or " ") --Singular of plural form
						while i ~= count do
							local d = RC__getDistance2D(nearbyObjects[i]) 
							if d &lt; shortestDistance then shortestDistance = d end
							s = s..nearbyObjects[i].code
							table.insert(UpdateObjects, nearbyObjects[i])
							i = i+1
							if i ~= count then s = s..", " end
						end
						return string.format("%.03f: %s located inside a circle of radius %.3f meters.",shortestDistance,s,tolerance),UpdateObjects,_warning
					end
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_chkDistanceFromSignalToTrack()" ReturnType="String" Description="Checks lateral distance from signal insertion point to closest track on left side (in the direction of increasing mileages). Call with argument 'Right' or 'Left'.">
  <Signature>String NOBN_sig_chkDistanceFromSignalToTrack("Right" | "Left")</Signature>
  <Formula>
			function NOBN_sig_chkDistanceFromSignalToTrack(side)
				side = side and side:lower() or "(no arg)"				
				if side ~= "left" and side ~= "right" then
					return "ERROR Function should be called with argument 'right' or 'left' ["..side.."]."
				end
				if Alignment == nil then
					return "UNFINISHED - Signal must first be assigned to an alignment to deduce its own direction."
				end
				if (DwarfSignal == "Ja" and MainSignal == "-" and PortalMounted) then
					return "WARNING - Shunting signal mounted in portal. Please do manual check.",_warning
				end
				if (VerticalOffset &gt; 0.3) then
					return "WARNING - Signal mounted outside normal elevations. Please do manual check.",_warning 
				end
				local tracks = getNearbyAlignments(rctype_Track):
					filter(function (x) return (side == "right" and 1 or -1) * getAlignmentInfo(x.id).DistanceToAlignment &lt; 0 end)
				if getCollectionLength(tracks) == 0 then
					return "OK - No tracks to the "..side..".",_ok
				end
				local ai = getAlignmentInfo(tracks[0].id)
				local curveRadius = ai.CurveRadius
				local Ki = 0.0
				local Ky = 0.0
				local tolerance = 2.12
				--Many signals are covered with these formulas, but not all - use your insight wisely:
				if (DwarfSignal ~= "-" and MainSignal == "-") then
					--Freestanding dwarf signal
					tolerance = tolerance + 0.25
				elseif MainSignal ~= "-" or DistantSignal ~= "-" then
					tolerance = tolerance + 0.4
				end
				local distToAlignment = math.abs(ai.DistanceToAlignment)
				if (curveRadius ~= math.huge) then
					--Std Bane NOR approximation formulae:
					--See ...\Onedrive - RailCOMPLETE AS\V\I - Issues\Attachments\2020-03-17 Taylor series expansion for RC-DisplayEnvelope (issue #6338)
					Ki = 81000.0/(2*curveRadius)
					Ky = 63000.0/(2*curveRadius)
				end
				if (ai.CurveRotation == "CCW") then 
					tolerance = tolerance + (Ky/1000.0)
				else
					tolerance = tolerance + (Ki/1000.0)
				end
				if (distToAlignment &lt;= tolerance) then
					return string.format("%.3f: ERROR - Signal too close to track '%s' wrt. tolerance %.3f.",
						distToAlignment,ai.AlignmentName,tolerance),_error
				elseif (distToAlignment &gt; tolerance and distToAlignment &lt;= (tolerance + 0.4)) then
					return string.format("%.3f: WARNING - Signal close to track '%s', less than 0.4 m from tolerance %.3f.",
						distToAlignment,ai.AlignmentName,tolerance),_warning
				else
					return string.format("%.3f: OK - Signal is far from track '%s' wrt. tolerance %.3f.",
						distToAlignment,ai.AlignmentName,tolerance),_ok
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_chkLeftSideDistanceFromSignalToTrack()" ReturnType="String" Description="Checks lateral distance from signal insertion point to closest track on left side (in the direction of increasing mileages)." HideFromUser="false">
  <Signature>String NOBN_sig_chkLeftSideDistanceFromSignalToTrack()</Signature>
  <Formula>
			function NOBN_sig_chkLeftSideDistanceFromSignalToTrack()
				return NOBN_sig_chkDistanceFromSignalToTrack("Left")
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_sig_chkRightSideDistanceFromSignalToTrack()" ReturnType="String" Description="Checks lateral distance from signal insertion point to closest track on right side (in the direction of increasing mileages)." HideFromUser="false">
  <Signature>String NOBN_sig_chkRightSideDistanceFromSignalToTrack()</Signature>
  <Formula>
			function NOBN_sig_chkRightSideDistanceFromSignalToTrack()
				return NOBN_sig_chkDistanceFromSignalToTrack("Right")
			end
		</Formula>
 </LuaFunction>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_Signal" Name="JBTSA_SIG Signal" Layer="JBTSA_SIG" Color="ByLayer" Group="Signal/Klasse-B signaler" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>signal</RelationSpace>
  <AttachmentCategory Name="signal" PassAttachmentToTarget="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <CustomProperty DataType="Enumeration" Name="SpreadingLens" DisplayName="Spredelinse" DefaultValue="-" Category="Custom properties" Description="The 'SpreadingLens' custom property [Ja,-] defines whether the signal shall use spreading lenses (default: '-').">
   <Values>
    <Value>Ja</Value>
    <Value>-</Value>
   </Values>
  </CustomProperty>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_sig_getSignalSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>NOBN_sig_getSignalPartNames()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 3.5 or -3.5</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>PortalMounted and 8.0 or 0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <DynamicProperty Type="Projection2DCollection" Subtype="Projection2D">
   <LuaExpression Name="Name">
    <Formula>name</Formula>
   </LuaExpression>
   <LuaExpression Name="MinimumBound">
    <Formula>RightSided and "-9 -0.5 -5" or "-5 -0.5 -5"</Formula>
   </LuaExpression>
   <LuaExpression Name="MaximumBound">
    <Formula>RightSided and "5 0.5 9" or "9 0.5 9"</Formula>
   </LuaExpression>
   <LuaExpression Name="Rotation.Z">
    <Formula>dir == "up" and 0 or 180</Formula>
   </LuaExpression>
   <LuaExpression Name="Annotation.Contents">
    <Formula>_JBTSA_SIG_Annotation2D()</Formula>
   </LuaExpression>
   <SetValue Key="Annotation.Margin" Value="1.000"/>
   <SetValue Key="Annotation.Justify" Value="TopCenter"/>
   <SetValue Key="Annotation.TextHeight" Value="0.200"/>
   <SetValue Key="Annotation.Style" Value="Standard"/>
  </DynamicProperty>
  <LuaFunction Name="_JBTSA_SIG_Annotation2D()" ReturnType="String" Description="Returns info about object placement for use in 2D projections.">
   <Signature>_JBTSA_SIG_Annotation2D()</Signature>
   <Formula>
				function _JBTSA_SIG_Annotation2D()
					local railHeadDistance = Alignment.AlignmentSystem.AlignmentGauge
					return name
					.."\\PKm."..NOBN_trk_toKm(ReferenceMileage)
					.."\\PDirection: "..(dir == "up" and "Increasing Km" or "Decreasing Km")
					.."\\PSide of alignment in increasing Km-direction: "..SideOfAlignment
					.."\\PLateral offset from closest inner rail: "..RC__round(LateralOffset + (LeftSided and 1 or -1)*railHeadDistance/2, 3)
					.."\\PVertical offset from lowest rail top: "..RC__round(VerticalOffset, 3)
				end
			</Formula>
  </LuaFunction>
  <Variants DefaultValue="Sammensatt signal">
   <Variant Name="Sammensatt signal"/>
  </Variants>
  <CustomProperty DataType="Enumeration" Name="Sunscreen" DisplayName="Bakgrunnsskjerm" DefaultValue="Ja" Description="The 'Sunscreen' custom property [- | Ja] decides whether the signal has background screen ('Ja') or not ('-').">
   <Values>
    <Value>Ja</Value>
    <Value>-</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="MainSignal" DisplayName="Hovedsignal" DefaultValue="-" Description="Bane NOR 1/2/3-lantern optical main signal.\n20a=*Red:Stop(entry/block)\n20b=Red:Stop(intermediate/exit)\n21(3-light main)=UpperGreen:Proceed with caution\n21(2-light main)=LowerGreen:Proceed with caution\n21(repeater)=UpperGreen:Proceed with caution\n22=UpperGreen+LowerGreen:Proceed.">
   <Values>
    <Value>-</Value>
    <Value>Hs1</Value>
    <Value>Hs2</Value>
    <Value>Hs3</Value>
    <Value>RepHs1</Value>
    <Value>RepHs2</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="EndOfTrainRouteSignal" DisplayName="Togvei slutt" DefaultValue="-" Description="Bane NOR S66 black/yellow board:End of train route movement authority (with or without an ensuing main signal).">
   <Values>
    <Value>-</Value>
    <Value>Ja</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="DistantSignal" DisplayName="Forsignal" DefaultValue="-" Description="Bane NOR 2-lantern optical distant signal.\n23=*Yellow:Stop ahead\n24=*Yellow/*Green:Reduced speed ahead\n25=*Green:Line speed ahead.">
   <Values>
    <Value>-</Value>
    <Value>Ja</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="DwarfSignal" DisplayName="Dvergsignal" DefaultValue="-" Description="Bane NOR optical shunting signal.\n43=TwoHorizontalWhite:Shunting forbidden\n44=TwoSlantedWhite:Cautious shunting\n45=TwoVerticalWhite:Shunting allowed\n46a=OneWhite:local release\n46b=TwoBackslantedWhite:Local release.">
   <Values>
    <Value>-</Value>
    <Value>Ja</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="HighShuntingSignal" DisplayName="Høyt skiftesignal" DefaultValue="-" Description="Bane NOR High Shunting optical signal.\n41=SlantedWhiteLine:Cautious shunting with local release\n42=HorizontalWhiteLine:Shunting forbidden.">
   <Values>
    <Value>-</Value>
    <Value>Ja</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="PositionLamp" DisplayName="Middelkontrollampe" DefaultValue="-" Description="Bane NOR Position Lamp optical signal.\n.4C=*White:Last axle still occupying turnout section. Off:Trigger section not yet entered, or last axle not occupying turnout section anymore.">
   <Values>
    <Value>-</Value>
    <Value>Ja</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="CautiousDrivingSignal" DisplayName="Forsiktig kjøring" DefaultValue="-" Description="Bane NOR Cautious Driving optical signal.\n32=White luminescent cross:Proceed with extra caution in train route (main signal shows Hs21, distant signal is shut off (Fs00).">
   <Values>
    <Value>-</Value>
    <Value>Ja</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="LineSignal" DisplayName="Linjesignal" DefaultValue="-" Description="Bane NOR Line optical signal.\n35B=White luminescent letter:The signal shows a distinct letter representing one of several  destination lines.">
   <Values>
    <Value>-</Value>
    <Value>Ja</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="OpticalSpeedSignal" DisplayName="Lysende hastighetssignal" DefaultValue="-" Description="Bane NOR Deviating Speed optical signal.\n.68C=WhiteDigit(s):Allowed speed over deviating turnout or group of turnouts ahead.">
   <Values>
    <Value>-</Value>
    <Value>Ja</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="DepartureSignal" DisplayName="Avgangssignal" DefaultValue="-" Description="Bane NOR Departure signal.\nLuminous White letter 'A' on black background (permission to depart is granted)'.">
   <Values>
    <Value>-</Value>
    <Value>Ja</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="BrakeTestSignal" DisplayName="Bremseprøvesignal" DefaultValue="-" Description="Bane NOR Brake Test Signal.\n.Luminous letter 'T' (activate brake), 'L' (loosen brake) or dark (no action).">
   <Values>
    <Value>-</Value>
    <Value>Ja</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_SafetyDistanceFromSignalToOcsPole" DisplayName="Sikkerhetsavstand til KL" Description="Below 6 meter: Warning – Signal is too close to OCS pole, a potential HVAC hazard for maintenance personnel.\nAbove 6 meter: OK – No known HVAC danger to personnel."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_LeftSideDistanceFromSignalToTrack" DisplayName="Avstand til spor venstre" Description="Dwarf signal:\Below 2.37m: Error – Signal too close to track.\nFrom 2.37m to 2.77m: Warning – Within tolerance, potentially too close to track.\nAbove 2.77m: OK – Far enough from track.\n\nOther signals:\nBelow 2.52m: Error - Signal too close to track.\nFrom 2.52m to 2.92m: Warning - Within tolerance, potentially too close to track.\nAbove 2.92m: OK - Far enough from track.\n\nThe calculations take into account the nose/coach midpoint curvature extension."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_RightSideDistanceFromSignalToTrack" DisplayName="Avstand til spor høyre" Description="Dwarf signal:\Below 2.37m: Error – Signal too close to track.\nFrom 2.37m to 2.77m: Warning – Within tolerance, potentially too close to track.\nAbove 2.77m: OK – Far enough from track.\n\nOther signals:\nBelow 2.52m: Error - Signal too close to track.\nFrom 2.52m to 2.92m: Warning - Within tolerance, potentially too close to track.\nAbove 2.92m: OK - Far enough from track.\n\nThe calculations take into account the nose/coach midpoint curvature extension."/>
  <CustomProperty DataType="String" Name="LineSignalValue" DisplayName="Linjesignal signaltekst" DefaultValue=""/>
  <CustomProperty DataType="String" Name="OpticalSpeedSignalValue" DisplayName="Lysende hastighetssignal verdi" DefaultValue=""/>
  <LuaExpression Name="mc_SafetyDistanceFromSignalToOcsPole" IsModelCheck="true">
   <Formula>NOBN_sig_chkSafetyDistanceFromSignalToOcsPole()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_LeftSideDistanceFromSignalToTrack" IsModelCheck="true">
   <Formula>NOBN_sig_chkLeftSideDistanceFromSignalToTrack()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_RightSideDistanceFromSignalToTrack" IsModelCheck="true">
   <Formula>NOBN_sig_chkRightSideDistanceFromSignalToTrack()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_SIG_signal_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SIG_signal_Geometry3DName()" ReturnType="String" Description="Returns 3D Model Name for a Bane NOR NSI-63 type signal, based on CustomProperties such as Hovedsignal, Forsignal, Dvergsignal etc.">
   <Signature>String _JBTSA_SIG_signal_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_SIG_signal_Geometry3DName()
					--Ref. https://orv.banenor.no/orv/doku.php?id=tjn:Kapittel_8 fra "Bane NOR – Trafikkregler for jernbanenettet (TJN) – gyldig fra 16.6.2019. Endret 24.4.2019."
					--Ref LISP-code for NO-BN's 2D library, file "Signal combinations.lsp" ca line number 350 where the symbol's CAD block name is constructed.
					local t				
					t = "NO-BN-3D-SA-SIG-NSI63"
					if     (MainSignal == "RepHs1") then t = t.."-HSREP1" --RepHs 1-lys (øvre grønn i 2-lysramme, blendet nedre lanterne) - uten kne, oppover-montering, f.eks. på vegg
					elseif (MainSignal == "RepHs2") then t = t.."-HSREP2" --RepHs 1-lys (to grønne i 2-lysramme) - uten kne, oppover-montering, f.eks. på vegg
					elseif (MainSignal == "Hs1") then t = t.."-HS1" --Stopplykt, Hs20=Stopp=nedre rød
					elseif (MainSignal == "Hs2") then t = t.."-HS2" --2-lys Hs, Hs20=Stopp=nedre rød / Hs21=Kjør med redusert hast.=øvre grønn
					elseif (MainSignal == "Hs3") then t = t.."-HS3" --3-lys Hs, Hs20=Stopp=nedre rød / Hs21=Kjør med redusert hast.=øvre grønn / Hs22=Kjør=Øvre+nedre grønn
					end
					if (DistantSignal ~= "-") then t = t.."-FS" end
					if (EndOfTrainRouteSignal ~= "-") then t = t.."-TVS" end --Togvei slutt signal 66, 'S'
					if (DwarfSignal ~= "-") then t = t.."-DS" end
					if (HighShuntingSignal ~= "-") then t = t.."-ZS" end --Høyt skiftesignal
					if (PositionLamp ~= "-") then t = t.."-MKS" end --Middelkontrollampe signal, hvit blinkende
					if (CautiousDrivingSignal ~= "-") then t = t.."-FKS" end
					if (LineSignal ~= "-") then t = t.."-LS" end --Linjesignal (het 'hovedlinjesignal' tidligere)
					if (OpticalSpeedSignal ~= "-") then t = t.."-LHS" end --Lysende HastighetsSignal, lysende 10-ere for en eller flere aspekter
					if (DepartureSignal ~= "-") then t = t.."-AVS" end --Avgangssignal
					if (BrakeTestSignal ~= "-") then t = t.."-BPS" end --Bremseprøvesignal
					if Sunscreen == "-" then t = t.."-UTEN-SKJERM" end
					if PortalMounted then t = t.."-ÅK" end
					if KneeTowardsTrack then if KneeTowardsTrack ~= "-" then t = t..(RightSided and "-VKNE" or "-HKNE") end end
					if t:match("%-NSI63%-DS") and not t:match("ÅK") then t = t.."-2000" end --Add '-2000' pole total length to shunting signal if free-standing shunting signal
					return t
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Frittstående forsignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-FS-{{SymbolMode}}" SubGroup="Frittstående Signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="name" Value="Fs."/>
   <SetValue Key="type" Value="distant"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="Frittstående Dvergsignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-DS-{{SymbolMode}}" SubGroup="Frittstående Signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="type" Value="shunting"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="Frittstående Dvergsignal med togvei slutt" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-TVS-DS-{{SymbolMode}}" SubGroup="Frittstående Signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="EndOfTrainRouteSignal" Value="Ja"/>
   <SetValue Key="type" Value="shunting"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="Frittstående Dvergsignal med middelkontroll" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-DS-MKS-{{SymbolMode}}" SubGroup="Frittstående Signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="type" Value="shunting"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="Frittstående Dvergsignal med middelkontroll og togvei slutt" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-TVS-DS-MKS-{{SymbolMode}}" SubGroup="Frittstående Signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="EndOfTrainRouteSignal" Value="Ja"/>
   <SetValue Key="type" Value="shunting"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="Frittstående Høyt Skiftesignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-ZS-{{SymbolMode}}" SubGroup="Frittstående Signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="HighShuntingSignal" Value="Ja"/>
   <SetValue Key="type" Value="shunting"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="Frittstående Høyt Skiftesignal med Middelkontroll" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-ZS-MKS-{{SymbolMode}}" SubGroup="Frittstående Signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="HighShuntingSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="type" Value="shunting"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="1-lys stopplykt" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS1-{{SymbolMode}}" SubGroup="Frittstående Signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs1"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="1-lys Rep. hovedsignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS1-{{SymbolMode}}" SubGroup="Frittstående Signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="RepHs1"/>
   <SetValue Key="type" Value="repeater"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys Rep. hovedsignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="RepHs2"/>
   <SetValue Key="type" Value="repeater"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
   <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-SA-SIG-NSI63-HS-2-LYS-REP"/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal med dverg" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal med dverg og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-LHS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal med dverg og middelkontroll" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-MKS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal med dverg, middelkontroll og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-MKS-LHS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal med dverg og forsiktig kjøring" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-FKS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal med dverg, forsiktig kjøring og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-FKS-LHS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal med dverg, middelkontroll og forsiktig kjøring" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-MKS-FKS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal med dverg, middelkontroll, forsiktig kjøring og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-MKS-FKS-LHS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal dverg og linjesignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-LS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="LineSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal med dverg, linjesignal og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-LS-LHS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="LineSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal med dverg, middelkontroll og linjesignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-MKS-LS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="LineSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="2-lys hovedsignal med dverg, middelkontroll, linjesignal og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-DS-MKS-LS-LHS-{{SymbolMode}}" SubGroup="2-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="LineSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="3-lys hovedsignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-{{SymbolMode}}" SubGroup="3-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="3-lys hovedsignal med linjesignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-LS-{{SymbolMode}}" SubGroup="3-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="LineSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="3-lys hovedsignal med linjesignal og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-LS-LHS-{{SymbolMode}}" SubGroup="3-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="LineSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="3-lys hovedsignal med lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-LHS-{{SymbolMode}}" SubGroup="3-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="3-lys hovedsignal med dverg" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-DS-{{SymbolMode}}" SubGroup="3-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="3-lys hovedsignal med dverg og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-DS-LHS-{{SymbolMode}}" SubGroup="3-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="3-lys hovedsignal med dverg og middelkontroll" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-DS-MKS-{{SymbolMode}}" SubGroup="3-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="3-lys hovedsignal med dverg, middelkontroll og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-DS-MKS-LHS-{{SymbolMode}}" SubGroup="3-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="main"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med middelkontroll" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-MKS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-LHS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med middelkontroll og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-MKS-LHS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med forsiktig kjøring og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-FKS-LHS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med dverg" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-DS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med dverg og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-DS-LHS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med dverg, linjesignal og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-DS-LS-LHS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="LineSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med dverg og middelkontroll" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-DS-MKS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med dverg, middelkontroll og forsiktig kjøring" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-DS-MKS-FKS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med dverg, middelkontroll, forsiktig kjøring og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-DS-MKS-FKS-LHS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med dverg, forsiktig kjøring og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-DS-FKS-LHS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med dverg, middelkontroll og linjesignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-DS-MKS-LS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="LineSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med dverg, middelkontroll og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-DS-MKS-LHS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="4-lys hovedsignal med dverg, middelkontroll, linjesignal og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-FS-DS-MKS-LS-LHS-{{SymbolMode}}" SubGroup="4-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs2"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="LineSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med middelkontroll og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-MKS-LHS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med middelkontroll" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-MKS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med forsiktig kjøring" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-FKS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med forsiktig kjøring og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-FKS-LHS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med linjesignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-LS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="LineSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med linjesignal og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-LS-LHS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="LineSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-LHS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg og middelkontroll" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-MKS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg og forsiktig kjøring" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-FKS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-LHS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg, forsiktig kjøring og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-FKS-LHS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg, middelkontroll og forsiktig kjøring" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-MKS-FKS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg, middelkontroll og linjesignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-MKS-LS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="Linjesignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg, middelkontroll og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-MKS-LHS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg, middelkontroll, forsiktig kjøring og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-MKS-FKS-LHS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg, middelkontroll, linjesignal og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-MKS-LS-LHS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="PositionLamp" Value="Ja"/>
   <SetValue Key="Linjesignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg, forsiktig kjøring og linjesignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-FKS-LS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="Linjesignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg, forsiktig kjøring, linjesignal og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-FKS-LS-LHS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="CautiousDrivingSignal" Value="Ja"/>
   <SetValue Key="Linjesignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg og linjesignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-LS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="Linjesignal" Value="Ja"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="5-lys hovedsignal med dverg, linjesignal og lysende hastighetssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-FS-DS-LS-LHS-{{SymbolMode}}" SubGroup="5-lys signal" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="MainSignal" Value="Hs3"/>
   <SetValue Key="DistantSignal" Value="Ja"/>
   <SetValue Key="DwarfSignal" Value="Ja"/>
   <SetValue Key="Linjesignal" Value="Ja"/>
   <SetValue Key="OpticalSpeedSignal" Value="Ja"/>
   <SetValue Key="type" Value="combined"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="true" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSA_SIG-SIGNAL
			{% if MainSignal == 'Hs1' or MainSignal == 'RepHs1' %}HS1
			{% elsif MainSignal == 'Hs2' or MainSignal == 'RepHs2' %}HS2
			{% elsif MainSignal == 'Hs3' %}HS3
			{% endif %}
			{% if DistantSignal == 'Ja' %}FS{% endif %}
			{% if EndOfTrainRouteSignal == 'Ja' %}TVS{% endif %}
			{% if DwarfSignal == 'Ja' %}DS{% endif %}
			{% if HighShuntingSignal == 'Ja' %}ZS{% endif %}
			{% if PositionLamp == 'Ja' %}MKS{% endif %}
			{% if CautiousDrivingSignal == 'Ja' %}FKS{% endif %}
			{% if LineSignal == 'Ja' %}LS{% endif %}
			{% if OpticalSpeedSignal == 'Ja' %}LHS{% endif %}
			{% if BrakeTestSignal == 'Ja' %}BPS{% endif %}
			{% if DepartureSignal == 'Ja' %}AVS{% endif %}
			{% if PortalMounted %}AAK{% endif %}
			{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="LS">
    <Value>{{LineSignalValue}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="LHS">
    <Value>{{OpticalSpeedSignalValue}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="signalfundament"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_TrackSignal" Name="JBTSA_SIG Togsporsignal" Layer="JBTSA_SIG" Color="ByLayer" Group="Signal/Hjelpesignaler" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>signal</RelationSpace>
  <AttachmentCategory Name="signal" PassAttachmentToTarget="true"/>
  <AttachTo Category="stolpe_med_fot"/>
  <AttachTo Category="signal"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_sig_getSignalSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>NOBN_sig_getSignalPartNames()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 3.5 or -3.5</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>PortalMounted and 8.0 or 0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Togsporsignal">
   <Variant Name="Togsporsignal 1-begrep"></Variant>
   <Variant Name="Togsporsignal 2-begrep"></Variant>
   <Variant Name="Togsporsignal 1-begrep, sidestilt"></Variant>
   <Variant Name="Togsporsignal 2-begrep, sidestilt"></Variant>
  </Variants>
  <LuaExpression Name="IsyPostnotat">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_SafetyDistanceFromSignalToOcsPole" DisplayName="Sikkerhetsavstand til KL" Description="Below 6 meter: Warning – Signal is too close to OCS pole, a potential HVAC hazard for maintenance personnel.\nAbove 6 meter: OK – No known HVAC danger to personnel."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_LeftSideDistanceFromSignalToTrack" DisplayName="Avstand til spor venstre" Description="Dwarf signal:\Below 2.37m: Error – Signal too close to track.\nFrom 2.37m to 2.77m: Warning – Within tolerance, potentially too close to track.\nAbove 2.77m: OK – Far enough from track.\n\nOther signals:\nBelow 2.52m: Error - Signal too close to track.\nFrom 2.52m to 2.92m: Warning - Within tolerance, potentially too close to track.\nAbove 2.92m: OK - Far enough from track.\n\nThe calculations take into account the nose/coach midpoint curvature extension."/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_RightSideDistanceFromSignalToTrack" DisplayName="Avstand til spor høyre" Description="Dwarf signal:\Below 2.37m: Error – Signal too close to track.\nFrom 2.37m to 2.77m: Warning – Within tolerance, potentially too close to track.\nAbove 2.77m: OK – Far enough from track.\n\nOther signals:\nBelow 2.52m: Error - Signal too close to track.\nFrom 2.52m to 2.92m: Warning - Within tolerance, potentially too close to track.\nAbove 2.92m: OK - Far enough from track.\n\nThe calculations take into account the nose/coach midpoint curvature extension."/>
  <LuaExpression Name="mc_SafetyDistanceFromSignalToOcsPole" IsModelCheck="true">
   <Formula>NOBN_sig_chkSafetyDistanceFromSignalToOcsPole()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_LeftSideDistanceFromSignalToTrack" IsModelCheck="true">
   <Formula>NOBN_sig_chkLeftSideDistanceFromSignalToTrack()</Formula>
  </LuaExpression>
  <LuaExpression Name="mc_RightSideDistanceFromSignalToTrack" IsModelCheck="true">
   <Formula>NOBN_sig_chkRightSideDistanceFromSignalToTrack()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_SIG_Togsporsignal_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SIG_Togsporsignal_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="">
   <Signature>String _JBTSA_SIG_Togsporsignal_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_SIG_Togsporsignal_Geometry3DName()
					local t = "NO-BN-3D-SA-SIG-NSI63-TSS"
					if Variant == "Togsporsignal 1-begrep" then
						return t.."-TOGSPORSIGNAL-HODE" 
					elseif Variant == "Togsporsignal 1-begrep, sidestilt" then
						if RightSided then
							return (dir == 'up') and t.."-H" or t.."-V"
						else
							return (dir == 'up') and t.."-V" or t.."-H"
						end
					elseif Variant == "Togsporsignal 2-begrep" then
						return t.."-HV" 
					elseif Variant == "Togsporsignal 2-begrep, sidestilt" then
						return t.."-HV"  --User must adjust sideways 3D offset towards track and add Pole Routing himself
					else 
						return "Unrecognized variant ["..Variant.."], cannot determine 3D Model Name.",_warning
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>
				local d = (Variant:find("sidestilt") or Variant:find("2%-begrep")) and 0.15 or 0 --juster litt ned hvis signalet har arm(er)
				local a = Attachment
				if a then
					if a.Variant:find(" 1.6m") then return 0.690 - d
					elseif a.Variant:find(" 2m") then return 1.090 - d 
					elseif a.Variant:find(" 3m") then return 2.090 - d
					elseif a.Variant:find(" 3.2m") then return 2.290 - d
					else return 1.090 - d
					end
				else 
					return 1.090 - d --Standard Ø76 stolpe er 2m høy
				end
			</Formula>
  </LuaExpression>
  <InsertPointObject Name="Togsporsignal 1-begrep" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-TOGSPORSIGNAL-1-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="type" Value="other:togsporSignal"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="Togsporsignal 2-begrep" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-TOGSPORSIGNAL-2-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="type" Value="other:togsporSignal"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="Togsporsignal 1-begrep, sidestilt" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-TOGSPORSIGNAL-3-VSIDE-{{SymbolMode}}" AskForAttachment="true" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true" MirrorAboutJigXAxisIfLeftSideOfAlignment="true"/>
   <SetValue Key="type" Value="other:togsporSignal"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="Togsporsignal 2-begrep, sidestilt" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-TOGSPORSIGNAL-4-VSIDE-{{SymbolMode}}" AskForAttachment="true" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true" MirrorAboutJigXAxisIfLeftSideOfAlignment="true"/>
   <SetValue Key="type" Value="other:togsporSignal"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_THUMBNAIL-USPESIFISERT-Schematic" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_SIG-SIGNAL-TOGSPORSIGNAL
				{%    if Variant == 'Togsporsignal 1-begrep' %}1
				{% elsif Variant == 'Togsporsignal 2-begrep' %}2
				{% elsif Variant == 'Togsporsignal 1-begrep, sidestilt' %}
					{% if RightSided  %}
						{% if dir == 'up' %}3-HSIDE
						{% else %}3-VSIDE
						{% endif %}
					{% else  %}
						{% if dir == 'up' %}3-VSIDE
						{% else %}3-HSIDE
						{% endif %}
					{% endif %}
				{% elsif Variant == 'Togsporsignal 2-begrep, sidestilt' %}
					{% if RightSided  %}
						{% if dir == 'up' %}4-HSIDE
						{% else %}4-VSIDE
						{% endif %}
					{% else  %}
						{% if dir == 'up' %}4-VSIDE
						{% else %}4-HSIDE
						{% endif %}
					{% endif %}
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{% if PortalMounted %}AAK{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="stolpe_med_fot"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_AvalancheSignal" Name="JBTSA_SIG Rasvarslingssignal" Layer="JBTSA_SIG" Color="ByLayer" Group="Signal/Hjelpesignaler" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>signal</RelationSpace>
  <AttachmentCategory Name="signal" PassAttachmentToTarget="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <CustomProperty DataType="Enumeration" Name="SpreadingLens" DisplayName="Spredelinse" DefaultValue="-" Category="Custom properties" Description="The 'SpreadingLens' custom property [Ja,-] defines whether the signal shall use spreading lenses (default: '-').">
   <Values>
    <Value>Ja</Value>
    <Value>-</Value>
   </Values>
  </CustomProperty>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_sig_getSignalSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>NOBN_sig_getSignalPartNames()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 3.5 or -3.5</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>PortalMounted and 8.0 or 0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Rasvarslingssignal">
   <Variant Name="Rasvarslingssignal">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-SA-SIG-NSI63-RASVARSLING"/>
   </Variant>
  </Variants>
  <InsertPointObject Name="Rasvarslingssignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="type" Value="other:rasvarslingsSignal"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_THUMBNAIL-USPESIFISERT-Schematic" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_SIG-SIGNAL
				{% if Variant == 'Rasvarslingssignal' %}HS3
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="signalfundament"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_BridgeAndFrostDoorSignal" Name="JBTSA_SIG Brusignal/Frostportsignal" Layer="JBTSA_SIG" Color="ByLayer" Group="Signal/Hjelpesignaler" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>signal</RelationSpace>
  <AttachmentCategory Name="signal" PassAttachmentToTarget="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <CustomProperty DataType="Enumeration" Name="SpreadingLens" DisplayName="Spredelinse" DefaultValue="-" Category="Custom properties" Description="The 'SpreadingLens' custom property [Ja,-] defines whether the signal shall use spreading lenses (default: '-').">
   <Values>
    <Value>Ja</Value>
    <Value>-</Value>
   </Values>
  </CustomProperty>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_sig_getSignalSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>NOBN_sig_getSignalPartNames()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 3.5 or -3.5</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>PortalMounted and 8.0 or 0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Brusignal/Frostportsignal">
   <Variant Name="Brusignal/Frostportsignal">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-SA-SIG-NSI63-BRU-OG-FROSTPORTSIGNAL"/>
   </Variant>
  </Variants>
  <InsertPointObject Name="Brusignal/Frostportsignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="type" Value="other:broSignal"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS3-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_SIG-SIGNAL
				{% if Variant == 'Brusignal/Frostportsignal' %}20-HS3
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="signalfundament"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_LevelCrossingSignalTowardsRail" Name="JBTSA_SIG Planovergangssignal" Layer="JBTSA_SIG" Color="ByLayer" Group="Signal/Veibomanlegg" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>signal</RelationSpace>
  <AttachmentCategory Name="signal" PassAttachmentToTarget="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <CustomProperty DataType="Enumeration" Name="SpreadingLens" DisplayName="Spredelinse" DefaultValue="-" Category="Custom properties" Description="The 'SpreadingLens' custom property [Ja,-] defines whether the signal shall use spreading lenses (default: '-').">
   <Values>
    <Value>Ja</Value>
    <Value>-</Value>
   </Values>
  </CustomProperty>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_sig_getSignalSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>NOBN_sig_getSignalPartNames()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 3.5 or -3.5</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>PortalMounted and 8.0 or 0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Planovergang, signal">
   <Variant Name="Planovergang, signal"/>
   <Variant Name="Planovergang, forsignal"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_SIG_Planovergangssignal_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_SIG_Planovergangssignal_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the 3D model name for a Level Crossing signal (towards track).">
   <Signature>String _JBTSA_SIG_Planovergangssignal_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_SIG_Planovergangssignal_Geometry3DName()
					local t = "NO-BN-3D-SA-SIG-NSI63-W-PLANOVERGANG"
					if Variant == "Planovergang, signal" then
						return t.."-SIGNAL"
					elseif Variant == "Planovergang, forsignal" then
						return t.."-FORSIGNAL"
					else 
						return "Unrecognized variant ["..Variant.."], cannot determine 3D Model Name.",_warning
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Planovergang, signal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="type" Value="other:planovergangsSignal"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <InsertPointObject Name="Planovergang, forsignal" DisplayBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="type" Value="other:planovergangForsignal"/>
   <SetValue Key="switchable" Value="true"/>
   <SetValue Key="virtual" Value="false"/>
   <SetValue Key="ruleCode" Value=""/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_SIG-SIGNAL-HS2-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_SIG-SIGNAL
				{% if Variant == 'Planovergang, signal' %}20-HS2
				{% elsif Variant == 'Planovergang, forsignal' %}20-HS2
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="signalfundament"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_LevelCrossingSignalTowardsRoad" Name="JBTSA_SIG Veisignal" Layer="JBTSA_SIG" Color="ByLayer" Group="Signal/Veibomanlegg" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>signal_mot_vei</RelationSpace>
  <AttachmentCategory Name="signal_mot_vei" PassAttachmentToTarget="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_sig_getSignalSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>NOBN_sig_getSignalPartNames()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 3.5 or -3.5</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>PortalMounted and 8.0 or 0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Veisignal">
   <Variant Name="Veisignal/Enkelt signal mot vei">
    <SetValue Key="name" Value="V.(enkeltspor)"/>
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-FE-DIV-UKJENT"/>
   </Variant>
   <Variant Name="Veisignal/Dobbelt signal mot vei">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-FE-DIV-UKJENT"/>
    <SetValue Key="name" Value="V.(flerspor)"/>
   </Variant>
  </Variants>
  <InsertPointObject Name="Veisignal/Enkelt signal mot vei" DisplayName="Planovergang/Enkelt signal mot vei" DisplayBlockName="NO-BN-2D-JBTSA_SIG-VEISIGNAL-1-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="6.0">
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Veisignal/Dobbelt signal mot vei" DisplayName="Planovergang/Dobbelt signal mot vei" DisplayBlockName="NO-BN-2D-JBTSA_SIG-VEISIGNAL-2-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="6.0">
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_THUMBNAIL-USPESIFISERT-Schematic" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_SIG-VEISIGNAL
				{% if Variant == 'Veisignal/Enkelt signal mot vei' %}VS1
				{% elsif Variant == 'Veisignal/Dobbelt signal mot vei' %}VS2
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{% if PortalMounted %}AAK{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="signalfundament"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <LuaFunction Name="NOBN_sig_getSignalSightingRequirement()" ReturnType="String" Description="Returns the sighting requirement according to TRV regulations for signals. Speed is extracted from the object's own alignment using 'getAlignmentInfo().Speed'. If no design speed is found in the object's own alignment, then 130 km/h will be assumed.">
  <Signature>Double NOBN_sig_getSignalSightingRequirement()</Signature>
  <Formula>
			function NOBN_sig_getSignalSightingRequirement()
				local DesignSpeed = getAlignmentInfo().Speed or 130 --130 km/h assumed if alignment has no design speed available
			
				if RcType == rctype_SignErtmsMarkerBoard then
					return 150, _info(DesignSpeed.." km/h: 150 m fixed sighting requirement for ERTMS boards.")
					
				elseif RcType == rctype_SignErtmsShuntingSignal then
					return 50, _info("50 m fixed sighting requirement during ERTMS shunting movements (NB! There are rules for sight/stopping distance towards Ss43 as well).")
				
				elseif RcType == rctype_Signal then
					if not (MainSignal:match("^Hs") or  DistantSignal:match("Ja")) and (DwarfSignal == "Ja" or HighShuntingSignal == "Ja") then
						return 50, _info("50 m fixed sighting requirement during shunting movements (NB! There are rules for sight/stopping distance towards Ss43 as well).")
				
					elseif (MainSignal:match("^Hs") or EndOfTrainRoute == "Ja") and (DistantSignal == "-") then
						-- Ref TRV Signal prosjektering, 2.1.2 "Hovedsignal"
						--NB! If through-signalling is in use, the sighting requirements are reduced to 80 km/h requirements - see TRV change ca 2019.
						if DesignSpeed &gt; 210 then
							return 250, _info(DesignSpeed.." km/h: Min. 150 m main signal unbroken sigthing, 4 seconds from 135 to 210 km/h, and 250 m above 210 km/h.")
						else 
							local v = math.max(135,math.min(210,DesignSpeed))
							return RC__round(v/3.6 * 4, 0), _info(DesignSpeed.." km/h: Min. 150 m main signal unbroken sigthing, 4 seconds from 135 to 210 km/h, max. 250 m above 210 km/h.")
						end
			
					elseif DistantSignal == "Ja" then 
						-- Ref TRV Signal prosjektering, 2.1.3 "Forsignal"
						local v = math.max(40,math.min(130,DesignSpeed))
						return RC__round(v/3.6 * 7, 0), _info(DesignSpeed.." km/h: Min. 78 m distant signal unbroken sighting, 7 seconds from 40 to 130 km/h, max 250 m above 130 km/h.")
			
					elseif HighShuntingSignal ~= "-" then
						return 50, _info("50 m fixed sighting requirement during shunting movements.")
				
					else
						return 0, _info(DesignSpeed.." km/h: Bad signal configuration [RcType="..RcType..", Variant="..(Variant and "(void)" or Variant.."."))
					end
			
				
				elseif RcType == "JBTSA_SIG PLO-signal" then
					-- Ref TRV Signal prosjektering, 2.1.2 "Hovedsignal"
					if DesignSpeed &gt; 210 then
						return 250, _info(DesignSpeed.." km/h: Min. 150 m main signal unbroken sigthing, 4 seconds from 135 to 210 km/h, and 250 m above 210 km/h.")
					else 
						local v = math.max(135,math.min(210,DesignSpeed))
						return RC__round(v/3.6 * 4, 0), _info(DesignSpeed.." km/h: Min. 150 m main signal unbroken sigthing, 4 seconds from 135 to 210 km/h, max. 250 m above 210 km/h.")
					end
			
				elseif RcType == "SA-SIG PLO-forsignal" then
					-- Ref TRV Signal prosjektering, 2.1.3 "Forsignal"
					local v = math.max(40,math.min(130,DesignSpeed))
					return RC__round(v/3.6 * 7, 0), _info(DesignSpeed.." km/h: Min. 78 m distant signal unbroken sighting, 7 seconds from 40 to 130 km/h, max 250 m above 130 km/h.")
			
				elseif RcType == rctype_LevelCrossingSignalTowardsRoad then
					--Signal mot vei
					return 30, _info("30 m fixed sighting requirement for road traffic towards level crossing signal (To be verified!).")
			
				elseif RcType == rctype_BridgeAndFrostDoorSignal then 
					--Samme byggeteknikk som for 3-lys Hs (2 røde blink / 1 hvit blink)
					return 150, _info("150 m fixed sighting requirement for bridge / frost gate signal (To be verified!).")
			
				elseif RcType == rctype_TrackSignal then
					--Ingen spesielle krav, plasseres når lokfører eller ombordansvarlig ikke ser hovedsignal (ikke tillatt i nye anlegg)
					return 50, _info("50 m fixed sighting requirement for Togsporsignal (old type RepHs repeater signal) (To be verified!).")
			
				else
					return 0, _info(DesignSpeed.." km/h: Bad signal type [RcType="..RcType..", Variant="..(Variant or "(void)").."].")
				end
			end
		</Formula>
 </LuaFunction>
 <DefaultInterlockingExportOptions>
  <TrainRoutesStartPointFilter>
			if (RcType == rctype_Signal and MainSignal == 'Hs2' or MainSignal == 'Hs3') then
				return NOBN_sig_getSignalShortName()
			elseif RcType == rctype_SignErtmsMarkerBoard then
				return NOBN_sig_getSignalShortName()
			end
		</TrainRoutesStartPointFilter>
  <TrainRoutesEndPointFilter>
			if ((RcType == rctype_Signal and (MainSignal == 'Hs1'or MainSignal == 'Hs2' or MainSignal == 'Hs3'))
				or (RcType == rctype_FictitiousSignal and Variant == "Fiktivt sluttpunkt for togvei")
				or (RcType == "JBTSA_SIG Togvei slutt"))
			then
				return NOBN_sig_getSignalShortName()
			elseif RcType == rctype_SignErtmsMarkerBoard then
				return NOBN_sig_getSignalShortName()
			end
		</TrainRoutesEndPointFilter>
  <ShuntingRoutesStartPointFilter>
			if (RcType == rctype_Signal and DwarfSignal == "Ja") then
				return NOBN_sig_getSignalNumber()
			end
		</ShuntingRoutesStartPointFilter>
  <ShuntingRoutesEndPointFilter>
			if (RcType == rctype_Signal and DwarfSignal ~= "-") or (RcType == rctype_SignErtmsMarkerBoard and Variant:lower():match("dvergsignal")) then 
				return NOBN_sig_getSignalNumber()
			elseif (RcType == rctype_FictitiousSignal and Variant == "Fiktivt sluttpunkt for togvei") or (RcType == "JBTSA_SIG Togvei slutt") then
				return code
			end
		</ShuntingRoutesEndPointFilter>
  <ViaPointFilter>
			if (RcType == rctype_FictitiousSignal and Variant == "Viapunkt for betjeningsanlegg") then
				return "(v"..code..")"
			end
		</ViaPointFilter>
  <ExtendedTrainRoutesExcludedStartPointFilter>Function == "blocking"</ExtendedTrainRoutesExcludedStartPointFilter>
  <ExtendedRoutePartFormatScript>
			base = StartName .. "-" .. EndName
			if ViaPoints.Count > 0 then
				via = ViaPoints[0].Value
				for i=1, ViaPoints.Count-1 do
					via = via .. "-" .. ViaPoints[i].Value
				end
				return base .. " via " .. via
			else
				return base
			end
		</ExtendedRoutePartFormatScript>
  <SwitchNameScript>
			dir = (position == "left") and "V" or "H"
			return Switch.code .. dir
		</SwitchNameScript>
 </DefaultInterlockingExportOptions>
 <ObjectType DataType="RailCOMPLETEInterlockingTable" Class="RCTable" LuaName="rctype_TableInterlockingControl" Name="JBTFE_DIV Forriglingstabell" Layer="JBTFE_TABELLER" Color="ByLayer" Group="Signal/Forriglingstabeller">
  <RelationSpace>tabell</RelationSpace>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>Variant .. " - " .. getUrlFilename()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Felles"/>
  <Variants DefaultValue="Forriglingstabell 0 Tabelloversikt">
   <Variant Name="Forriglingstabell - Tom tabell"/>
   <Variant Name="Forriglingstabell 0 Tabelloversikt"/>
   <Variant Name="Forriglingstabell 1-A Togveier retning A"/>
   <Variant Name="Forriglingstabell 1-B Togveier retning B"/>
   <Variant Name="Forriglingstabell 2-A Forlengede togveier retning A"/>
   <Variant Name="Forriglingstabell 2-B Forlengede togveier retning B"/>
   <Variant Name="Forriglingstabell 3-A Sikkerhetssone togveier retning A"/>
   <Variant Name="Forriglingstabell 3-B Sikkerhetssone togveier retning B"/>
   <Variant Name="Forriglingstabell 4 Sidedekning for togvei og skiftevei"/>
   <Variant Name="Forriglingstabell 5 Utløsing togveier"/>
   <Variant Name="Forriglingstabell 6-A Skifteveier retning A"/>
   <Variant Name="Forriglingstabell 6-B Skifteveier retning B"/>
   <Variant Name="Forriglingstabell 7-A Forlengede skifteveier retning A"/>
   <Variant Name="Forriglingstabell 7-B Forlengede skifteveier retning B"/>
   <Variant Name="Forriglingstabell 8-A Sikkerhetssone skifteveier retning A"/>
   <Variant Name="Forriglingstabell 8-B Sikkerhetssone skifteveier retning B"/>
   <Variant Name="Forriglingstabell 9 Utløsing skifteveier"/>
   <Variant Name="Forriglingstabell 10 Lokalområder"/>
   <Variant Name="Forriglingstabell 11 Sammensatte lokalområder"/>
   <Variant Name="Forriglingstabell 12 Sveivområder"/>
   <Variant Name="Forriglingstabell 13 Signalstopp"/>
   <Variant Name="Forriglingstabell 14 Avsporingsindikatorer"/>
   <Variant Name="Forriglingstabell 15 Automatisk gjennomgangsdrift"/>
   <Variant Name="Forriglingstabell 16-A AG-togveier retning A"/>
   <Variant Name="Forriglingstabell 16-B AG-togveier retning B"/>
   <Variant Name="Forriglingstabell 17 Arbeidsområder"/>
   <Variant Name="Forriglingstabell 18 Sammensatte arbeidsområder"/>
   <Variant Name="Forriglingstabell 19 Sporvekselomlegging"/>
   <Variant Name="Forriglingstabell 20 Middelkontrollampe"/>
  </Variants>
  <InsertTable Name="Forriglingstabell - Tom tabell" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-TABELL-Schematic">
   <TableSpecification>
    <ColumnSelectionSelf>true</ColumnSelectionSelf>
    <ColumnSelectionFromMasterTable>false</ColumnSelectionFromMasterTable>
    <Title>Forriglingstabell - Tom tabell</Title>
    <IncludeTitle>true</IncludeTitle>
    <ShowInvisibleObjects>false</ShowInvisibleObjects>
    <ObjectManagerFilterList/>
    <ObjectTypeBrowser>false</ObjectTypeBrowser>
    <EnableLuaFilter>true</EnableLuaFilter>
    <LuaFilter>false</LuaFilter>
    <UseDataSetFilter>false</UseDataSetFilter>
    <EnableCustomSettings>true</EnableCustomSettings>
    <TitleTextHeight>5</TitleTextHeight>
    <HeaderTextHeight>3.5</HeaderTextHeight>
    <DataTextHeight>2.5</DataTextHeight>
    <VerticalCellMargin>1</VerticalCellMargin>
    <HorizontalCellMargin>1</HorizontalCellMargin>
    <BlockScale>1</BlockScale>
    <MinRowHeight>3</MinRowHeight>
    <EnableWrap>false</EnableWrap>
    <WrapDepth>0</WrapDepth>
    <WrapSpacing>0</WrapSpacing>
    <WrapDirection>Right</WrapDirection>
    <RepeatHeaders>false</RepeatHeaders>
    <VerticalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>true</IsVertical>
     <Location>Left</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </VerticalNumbering>
    <HorizontalNumbering>
     <Enabled>false</Enabled>
     <IsVertical>false</IsVertical>
     <Location>Bottom</Location>
     <NumberFormat>Numbers</NumberFormat>
     <TextHeight>2</TextHeight>
     <HideBorders>true</HideBorders>
     <Alignment>MiddleCenter</Alignment>
    </HorizontalNumbering>
    <TableFormat>Standard</TableFormat>
    <Font>RC-STANDARD</Font>
    <Columns>
     <ColumnSpecification>
      <Guid>71b321ec-4bc3-493d-974b-2b01236d720c</Guid>
      <Headers>
       <Header Name="Name"/>
      </Headers>
      <Width>50</Width>
      <HideColumn>false</HideColumn>
      <SortOption>None</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>name</Data>
     </ColumnSpecification>
     <ColumnSpecification>
      <Guid>10272f0b-a413-49f6-bd6a-b520ea345d97</Guid>
      <Headers>
       <Header Name="Km"/>
      </Headers>
      <Width>50</Width>
      <HideColumn>false</HideColumn>
      <SortOption>Ascending</SortOption>
      <Alignment>MiddleCenter</Alignment>
      <Data>string.format("%d+%.03f",ReferenceMileage//1000,ReferenceMileage%1000)</Data>
     </ColumnSpecification>
    </Columns>
    <SortOrder>
     <string>10272f0b-a413-49f6-bd6a-b520ea345d97</string>
    </SortOrder>
    <NewColumnWidth xsi:nil="true"/>
   </TableSpecification>
  </InsertTable>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_TelecomRack" Name="JBTTE_RAC Telerack" Layer="JBTTE_RAC" Color="ByLayer" Group="Tele/Stativer" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>telerack</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTTE@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTTE@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTTE@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Tele"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Telerack">
   <Variant Name="Telerack">
    <SetValue Key="name" Value="Telerack"/>
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-JBTTE-TELERACK"/>
   </Variant>
  </Variants>
  <InsertPointObject Name="Telerack" DisplayBlockName="NO-BN-2D-JBTTE_RAC-TELERACK-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTTE_RAC-TELERACK-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_Telephone" Name="JBTTE_TLT Telefon" Layer="JBTTE_TLT" Color="ByLayer" Group="Tele/Telefon" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>telefon</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTTE@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTTE@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTTE@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Tele"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Telefon langs spor">
   <Variant Name="Telefon langs spor">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-JBTTE-TELEFON-LANGS-SPOR"/>
   </Variant>
  </Variants>
  <LuaExpression Name="name">
   <Formula>"Tlf."..code</Formula>
  </LuaExpression>
  <InsertPointObject Name="Telefon langs spor" DisplayBlockName="NO-BN-2D-JBTTE_TLT-TELEFON-LANGS-SPOR-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTTE_TLT-TELEFON-LANGS-SPOR-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_LightingFixture" Name="JBTEL_LYA Lysarmatur" Layer="JBTEL_LYA" Color="ByLayer" Group="Lavspent/Belysning" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>belysning</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTEL@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTEL@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTEL@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Lavspent"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Object"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Lysarmatur">
   <Variant Name="Lysarmatur"></Variant>
  </Variants>
  <CustomProperty DataType="String" Name="EL_LYA_Subvariant" DisplayName="Lysarmatur type" DefaultValue="Armatur" Description="The lighting fixture's type [freetext], e.g. 'Ukjent' (unknown), 'Armatur'."/>
  <CustomProperty DataType="UInt32" Name="EL_LYA_Power" DisplayName="Lysarmatur effekt" DefaultValue="26" Description="The lighting fixture's power [W]."/>
  <CustomProperty DataType="String" Name="EL_LYA_Producer" DisplayName="Lysarmatur fabrikant" DefaultValue="Ukjent" Description="The lighting fixture's producer [freetext], e.g. 'Ukjent' (unknown), 'Glamox', 'Sebra light'."/>
  <CustomProperty DataType="String" Name="EL_LYA_ProductType" DisplayName="Lysarmatur typebetegnelse" DefaultValue="Ukjent" Description="The lighting fixture's product type [freetext], e.g. 'Ukjent' (unknown), 'Glow 300'."/>
  <CustomProperty DataType="Enumeration" Name="EL_LYA_BatteryBackup" DisplayName="Lysarmatur batteribackup" DefaultValue="Nei" Description="The lighting fixture's battery backup requirement [ Nei (none) | Ja, krav til oppetid (Yes, required) ].">
   <Values>
    <Value>Nei</Value>
    <Value>Ja, krav til oppetid</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="String" Name="EL_LYA_LightFixtureRalColorCode" DisplayName="Lysarmatur RAL-kode" DefaultValue="Ukjent" Description="The lighting fixture's RAL color code [ Ukjent (unknown) | &lt;RAL code text string&gt; ]."/>
  <SetValue Key="dir" Value="up"/>
  <InsertPointObject Name="Lyspunkt" DisplayBlockName="NO-BN-2D-JBTEL_LYA-BELYSNING-ARMATUR-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1e-3">
   <OwnAlignmentTargetSpace>hjelpelinje</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="up"/>
   <SetValue Key="name" Value="Lysarmatur"/>
   <SetValue Key="PoleRouting" Value="None"/>
   <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-EL-LYA-LYSARMATUR-INNENDØRS-LYSSTOFFRØR-1200x2"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTEL_LYA-BELYSNING-ARMATUR-Geographic" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEL_LYA-BELYSNING-ARMATUR
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_Lighting" Name="JBTEL_LYS Lys" Layer="JBTEL_LYS" Color="ByLayer" Group="Lavspent/Belysning" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>belysning</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTEL@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTEL@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTEL@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Lavspent"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Ukjent">
   <Variant Name="Ukjent">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="EarthingMethod" Value="Unknown"/>
   </Variant>
   <Variant Name="Arealbelysning">
    <SetValue Key="EL_LYS_SubVariant" Value="1-lys"/>
    <SetValue Key="dir" Value="both"/>
    <SetValue Key="EL_LYS_PoleHeight" Value="4000"/>
    <SetValue Key="EL_LYS_Arm_Length" Value="500"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="EarthingMethod" Value="Rail"/>
   </Variant>
   <Variant Name="Armatur i åk">
    <SetValue Key="EL_LYS_SubVariant" Value="1-lys"/>
    <SetValue Key="dir" Value="both"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="Vertical"/>
    <SetValue Key="Geometry3D_0.Offset.Z" Value="0.25"/>
    <SetValue Key="EarthingMethod" Value="None"/>
   </Variant>
   <Variant Name="Belysning adkomst/Pedestrian lane, i tak">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="dir" Value="up"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="EarthingMethod" Value="Object"/>
   </Variant>
   <Variant Name="Belysning adkomst/Pedestrian lane, på gulv">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="dir" Value="up"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="Geometry3D_0.Rotation.Y" Value="180"/>
    <SetValue Key="EarthingMethod" Value="Object"/>
   </Variant>
   <Variant Name="Belysning adkomst/Pedestrian lane, på vegg">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="dir" Value="up"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="Geometry3D_0.Rotation.Y" Value="{% if LeftSided %}90{% else %}-90{% endif %}"/>
    <SetValue Key="EarthingMethod" Value="Object"/>
   </Variant>
   <Variant Name="Belysning for vei/parkering">
    <SetValue Key="EL_LYS_SubVariant" Value="1-lys"/>
    <SetValue Key="dir" Value="both"/>
    <SetValue Key="EL_LYS_PoleHeight" Value="4000"/>
    <SetValue Key="EL_LYS_Arm_Length" Value="500"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="EarthingMethod" Value="Wire"/>
   </Variant>
   <Variant Name="Belysning utvendig bygg">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="dir" Value="both"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="EarthingMethod" Value="Object"/>
   </Variant>
   <Variant Name="Nedfelt markeringslys på plattform">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="dir" Value="up"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="EarthingMethod" Value="Object"/>
   </Variant>
   <Variant Name="Nødbelysning">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="dir" Value="up"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="EarthingMethod" Value="Object"/>
   </Variant>
   <Variant Name="Nødbelysning i/under/ved håndløper">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="dir" Value="up"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="Geometry3D_0.Rotation.Y" Value="180"/>
    <SetValue Key="EarthingMethod" Value="Rail"/>
   </Variant>
   <Variant Name="Plattformbelysning på mast">
    <SetValue Key="EL_LYS_SubVariant" Value="1-lys"/>
    <SetValue Key="dir" Value="both"/>
    <SetValue Key="EL_LYS_PoleHeight" Value="4000"/>
    <SetValue Key="EL_LYS_Arm_Length" Value="500"/>
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-EL-LYS-LYSMAST-{{EL_LYS_SubVariant}}-U{{EL_LYS_Arm_Length}}-H{EL_LYS_PoleHeight}}{% if EL_LYS_Foundation == 'Yes' %}-{{ EL_LYS_Foundation }}{% endif %}"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="EarthingMethod" Value="Rail"/>
   </Variant>
   <Variant Name="Plattformbelysning på vegg">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="dir" Value="up"/>
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-EL-LYA-LYSARMATUR-INNENDØRS-LYSSTOFFRØR-1200x2"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="Geometry3D_0.Rotation.Y" Value="{% if LeftSided %}90{% else %}-90{% endif %}"/>
    <SetValue Key="EarthingMethod" Value="Rail"/>
   </Variant>
   <Variant Name="Plattformbelysning under tak">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="dir" Value="up"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-EL-LYA-LYSARMATUR-INNENDØRS-LYSSTOFFRØR-1200x2"/>
    <SetValue Key="EarthingMethod" Value="Rail"/>
   </Variant>
   <Variant Name="Plattformbelysning under tak, opplys">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="dir" Value="up"/>
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-EL-LYA-LYSARMATUR-INNENDØRS-LYSSTOFFRØR-1200x2"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="Geometry3D_0.Rotation.Y" Value="180"/>
    <SetValue Key="EarthingMethod" Value="Rail"/>
   </Variant>
   <Variant Name="Sporvekselbelysning">
    <SetValue Key="EL_LYS_SubVariant" Value="1-lys"/>
    <SetValue Key="dir" Value="both"/>
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-EL-LYS-LYSMAST-{{EL_LYS_SubVariant}}-U{{EL_LYS_Arm_Length}}-H{EL_LYS_PoleHeight}}{% if EL_LYS_Foundation == 'Yes' %}-{{ EL_LYS_Foundation }}{% endif %}"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="EarthingMethod" Value="Rail"/>
   </Variant>
   <Variant Name="Tunnelbelysning">
    <SetValue Key="EL_LYS_SubVariant" Value="Punkt"/>
    <SetValue Key="dir" Value="up"/>
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-EL-LYA-LYSARMATUR-INNENDØRS-LYSSTOFFRØR-1200x2"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="Geometry3D_0.Rotation.Y" Value="{% if LeftSided %}45{% else %}-45{% endif %}"/>
    <SetValue Key="EarthingMethod" Value="Rail"/>
   </Variant>
   <Variant Name="Øvrige">
    <SetValue Key="EL_LYS_SubVariant" Value="Ukjent"/>
    <SetValue Key="Geometry3D_0.Name" Value="(har ikke 3D for {{Variant}})"/>
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
    <SetValue Key="EarthingMethod" Value="Unknown"/>
   </Variant>
  </Variants>
  <SetValue Key="EL_LYS_Foundation" Value="Ja"/>
  <CustomProperty DataType="Enumeration" Name="EL_LYS_SubVariant" DisplayName=" Lys type" DefaultValue="Ukjent" Description="The lighting fixture subvariant (the available selections depend on the main variant).">
   <Values Variant="Ukjent">
    <Value>Ukjent</Value>
   </Values>
   <Values Variant="Arealbelysning">
    <Value>4-lys</Value>
    <Value>3-lys-T</Value>
    <Value>3-lys</Value>
    <Value>2-lys-V</Value>
    <Value>2-lys</Value>
    <Value>1-lys</Value>
    <Value>1-lys (trinnløs)</Value>
   </Values>
   <Values Variant="Armatur i åk">
    <Value>2-lys</Value>
    <Value>1-lys</Value>
   </Values>
   <Values Variant="Belysning adkomst/gangvei, i tak">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Belysning adkomst/gangvei, på gulv">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Belysning adkomst/gangvei, på vegg">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Belysning for vei/parkering">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Belysning utvendig bygg">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Nedfelt markeringslys på plattform">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Nødbelysning">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Nødbelysning i/under/ved håndløper">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Plattformbelysning på mast">
    <Value>4-lys</Value>
    <Value>3-lys-T</Value>
    <Value>3-lys</Value>
    <Value>2-lys-V</Value>
    <Value>2-lys</Value>
    <Value>1-lys</Value>
    <Value>1-lys (trinnløs)</Value>
   </Values>
   <Values Variant="Plattformbelysning på vegg">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Plattformbelysning under tak">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Plattformbelysning under tak, opplys">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Sporvekselbelysning">
    <Value>4-lys</Value>
    <Value>3-lys-T</Value>
    <Value>3-lys</Value>
    <Value>2-lys-V</Value>
    <Value>2-lys</Value>
    <Value>1-lys</Value>
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Tunnelbelysning">
    <Value>Punkt</Value>
   </Values>
   <Values Variant="Øvrige">
    <Value>4-lys</Value>
    <Value>3-lys-T</Value>
    <Value>3-lys</Value>
    <Value>2-lys-V</Value>
    <Value>2-lys</Value>
    <Value>1-lys</Value>
    <Value>Punkt</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="UInt32" Name="EL_LYS_PoleHeight" DisplayName="Lys mastehøyde" DefaultValue="5000" Description="The lighting fixture's pole height [mm]. Note: 3D model name will be deduced in steps of 250 mm from 0 to 1000, thereafter in steps of 500 mm."></CustomProperty>
  <CustomProperty DataType="Enumeration" Name="EL_LYS_Foundation" DisplayName="Lysmast fundament" DefaultValue="-" Description="'Ja' if the light pole comes with an integrated steel foundation, otherwise '-' (default) if no foundation is required.">
   <Values Variant="Ukjent">
    <Value>Ja</Value>
    <Value>-</Value>
   </Values>
   <Values Variant="Arealbelysning">
    <Value>Ja</Value>
    <Value>-</Value>
   </Values>
   <Values Variant="Armatur i åk">
    <Value>-</Value>
   </Values>
   <Values Variant="Belysning adkomst/gangvei, i tak">
    <Value>-</Value>
   </Values>
   <Values Variant="Belysning adkomst/gangvei, på gulv">
    <Value>-</Value>
   </Values>
   <Values Variant="Belysning adkomst/gangvei, på vegg">
    <Value>-</Value>
   </Values>
   <Values Variant="Belysning for vei/parkering">
    <Value>Ja</Value>
    <Value>-</Value>
   </Values>
   <Values Variant="Belysning utvendig bygg">
    <Value>-</Value>
   </Values>
   <Values Variant="Nedfelt markeringslys på plattform">
    <Value>-</Value>
   </Values>
   <Values Variant="Nødbelysning">
    <Value>-</Value>
   </Values>
   <Values Variant="Nødbelysning i/under/ved håndløper">
    <Value>-</Value>
   </Values>
   <Values Variant="Plattformbelysning på mast">
    <Value>Ja</Value>
    <Value>-</Value>
   </Values>
   <Values Variant="Plattformbelysning på vegg">
    <Value>-</Value>
   </Values>
   <Values Variant="Plattformbelysning under tak">
    <Value>-</Value>
   </Values>
   <Values Variant="Plattformbelysning under tak, opplys">
    <Value>-</Value>
   </Values>
   <Values Variant="Sporvekselbelysning">
    <Value>Ja</Value>
    <Value>-</Value>
   </Values>
   <Values Variant="Tunnelbelysning">
    <Value>-</Value>
   </Values>
   <Values Variant="Øvrige">
    <Value>Ja</Value>
    <Value>-</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Double" Name="EL_LYS_Arm_Length" DisplayName="Lys armlengde" Description="The length of the arms of the lighting fixture in mm.  Note: 3D model name will be deduced in steps of 250 mm from 500 to 1000, thereafter in steps of 500 mm." DefaultValue="1000"></CustomProperty>
  <CustomProperty DataType="UInt32" Name="EL_LYS_Power" DisplayName="Lys effekt" DefaultValue="26" Description="The lighting fixture's power [W] per specimen."/>
  <CustomProperty DataType="String" Name="EL_LYS_RalColorCode" DisplayName="Lys RAL-kode" DefaultValue="Ukjent" Description="The lighting fixture's RAL color code [ Ukjent (unknown) | &lt;RAL code text string&gt; ]."></CustomProperty>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEL_LYS_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEL_LYS_Geometry3DName()" ReturnType="String" Description="Returns the 3D model name for an light.">
   <Signature>String _JBTEL_LYS_Geometry3DName()</Signature>
   <Formula>
				function _JBTEL_LYS_Geometry3DName()
					local function bin(bins, ball)
						local num = tonumber(ball)
						if num == nil then return end
						if num &lt; bins[1] then return bins[1] end
						for i=2,#bins do
							if num &lt; bins[i] then
								if num &lt;= (bins[i] + bins[i-1])/2 then
									return bins[i-1]
								else
									return bins[i]
								end
							end
						end
						return bins[#bins]		
					end
				
					local lysror = "NO-BN-3D-EL-LYA-LYSARMATUR-INNENDØRS-LYSSTOFFRØR-1200x2"	
				
					local U = bin({500, 750, 1000, 1500, 2000, 2500, 3000}, EL_LYS_Arm_Length)
					local H = bin({4000, 5000, 6000, 7000, 8000, 9000, 10000, 11000, 12000}, EL_LYS_PoleHeight)
				
					local function pole3D()
						local subVar = EL_LYS_SubVariant
						if EL_LYS_SubVariant == "1-lys (trinnløs)" then
							subVar = "1-LYS"
						elseif EL_LYS_SubVariant == "2-lys" then
							subVar = "2-LYS-V180"
						elseif EL_LYS_SubVariant == "2-lys-V" then
							subVar = "2-LYS-V120"
						elseif EL_LYS_SubVariant == "3-lys" then
							subVar = "3-LYS-V120"
						elseif EL_LYS_SubVariant == "3-lys-T" then
							subVar = "3-LYS-V120"
						elseif EL_LYS_SubVariant == "4-lys" then
							subVar = "4-LYS-X090"
						end
						
						if subVar == "Ukjent" then 
							return "NO-BN-3D-EL-LYS-LYSMAST-1-LYS-U"..U.."-H"..H
						else
							return "NO-BN-3D-EL-LYS-LYSMAST-"..subVar.."-U"..U.."-H"..H
						end
					end
				
					if Variant == "Ukjent" then
						return nil
					elseif Variant == "Arealbelysning" then
						return pole3D()
					elseif Variant == "Armatur i åk" then
						return nil
					elseif Variant == "Belysning adkomst/gangvei, i tak" then
						return lysror
					elseif Variant == "Belysning adkomst/gangvei, på gulv" then
						return lysror
					elseif Variant == "Belysning adkomst/gangvei, på vegg" then
						return lysror
					elseif Variant == "Belysning for vei/parkering" then
						return "NO-BN-3D-EL-LYS-LYSMAST-1-LYS-U"..U.."-H"..H
					elseif Variant == "Belysning utvendig bygg" then
						return lysror
					elseif Variant == "Nedfelt markeringslys på plattform" then
						return nil
					elseif Variant == "Nødbelysning" then
						return lysror
					elseif Variant == "Nødbelysning i/under/ved håndløper" then
						return nil
					elseif Variant == "Plattformbelysning på mast" then
						return pole3D()
					elseif Variant == "Plattformbelysning på vegg" then
						return lysror
					elseif Variant == "Plattformbelysning under tak" then
						return lysror
					elseif Variant == "Plattformbelysning under tak, opplys" then
						return lysror
					elseif Variant == "Sporvekselbelysning" then
						return pole3D()
					elseif Variant == "Tunnelbelysning" then
						return lysror
					elseif Variant == "Øvrige" then
						return pole3D()
					end
				end		
					
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Arealbelysning" DisplayBlockName="NO-BN-2D-JBTEL_LYS-BELYSNING-LYSMAST-1-LYS-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>hjelpelinje</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="name" Value="Arealbelysning"/>
   <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-EL-LYS-LYSMAST-1-LYS-U500-H4000"/>
  </InsertPointObject>
  <InsertPointObject Name="Kvadratisk armatur" DisplayBlockName="NO-BN-2D-JBTEL_LYA-BELYSNING-ARMATUR-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="1.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>hjelpelinje</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="name" Value="Lysarmatur"/>
   <SetValue Key="Geometry3D_0.PoleRouting" Value="Vertical"/>
   <SetValue Key="Geometry3D_0.Offset.Z" Value="1.0"/>
   <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-EL-LYA-ARMATUR-I-ÅK"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTEL_LYA-BELYSNING-ARMATUR-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D
				{% if Variant == 'Arealbelysning' %}JBTEL_LYS-BELYSNING-LYSMAST-1-LYS
				{% else %}JBTEL_LYA-BELYSNING-ARMATUR
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_LowPowerDistributionCabinet" Name="JBTEL_FSP Fordelingsskap" Layer="JBTEL_FSP" Color="ByLayer" Group="Lavspent/Skap" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>fordelingsskap</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTEL@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTEL@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTEL@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Lavspent"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Fordelingsskap">
   <Variant Name="Fordelingsskap"/>
  </Variants>
  <CustomProperty DataType="String" Name="EL_FSP_FeederCableType" DisplayName="Fordelingsskap forsyningskabel type" DefaultValue="Ukjent" Description="The distribution panel's feeder cable type [ &lt;Type&gt; &lt;Conductors&gt;x&lt;mm2&gt; &lt;Material&gt; ], e.g. 'TFSP 3x50 Al'."/>
  <CustomProperty DataType="Double" Name="EL_FSP_OverloadProtection" DisplayName="Fordelingsskap overbelastningsvern" DefaultValue="Ukjent" Description="The overload protection's fuse [A]."/>
  <CustomProperty DataType="String" Name="EL_FSP_DistributionTarget" DisplayName="Fordelingsskap fordeling til anlegg" DefaultValue="Ukjent" Description="The distribution panel's target system to which power is fed [freetext], e.g. 'Togvarme, batteriskap', 'Effektbrytere'."/>
  <CustomProperty DataType="String" Name="EL_FSP_EnergyMeterID" DisplayName="Fordelingsskap målerpunkt ID" DefaultValue="Ukjent" Description="The ID of the distribution panel's energy meter [freetext], e.g. '65801608'."/>
  <CustomProperty DataType="String" Name="EL_FSP_DistributionSource" DisplayName="Fordelingsskap forsynes fra" DefaultValue="Ukjent" Description="The distribution panel's source system from which power is received [freetext], e.g. 'Glitre', 'EB nett' etc."/>
  <CustomProperty DataType="Enumeration" Name="EL_FSP_DistributionSystem" DisplayName="Fordelingsskap fordelingssystem" DefaultValue="Ukjent" Description="The distribution panel's distribution system type [ Ukjent | IT | IT fra KL-anlegget | KL | TN-C | TN-C-S | TN-S | TT ].">
   <Values>
    <Value>Ukjent</Value>
    <Value>IT</Value>
    <Value>IT fra KL-anlegget</Value>
    <Value>KL</Value>
    <Value>TN-C</Value>
    <Value>TN-C-S</Value>
    <Value>TN-S</Value>
    <Value>TT</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="EL_FSP_DistributionVoltage" DisplayName="Fordelingsskap spenning" DefaultValue="Ukjent" Description="The distribution panel's voltage [ Ukjent | 1000 | 230 | 400 | 690 | KL | Lavere enn 230 ].">
   <Values>
    <Value>Ukjent</Value>
    <Value>1000</Value>
    <Value>230</Value>
    <Value>400</Value>
    <Value>690</Value>
    <Value>KL</Value>
    <Value>Lavere enn 230</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="Enumeration" Name="EL_FSP_DistributionPhases" DisplayName="Fordelingsskap antall faser" DefaultValue="Ukjent" Description="The distribution panel's phases [ Ukjent | 1 | 2 | 3 | 3 + N ].">
   <Values>
    <Value>Ukjent</Value>
    <Value>1</Value>
    <Value>2</Value>
    <Value>3</Value>
    <Value>3 + N</Value>
   </Values>
  </CustomProperty>
  <CustomProperty DataType="String" Name="EL_FSP_MainFuseType" DisplayName="Fordelingsskap Hovedsikring type" DefaultValue="Ukjent" Description="The distribution panel's main fuse type [freetext], e.g. 'Automatsikring', 'K&amp;M, IZM, 10-400N', 'LH-00'."/>
  <CustomProperty DataType="String" Name="EL_FSP_DistributionId" DisplayName="Fordelingsskap ID" DefaultValue="Ukjent" Description="The distribution panel's own identity [freetext], e.g. 'A6-TA2, Skamarken', 'Fordeling B1'."/>
  <CustomProperty DataType="String" Name="EL_FSP_DrawingNumber" DisplayName="Fordelingsskap tegningsnummer" DefaultValue="Ukjent" Description="The distribution panel's layout drawing's archive number [freetext], e.g. 'EL.108788-000', 'IUP-00-N-00648'."/>
  <CustomProperty DataType="String" Name="EL_FSP_IpAddress" DisplayName="Fordelingsskap IP-adresse" DefaultValue="Ukjent" Description="The distribution panel's IP adresse identity [freetext], e.g. '192.86.123.03', 'Ukjent' (unknown), 'Ingen' (none)."/>
  <InsertPointObject Name="Fordelingsskap" DisplayBlockName="NO-BN-2D-JBTEL_FSP-SKAP-FORDELINGSSKAP-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="name" Value="Fordelingsskap"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTEL_FSP-SKAP-FORDELINGSSKAP" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEL_FSP-SKAP
				{% if Variant == 'Fordelingsskap' %}FORDELINGSSKAP
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_SwitchHeatingCabinet" Name="JBTEL_SVG Gruppeskap" Layer="JBTEL_SVG" Color="ByLayer" Group="Lavspent/Skap" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>gruppeskap</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTEL@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTEL@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTEL@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Lavspent"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Gruppeskap">
   <Variant Name="Gruppeskap"/>
  </Variants>
  <InsertPointObject Name="Gruppeskap" DisplayBlockName="NO-BN-2D-JBTEL_SVG-SKAP-GRUPPESKAP-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="name" Value="Gruppeskap"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTEL_SVG-SKAP-GRUPPESKAP-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEL_SVG-SKAP
				{% if Variant == 'Gruppeskap' %}GRUPPESKAP
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_TrainHeatingCabinet" Name="JBTEL_TVP Togvarmepost" Layer="JBTEL_TVP" Color="ByLayer" Group="Lavspent/Skap" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>togvarmepost</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTEL@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTEL@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTEL@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Lavspent"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Togvarmepost">
   <Variant Name="Togvarmepost"/>
  </Variants>
  <InsertPointObject Name="Togvarmepost" DisplayBlockName="NO-BN-2D-JBTEL_TVP-SKAP-TOGVARMEPOST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="name" Value="Togvarmepost"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTEL_TVP-SKAP-TOGVARMEPOST" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEL_TVP-SKAP
				{% if Variant == 'Togvarmepost' %}TOGVARMEPOST
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_LowPowerTransfomer" Name="JBTEL_TRF Transformator" Layer="JBTEL_TRF" Color="ByLayer" Group="Lavspent/Transformatorer" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>lavspent_transformator</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTEL@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTEL@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTEL@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Lavspent"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Transformator">
   <Variant Name="Transformator"/>
  </Variants>
  <InsertPointObject Name="Transformator" DisplayBlockName="NO-BN-2D-JBTEL_TRF-TRANSFORMATOR-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="name" Value="Transformator"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTEL_TRF-TRANSFORMATOR" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEL_TRF
				{% if Variant == 'Transformator' %}TRANSFORMATOR
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" LuaName="rctype_UpsDistribution" Name="JBTEL_UPS UPS fordeler" Layer="JBTEL_UPS" Color="ByLayer" Group="Lavspent/UPS" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>ups_fordeler</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTEL@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTEL@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTEL@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Lavspent"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="UPS fordeler">
   <Variant Name="UPS fordeler"/>
  </Variants>
  <InsertPointObject Name="UPS fordeler" DisplayBlockName="NO-BN-2D-JBTEL_UPS-UPS-FORDELER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="name" Value="UPS fordeler"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTEL_UPS-UPS-FORDELER" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEL_UPS
				{% if Variant == 'UPS fordeler' %}UPS-FORDELER
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
 </ObjectType>
 <LuaFunction Name="NOBN_bnp_getBoardOrPoleName()" ReturnType="String" Description="Returns a short type name for signs (boards and poles), according to the object's variant.">
  <Signature>String NOBN_bnp_getBoardOrPoleName()</Signature>
  <Formula>
			function NOBN_bnp_getBoardOrPoleName()
				if Variant == "E36A Level crossing, location" then 
					return "PLO"
				elseif Variant == "E36B Level crossing, announcement" then 
					return "Fs-PLO"
				elseif Variant == "E37A Level transition" then
					return "L.trans"
				elseif Variant == "E37B Level zero" then
					return "L.0"
				elseif Variant == "E106A Stop for shunting, location" then
					return "Sh.slutt"
				elseif Variant == "E106A Stop for shunting, announcement" then
					return "Fs-Sh.slutt"
				elseif Variant == "E107 Interlocked area end" then
					return "Sup.slutt"
				elseif Variant == "E108 Interlocked area begin" then
					return "Sup.start"
				elseif Variant == "E200 Speed restriction lifted" then
					return "S.lifted"
				elseif Variant == "E201 Speed restriction 10" then
					return "S.10"
				elseif Variant == "E202 Speed restriction 20" then
					return "S.20"
				elseif Variant == "E203 Speed restriction 30" then
					return "S.30"
				elseif Variant == "E204 GSM-R network Norway" then
					return "GSM-R"
				elseif Variant:find("Bevegelig kryss") then
					return "Bev.X"
				elseif Variant:find("refleks") then
					return "Refl."
				elseif Variant:find("Baliseskilt") then
					return "Balise"
				elseif Variant:find("innkoblet") then
					return "Innkobl."
				elseif Variant:find("utkoblet") then
					return "Utkobl."
				elseif Variant:find("Nødtelefon") then
					return "Nødtlf."
				elseif Variant:find("1000V") then
					return "1000V"
				elseif Variant:find("se og lytt") then
					return "Se/lytt"
				elseif Variant:find("enkeltspor") then --Veisignal
					return "138"
				elseif Variant:find("flere spor") then --Veisignal
					return "138-fler"
				elseif Variant:find("Sidespor") then
					return "Ssp."
				elseif Variant:find("Kjedebrudd") then
					return "Kj.br."
				elseif Variant:find("meterangivelse") then
					return "Meterang."
				elseif Variant:find("Spornummer") then
					return "Spornr"
				elseif Variant:find("Anleggsområde") then
					return "Anl.omr."
				elseif Variant:find("Rømningsavstand") then
					local s = rel_Anything_Has_Marker
					local r,n = getRelatedObjects(s)
					if n == 0 then 
						return "UNFINISHED - Relate with '"..s.."' to one or two marker objects (marking the escape route entrances)."
					else
						return "Rømn.avst."
					end
				elseif Variant:find("Arbeidsområdeskilt Type 1%-2") then
					return "Ao type 1-2"
				elseif Variant:find("Arbeidsområdeskilt Type 1%-3") then
					return "Ao type 1-3"
				elseif Variant:find("Arbeidsområdeskilt Type 2%-2") then
					return "Ao type 2-2"
				elseif Variant:find("Arbeidsområdeskilt Type 2%-3") then
					return "Ao type 2-3"	
				elseif Variant:find("Arbeidsområdeskilt Orienterende") then
					return "Ao type Orient."
				elseif Variant:match("%d+%w+-%d") then
					return Variant:match("%d+%w+-%d")
				elseif Variant:match("%d+-%w+") then
					return Variant:match("%d+-%w+")
				elseif Variant:match("%d+%w+") then
					return Variant:match("%d+%w+")
				end
			end
        </Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_bnp_getEscapeDistanceBoardTexts()" ReturnType="String" Description="Returns a table {'Left'=Lval,'Right'=Rval} with distance to nearest related marker. Default step 10, default offset 0. '?':missing marker, '+':multiple markers found.">
  <Signature>String NOBN_bnp_getEscapeDistanceBoardTexts([Int step[, Int offset]])</Signature>
  <Formula>
			function NOBN_bnp_getEscapeDistanceBoardTexts(step,offset)
				if step == nil then 
					step = 10
				else
					step = math.floor(math.abs(step))
					if step == 0 then 
						step = 10 
					end
				end
				offset = offset or 0
				if this.RcType ~= rctype_SignNssEscapeRouteDistance then
					return _warning, "Bad object type ["..RcType.."], '"..rctype_SignNssEscapeRouteDistance.."' was expected"
				end

				local relationName = rel_Anything_Has_Marker
				local r,n = getRelatedObjects(relationName)
				local s = {}
				local t = {}
				for i = 1, n do
					table.insert(t,r[i-1].ReferenceMileage) --collection r is indexed from 0
				end
				t = RC__SortedNumberCollection(t)
				local k = 0
				for i = 1, n do
					if ReferenceMileage &gt; t[i] then
						k = k + 1
					end
				end
				if LeftSided then
					downIndex = "Left"
					upIndex = "Right"
				else
					downIndex = "Right"
					upIndex = "Left"
				end
				if k == 0 then
					s[downIndex] = "?"
				elseif k == 1 then
					s[downIndex] = math.floor((offset + ReferenceMileage - t[k] + step/2)/step)*step
				elseif k &gt;= 1 then
					s[downIndex] = math.floor((offset + ReferenceMileage - t[k] + step/2)/step)*step.."+"
				end
				if k == n then
					s[upIndex] = "?"
				elseif k == n-1 then
					s[upIndex] = math.floor((offset + t[k+1] - ReferenceMileage + step/2)/step)*step
				elseif k &lt;= n-2 then
					s[upIndex] = math.floor((offset + t[k+1] - ReferenceMileage + step/2)/step)*step.."+"
				end
				return s
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_bnp_getEscapeDistanceBoardTextLeft()" ReturnType="String" Description="Returns distance from escape route board to a left-sided related marker. '?':No marker found in arrow direction. '+':Multiple markers found in arrow direction. denoting the emergency exit (with optional step and offset). Default step size is 10. Default offset is 0.">
  <Signature>String NOBN_bnp_getEscapeDistanceBoardTextLeft([[Int step[, Int offset]])</Signature>
  <Formula>
			function NOBN_bnp_getEscapeDistanceBoardTextLeft(step,offset)
				if Variant:lower():match("venstre") or Variant:lower():match("begge") then
						return NOBN_bnp_getEscapeDistanceBoardTexts(step,offset)["Left"] 
					else 
						return "-", _info("Relate escape distance board to a marker with relation '"..rel_Anything_Has_Marker.."'.")
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_bnp_getEscapeDistanceBoardTextRight()" ReturnType="String" Description="Returns distance from escape route board to a right-sided related marker. '?':No marker found in arrow direction. '+':Multiple markers found in arrow direction. denoting the emergency exit (with optional step and offset). Default step size is 10. Default offset is 0.">
  <Signature>String NOBN_bnp_getEscapeDistanceBoardTextRight([[Int step[, Int offset]])</Signature>
  <Formula>
			function NOBN_bnp_getEscapeDistanceBoardTextRight(step,offset)
				if Variant:lower():match("høyre") or Variant:lower():match("begge") then
					return NOBN_bnp_getEscapeDistanceBoardTexts(step,offset)["Right"]
				else 
					return "-", _info("Relate escape distance board to a marker with relation '"..rel_Anything_Has_Marker.."'.")
				end
			end
		</Formula>
 </LuaFunction>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_SignErtmsMiscBoard" Name="JBTSA_MSS ERTMS Misc board" Layer="JBTSA_MSS" Color="ByLayer" Group="Skilt/Kjørende personell/ERTMS Signalskilt" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>ertms_board</RelationSpace>
  <AttachmentCategory Name="ertms_board"/>
  <AttachTo Category="ertms_board"/>
  <AttachTo Category="ertms_marker_board"/>
  <AttachTo Category="skiltfeste"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_sig_getSignalSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>NOBN_sig_getSignalPartNames()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 3.5 or -3.5</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>PortalMounted and 8.0 or 0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="E36A Level crossing, location">
    <SetValue Key="type" Value="other:ertmsLevelCrossingLocation"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E36B Level crossing, announcement">
    <SetValue Key="type" Value="other:ertmsLevelCrossingAnnouncement"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E37A Level transition">
    <SetValue Key="type" Value="other:ertmsLevelTransitionEtcs"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E37B Level zero">
    <SetValue Key="type" Value="other:ertmsLevelZero"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E38 Avalanche area">
    <SetValue Key="type" Value="other:ertmsAvalancheArea"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E39 Frost gate">
    <SetValue Key="type" Value="other:ertmsFrostGate"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E106A Stop for shunting, location">
    <SetValue Key="type" Value="other:ertmsStopForShuntingLocation"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E106B Stop for shunting, announcement">
    <SetValue Key="type" Value="other:ertmsStopForShuntingAnnouncement"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E107 Interlocked area end">
    <SetValue Key="type" Value="other:ertmsUnsecuredAreaWithHandoperatedPoints"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E108 Interlocked area begin">
    <SetValue Key="type" Value="other:ertmsInterlockedArea"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E204 GSM-R network Norway">
    <SetValue Key="type" Value="other:ertmsGsmNetworkNorway"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
  </Variants>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_ertms_miscBoard_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_ertms_miscBoard_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the 3D model name [String] for the ERTMS board. Covers various ERTMS board types.">
   <Signature>String _JBTSA_MSS_ertms_miscBoard_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_MSS_ertms_miscBoard_Geometry3DName()
					--Board type:
					local t = "NO-BN-3D-SA-MSS"
					
					if Variant == "E36A Level crossing, location" then 
						return t.."-E36-LEVEL-CROSSING"
						
					elseif Variant == "E36B Level crossing, announcement" then 
						--Same 3D as the LX signal:
						return t.."-E36-LEVEL-CROSSING"
						
					elseif Variant == "E37A Level transition" then 
						return t.."-E37A-LEVEL-TRANSITION"
						
					elseif Variant == "E37B Level zero" then 
						return t.."-E37B-LEVEL-ZERO"
									
					elseif Variant == "E38 Avalanche area" then 
						return t.."-E38-AVALANCHE-AREA"
					
					elseif Variant == "E39 Frost gate" then 
						return t.."-E39-FROST-GATE"
						
					elseif Variant == "E106A Stop for shunting, location" then 
						return t.."-E106A-STOP-FOR-SHUNTING"
						
					elseif Variant == "E106B Stop for shunting, announcement" then 
						return t.."-E106A-STOP-FOR-SHUNTING"
					
					elseif Variant == "E107 Interlocked area end" then
						return t.."-E107-UNSECURED-AREA"
						
					elseif Variant == "E108 Interlocked area begin" then 
						return t.."-E108-INTERLOCKED-AREA"
						
					elseif Variant == "E204 GSM-R network Norway" then 
						return t.."-E204-SELECT-GSM-R-NETWORK-NORWAY"
					
					else
						return "ERROR - Unrecognized variant ["..Variant.."], cannot determine 3D Model Name.",_error
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="E36A Level crossing, location" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-ERTMS-LEVEL-CROSSING-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E36B Level crossing, announcement" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-ERTMS-LEVEL-CROSSING-ANNOUNCE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E37A Level transition" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-ERTMS-LEVEL-TRANSITION{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E37B Level zero" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-ERTMS-LEVEL-ZERO-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E38 Avalanche area" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-ERTMS-AVALANCHE-AREA-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E39 Frost gate" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-ERTMS-FROST-GATE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E106A Stop for shunting, location" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-ERTMS-SHUNTING-AREA-END-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E106B Stop for shunting, announcement" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-ERTMS-SHUNTING-AREA-END-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E107 Interlocked area end" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-ERTMS-SUPERVISED-AREA-END-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E108 Interlocked area begin" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-ERTMS-SHUNTING-AREA-BEGIN-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E204 GSM-R network Norway" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-ERTMS-SELECT-GSM-R-NETWORK-NORWAY-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_MSS
				SKILT-ERTMS
				{%    if Variant == 'E36A Level crossing, location' %}LEVEL-CROSSING
				{% elsif Variant == 'E36B Level crossing, announcement' %}LEVEL-CROSSING-ANNOUNCE
				{% elsif Variant == 'E37A Level transition' %}LEVEL-TRANSITION
				{% elsif Variant == 'E37B Level zero' %}LEVEL-ZERO
				{% elsif Variant == 'E38 Avalanche area' %}AVALANCHE-AREA
				{% elsif Variant == 'E39 Frost gate' %}FROST-GATE
				{% elsif Variant == 'E106A Stop for shunting, location' %}SHUNTING-AREA-END
				{% elsif Variant == 'E106B Stop for shunting, announcement' %}SHUNTING-AREA-END
				{% elsif Variant == 'E107 Interlocked area end' %}SUPERVISED-AREA-END
				{% elsif Variant == 'E108 Interlocked area begin' %}SHUNTING-AREA-BEGIN
				{% elsif Variant == 'E204 GSM-R network Norway' %}SELECT-GSM-R-NETWORK-NORWAY
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{% if PortalMounted %}PORTAL{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignErtmsIdBoard" Name="JBTSA_MSS ERTMS ID board" DrawTail="true" Layer="JBTSA_MSS" Color="ByLayer" Group="Skilt/Kjørende personell/ERTMS ID-skilt" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>ertms_board</RelationSpace>
  <AttachmentCategory Name="ertms_board" PassAttachmentToTarget="true"/>
  <AttachTo Category="ertms_board" DrawTail="true"/>
  <AttachTo Category="ertms_marker_board" DrawTail="true"/>
  <AttachTo Category="ertms_shunting_signal" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="E101-A ID board, intermediate stop sign, 400x325, white">
    <SetValue Key="name" Value="ID ERTMS (Indre)"/>
   </Variant>
   <Variant Name="E101-B ID board, entry stop sign, 400x325, yellow">
    <SetValue Key="name" Value="ID ERTMS (Innkjør)"/>
   </Variant>
   <Variant Name="E101-C ID board, exit stop sign, Ø400, yellow">
    <SetValue Key="name" Value="ID ERTMS (Utkjør)"/>
   </Variant>
   <Variant Name="E101-D ID board, blocking stop sign, Ø400, white">
    <SetValue Key="name" Value="ID ERTMS (Blokk)"/>
   </Variant>
   <Variant Name="E101-E ID board, shunting, 160x150">
    <SetValue Key="name" Value="ID ERTMS (Dverg)"/>
   </Variant>
   <Variant Name="Signal E101-F ID-skilt, Dverg på bakken under MB i åk, 160x150">
    <SetValue Key="name" Value="ID ERTMS (Dverg i åk)"/>
   </Variant>
   <Variant Name="E101-G ID board, stop for shunting, 400x325">
    <SetValue Key="name" Value="ID ERTMS (Stopp for skift)"/>
   </Variant>
   <Variant Name="E101-H ID board, interlocked area, 400x325">
    <SetValue Key="name" Value="ID ERTMS (Forriglet område)"/>
   </Variant>
   <Variant Name="E101-J ID board, level crossing, 400x325">
    <SetValue Key="name" Value="ID ERTMS (Veisikringsanlegg)"/>
   </Variant>
   <Variant Name="E101-K ID board, avalanche area, 400x325">
    <SetValue Key="name" Value="ID ERTMS (Snøskredområde)"/>
   </Variant>
   <Variant Name="E101-L ID board, frost gate, 400x325">
    <SetValue Key="name" Value="ID ERTMS (Frostport)"/>
   </Variant>
  </Variants>
  <CustomProperty DataType="String" Name="ID_BOKSTAV" DisplayName="ID-skilt litra (øvre linje)" DefaultValue=""/>
  <CustomProperty DataType="String" Name="ID_NUMMER" DisplayName="ID-skilt signalnummer (midtre/øvre linje)" DefaultValue=""/>
  <CustomProperty DataType="String" Name="ID_STED" DisplayName="ID-skilt stedsforkortelse (nedre linje)" DefaultValue=""/>
  <CustomProperty DataType="String" Name="ID_KM" DisplayName="Kilometerangivelse" DefaultValue=""/>
  <CustomProperty DataType="String" Name="ID_MINDRE_SIGNAL" DisplayName="Litra/Nummer" DefaultValue=""/>
  <LuaExpression Name="code">
   <Formula>_JBTSA_MSS_E101_code()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_E101_code()" ReturnType="String" Description="Returns the associated ERTMS marker board, shunting signal or auxiliary board's code.">
   <Signature>String _JBTSA_MSS_E101_code()</Signature>
   <Formula>
				function _JBTSA_MSS_E101_code()
					return Attachment and Attachment.code or "UNFINISHED - Attach ID board to its associated ERTMS object (or if ID for low shunting signal associated with an MB in a portal above, then enter MB's ID number as ID board's 4-digit code)."
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="name">
   <Formula>_JBTSA_MSS_E101_name()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_E101_name()" ReturnType="String" Description="Returns the associated ERTMS marker board, shunting signal or auxiliary board's code.">
   <Signature>String _JBTSA_MSS_E101_name()</Signature>
   <Formula>
				function _JBTSA_MSS_E101_name()
					return Attachment and Attachment.code or ""
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="ID_BOKSTAV">
   <Formula>NOBN_sig_getSignalLitra()</Formula>
  </LuaExpression>
  <LuaExpression Name="ID_NUMMER">
   <Formula>NOBN_sig_getSignalNumber()</Formula>
  </LuaExpression>
  <LuaExpression Name="ID_STED">
   <Formula>_JBTSA_MSS_E101_ID_STED()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_E101_ID_STED()" ReturnType="String" Description="Returns the associated ERTMS object's site code (2- or 3-letter abbreviation).">
   <Signature>String _JBTSA_MSS_E101_ID_STED()</Signature>
   <Formula>
				function _JBTSA_MSS_E101_ID_STED()
					return Attachment and Attachment.NOBN_com_getOcpCode() or "OCP?"
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_E101_3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_E101_3DName()" ReturnType="String" Description="Returns the ERTMS ID board's 3D model name.">
   <Signature>String _JBTSA_MSS_E101_3DName()</Signature>
   <Formula>
				function _JBTSA_MSS_E101_3DName()
					if Variant =="E101-A ID board, intermediate stop sign, 400x325, white" then 
						return "NO-BN-3D-SA-MSS-E101A-400x325-ERTMS-ID-INNER-MARKER-BOARD-90-90"
					elseif Variant =="E101-B ID board, entry stop sign, 400x325, yellow" then 
						return "NO-BN-3D-SA-MSS-E101B-400x325-ERTMS-ID-ENTRANCE-MARKER-BOARD-90-90-90"
					elseif Variant =="E101-C ID board, exit stop sign, Ø400, yellow" then 
						return "NO-BN-3D-SA-MSS-E101C-Ø400-ERTMS-ID-EXIT-MARKER-BOARD-90-90-90"
					elseif Variant =="E101-D ID board, blocking stop sign, Ø400, white" then 
						return "NO-BN-3D-SA-MSS-E101D-Ø400-ERTMS-ID-BLOCK-MARKER-BOARD-90-90-90"
					elseif Variant =="E101-E ID board, shunting, 160x150" then 
						return "NO-BN-3D-SA-MSS-E101E-160x150-ERTMS-ID-FREE-STANDING-SHUNTING-SIGNAL-60"
					elseif Variant == "Signal E101-F ID-skilt, Dverg på bakken under MB i åk, 160x150" then 
						return "NO-BN-3D-SA-MSS-E101F-160x150-ERTMS-ID-SHUNTING-SIGNAL-BELOW-MB-IN-PORTAL-45"
					elseif Variant =="E101-G ID board, stop for shunting, 400x325" then 
						return "NO-BN-3D-SA-MSS-E101G-400x325-ERTMS-ID-STOP-FOR-SHUNTING-90-90-90"
					elseif Variant =="E101-H ID board, interlocked area, 400x325" then 
						return "NO-BN-3D-SA-MSS-E101H-400x325-ERTMS-ID-INTERLOCKED-AREA-90-90"
					elseif Variant =="E101-J ID board, level crossing, 400x325" then 
						return "NO-BN-3D-SA-MSS-E101J-400x325-ERTMS-ID-LEVEL-CROSSING-90-60-90"
					elseif Variant =="E101-K ID board, avalanche area, 400x325" then 
						return "NO-BN-3D-SA-MSS-E101K-400x325-ERTMS-ID-AVALANCHE-AREA-60-90"
					elseif Variant =="E101-L ID board, frost gate, 400x325" then 
						return "NO-BN-3D-SA-MSS-E101L-400x325-ERTMS-ID-FROST-GATE-60-90"
					else
						return "Could not find 3D model name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>_JBTSA_MSS_E101_Offset3DZ()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_E101_Offset3DZ()" ReturnType="String" Description="Returns the ERTMS ID board's placement above its insertion point.">
   <Signature>String _JBTSA_MSS_E101_Offset3DZ()</Signature>
   <Formula>
function _JBTSA_MSS_E101_Offset3DZ()
	local pm = Attachment and Attachment.PortalMounted or PortalMounted

	-- ID sign governs Z offset for Attachment.
	if Variant =="E101-A ID board, intermediate stop sign, 400x325, white" then
		return pm and -2.5 or 2.5
	elseif Variant =="E101-B ID board, entry stop sign, 400x325, yellow" then
		return pm and -2.5 or 2.5
	elseif Variant =="E101-C ID board, exit stop sign, Ø400, yellow" then
		return pm and -2.5 or 2.5
	elseif Variant =="E101-D ID board, blocking stop sign, Ø400, white" then
		return pm and -2.5 or 2.5
	end
	
	-- Missing Attachment
	if Attachment == nil then
		if Variant =="E101-E ID board, shunting, 160x150" then
			return pm and -1.2 or 1.2
		elseif Variant =="Signal E101-F ID-skilt, Dverg på bakken under MB i åk, 160x150" then
			return pm and -1.2 or 1.2
		elseif Variant =="E101-G ID board, stop for shunting, 400x325" then
			return pm and -2.5 or 2.5
		elseif Variant =="E101-H ID board, interlocked area, 400x325" then
			return pm and -2.5 or 2.5
		elseif Variant =="E101-J ID board, level crossing, 400x325" then
			return pm and -2.5 or 2.5
		elseif Variant =="E101-K ID board, avalanche area, 400x325" then
			return pm and -2.5 or 2.5
		elseif Variant =="E101-L ID board, frost gate, 400x325" then
			return pm and -2.5 or 2.5
		else
			return pm and -2.5 or 2.5
		end
	end

	-- Attachment governs Z offset for ID sign.
	local attachmentZOffset = Attachment.Geometry3D_0.Offset.Z

	local attachmentHeight = nil	

	if Attachment.Variant == "E36A Level crossing, location" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E36B Level crossing, announcement" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E37A Level transition" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E37B Level zero" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E38 Avalanche area" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E39 Frost gate" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E65H Lowering of pantograph, announcement" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E65J Lowering of pantograph, location" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E65K Raising of pantograph, location" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E65L Dead section, announcement" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E65M Disconnection in dead section" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E65N Connection after dead section" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E106A Stop for shunting, location" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E106B Stop for shunting, announcement" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E107 Interlocked area end" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E108 Interlocked area begin" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E200 Speed restriction lifted" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E201 Speed restriction 10" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E202 Speed restriction 20" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E203 Speed restriction 30" then attachmentHeight = 0.400
	elseif Attachment.Variant == "E204 GSM-R network Norway" then attachmentHeight = 0.400
	end

	local thisBoardHeight = nil
	if Variant =="E101-E ID board, shunting, 160x150" then thisBoardHeight = 0.150
	elseif Variant =="Signal E101-F ID-skilt, Dverg på bakken under MB i åk, 160x150" then thisBoardHeight = 0.150
	elseif Variant =="E101-G ID board, stop for shunting, 400x325" then thisBoardHeight = 0.325
	elseif Variant =="E101-H ID board, interlocked area, 400x325" then thisBoardHeight = 0.325
	elseif Variant =="E101-J ID board, level crossing, 400x325" then thisBoardHeight = 0.325
	elseif Variant =="E101-K ID board, avalanche area, 400x325" then thisBoardHeight = 0.325
	elseif Variant =="E101-L ID board, frost gate, 400x325" then thisBoardHeight = 0.325
	end
	
	if attachmentZOffset ~= nil and attachmentHeight ~= nil and thisBoardHeight ~= nil then
		local minimumGap = 0.010
		local nominalZOffset = attachmentZOffset - attachmentHeight/2 - minimumGap - thisBoardHeight/2
		local roundedZOffset = tonumber(string.format("%.2f", nominalZOffset - 0.005)) -- Round down to nearest cm.
		return roundedZOffset
	end
	
	-- Default
	return pm and -2.5 or 2.5
end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="ID_KM">
   <Formula>NOBN_trk_toKm(ReferenceMileage)</Formula>
  </LuaExpression>
  <InsertPointObject Name="E101-A ID board, intermediate stop sign, 400x325, white" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-2-ID-2-LINJER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E101-B ID board, entry stop sign, 400x325, yellow" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-1-ID-3-LINJER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E101-C ID board, exit stop sign, Ø400, yellow" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-3-ID-RUNDT-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E101-D ID board, blocking stop sign, Ø400, white" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-3-ID-RUNDT-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E101-E ID board, shunting, 160x150" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-6-ID-MINDRE-SIGNAL-300x100-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal E101-F ID-skilt, Dverg på bakken under MB i åk, 160x150" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-6-ID-MINDRE-SIGNAL-300x100-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E101-G ID board, stop for shunting, 400x325" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-2-ID-2-LINJER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E101-H ID board, interlocked area, 400x325" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-2-ID-2-LINJER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E101-J ID board, level crossing, 400x325" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-2-ID-2-LINJER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E101-K ID board, avalanche area, 400x325" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-2-ID-2-LINJER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E101-L ID board, frost gate, 400x325" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-2-ID-2-LINJER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-1-ID-3-LINJER-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL
				{% if Variant == 'E101-A ID board, intermediate stop sign, 400x325, white' %}101-2-ID-2-LINJER
				{% elsif Variant == 'Signal E101-B ID-skilt for ERTMS, 3 linjer, 400x325' %}101-1-ID-3-LINJER
				{% elsif Variant == 'E101-C ID board, exit stop sign, Ø400, yellow' %}101-3-ID-RUNDT
				{% elsif Variant == 'E101-D ID board, blocking stop sign, Ø400, white' %}101-3-ID-RUNDT
				{% elsif Variant == 'E101-E ID board, shunting, 160x150' %}101-6-ID-MINDRE-SIGNAL-300x100
				{% elsif Variant == 'Signal E101-F ID-skilt, Dverg på bakken under MB i åk, 160x150' %}101-6-ID-MINDRE-SIGNAL-300x100
				{% elsif Variant == 'E101-G ID board, stop for shunting, 400x325' %}101-2-ID-2-LINJER
				{% elsif Variant == 'E101-H ID board, interlocked area, 400x325' %}101-1-ID-3-LINJER
				{% elsif Variant == 'E101-J ID board, level crossing, 400x325' %}101-2-ID-2-LINJER
				{% elsif Variant == 'E101-K ID board, avalanche area, 400x325' %}101-2-ID-2-LINJER
				{% elsif Variant == 'E101-L ID board, frost gate, 400x325' %}101-2-ID-2-LINJER
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="ID_BOKSTAV">
    <Value>{{ID_BOKSTAV}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="ID_NUMMER">
    <Value>{{ID_NUMMER}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="ID_BOKSTAV_OG_NR">
    <Value>{{ID_BOKSTAV}} {{ID_NUMMER}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="ID_STED">
    <Value>{{ID_STED}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="ID_MINDRE_SIGNAL">
    <Value>{% if ID_NUMMER.size &lt; 3 %}R{% endif %}{{ID_NUMMER}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{ID_BOKSTAV}}</Value>
   </Attribute>
   <Attribute Tag="T02">
    <Value>{{ID_NUMMER}}</Value>
   </Attribute>
   <Attribute Tag="T03">
    <Value>{{ID_STED}}</Value>
   </Attribute>
   <Attribute Tag="T04">
    <Value>{% if ID_NUMMER | append: "" | size &lt; 3 %}R{{ID_NUMMER}}{% else %}{{ID_NUMMER}}{% endif %}</Value>
   </Attribute>
   <Attribute Tag="T05">
    <Value>R</Value>
   </Attribute>
   <Attribute Tag="T06">
    <Value>Z</Value>
   </Attribute>
   <Attribute Tag="T07">
    <Value>W{{ID_NUMMER}}</Value>
   </Attribute>
   <Attribute Tag="T08">
    <Value>km</Value>
   </Attribute>
   <Attribute Tag="T09">
    <Value>{{ID_KM}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
    <SnapPoint X="7" Y="7"/>
    <SnapPoint X="7" Y="-7"/>
    <SnapPoint X="-7" Y="7"/>
    <SnapPoint X="-7" Y="-7"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_SignErtmsElectrificationBoard" Name="JBTEH_BKT ERTMS Electrification board" Layer="JBTEH_BKT" Color="ByLayer" Group="Skilt/Kjørende personell/ERTMS Electrification board" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>ertms_board</RelationSpace>
  <AttachmentCategory Name="ertms_board"/>
  <AttachTo Category="ertms_board"/>
  <AttachTo Category="ertms_marker_board"/>
  <AttachTo Category="skiltfeste"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_sig_getSignalSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>NOBN_sig_getSignalPartNames()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 3.5 or -3.5</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>PortalMounted and 8.0 or 0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="E65H Lowering of pantograph, announcement">
    <SetValue Key="type" Value="other:ertmsLoweringOfPantographAnnouncement"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E65J Lowering of pantograph, location">
    <SetValue Key="type" Value="other:ertmsLoweringOfPantographLocation"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E65K Raising of pantograph, location">
    <SetValue Key="type" Value="other:ertmsRaisingOfPantographLocation"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E65L Dead section, announcement">
    <SetValue Key="type" Value="other:ertmsDeadSectionAnnouncement"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E65M Disconnection in dead section">
    <SetValue Key="type" Value="other:ertmsDisconnectionInDeadSection"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E65N Connection after dead section">
    <SetValue Key="type" Value="other:ertmsConnection after dead section"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
  </Variants>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_BKT_ertms_electrificationBoard_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BKT_ertms_electrificationBoard_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the 3D model name [String] for the ERTMS board. Covers ERTMS electrification boards.">
   <Signature>String _JBTEH_BKT_ertms_electrificationBoard_Geometry3DName()</Signature>
   <Formula>
				function _JBTEH_BKT_ertms_electrificationBoard_Geometry3DName()
					--Board type:
					local t = "NO-BN-3D-EH-BKT-SKILT"
					
					if Variant == "E65H Lowering of pantograph, announcement" then 
						return t.."-E65H-LOWERING-OF-PANTOGRAPH-ANNOUNCEMENT"
						
					elseif Variant == "E65J Lowering of pantograph, location" then 
						return t.."-E65J-LOWERING-OF-PANTOGRAPH-LOCATION"
						
					elseif Variant == "E65K Raising of pantograph, location" then 
						return t.."-E65K-RAISING-OF-PANTOGRAPH-LOCATION"
						
					elseif Variant == "E65L Dead section, announcement" then 
						return t.."-E65L-DEAD-SECTION-ANNOUNCEMENT"
						
					elseif Variant == "E65M Disconnection in dead section" then 
						return t.."-E65M-DISCONNECTION-IN-DEAD-SECTION"
						
					elseif Variant == "E65N Connection after dead section" then 
						return t.."-E65N-CONNECTION-AFTER-DEAD-SECTION"
					
					else
						return "ERROR - Unrecognized variant ["..Variant.."], cannot determine 3D Model Name.",_error
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="E65H Lowering of pantograph, announcement" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-ERTMS-LOWERING-OF-PANTOGRAPH-ANNOUNCEMENT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E65J Lowering of pantograph, location" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-ERTMS-LOWERING-OF-PANTOGRAPH-LOCATION-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E65K Raising of pantograph, location" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-ERTMS-RAISING-OF-PANTOGRAPH-LOCATION-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E65L Dead section, announcement" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-ERTMS-DEAD-SECTION-ANNOUNCEMENT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E65M Disconnection in dead section" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-ERTMS-DISCONNECTION-IN-DEAD-SECTION-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E65N Connection after dead section" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-ERTMS-CONNECTION-AFTER-DEAD-SECTION-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTEH_BKT
				SKILT-ERTMS
				{%    if Variant == 'E65H Lowering of pantograph, announcement' %}LOWERING-OF-PANTOGRAPH-ANNOUNCEMENT
				{% elsif Variant == 'E65J Lowering of pantograph, location' %}LOWERING-OF-PANTOGRAPH-LOCATION
				{% elsif Variant == 'E65K Raising of pantograph, location' %}RAISING-OF-PANTOGRAPH-LOCATION
				{% elsif Variant == 'E65L Dead section, announcement' %}DEAD-SECTION-ANNOUNCEMENT
				{% elsif Variant == 'E65M Disconnection in dead section' %}DISCONNECTION-IN-DEAD-SECTION
				{% elsif Variant == 'E65N Connection after dead section' %}CONNECTION-AFTER-DEAD-SECTION
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{% if PortalMounted %}PORTAL{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSignal" Class="RailwayPlacedObject" LuaName="rctype_SignErtmsTemporarySpeedRestrictionBoard" Name="JBTKO_SKT ERTMS Temporary speed restriction board" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/ERTMS Temporary speed restriction board" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>ertms_board</RelationSpace>
  <AttachmentCategory Name="ertms_board"/>
  <AttachTo Category="ertms_board"/>
  <AttachTo Category="ertms_marker_board"/>
  <AttachTo Category="skiltfeste"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="8" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="0" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="5" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="0" Y="11" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="0" ObliqueAngle="0"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_sig_getSignalFullName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_sig_getSignalSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="BaneNORBeskrivelse">
   <Formula>NOBN_sig_getSignalPartNames()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 3.5 or -3.5</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>PortalMounted and 8.0 or 0</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="E200 Speed restriction lifted">
    <SetValue Key="type" Value="other:ertmsSpeedRestrictionLifted"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E201 Speed restriction 10">
    <SetValue Key="type" Value="other:ertmsSpeedRestriction10"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E202 Speed restriction 20">
    <SetValue Key="type" Value="other:ertmsSpeedRestriction20"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
   <Variant Name="E203 Speed restriction 30">
    <SetValue Key="type" Value="other:ertmsSpeedRestriction30"/>
    <SetValue Key="switchable" Value="false"/>
    <SetValue Key="virtual" Value="true"/>
    <SetValue Key="ruleCode" Value=""/>
   </Variant>
  </Variants>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SKT_ertms_speedBoard_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKT_ertms_speedBoard_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the 3D model name [String] for the ERTMS board. Covers ERTMS temporary speed restriction boards.">
   <Signature>String _JBTKO_SKT_ertms_speedBoard_Geometry3DName()</Signature>
   <Formula>
				function _JBTKO_SKT_ertms_speedBoard_Geometry3DName()
					--Board type:
					local t = "NO-BN-3D-KO-SKT"
					
					if Variant == "E200 Speed restriction lifted" then 
						return t.."-E200-SPEED-RESTRICTION-LIFTED"
						
					elseif Variant == "E201 Speed restriction 10" then 
						return t.."-E201-SPEED-RESTRICTION-10"
						
					elseif Variant == "E202 Speed restriction 20" then 
						return t.."-E202-SPEED-RESTRICTION-20"
						
					elseif Variant == "E203 Speed restriction 30" then 
						return t.."-E203-SPEED-RESTRICTION-30"
					
					else
						return "ERROR - Unrecognized variant ["..Variant.."], cannot determine 3D Model Name.",_error
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="E200 Speed restriction lifted" DisplayBlockName="NO-BN-2D-JBTKO-SKT-SKILT-ERTMS-SPEED-RESTRICTION-LIFTED-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E201 Speed restriction 10" DisplayBlockName="NO-BN-2D-JBTKO-SKT-SKILT-ERTMS-SPEED-RESTRICTION-10-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E202 Speed restriction 20" DisplayBlockName="NO-BN-2D-JBTKO-SKT-SKILT-ERTMS-SPEED-RESTRICTION-20-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="E203 Speed restriction 30" DisplayBlockName="NO-BN-2D-JBTKO-SKT-SKILT-ERTMS-SPEED-RESTRICTION-30-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.0">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true" DefaultBlockName="">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTKO-SKT
				SKILT-ERTMS
				{%    if Variant == 'E200 Speed restriction lifted' %}SPEED-RESTRICTION-LIFTED
				{% elsif Variant == 'E201 Speed restriction 10' %}SPEED-RESTRICTION-10
				{% elsif Variant == 'E202 Speed restriction 20' %}SPEED-RESTRICTION-20
				{% elsif Variant == 'E203 Speed restriction 30' %}SPEED-RESTRICTION-30
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{% if PortalMounted %}PORTAL{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssReflectiveMarker" Name="JBTSA_MSS Refleks på lyssignal" DrawTail="true" Layer="JBTSA_MSS" Color="ByLayer" Group="Skilt/Kjørende personell/Reflekser" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="signal" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="1.4" Y="30" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="30" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="30" Layer="JBTSA@OBJEKTINFO" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Signal"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Hel refleksring for Ø127 signalmast">
   <Variant Name="Hel refleksring for Ø127 signalmast">
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
   </Variant>
   <Variant Name="Halv refleksring for Ø127 signalmast">
    <SetValue Key="Geometry3D_0.PoleRouting" Value="None"/>
   </Variant>
   <Variant Name="Flat ensidet refleks for lyssignal">
    <SetValue Key="Geometry3D_0.PoleRouting" Value="Vertical"/>
   </Variant>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_Refleks_paa_lyssignal_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_Refleks_paa_lyssignal_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the object's default 3D object model name.">
   <Signature>String _JBTSA_MSS_Refleks_paa_lyssignal_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_MSS_Refleks_paa_lyssignal_Geometry3DName()
					local t = "NO-BN-3D-SA-MSS-REFLEKS-"
					if Variant == "Hel refleksring for Ø127 signalmast" then 
						return t.."HEL-RING-Ø127"
					elseif Variant == "Halv refleksring for Ø127 signalmast" then 
						return t.."HALV-RING-Ø127"
					elseif Variant == "Flat ensidet refleks for lyssignal" then 
						return t.."FLAT-ENKELSIDET"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>
				if (Attachment.RcType == rctype_Signal) then 
					return 1.84
				elseif (Attachment.RcType == rctype_SignNssReflectiveMarker) then --stacked reflective markers on one signal, they shall be 80 cm apart according to BN rules
					return 2.91
				else 
					return 0
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <InsertPointObject Name="Hel refleksring for Ø127 signalmast" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-REFLEKS-HEL-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Halv refleksring for Ø127 signalmast" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-REFLEKS-HALV-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Flat ensidet refleks for lyssignal" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-REFLEKS-HALV-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-REFLEKS-HEL-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-REFLEKS
				{% if Variant == 'Hel refleksring for Ø127 signalmast' %}HEL
				{% elsif Variant == 'Halv refleksring for Ø127 signalmast' %}HALV
				{% elsif Variant == 'Flat ensidet refleks for lyssignal' %}HALV
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssPantograph" Name="JBTEH_BKT Signal 65 Strømavtager" DrawTail="true" Layer="JBTEH_BKT" Color="ByLayer" Group="Skilt/Kjørende personell/Høyspentanlegg" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="kl-mast" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTEH@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTEH@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTEH@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Signal 65A Jordet seksjon">
   <Variant Name="Signal 65A Jordet seksjon"/>
   <Variant Name="Signal 65B Varselsignal for kontaktledningssignal"/>
   <Variant Name="Signal 65C Utkobling foran dødseksjon"/>
   <Variant Name="Signal 65D Innkobling etter dødseksjon"/>
   <Variant Name="Signal 65E Senking av strømavtaker"/>
   <Variant Name="Signal 65F Heving av strømavtaker"/>
   <Variant Name="Signal 65G-1 Stopp for elektrisk lokomotiv"/>
   <Variant Name="Signal 65G-2 Stopp for elektrisk lokomotiv, strømløst mot høyre"/>
   <Variant Name="Signal 65G-3 Stopp for elektrisk lokomotiv, strømløst mot venstre"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTEH_BKT_SignNssPantograph_3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BKT_SignNssPantograph_3DName()" ReturnType="String" Description="Returns the signal 65 pantograph sign's 3D model name.">
   <Signature>String _JBTEH_BKT_SignNssPantograph_3DName()</Signature>
   <Formula>
				function _JBTEH_BKT_SignNssPantograph_3DName()
					if Variant == "Signal 65A Jordet seksjon" then 
						return "NO-BN-3D-EH-BKT-SKILT-65A-JORDET-SEKSJON"
					elseif Variant == "Signal 65B Varselsignal for kontaktledningssignal" then 
						return "NO-BN-3D-EH-BKT-SKILT-65B-VARSELSIGNAL-FOR-KL-SIGNAL"
					elseif Variant == "Signal 65C Utkobling foran dødseksjon" then 
						return "NO-BN-3D-EH-BKT-SKILT-65C-UTKOBLING-FORAN-DØDSEKSJON"
					elseif Variant == "Signal 65D Innkobling etter dødseksjon" then 
						return "NO-BN-3D-EH-BKT-SKILT-65D-INNKOBLING-ETTER-DØDSEKSJON"
					elseif Variant == "Signal 65E Senking av strømavtaker" then 
						return "NO-BN-3D-EH-BKT-SKILT-65E-SENK-STRØMAVTAGER"
					elseif Variant == "Signal 65F Heving av strømavtaker" then 
						return "NO-BN-3D-EH-BKT-SKILT-65F-HEV-STRØMAVTAGER"
					elseif Variant == "Signal 65G-1 Stopp for elektrisk lokomotiv" then 
						return "NO-BN-3D-EH-BKT-SKILT-65G-1-STOPP-FOR-ELEKTRISK-LOK"
					elseif Variant == "Signal 65G-2 Stopp for elektrisk lokomotiv, strømløst mot høyre" then 
						return "NO-BN-3D-EH-BKT-SKILT-65G-2-STOPP-FOR-ELEKTRISK-LOK-H"
					elseif Variant == "Signal 65G-3 Stopp for elektrisk lokomotiv, strømløst mot venstre" then 
						return "NO-BN-3D-EH-BKT-SKILT-65G-3-STOPP-FOR-ELEKTRISK-LOK-V"
					else
						return "Could not find 3D model name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Signal 65A Jordet seksjon" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-KJOERENDE-SIGNAL-65A-JORDETSEKSJON-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 65B Varselsignal for kontaktledningssignal" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-KJOERENDE-SIGNAL-65B-KONTAKTLEDNING-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 65C Utkobling foran dødseksjon" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-KJOERENDE-SIGNAL-65C-UTKOBLING-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 65D Innkobling etter dødseksjon" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-KJOERENDE-SIGNAL-65D-INNKOBLING-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 65E Senking av strømavtaker" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-KJOERENDE-SIGNAL-65E-SENKSTROEMAVTAKER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 65F Heving av strømavtaker" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-KJOERENDE-SIGNAL-65F-HEVSTROEMAVTAKER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 65G-1 Stopp for elektrisk lokomotiv" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-KJOERENDE-SIGNAL-65G-1-STOPPELLOK-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 65G-2 Stopp for elektrisk lokomotiv, strømløst mot høyre" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-KJOERENDE-SIGNAL-65G-2-STOPPELLOK-VSIDE-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 65G-3 Stopp for elektrisk lokomotiv, strømløst mot venstre" DisplayBlockName="NO-BN-2D-JBTEH_BKT-SKILT-KJOERENDE-SIGNAL-65G-3-STOPPELLOK-VSIDE-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTEH_BKT-SKILT-KJOERENDE-SIGNAL-65A-JORDETSEKSJON-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy='-'>
				NO-BN-2D-JBTEH_BKT-SKILT-KJOERENDE-SIGNAL
				{% if Variant == 'Signal 65A Jordet seksjon' %}65A-JORDETSEKSJON
				{% elsif Variant == 'Signal 65B Varselsignal for kontaktledningssignal' %}65B-KONTAKTLEDNING
				{% elsif Variant == 'Signal 65C Utkobling foran dødseksjon' %}65C-UTKOBLING
				{% elsif Variant == 'Signal 65D Innkobling etter dødseksjon' %}65D-INNKOBLING
				{% elsif Variant == 'Signal 65E Senking av strømavtaker' %}65E-SENKSTROEMAVTAKER
				{% elsif Variant == 'Signal 65F Heving av strømavtaker' %}65F-HEVSTROEMAVTAKER
				{% elsif Variant == 'Signal 65G-1 Stopp for elektrisk lokomotiv' %}65G-1-STOPPELLOK
				{% elsif Variant == 'Signal 65G-2 Stopp for elektrisk lokomotiv, strømløst mot høyre' %}65G-2-STOPPELLOK-VSIDE
				{% elsif Variant == 'Signal 65G-3 Stopp for elektrisk lokomotiv, strømløst mot venstre' %}65G-3-STOPPELLOK-VSIDE
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssEndOfTrainRoute" Name="JBTKO_SKT Signal 66 Togvei slutt" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <AttachTo Category="signal" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="66 Togvei slutt">
   <Variant Name="66 Togvei slutt"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSKO_SignNssEndOfTrainRoute_3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSKO_SignNssEndOfTrainRoute_3DName()" ReturnType="String" Description="Returns the Nss end of train route board's 3D model name.">
   <Signature>String _JBTSKO_SignNssEndOfTrainRoute_3DName()</Signature>
   <Formula>
				function _JBTSKO_SignNssEndOfTrainRoute_3DName()
					if Variant == "66 Togvei slutt" then 
						return "NO-BN-3D-KO-SKT-SKILT-66-TOGVEI-SLUTT"
					else
						return "Could not find 3D model name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="66 Togvei slutt" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-66-TOGVEI-SLUTT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-66-TOGVEI-SLUTT-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssGiveAudibleSignal" Name="JBTKO_SKT Signal 67 Orienteringssignal" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Orienteringssignaler" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Signal 67A Orienteringssignal">
   <Variant Name="Signal 67A Orienteringssignal"/>
   <Variant Name="Signal 67B Orienteringssignal for planovergang"/>
   <Variant Name="Signal 67C Orienteringssignal for holdeplass"/>
   <Variant Name="Signal 67D Orienteringssignal for planovergang og holdeplass"/>
   <Variant Name="Signal 67E Orienteringssignal dagtid"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SKT_SignNssGiveAudibleSignal_3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BKT_SignNssPantograph_3DName()" ReturnType="String" Description="Returns the signal 65 pantograph sign's 3D model name.">
   <Signature>String _JBTEH_BKT_SignNssPantograph_3DName()</Signature>
   <Formula>
				function _JBTEH_BKT_SignNssPantograph_3DName()
					if Variant == "Signal 67A Orienteringssignal" then 
						return "NO-BN-3D-KO-SKT-SKILT-67A-ORIENTERINGSSIGNAL"
					elseif Variant == "Signal 67B Orienteringssignal for planovergang" then 
						return "NO-BN-3D-KO-SKT-SKILT-67B-ORIENTERINGSSIGNAL-FOR-PLANOVERGANG"
					elseif Variant == "Signal 67C Orienteringssignal for holdeplass" then 
						return "NO-BN-3D-KO-SKT-SKILT-67C-ORIENTERINGSSIGNAL-FOR-HOLDEPLASS"
					elseif Variant == "Signal 67D Orienteringssignal for planovergang og holdeplass" then 
						return "NO-BN-3D-KO-SKT-SKILT-67D-ORIENTERINGSSIGNAL-FOR-PLANOVERGANG-OG-HOLDEPLASS"
					elseif Variant == "Signal 67E Orienteringssignal dagtid" then 
						return "NO-BN-3D-KO-SKT-SKILT-67E-ORIENTERINGSSIGNAL-DAGTID"
					else
						return "Could not find 3D model name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Signal 67A Orienteringssignal" DisplayName="67A Orienteringssignal" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-67A-ORIENTERINGSIGNAL-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 67B Orienteringssignal for planovergang" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-67B-ORIENTERINGSIGNAL-PLANOVERGANG-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 67C Orienteringssignal for holdeplass" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-67C-ORIENTERINGSIGNAL-HOLDEPLASS-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 67D Orienteringssignal for planovergang og holdeplass" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-67D-ORIENTERINGSIGNAL-PLANOVERGANG-HOLDEPLASS-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 67E Orienteringssignal dagtid" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-67E-ORIENTERINGSIGNAL-DAGTID-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-67A-ORIENTERINGSIGNAL-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy='-'>
				NO-BN-2D-JBTKO_SKT
				SKILT-KJOERENDE-SIGNAL
				{% if Variant == 'Signal 67A Orienteringssignal' %}67A-ORIENTERINGSIGNAL
				{% elsif Variant == 'Signal 67B Orienteringssignal for planovergang' %}67B-ORIENTERINGSIGNAL-PLANOVERGANG
				{% elsif Variant == 'Signal 67C Orienteringssignal for holdeplass' %}67C-ORIENTERINGSIGNAL-HOLDEPLASS
				{% elsif Variant == 'Signal 67D Orienteringssignal for planovergang og holdeplass' %}67D-ORIENTERINGSIGNAL-PLANOVERGANG-HOLDEPLASS
				{% elsif Variant == 'Signal 67E Orienteringssignal dagtid' %}67E-ORIENTERINGSIGNAL-DAGTID
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssSpeedRestriction" Name="JBTKO_SKT Signal 68/69 hastighetssignal" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Hastighetssignaler" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="signal" DrawTail="true"/>
  <AttachTo Category="kl-mast" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="68A Nedsatt hastighet">
   <Variant Name="Signal 68A Nedsatt hastighet"></Variant>
   <Variant Name="Signal 68B Økt hastighet"></Variant>
   <Variant Name="Signal 68C Avvikende hastighet"></Variant>
   <Variant Name="Signal 68D-1 Markeringsmerke"></Variant>
   <Variant Name="Signal 68D-2 Markeringsmerke på motrettet 68B"></Variant>
   <Variant Name="Signal 68D-3 Markeringsmerke på motrettet 69B"></Variant>
   <Variant Name="Signal 68F Tilleggshastighet"></Variant>
   <Variant Name="Signal 68G Hastighet for krengetog"></Variant>
   <Variant Name="Signal 69A Midlertidig nedsatt hastighet"></Variant>
   <Variant Name="Signal 69B Midlertidig hastighet opphører"></Variant>
  </Variants>
  <CustomProperty DataType="UInt32" Name="SignSpeed" DisplayName="Hastighet" DefaultValue="120"/>
  <CustomProperty DataType="UInt32" Name="SignPlusSpeed" DisplayName="Plusshastighet" DefaultValue="5"/>
  <CustomProperty DataType="UInt32" Name="SignTiltSpeed" DisplayName="Krengetoghastighet" DefaultValue="160"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_SpeedTargetBoardVariant" DisplayName="Markeringsmerke variant" Description="Assessment that the 68D subtype 1/2/3 speed target board matches the presence or absence of a nearby counter-directed 68B 'Increased speed' or 69B 'End of Temporary Speed Restriction'."/>
  <LuaExpression Name="mc_SpeedTargetBoardVariant" IsModelCheck="true">
   <Formula>_JBTKO_SKT_chkSpeedTargetBoardVariant()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKT_chkSpeedTargetBoardVariant()" ReturnType="String" Description="Model check assessing that the 68D subtype 1/2/3 speed target board matches the presence or absence of a nearby counter-directed 68B 'Increased speed' or 69B 'End of Temporary Speed Restriction">
   <Signature>String _JBTKO_SKT_chkSpeedTargetBoardVariant()</Signature>
   <Formula>
				function _JBTKO_SKT_chkSpeedTargetBoardVariant()
					if Variant:match("68D") then 
						local tol = 1.0 --[m]
						local obj68B = getNearbyPointObjects2D(tol,RcType):filter(function (x) return x.Variant:match("68B") end)
						local obj69B = getNearbyPointObjects2D(tol,RcType):filter(function (x) return x.Variant:match("69B") end)
						local n68B = getCollectionLength(obj68B)
						local n69B = getCollectionLength(obj69B)
						if Variant:match("68D%-1") then
							if n68B &gt; 0 then 
								return "WARNING - Variant should be 68D-2 due to the nearby counter-directed board 68B.",_warning
							elseif n69B &gt; 0 then 
								return "WARNING - Variant should be 68D-3 due to the nearby counter-directed board 69B.",_warning
							else 
								return "OK - No nearby counter-directed board 68B or 69B",_ok
							end
						elseif Variant:match("68D%-2") then
							if n68B == 0 and n69B == 0 then 
								return "WARNING - Variant should be 68D-1 since there is no nearby counter-directed board 68B or 69B.",_warning
							elseif n68B == 0 and n69B &gt; 0 then 
								return "WARNING - Variant should be 68D-3 due to the nearby counter-directed board 69B.",_warning
							elseif n68B &gt; 0 then
								return "OK - A nearby counter-directed board 68B was found.",_ok
							end
						elseif Variant:match("68D%-3") then
							if n68B == 0 and n69B == 0 then 
								return "WARNING - Variant should be 68D-1 since there is no nearby counter-directed board 68B or 69B.",_warning
							elseif n68B &gt; 0 and n69B == 0 then 
								return "WARNING - Variant should be 68D-2 due to the nearby counter-directed board 68B.",_warning
							elseif n69B &gt; 0 then
								return "OK - A nearby counter-directed board 69B was found.",_ok
							end
						end
					end
				end
			</Formula>
  </LuaFunction>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NearbySpeedBoardsToBeModelchecked" DisplayName="Andre objekter som modelsjekkes" Description="When this speed board object is modelchecked, then nearby speed boards are modelchecked as well."/>
  <LuaExpression Name="mc_NearbySpeedBoardsToBeModelchecked" IsModelCheck="true">
   <Formula>_JBTKO_SKT_chkTriggerNearbySpeedBoards()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKT_chkTriggerNearbySpeedBoards()" ReturnType="String" Description="Triggers modelchecking in nearby speed boards.">
   <Signature>_JBTKO_SKT_chkTriggerNearbySpeedBoards()</Signature>
   <Formula>
				function _JBTKO_SKT_chkTriggerNearbySpeedBoards()
					local tol = 1.0 --[m]
					local speedBoards = getNearbyPointObjects2D(tol,RcType)
					local n = getCollectionLength(speedBoards)
					return n,speedBoards, _info(n.." speed boards have been modelchecked.")
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SKT_68_69_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKT_68_69_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the 68/69 board's default 3D object model name.">
   <Signature>String _JBTKO_SKT_68_69_Geometry3DName()</Signature>
   <Formula>
				function _JBTKO_SKT_68_69_Geometry3DName()
					local t = "NO-BN-3D-KO-SKT-SKILT-"
					if Variant == "Signal 68A Nedsatt hastighet"						then return t.."68A-NEDSATT-KJØREHASTIGHET"
					elseif Variant == "Signal 68B Økt hastighet"						then return t.."68B-ØKT-KJØREHASTIGHET"
					elseif Variant == "Signal 68C Avvikende hastighet"					then return t.."68C-AVVIKENDE-HASTIGHET"
					elseif Variant == "Signal 68D-1 Markeringsmerke"					then return t.."68D-MARKERINGSMERKE"
					elseif Variant == "Signal 68D-2 Markeringsmerke på motrettet 68B"	then return t.."68D-MARKERINGSMERKE"
					elseif Variant == "Signal 68D-3 Markeringsmerke på motrettet 69B"	then return t.."68D-MARKERINGSMERKE"
					elseif Variant == "Signal 68F Tilleggshastighet"					then return t.."68F-TILLEGGSHASTIGHET"
					elseif Variant == "Signal 68G Hastighet for krengetog"				then return t.."68G-HASTIGHET-FOR-KRENGETOG"
					elseif Variant == "Signal 69A Midlertidig nedsatt hastighet"		then return t.."69A-MIDLERTIDIG-NEDSATT-HASTIGHET"
					elseif Variant == "Signal 69B Midlertidig hastighet opphører"		then return t.."69B-MIDLERTIDIG-HASTIGHET-OPPHØRER"
					else
						return "ERROR - Bad Variant ["..Variant.."]."
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Signal 68A Nedsatt hastighet" DisplayName="68A Nedsatt hastighet" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-68A-NEDSATT-HASTIGHET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="SignSpeed" Value="40"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 68B Økt hastighet" DisplayName="68B Økt hastighet" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-68B-OEKT-HASTIGHET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="SignSpeed" Value="80"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 68C Avvikende hastighet" DisplayName="68C Avvikende hastighet" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-68C-NEDSATT-HASTIGHET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="SignSpeed" Value="50"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 68D-1 Markeringsmerke" DisplayName="68D-1 Markeringsmerke" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-68D-1-MARKERINGSMERKE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="SignSpeed" Value="40"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 68D-2 Markeringsmerke på motrettet 68B" DisplayName="68D-2 Markeringsmerke på motrettet 68B" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-68D-2-MARKERINGSMERKE-MOTRETTET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="SignSpeed" Value="40"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 68D-3 Markeringsmerke på motrettet 69B" DisplayName="68D-3 Markeringsmerke på motrettet 69B" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-68D-3-MARKERINGSMERKE-MOTRETTET-MIDLERTIDIG-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="SignSpeed" Value="40"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 68F Tilleggshastighet" DisplayName="68F Tilleggshastighet (underskilt)" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-68F-TILLEGGSHASTIGHET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="SignPlusSpeed" Value="5"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 68G Hastighet for krengetog" DisplayName="68G Hastighet for krengetog" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-68G-HASTIGHET-KRENGETOG-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="SignTiltSpeed" Value="160"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 69A Midlertidig nedsatt hastighet" DisplayName="69A Midlertidig nedsatt hastighet" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-69A-MIDLERTIDIG-NEDSATT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="0.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="VerticalOffset" Value="-0.15"/>
   <SetValue Key="SignSpeed" Value="40"/>
   <SetValue Key="OffsetTowardsSide3D" Value="-1.75"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 69B Midlertidig hastighet opphører" DisplayName="69B Midlertidig hastighet opphører" DisplayBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-69B-MIDLERTIDIG-OPPHOERER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="0.75">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
   <SetValue Key="VerticalOffset" Value="-0.15"/>
   <SetValue Key="SignSpeed" Value="80"/>
   <SetValue Key="OffsetTowardsSide3D" Value="-1.75"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTKO_SKT-SKILT-KJOERENDE-SIGNAL-68A-NEDSATT-HASTIGHET-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTKO_SKT
				SKILT-KJOERENDE-SIGNAL
				{% if Variant == 'Signal 68A Nedsatt hastighet' %}68A-NEDSATT-HASTIGHET
				{% elsif Variant == 'Signal 68B Økt hastighet' %}68B-OEKT-HASTIGHET
				{% elsif Variant == 'Signal 68C Avvikende hastighet' %}68C-NEDSATT-HASTIGHET
				{% elsif Variant == 'Signal 68D-1 Markeringsmerke' %}68D-1-MARKERINGSMERKE
				{% elsif Variant == 'Signal 68D-2 Markeringsmerke på motrettet 68B' %}68D-2-MARKERINGSMERKE-MOTRETTET
				{% elsif Variant == 'Signal 68D-3 Markeringsmerke på motrettet 69B' %}68D-3-MARKERINGSMERKE-MOTRETTET-MIDLERTIDIG
				{% elsif Variant == 'Signal 68F Tilleggshastighet' %}68F-TILLEGGSHASTIGHET
				{% elsif Variant == 'Signal 68G Hastighet for krengetog' %}68G-HASTIGHET-KRENGETOG
				{% elsif Variant == 'Signal 69A Midlertidig nedsatt hastighet' %}69A-MIDLERTIDIG-NEDSATT
				{% elsif Variant == 'Signal 69B Midlertidig hastighet opphører' %}69B-MIDLERTIDIG-OPPHOERER
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="HAST_10">
    <Value>{{SignSpeed | v10}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="HAST_5">
    <Value>{{SignSpeed | v5}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="PLUSS_HAST">
    <Value>+{{SignPlusSpeed}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="KRENGE_HAST">
    <Value>{{SignTiltSpeed}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{SignSpeed | v10}}</Value>
   </Attribute>
   <Attribute Tag="T02">
    <Value>{{SignSpeed | v5}}</Value>
   </Attribute>
   <Attribute Tag="T03">
    <Value>+{{SignPlusSpeed}}</Value>
   </Attribute>
   <Attribute Tag="T04">
    <Value>{{SignTiltSpeed}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssTargetDistance" Name="JBTSA_MSS Skilt meterangivelse (målavstand)" DrawTail="true" Layer="JBTSA_MSS" Color="ByLayer" Group="Skilt/Kjørende personell/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="UInt32" Name="TargetDistance" DisplayName="Avstand i meter" DefaultValue="300"/>
  <Variants>
   <Variant Name="Meterangivelse (underskilt)"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_SignNssTargetDistance_3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_SignNssTargetDistance_3DName()" ReturnType="String" Description="Returns the target distance sign's 3D model name.">
   <Signature>String _JBTSA_MSS_SignNssTargetDistance_3DName()</Signature>
   <Formula>
				function _JBTSA_MSS_SignNssTargetDistance_3DName()
					if Variant == "Meterangivelse (underskilt)" then
						return "NO-BN-3D-SA-MSS-SKILT-METERANGIVELSE"
					else
						return "Could not find 3D model name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Meterangivelse (underskilt)" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-KJOERENDE-UNDERSKILT-METERANGIVELSE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_MSS-SKILT-KJOERENDE-UNDERSKILT-METERANGIVELSE-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <SymbolAttribute Tag="AVSTAND">
    <Value>{{TargetDistance}}m</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{TargetDistance}}m</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssAtp" Name="JBTSA_MSS Signal 60 ATC" DrawTail="true" Layer="JBTSA_MSS" Color="ByLayer" Group="Skilt/Kjørende personell/ATC" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Signal 60D ATC repeter hastighet">
   <Variant Name="Signal 60A ATC forsignal"/>
   <Variant Name="Signal 60B ATC repeter målpunkt"/>
   <Variant Name="Signal 60C ATC nødbrems"/>
   <Variant Name="Signal 60D ATC repeter hastighet"/>
   <Variant Name="Signal 60D ATC repeter hastighet 10 km/h"/>
   <Variant Name="Signal 60D ATC repeter hastighet 40 km/h"/>
   <Variant Name="Signal 60F FATC"/>
   <Variant Name="Signal 60G DATC"/>
   <Variant Name="Signal 60H ATC slutter"/>
   <Variant Name="Signal 60F FATC begynner (gammel type)"/>
   <Variant Name="Signal 60G DATC begynner (gammel type)"/>
   <Variant Name="Signal ATC innkoblet"/>
   <Variant Name="Signal ATC utkoblet"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_SignNssAtp_3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTEH_BKT_SignNssPantograph_3DName()" ReturnType="String" Description="Returns the signal ATP sign's 3D model name.">
   <Signature>String _JBTEH_BKT_SignNssPantograph_3DName()</Signature>
   <Formula>
				function _JBTEH_BKT_SignNssPantograph_3DName()
					if Variant == "Signal 60A ATC forsignal" then 
						return "NO-BN-3D-SA-MSS-SKILT-60A-ATC-FORSIGNAL"					
					elseif Variant == "Signal 60B ATC repeter målpunkt" then 
						return "NO-BN-3D-SA-MSS-SKILT-60B-ATC-REPETER-MÅLPUNKT"					
					elseif Variant == "Signal 60C ATC nødbrems" then 
						return "NO-BN-3D-SA-MSS-SKILT-60C-ATC-NØDBREMS"					
					elseif Variant == "Signal 60D ATC repeter hastighet" then 
						return "NO-BN-3D-SA-MSS-SKILT-60D-ATC-REPETER-HASTIGHET"					
					elseif Variant == "Signal 60D ATC repeter hastighet 10 km/h" then 
						return "NO-BN-3D-SA-MSS-SKILT-60D-10-ATC-REPETER-HASTIGHET-10"					
					elseif Variant == "Signal 60D ATC repeter hastighet 40 km/h" then 
						return "NO-BN-3D-SA-MSS-SKILT-60D-40-ATC-REPETER-HASTIGHET-40"					
					elseif Variant == "Signal 60F FATC" then 
						return "NO-BN-3D-SA-MSS-SKILT-60F-FATC"					
					elseif Variant == "Signal 60G DATC" then 
						return "NO-BN-3D-SA-MSS-SKILT-60G-DATC"					
					elseif Variant == "Signal 60H ATC slutter" then
						--Grå bakgrunn, 'ATC' overstrøket, alle de andre FATC/DATC har gul bakgrunn
						return "NO-BN-3D-SA-MSS-SKILT-60H-ATC-SLUTTER"					
					elseif Variant == "Signal 60F FATC begynner (gammel type)" then 
						return "NO-BN-3D-SA-MSS-SKILT-60F-FATC-TILLEGGSTEKST"					
					elseif Variant == "Signal 60G DATC begynner (gammel type)" then 
						return "NO-BN-3D-SA-MSS-SKILT-60G-DATC-TILLEGGSTEKST"					
					elseif Variant == "Signal ATC innkoblet" then 
						--ATC innkoblet/utkoblet, S.047608/9, har ikke eget nummer i SJT TFF
						return "NO-BN-3D-SA-MSS-SKILT-60-ATC-INNKOBLET"					
					elseif Variant == "Signal ATC utkoblet" then 
						return "NO-BN-3D-SA-MSS-SKILT-60-ATC-UTKOBLET"
					else
						return "Could not find 3D model name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Signal 60A ATC forsignal" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60A-ATC-FORSIGNAL-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 60B ATC repeter målpunkt" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60B-ATC-REPETER-MAALPUNKT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 60C ATC nødbrems" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60C-ATC-NOEDBREMS-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 60D ATC repeter hastighet" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60D-ATC-REPETER-HASTIGHET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 60D ATC repeter hastighet 10 km/h" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60D-ATC-REPETER-HASTIGHET-10-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 60D ATC repeter hastighet 40 km/h" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60D-ATC-REPETER-HASTIGHET-40-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 60F FATC" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60F-FATC-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 60G DATC" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60G-DATC-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 60H ATC slutter" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60H-ATC-SLUTTER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 60F FATC begynner (gammel type)" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60F-FATC-TILLEGGSTEKST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 60G DATC begynner (gammel type)" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60G-DATC-TILLEGGSTEKST-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal ATC innkoblet" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-ATC-INNKOBLET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal ATC utkoblet" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-ATC-UTKOBLET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSK_SKK
				SKILT-KJOERENDE
				{%    if Variant == 'Signal 60A ATC forsignal' %}SIGNAL-60A-ATC-FORSIGNAL
				{% elsif Variant == 'Signal 60B ATC repeter målpunkt' %}SIGNAL-60B-ATC-REPETER-MAALPUNKT
				{% elsif Variant == 'Signal 60C ATC nødbrems' %}SIGNAL-60C-ATC-NOEDBREMS
				{% elsif Variant == 'Signal 60D ATC repeter hastighet' %}SIGNAL-60D-ATC-REPETER-HASTIGHET
				{% elsif Variant == 'Signal 60D ATC repeter hastighet 10 km/h' %}SIGNAL-60D-ATC-REPETER-HASTIGHET-10
				{% elsif Variant == 'Signal 60D ATC repeter hastighet 40 km/h' %}SIGNAL-60D-ATC-REPETER-HASTIGHET-40
				{% elsif Variant == 'Signal 60F FATC' %}SIGNAL-60F-FATC
				{% elsif Variant == 'Signal 60F FATC begynner (gammel type)' %}SIGNAL-60F-FATC-TILLEGGSTEKST
				{% elsif Variant == 'Signal 60G DATC' %}SIGNAL-60G-DATC
				{% elsif Variant == 'Signal 60G DATC begynner (gammel type)' %}SIGNAL-60G-DATC-TILLEGGSTEKST
				{% elsif Variant == 'Signal 60H ATC slutter' %}SIGNAL-60H-ATC-SLUTTER
				{% elsif Variant == 'Signal ATC innkoblet' %}ATC-INNKOBLET
				{% elsif Variant == 'Signal ATC utkoblet' %}ATC-UTKOBLET
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignBalise" Name="JBTSA_MSS Baliseskilt" DrawTail="false" Layer="JBTSA_MSS" Color="ByLayer" Group="Skilt/Kjørende personell/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Baliseskilt">
   <Variant Name="Baliseskilt"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_SignBalise_3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_SignBalise_3DName()" ReturnType="String" Description="Returns the balise sign's 3D model name.">
   <Signature>String _JBTSA_MSS_SignBalise_3DName()</Signature>
   <Formula>
				function _JBTSA_MSS_SignBalise_3DName()
					if Variant =="Baliseskilt" then
						return "NO-BN-3D-SA-MSS-SKILT-BALISE"
					else
						return "Could not find 3D model name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Baliseskilt" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-VEDLIKEHOLD-BALISE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_MSS-SKILT-VEDLIKEHOLD-BALISE-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_MSS
				SKILT-VEDLIKEHOLD
				{% if Variant == 'Baliseskilt' %}BALISE
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>BALISE</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0"/>
    <SnapPoint X="0" Y="3"/>
    <SnapPoint X="0" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssDistanceToSignal" Name="JBTSA_MSS Signal 61 Avstandsskilt" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Avstandsskilt" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt" DrawTail="false"/>
  <AttachTo Category="kl-mast" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="61C Avstandsskilt 3 (250m til Hs)">
   <Variant Name="61A Avstandsskilt 1 (1000m til Hs)"/>
   <Variant Name="61B Avstandsskilt 2 (800m til Hs)"/>
   <Variant Name="61C Avstandsskilt 3 (250m til Hs)"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_SignNssDistanceToSignal_3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_SignNssDistanceToSignal_3DName()" ReturnType="String" Description="Returns the signal 61 distance sign's 3D model name.">
   <Signature>String _JBTSA_MSS_SignNssDistanceToSignal_3DName()</Signature>
   <Formula>
				function _JBTSA_MSS_SignNssDistanceToSignal_3DName()
					if Variant == "61A Avstandsskilt 1 (1000m til Hs)" then
						return "NO-BN-3D-SA-MSS-SKILT-61A-AVSTANDSSKILT-1"
					elseif Variant == "61B Avstandsskilt 2 (800m til Hs)" then
						return "NO-BN-3D-SA-MSS-SKILT-61B-AVSTANDSSKILT-2"
					elseif Variant == "61C Avstandsskilt 3 (250m til Hs)" then
						return "NO-BN-3D-SA-MSS-SKILT-61C-AVSTANDSSKILT-3"
					else
						return "Could not find 3D model name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="61A Avstandsskilt 1 (1000m til Hs)" DisplayName="61A Avstandsskilt 1" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-KJOERENDE-SIGNAL-61A-AVSTAND1-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="61B Avstandsskilt 2 (800m til Hs)" DisplayName="61B Avstandsskilt 2" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-KJOERENDE-SIGNAL-61B-AVSTAND2-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="61C Avstandsskilt 3 (250m til Hs)" DisplayName="61C Avstandsskilt 3" DisplayBlockName="NO-BN-2D-JBTSA_MSS-SKILT-KJOERENDE-SIGNAL-61C-AVSTAND3-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_MSS-SKILT-KJOERENDE-SIGNAL-61A-AVSTAND1-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSA_MSS
				SKILT-KJOERENDE
				{%    if Variant ==  '61A Avstandsskilt 1 (1000m til Hs)' %}SIGNAL-61A-AVSTAND1
				{% elsif Variant ==  '61B Avstandsskilt 2 (800m til Hs)' %}SIGNAL-61B-AVSTAND2
				{% elsif Variant ==  '61C Avstandsskilt 3 (250m til Hs)' %}SIGNAL-61C-AVSTAND3
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssBoardFixedToSignal" Name="JBTSA_MSS Skilt på lyssignal" DrawTail="true" Layer="JBTSA_MSS" Color="ByLayer" Group="Skilt/Kjørende personell/Skilt på lyssignal" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="signal" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Signal 60E ATC Varsel">
   <Variant Name="Signal 60E ATC Varsel">
    <SetValue Key="Geometry3D_0.Offset.Y" Value="-0.10"/>
   </Variant>
   <Variant Name="Signal 62 Ugyldighetsskilt"/>
   <Variant Name="Signal 70 Planovergang"/>
   <Variant Name="Signal 72A FJS begynner"/>
   <Variant Name="Signal 72B FJS slutter"/>
   <Variant Name="Signal 73 Rasvarsling"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_SignNssBoardFixedToSignal_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_SignNssBoardFixedToSignal_Geometry3DName()" ReturnType="String" Description="Returns the board's 3D geometry name.">
   <Signature>String _JBTSA_MSS_SignNssBoardFixedToSignal_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_MSS_SignNssBoardFixedToSignal_Geometry3DName()
					if Variant == "Signal 60E ATC Varsel" then
						return "NO-BN-3D-SA-MSS-SKILT-60E-ATC-VARSEL"
					elseif Variant == "Signal 62 Ugyldighetsskilt" then
						return "NO-BN-3D-SA-MSS-SKILT-62-UGYLDIGHETSSKILT"
					elseif Variant ==  "Signal 70 Planovergang" then
						return "NO-BN-3D-KO-SKT-SKILT-70-PLANOVERGANGSSKILT"
					elseif Variant ==  "Signal 72A FJS begynner" then
						return "NO-BN-3D-SA-MSS-SKILT-72A-FJS-BEGYNNER"
					elseif Variant == "Signal 72B FJS slutter" then
						return "NO-BN-3D-SA-MSS-SKILT-72B-FJS-SLUTTER"
					elseif Variant == "Signal 73 Rasvarsling" then
						--TODO sjekk om 73 tilhører SA og ikke KO - er jo plassert på et signal
						return "NO-BN-3D-KO-SKT-SKILT-73-RASVARSLINGSSKILT"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Signal 60E ATC Varsel" DisplayName="60E ATC Varsel" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60E-ATC-VARSEL-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 62 Ugyldighetsskilt" DisplayName="62 Ugyldighetsskilt" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-62-UGYLDIGHETSSKILT-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 70 Planovergang" DisplayName="70 Planovergang" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-70-PLANOVERGANGSSKILT-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 72A FJS begynner" DisplayName="72A FJS begynner" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-72A-FJS-BEGYNNER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 72B FJS slutter" DisplayName="72B FJS slutter" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-72B-FJS-SLUTTER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 73 Rasvarsling" DisplayName="73 Rasvarslingsskilt" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-73-RASVARSEL-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSA_MSS-SKILT-KJOERENDE-SIGNAL-60E-ATC-VARSEL-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				{% if Variant == 'Signal 60E ATC Varsel' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-60E-ATC-VARSEL
				{% elsif Variant == 'Signal 62 Ugyldighetsskilt' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-62-UGYLDIGHETSSKILT
				{% elsif Variant == 'Signal 70 Planovergang' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-70-PLANOVERGANGSSKILT
				{% elsif Variant == 'Signal 72A FJS begynner' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-72A-FJS-BEGYNNER
				{% elsif Variant == 'Signal 72B FJS slutter' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-72B-FJS-SLUTTER
				{% elsif Variant == 'Signal 73 Rasvarsling' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-73-RASVARSEL
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssGradient" Name="JBTKO_SKT Signal 63 Stigning-/fallviser" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Stigning- og fallvisere" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="kl-mast" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty Name="Gradient" DataType="Int32" DefaultValue="99"/>
  <Variants DefaultValue="Signal 63A Fallviser">
   <Variant Name="Signal 63A Fallviser"/>
   <Variant Name="Signal 63B Stigningsviser"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SKT_SignNssGradient_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKT_SignNssGradient_Geometry3DName()" ReturnType="String" Description="Returns the gradient board's 3D geometry name.">
   <Signature>String _JBTKO_SKT_SignNssGradient_Geometry3DName()</Signature>
   <Formula>
				function _JBTKO_SKT_SignNssGradient_Geometry3DName()
					if Variant == "Signal 63A Fallviser" then
						return "NO-BN-3D-KO-SKT-SKILT-63A-FALLVISER"
					elseif Variant == "Signal 63B Stigningsviser" then
						return "NO-BN-3D-KO-SKT-SKILT-63B-STIGNINGSVISER"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Signal 63A Fallviser" DisplayName="63A Fallviser" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-63A-FALLVISER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 63B Stigningsviser" DisplayName="63B Stigningsviser" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-63B-STIGNINGSVISER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-63A-FALLVISER-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				{% if Variant == 'Signal 63A Fallviser' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-63A-FALLVISER
				{% elsif Variant == 'Signal 63B Stigningsviser' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-63B-STIGNINGSVISER
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="Gradient">
    <Value>{{GRADIENT}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{GRADIENT}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssPole" Name="JBTKO_SKT Signal 64 Stolpe" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Stolper" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>stolpe</RelationSpace>
  <AttachmentCategory Name="stolpe" PassAttachmentToTarget="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <CustomProperty DataType="Boolean" Name="RotateText" InvertOnAlignmentReverse="true" DisplayName="Roter tekst" DefaultValue="false"/>
  <CustomProperty DataType="String" Name="LeftText" DisplayName="Venstrejustert tekst" DefaultValue="Svart/Hvit"/>
  <CustomProperty DataType="String" Name="RightText" DisplayName="Høyrejustert tekst" DefaultValue="Svart/Hvit"/>
  <Variants DefaultValue="Signal 64A Grensestolpe">
   <Variant Name="Signal 64A Grensestolpe">
    <SetValue Key="LeftText" Value="Svart/Hvit"/>
    <SetValue Key="RightText" Value="Svart/Hvit"/>
    <SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   </Variant>
   <Variant Name="Signal 64B Seksjoneringsstolpe">
    <SetValue Key="LeftText" Value="Rød/Hvit"/>
    <SetValue Key="RightText" Value="Rød/Hvit"/>
    <SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   </Variant>
   <Variant Name="Signal 64C Rasvarslingsstolpe">
    <SetValue Key="LeftText" Value="Gul/Hvit"/>
    <SetValue Key="RightText" Value="Gul/Hvit"/>
    <SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   </Variant>
   <Variant Name="Signal 64D Bremsestolpe">
    <SetValue Key="LeftText" Value="Gul/Svart"/>
    <SetValue Key="RightText" Value="Gul/Svart"/>
    <SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   </Variant>
   <Variant Name="Signal 64E Teknisk stolpe">
    <SetValue Key="LeftText" Value="Blå/Hvit"/>
    <SetValue Key="RightText" Value="Blå/Hvit"/>
    <SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   </Variant>
   <Variant Name="Signal 64F Dvergsignalstolpe">
    <SetValue Key="LeftText" Value="Svart/Hvit"/>
    <SetValue Key="RightText" Value="Svart/Hvit"/>
    <SetValue Key="RotateText" Value="{{alignmentRotation | minus:ucsRotation | cosisnegative}}"/>
   </Variant>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SKT_SignNssPole_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKT_SignNssPole_Geometry3DName()" ReturnType="String" Description="Returns the pole's 3D geometry name.">
   <Signature>String _JBTKO_SKT_SignNssPole_Geometry3DName()</Signature>
   <Formula>
				function _JBTKO_SKT_SignNssPole_Geometry3DName()
					if Variant == "Signal 64A Grensestolpe" then
						return "NO-BN-3D-KO-SKT-STOLPE-64A-GRENSE-INNKOBLINGSSTOLPE"
					elseif Variant == "Signal 64B Seksjoneringsstolpe" then
						return "NO-BN-3D-KO-SKT-STOLPE-64B-SEKSJONERINGSSTOLPE"
					elseif Variant == "Signal 64C Rasvarslingsstolpe" then
						return "NO-BN-3D-KO-SKT-STOLPE-64C-RASVARSLINGSSTOLPE"
					elseif Variant == "Signal 64D Bremsestolpe" then
						return "NO-BN-3D-KO-SKT-STOLPE-64D-BREMSESTOLPE"
					elseif Variant == "Signal 64E Teknisk stolpe" then
						return "NO-BN-3D-KO-SKT-STOLPE-64E-TEKNISK-STOLPE"
					elseif Variant == "Signal 64F Dvergsignalstolpe" then
						return "NO-BN-3D-KO-SKT-STOLPE-64F-DVERGSIGNALSTOLPE"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Signal 64A Grensestolpe" DisplayName="64A Grensestolpe" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64A-GRENSE-INNKOBLINGSSTOLPE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 64B Seksjoneringsstolpe" DisplayName="64B Seksjoneringsstolpe" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64B-SEKSJONERINGSSTOLPE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 64C Rasvarslingsstolpe" DisplayName="64C Rasvarslingsstolpe" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64C-RASVARSLINGSSTOLPE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 64D Bremsestolpe" DisplayName="64D Bremsestolpe" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64D-BREMSESTOLPE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 64E Teknisk stolpe" DisplayName="64E Teknisk stolpe" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64E-TEKNISK-STOLPE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 64F Dvergsignalstolpe" DisplayName="64F Dvergsignalstolpe" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64F-DVERGSIGNALSTOLPE-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64A-GRENSESTOLPE-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				{% if Variant == 'Signal 64A Grensestolpe' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64A-GRENSE-INNKOBLINGSSTOLPE
				{% elsif Variant == 'Signal 64B Seksjoneringsstolpe' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64B-SEKSJONERINGSSTOLPE
				{% elsif Variant == 'Signal 64C Rasvarslingsstolpe' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64C-RASVARSLINGSSTOLPE
				{% elsif Variant == 'Signal 64D Bremsestolpe' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64D-BREMSESTOLPE
				{% elsif Variant == 'Signal 64E Teknisk stolpe' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64E-TEKNISK-STOLPE
				{% elsif Variant == 'Signal 64F Dvergsignalstolpe' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-64F-DVERGSIGNALSTOLPE
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="LEFTUP">
    <Value>{% if RotateText == 'False' and dir == 'up' %}{{LeftText}}{% elsif RotateText == 'True' and dir == 'down' %}{{LeftText}}{% else %}{% endif %}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="RIGHTUP">
    <Value>{% if RotateText == 'True' and dir == 'up' %}{{RightText}}{% elsif RotateText == 'False' and dir == 'down' %}{{RightText}}{% else %}{% endif %}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssEmergencyTelephone" Name="JBTKO_SKT Skilt nødtelefon" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="apparatskap" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Nødtelefon">
   <Variant Name="Nødtelefon">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-KO-SKT-SKILT-NØDTELEFON"/>
   </Variant>
  </Variants>
  <InsertPointObject Name="Nødtelefon" DisplayBlockName="NO-BN-2D-JBTTE_SKP-SKILT-TREDJEPERSON-NOEDTELEFON-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTTE_SKP-SKILT-TREDJEPERSON
				{% if Variant == 'Nødtelefon' %}NOEDTELEFON
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0"/>
    <SnapPoint X="0" Y="3"/>
    <SnapPoint X="0" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tStopPost" Class="RailwayPlacedObject" LuaName="rctype_SignNssTrainLength" Name="JBTKO_SKT Signal 74 Toglengdeskilt" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <CustomProperty DataType="UInt32" Name="sight" DisplayName="Sight" Description="railML sikt til signal eller skilt (railML:tStopPost extension)"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="UInt32" Name="HUNDRE_M" DisplayName="Hundre-metere" DotLiquidExpression="{{trainLength | toint | divided_by:100}}"/>
  <CustomProperty DataType="UInt32" Name="TI_M" DisplayName="Ti-metere" DotLiquidExpression="{{trainLength | toint | modulo:100 | divided_by:10}}"/>
  <CustomProperty DataType="UInt32" Name="EN_M" DisplayName="En-metere" DotLiquidExpression="{{trainLength | toint | modulo:10}} "/>
  <Variants DefaultValue="Signal 74-1 Toglengde (bred type)">
   <Variant Name="Signal 74-1 Toglengde (bred type)">
    <SetValue Key="name" Value="74-1"/>
   </Variant>
   <Variant Name="Signal 74-2 Toglengde (smal type)">
    <SetValue Key="name" Value="74-2"/>
   </Variant>
  </Variants>
  <SetValue Key="trainLength" Value="110"/>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SKT_74_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKT_74_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the object's default 3D object model name.">
   <Signature>String _JBTKO_SKT_74_Geometry3DName()</Signature>
   <Formula>
				function _JBTKO_SKT_74_Geometry3DName()
					local t = "NO-BN-3D-KO-SKT-SKILT-74-"
					if Variant == "Signal 74-1 Toglengde (bred type)" then 
						return t.."1-TOGLENGDESKILT-ALT-1"
					elseif Variant == "Signal 74-2 Toglengde (smal type)" then 
						return t.."2-TOGLENGDESKILT-ALT-2"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Signal 74-1 Toglengde (bred type)" DisplayName="74-1 Toglengdeskilt (bred type)" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-74-1-TOGLENGDE1-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 74-2 Toglengde (smal type)" DisplayName="74-2 Toglengdeskilt (smal type)" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-74-2-TOGLENGDE2-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-74-1-TOGLENGDE1-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL
				{% if Variant == 'Signal 74-1 Toglengde (bred type)' %}74-1-TOGLENGDE1
				{% elsif Variant == 'Signal 74-2 Toglengde (smal type)' %}74-2-TOGLENGDE2
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="TOGLENGDE">
    <Value>{{ trainLength | toint }}m</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="HUNDRE_M">
    <Value>{% if HUNDRE_M == 0 %} {% else %}{{HUNDRE_M}}{% endif %}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TI_M">
    <Value>{{TI_M}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="EN_M">
    <Value>{{EN_M}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{trainLength | toint}}m</Value>
   </Attribute>
   <Attribute Tag="T02">
    <Value>{% if HUNDRE_M == 0 %} {% else %}{{HUNDRE_M}}{% endif %}</Value>
   </Attribute>
   <Attribute Tag="T03">
    <Value>{{TI_M}}</Value>
   </Attribute>
   <Attribute Tag="T04">
    <Value>{{EN_M}}</Value>
   </Attribute>
   <Attribute Tag="T05">
    <Value>m</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssTrackNumber" Name="JBTKO_SKT Skilt spornummer" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="aak" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="Boolean" Name="PortalMounted" DisplayName="Åkmontert" DefaultValue="false" Category="Custom properties" Description="The 'PortalMounted' boolean custom property defines whether the object (board, signal etc) has its own mast (default:false) or is suspended from a portal (true)."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Spornummer">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-KO-SKT-SKILT-SPORNUMMER"/>
    <SetValue Key="PortalMounted" Value="true"/>
    <SetValue Key="code" Value="38"/>
   </Variant>
  </Variants>
  <LuaExpression Name="code">
   <Formula>getNearbyAlignments()[0].code</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>RightSided and 1e-3 or -1e-3 --Override of macro for LateralOffset</Formula>
  </LuaExpression>
  <InsertPointObject Name="Spornummer" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SPORNUMMER-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SPORNUMMER-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <SymbolAttribute Tag="SPORNUMMER">
    <Value>{{code}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{code}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
    <SnapPoint X="0" Y="3"/>
    <SnapPoint X="0" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssId" Name="JBTSA_MSS Signal 101 Identifikasjonsskilt" DrawTail="true" Layer="JBTSA_MSS" Color="ByLayer" Group="Skilt/Kjørende personell/ID- og pilskilt" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="signal" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="ID_BOKSTAV" DisplayName="ID-skilt litra (øvre linje)" DefaultValue=""/>
  <CustomProperty DataType="String" Name="ID_NUMMER" DisplayName="ID-skilt signalnummer (midtre/øvre linje)" DefaultValue=""/>
  <CustomProperty DataType="String" Name="ID_STED" DisplayName="ID-skilt stedsforkortelse (nedre linje)" DefaultValue=""/>
  <CustomProperty DataType="String" Name="ID_MINDRE_SIGNAL" DisplayName="Litra/Nummer" DefaultValue=""/>
  <LuaExpression Name="code">
   <Formula>Attachment and Attachment.code or "(no attachment found)"</Formula>
  </LuaExpression>
  <LuaExpression Name="ID_BOKSTAV">
   <Formula>NOBN_sig_getSignalLitra()</Formula>
  </LuaExpression>
  <LuaExpression Name="ID_NUMMER">
   <Formula>NOBN_sig_getSignalNumber()</Formula>
  </LuaExpression>
  <LuaExpression Name="ID_STED">
   <Formula>Attachment and Attachment.NOBN_com_getOcpCode() or "(no attachment found)"</Formula>
  </LuaExpression>
  <LuaExpression Name="ID_MINDRE_SIGNAL">
   <Formula>
				if Variant == 'Signal 101-5 ID-skilt for dvergsignal og togsporsignal, 1-linje, 180x100' then
					return "R"..code
				elseif Variant == 'Signal 101-6 ID-skilt for dvergsignal, 1-linje, 300x100' then
					return "R"..code
				elseif Variant == 'Signal 101-7 ID-skilt for planovergangsignal, 200x300' then
					return "W"..code
				elseif Variant == 'Signal 101-8 ID-skilt for høyt skiftesignal, 300x200' then
					return "Z"..code
				else 
					return ""
				end
			</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Signal 101-1 ID-skilt for Hs og Fs, 3 linjer, 800x455">
    <SetValue Key="name" Value="ID (Hs/Fs/3-lj.)"/>
   </Variant>
   <Variant Name="Signal 101-2 ID-skilt for Hs og Fs, 2 linjer, 800x325">
    <SetValue Key="name" Value="ID (Hs/Fs/2-lj.)"/>
   </Variant>
   <Variant Name="Signal 101-3 ID-skilt for Hs og Fs, 3 linjer, Ø600">
    <SetValue Key="name" Value="ID (Hs/Fs/rundt)"/>
   </Variant>
   <Variant Name="Signal 101-5 ID-skilt for dvergsignal og togsporsignal, 1-linje, 180x100">
    <SetValue Key="name" Value="ID Ds/Tsp, lite"/>
   </Variant>
   <Variant Name="Signal 101-6 ID-skilt for dvergsignal, 1-linje, 300x100">
    <SetValue Key="name" Value="ID Ds, stort"/>
   </Variant>
   <Variant Name="Signal 101-7 ID-skilt for planovergangsignal, 200x300">
    <SetValue Key="name" Value="ID PLOs/Fs-PLO"/>
   </Variant>
   <Variant Name="Signal 101-8 ID-skilt for høyt skiftesignal, 300x200">
    <SetValue Key="name" Value="ID Skiftesig."/>
   </Variant>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_SignNssId_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_SignNssId_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the object's default 3D object model name.">
   <Signature>String _JBTSA_MSS_SignNssId_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_MSS_SignNssId_Geometry3DName()		
					if Variant == "Signal 101-1 ID-skilt for Hs og Fs, 3 linjer, 800x455" then 
						--3D-verdiene er tilpasset BN hovedsignal:
						return "NO-BN-3D-SA-MSS-SKILT-101-1-800x455-ID-SKILT-3-LINJER"
					elseif Variant == "Signal 101-2 ID-skilt for Hs og Fs, 2 linjer, 800x325" then 
						return "NO-BN-3D-SA-MSS-SKILT-101-2-800x325-ID-SKILT-2-LINJER"
					elseif Variant == "Signal 101-3 ID-skilt for Hs og Fs, 3 linjer, Ø600" then 
						return "NO-BN-3D-SA-MSS-SKILT-101-3-Ø600-ID-SKILT-3-LINJER"
					elseif Variant == "Signal 101-5 ID-skilt for dvergsignal og togsporsignal, 1-linje, 180x100" then 
						return "NO-BN-3D-SA-MSS-SKILT-101-5-180x100-ID-SKILT-DS-OG-TSS"
					elseif Variant == "Signal 101-6 ID-skilt for dvergsignal, 1-linje, 300x100" then 
						return "NO-BN-3D-SA-MSS-SKILT-101-6-300x100-ID-SKILT-DS"
					elseif Variant == "Signal 101-7 ID-skilt for planovergangsignal, 200x300" then 
						return "NO-BN-3D-SA-MSS-SKILT-101-7-200x300-ID-SKILT-PLO-SIGNAL"
					elseif Variant == "Signal 101-8 ID-skilt for høyt skiftesignal, 300x200" then 
						return "NO-BN-3D-SA-MSS-SKILT-101-8-300x200-ID-SKILT-HØYT-SKIFTESIGNAL"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>_JBTSA_MSS_SignNssId_Geometry3DOffsetZ()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_SignNssId_Geometry3DOffsetZ()" ReturnType="String" HideFromUser="false" Description="Returns the object's 3d geometries' z offset">
   <Signature>String _JBTSA_MSS_SignNssId_Geometry3DOffsetZ()</Signature>
   <Formula>
				function _JBTSA_MSS_SignNssId_Geometry3DOffsetZ()		
					if Variant == "Signal 101-1 ID-skilt for Hs og Fs, 3 linjer, 800x455" then 
						--3D-verdiene er tilpasset BN hovedsignal:
						return "2.02"
					elseif Variant == "Signal 101-2 ID-skilt for Hs og Fs, 2 linjer, 800x325" then 
						return "2.02"
					elseif Variant == "Signal 101-3 ID-skilt for Hs og Fs, 3 linjer, Ø600" then 
						return "2.02"
					elseif Variant == "Signal 101-5 ID-skilt for dvergsignal og togsporsignal, 1-linje, 180x100" then 
						return "0.6"
					elseif Variant == "Signal 101-6 ID-skilt for dvergsignal, 1-linje, 300x100" then 
						return "0.6"
					elseif Variant == "Signal 101-7 ID-skilt for planovergangsignal, 200x300" then 
						return "1.7"
					elseif Variant == "Signal 101-8 ID-skilt for høyt skiftesignal, 300x200" then 
						return "1.7"
					else
						return "0"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Signal 101-1 ID-skilt for Hs og Fs, 3 linjer, 800x455" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-1-ID-3-LINJER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 101-2 ID-skilt for Hs og Fs, 2 linjer, 800x325" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-2-ID-2-LINJER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 101-3 ID-skilt for Hs og Fs, 3 linjer, Ø600" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-3-ID-RUNDT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 101-5 ID-skilt for dvergsignal og togsporsignal, 1-linje, 180x100" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-5-ID-MINDRE-SIGNAL-180x100-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 101-6 ID-skilt for dvergsignal, 1-linje, 300x100" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-6-ID-MINDRE-SIGNAL-300x100-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 101-7 ID-skilt for planovergangsignal, 200x300" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-7-ID-MINDRE-SIGNAL-200x300-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 101-8 ID-skilt for høyt skiftesignal, 300x200" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-8-ID-MINDRE-SIGNAL-300x200-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-101-1-ID-3-LINJER-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL
				{% if Variant == 'Signal 101-1 ID-skilt for Hs og Fs, 3 linjer, 800x455' %}101-1-ID-3-LINJER
				{% elsif Variant == 'Signal 101-2 ID-skilt for Hs og Fs, 2 linjer, 800x325' %}101-2-ID-2-LINJER
				{% elsif Variant == 'Signal 101-3 ID-skilt for Hs og Fs, 3 linjer, Ø600' %}101-3-ID-RUNDT
				{% elsif Variant == 'Signal 101-5 ID-skilt for dvergsignal og togsporsignal, 1-linje, 180x100' %}101-5-ID-MINDRE-SIGNAL-180x100
				{% elsif Variant == 'Signal 101-6 ID-skilt for dvergsignal, 1-linje, 300x100' %}101-6-ID-MINDRE-SIGNAL-300x100
				{% elsif Variant == 'Signal 101-7 ID-skilt for planovergangsignal, 200x300' %}101-7-ID-MINDRE-SIGNAL-200x300
				{% elsif Variant == 'Signal 101-8 ID-skilt for høyt skiftesignal, 300x200' %}101-8-ID-MINDRE-SIGNAL-300x200
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="ID_BOKSTAV">
    <Value>{{ID_BOKSTAV}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="ID_NUMMER">
    <Value>{{ID_NUMMER}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="ID_STED">
    <Value>{{ID_STED}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="ID_BOKSTAV_OG_NR">
    <Value>{{ID_BOKSTAV}} {{ID_NUMMER}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="ID_MINDRE_SIGNAL">
    <Value>{{ID_MINDRE_SIGNAL}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{ID_BOKSTAV}}</Value>
   </Attribute>
   <Attribute Tag="T02">
    <Value>{{ID_NUMMER}}</Value>
   </Attribute>
   <Attribute Tag="T03">
    <Value>{{ID_STED}}</Value>
   </Attribute>
   <Attribute Tag="T04">
    <Value>{{ID_BOKSTAV}} {{ID_NUMMER}}</Value>
   </Attribute>
   <Attribute Tag="T05">
    <Value>{{ID_MINDRE_SIGNAL}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
    <SnapPoint X="7" Y="7"/>
    <SnapPoint X="7" Y="-7"/>
    <SnapPoint X="-7" Y="7"/>
    <SnapPoint X="-7" Y="-7"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssArrow" Name="JBTSA_MSS Signal 102 Pilskilt (underskilt)" DrawTail="true" Layer="JBTSA_MSS" Color="ByLayer" Group="Skilt/Kjørende personell/ID- og pilskilt" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="signal" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Signal 102-1 Pil mot høyre">
    <SetValue Key="name" Value="Pil (høyre)"/>
   </Variant>
   <Variant Name="Signal 102-2 Pil mot venstre">
    <SetValue Key="name" Value="Pil (venstre)"/>
   </Variant>
   <Variant Name="Signal 102-3 Pil begge veier">
    <SetValue Key="name" Value="Pil (begge veier)"/>
   </Variant>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_SignNssArrow_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_SignNssArrow_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the object's default 3D object model name.">
   <Signature>String _JBTSA_MSS_SignNssArrow_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_MSS_SignNssArrow_Geometry3DName()		
					if Variant == "Signal 102-1 Pil mot høyre" then
						--3D-verdier tilpasset frittstående SATEMA dverg: 3D Offset.Z=1.18, 3D OffsetTowardsDriver=-0.13:
						--3D-verdier tilpasset NSI-63 signal med vanlig signalskap og SATEMA dverg: 3D Offset.Z=1.33, 3D OffsetTowardsDriver=0.20 
						return "NO-BN-3D-SA-MSS-SKILT-102-1-PIL-H"
					elseif Variant == "Signal 102-2 Pil mot venstre" then
						--3D-verdier tilpasset NSI-63 signal med vanlig signalskap og SATEMA dverg:
						return "NO-BN-3D-SA-MSS-SKILT-102-2-PIL-V"
					elseif Variant == "Signal 102-3 Pil begge veier" then 
						--3D-verdier tilpasset skilt på 3.50 m høy stolpe med underskilt "pilskilt":
						return "NO-BN-3D-SA-MSS-SKILT-102-3-PIL-HV"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Offset.Y">
   <Formula>_JBTSA_MSS_SignNssArrow_Geometry3DOffsetY()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_SignNssArrow_Geometry3DOffsetY()" ReturnType="Double" HideFromUser="false" Description="Returns the object's 3D geometry Y offset.">
   <Signature>Double _JBTSA_MSS_SignNssArrow_Geometry3DOffsetY()</Signature>
   <Formula>
				function _JBTSA_MSS_SignNssArrow_Geometry3DOffsetY()		
					if Variant == "Signal 102-1 Pil mot høyre" then
						--3D-verdier tilpasset frittstående SATEMA dverg: 3D Offset.Z=1.18, 3D OffsetTowardsDriver=-0.13:
						--3D-verdier tilpasset NSI-63 signal med vanlig signalskap og SATEMA dverg: 3D Offset.Z=1.33, 3D OffsetTowardsDriver=0.20 
						return -0.2
					elseif Variant == "Signal 102-2 Pil mot venstre" then 
						--3D-verdier tilpasset NSI-63 signal med vanlig signalskap og SATEMA dverg:
						return -0.2
					elseif Variant == "Signal 102-3 Pil begge veier" then 
						--3D-verdier tilpasset skilt på 3.50 m høy stolpe med underskilt "pilskilt":
						return 0
					else
						return 0
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>_JBTSA_MSS_SignNssArrow_Geometry3DOffsetZ()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_SignNssArrow_Geometry3DOffsetZ()" ReturnType="Double" HideFromUser="false" Description="Returns the object's 3D geometry Z offset.">
   <Signature>Double _JBTSA_MSS_SignNssArrow_Geometry3DOffsetZ()</Signature>
   <Formula>
				function _JBTSA_MSS_SignNssArrow_Geometry3DOffsetZ()		
					if Variant == "Signal 102-1 Pil mot høyre" then
						--3D-verdier tilpasset frittstående SATEMA dverg: 3D Offset.Z=1.18, 3D OffsetTowardsDriver=-0.13:
						--3D-verdier tilpasset NSI-63 signal med vanlig signalskap og SATEMA dverg: 3D Offset.Z=1.33, 3D OffsetTowardsDriver=0.20 
						return 1.33
					elseif Variant == "Signal 102-2 Pil mot venstre" then 
						--3D-verdier tilpasset NSI-63 signal med vanlig signalskap og SATEMA dverg:
						return 1.33
					elseif Variant == "Signal 102-3 Pil begge veier" then 
						--3D-verdier tilpasset skilt på 3.50 m høy stolpe med underskilt "pilskilt":
						return 2.9
					else
						return 0
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Signal 102-1 Pil mot høyre" DisplayName="102-1 Pilskilt" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-102-1-PIL-H-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 102-2 Pil mot venstre" DisplayName="102-2 Pilskilt" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-102-2-PIL-V-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 102-3 Pil begge veier" DisplayName="102-3 Pilskilt" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-102-3-PIL-HV-{{SymbolMode}}" DefaultSnapMode="Point" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-102-3-PIL-HV-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL
				{% if Variant == 'Signal 102-1 Pil mot høyre' %}102-1-PIL-H
				{% elsif Variant == 'Signal 102-2 Pil mot venstre' %}102-2-PIL-V
				{% elsif Variant == 'Signal 102-3 Pil begge veier' %}102-3-PIL-HV
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0.3"/>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssTrainHeating1000V" Name="JBTKO_SKT Skilt 1000V togvarmeanlegg" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="signalteknisk_bygg" DrawTail="true"/>
  <AttachTo Category="apparatskap" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTEL@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTEL@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTEL@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="1000V togvarmeanlegg">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-FE-DIV-UKJENT"/>
   </Variant>
  </Variants>
  <InsertPointObject Name="1000V togvarmeanlegg" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-1000V-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-1000V-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				{% if Variant == '1000 V togvarmeanlegg' %}NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-1000V
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssMovablePointFrog" Name="JBTKO_SKT Skilt bevegelig kryss" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Bevegelig kryss">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-KO-SKT-SKILT-BEVEGELIG-KRYSS"/>
   </Variant>
  </Variants>
  <InsertPointObject Name="Bevegelig kryss" DisplayBlockName="NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-BEVEGELIG-KRYSS-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-BEVEGELIG-KRYSS-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssKilometer" Name="JBTKO_SKT Signal 75 Kilometerskilt" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Kilometerskilt" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="kl-mast" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="UInt32" Name="HEL_KM" DisplayName="Hel km" DefaultValue="0"/>
  <CustomProperty DataType="UInt32" Name="HEL_KM_UTEN_HALV" DisplayName="Hel km uten halv" DefaultValue="0"/>
  <CustomProperty DataType="UInt32" Name="HALV_KM" DisplayName="Halv km" DefaultValue="0"/>
  <LuaExpression Name="HEL_KM">
   <Formula>NOBN_trk_getNearestEntireKm()</Formula>
  </LuaExpression>
  <LuaExpression Name="HEL_KM_UTEN_HALV">
   <Formula>NOBN_trk_getNearestEntireKm2()</Formula>
  </LuaExpression>
  <LuaExpression Name="HALV_KM">
   <Formula>NOBN_trk_getNearestHalfKm()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Signal 75A-1 Kilometerskilt, enkelsidet, midtstilt">
   <Variant Name="Signal 75A-1 Kilometerskilt, enkelsidet, midtstilt"/>
   <Variant Name="Signal 75A-2 Kilometerskilt, gammel type"/>
   <Variant Name="Signal 75A-3 Kilometerskilt, dobbelsidet, midtstilt"/>
   <Variant Name="Signal 75A-4 Kilometerskilt, dobbelsidet, sidestilt"/>
   <Variant Name="Signal 75B Kilometerskilt i tunnel, dobbelsidet"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SKT_SignNssKilometer_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKT_SignNssKilometer_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the object's default 3D object model name.">
   <Signature>String _JBTKO_SKT_SignNssKilometer_Geometry3DName()</Signature>
   <Formula>
				function _JBTKO_SKT_SignNssKilometer_Geometry3DName()		
					if Variant == "Signal 75A-1 Kilometerskilt, enkelsidet, midtstilt" then
						return "NO-BN-3D-KO-SKT-SKILT-75A-1-KILOMETERSKILT-ENKELSIDET-MIDTSTILT"
					elseif Variant == "Signal 75A-2 Kilometerskilt, gammel type" then						
						return "NO-BN-3D-KO-SKT-SKILT-75A-2-KILOMETERSKILT-GAMMEL-TYPE"
					elseif Variant == "Signal 75A-3 Kilometerskilt, dobbelsidet, midtstilt" then 						
						return "NO-BN-3D-KO-SKT-SKILT-75A-3-KILOMETERSKILT-DOBBELSIDET-MIDTSTILT"
					elseif Variant == "Signal 75A-4 Kilometerskilt, dobbelsidet, sidestilt" then 						
						return "NO-BN-3D-KO-SKT-SKILT-75A-4-KILOMETERSKILT-DOBBELSIDET-SIDESTILT"
					elseif Variant == "Signal 75B Kilometerskilt i tunnel, dobbelsidet" then 						
						return "NO-BN-3D-KO-SKT-SKILT-75B-KILOMETERSKILT-FOR-TUNNELER-DOBBELSIDET"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Signal 75A-1 Kilometerskilt, enkelsidet, midtstilt" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-75A-1-KILOMETER-ENKELSIDET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 75A-2 Kilometerskilt, gammel type" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-75A-2-KILOMETER-GAMMEL-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 75A-3 Kilometerskilt, dobbelsidet, midtstilt" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-75A-3-KILOMETER-DOBBELSIDET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 75A-4 Kilometerskilt, dobbelsidet, sidestilt" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-75A-3-KILOMETER-DOBBELSIDET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 75B Kilometerskilt i tunnel, dobbelsidet" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-75B-KILOMETER-TUNNEL-DOBBELSIDET-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.8">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
   <SetValue Key="dir" Value="both"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL-75A-1-KILOMETER-ENKELSIDET-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIGNAL
				{% if Variant == 'Signal 75A-1 Kilometerskilt, enkelsidet, midtstilt' %}75A-1-KILOMETER-ENKELSIDET
				{% elsif Variant == 'Signal 75A-2 Kilometerskilt, gammel type' %}75A-2-KILOMETER-GAMMEL
				{% elsif Variant == 'Signal 75A-3 Kilometerskilt, dobbelsidet, midtstilt' %}75A-3-KILOMETER-DOBBELSIDET
				{% elsif Variant == 'Signal 75A-4 Kilometerskilt, dobbelsidet, sidestilt' %}75A-3-KILOMETER-DOBBELSIDET 
				{% elsif Variant == 'Signal 75B Kilometerskilt i tunnel, dobbelsidet' %}75B-KILOMETER-TUNNEL-DOBBELSIDET
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="HUNDRE_KM">
    <Value>{{HEL_KM | divided_by:100}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TI_KM">
    <Value>{{HEL_KM | modulo:100 | divided_by:10}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="EN_KM">
    <Value>{{HEL_KM | modulo:10}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="HEL_KM">
    <Value>{{HEL_KM}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="HALV_KM">
    <Value>{{HALV_KM}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="HEL_KM_UTEN_HALV">
    <Value>{{HEL_KM_UTEN_HALV}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="HUNDRE_KM2">
    <Value>{{HEL_KM | divided_by:100}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TI_KM2">
    <Value>{{HEL_KM | modulo:100 | divided_by:10}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="EN_KM2">
    <Value>{{HEL_KM | modulo:10}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="HEL_KM2">
    <Value>{{HEL_KM}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="HALV_KM2">
    <Value>{{HALV_KM}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{HEL_KM}}</Value>
   </Attribute>
   <Attribute Tag="T02">
    <Value>{{HALV_KM}}</Value>
   </Attribute>
   <Attribute Tag="T03">
    <Value>{{HEL_KM | divided_by:100}}</Value>
   </Attribute>
   <Attribute Tag="T04">
    <Value>{{HEL_KM | modulo:100 | divided_by:10}}</Value>
   </Attribute>
   <Attribute Tag="T05">
    <Value>{{HEL_KM | modulo:10}}</Value>
   </Attribute>
   <Attribute Tag="T06">
    <Value>{{HEL_KM_UTEN_HALV}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
    <SnapPoint X="0" Y="3"/>
    <SnapPoint X="0" Y="-3"/>
    <SnapPoint X="3" Y="0"/>
    <SnapPoint X="-3" Y="-0"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssConstructionArea" Name="JBTKO_SKT Anleggsområde" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Anleggsområde begynner">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-KO-SKT-SKILT-ANLEGGSOMRÅDE-BEGYNNER"/>
   </Variant>
   <Variant Name="Anleggsområde slutter">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-KO-SKT-SKILT-ANLEGGSOMRÅDE-SLUTTER"/>
   </Variant>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SKT_SignNssConstructionArea_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKT_SignNssConstructionArea_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the object's default 3D object model name.">
   <Signature>String _JBTKO_SKT_SignNssConstructionArea_Geometry3DName()</Signature>
   <Formula>
				function _JBTKO_SKT_SignNssConstructionArea_Geometry3DName()		
					if Variant == "Anleggsområde begynner" then
						return "NO-BN-3D-KO-SKT-SKILT-ANLEGGSOMRÅDE-BEGYNNER"
					elseif Variant == "Anleggsområde slutter" then						
						return "NO-BN-3D-KO-SKT-SKILT-ANLEGGSOMRÅDE-SLUTTER"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Anleggsområde begynner" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-ANLEGGSOMRAADE-BEGYNNER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Anleggsområde slutter" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-ANLEGGSOMRAADE-SLUTTER-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-ANLEGGSOMRAADE-BEGYNNER-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-ANLEGGSOMRAADE
				{% if Variant == 'Anleggsområde begynner' %}BEGYNNER
				{% elsif Variant == 'Anleggsområde slutter' %}SLUTTER
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssSiding" Name="JBTKO_SKT Sidespor" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Kjørende personell/Diverse" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="SSP_NAVN" DisplayName="Sidespor navn (store bokstaver):" DefaultValue="Firmanavn AS"/>
  <CustomProperty DataType="String" Name="SSP_KM" DisplayName="Kilometer (xxx,xx):" DefaultValue="0,0"/>
  <CustomProperty DataType="String" Name="SSP_FRA_STASJON" DisplayName="Stasjon 1" DefaultValue="Askeby"/>
  <CustomProperty DataType="String" Name="SSP_TIL_STASJON" DisplayName="Stasjon 2" DefaultValue="Potteby"/>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Sidespor">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-FE-DIV-UKJENT"/>
   </Variant>
  </Variants>
  <InsertPointObject Name="Sidespor" DisplayBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIDESPOR-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="180" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKK-SKILT-KJOERENDE-SIDESPOR-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <SymbolAttribute Tag="SSP_NAVN">
    <Value>{{SSP_NAVN}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="SSP_KM">
    <Value>Km. {{SSP_KM}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="SSP_STASJON">
    <Value>{{SSP_FRA_STASJON}}og {{SSP_TIL_STASJON}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{SSP_NAVN}}</Value>
   </Attribute>
   <Attribute Tag="T02">
    <Value>Km. {{SSP_KM}}</Value>
   </Attribute>
   <Attribute Tag="T03">
    <Value>{{SSP_FRA_STASJON} } og {{SSP_TIL_STASJON}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssSnowClearing" Name="JBTKO_SKT Signal 75C/75D Hev/senk sporrenser" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Vedlikeholdspersonell/Sporrenser" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="kl-mast" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SKT_75CD_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKT_75CD_Geometry3DName()" ReturnType="String" Description="Obtains the board's 3D model name.">
   <Signature>String _JBTKO_SKT_75CD_Geometry3DName()</Signature>
   <Formula>
				function _JBTKO_SKT_75CD_Geometry3DName()
					local side, number
					if RightSided then 
						number = (dir == 'up' and 1 or 2)
						side = (dir == 'up' and "HSIDE" or "VSIDE")
					else 
						number = (dir == 'up' and 2 or 1)
						side = (dir == 'up' and "VSIDE" or "HSIDE")
					end
					if Variant:match("75C") then
						return "NO-BN-3D-KO-SKT-SKILT-75C-"..number.."-HEV-SPORRENSER-"..side
					elseif Variant:match("75D") then
						return "NO-BN-3D-KO-SKT-SKILT-75D-"..number.."-SENK-SPORRENSER-"..side
					else	
						return "Unrecognized variant ["..Variant.."]."
					end
				end
			</Formula>
  </LuaFunction>
  <Variants DefaultValue="Signal 75C Hev sporrenser">
   <Variant Name="Signal 75C Hev sporrenser"/>
   <Variant Name="Signal 75D Senk sporrenser"/>
  </Variants>
  <InsertPointObject Name="Signal 75C Hev sporrenser" DisplayBlockName="NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-SIGNAL-75C-{% if dir == 'up' %}{% if RightSided %}1{% else %}2{% endif %}{% else %}{% if RightSided %}2{% else %}1{% endif %}{% endif %}-HEV-{% if dir == 'up' -%}{%- if RightSided %}HSIDE{% else %}VSIDE{% endif %}{% else %}{% if RightSided %}VSIDE{% else %}HSIDE{% endif %}{% endif %}-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfLeftSideOfAlignment="false" AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 75D Senk sporrenser" DisplayBlockName="NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-SIGNAL-75D-{% if dir == 'up' %}{% if RightSided %}1{% else %}2{% endif %}{% else %}{% if RightSided %}2{% else %}1{% endif %}{% endif %}-SENK-{% if dir == 'up' %}{% if RightSided %}HSIDE{% else %}VSIDE{% endif %}{% else %}{% if RightSided %}VSIDE{% else %}HSIDE{% endif %}{% endif %}-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfLeftSideOfAlignment="false" AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-SIGNAL
			{% if Variant == 'Signal 75C Hev sporrenser' %}75C{% else %}75D{% endif %}
			{% if dir == 'up' %}{% if RightSided %}1{% else %}2{% endif %}{% else %}{% if RightSided %}2{% else %}1{% endif %}{% endif %}
			{% if Variant == 'Signal 75C Hev sporrenser' %}HEV{% else %}SENK{% endif %}
			{% if dir == 'up' %}{% if RightSided %}HSIDE{% else %}VSIDE{% endif %}{% else %}{% if RightSided %}VSIDE{% else %}HSIDE{% endif %}{% endif %}
			{% if Variant != 'Signal 75C Hev sporrenser' and Variant != 'Signal 75D Senk sporrenser' %}BAD_Variant_{{Variant}}{% endif %}
			{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssChainBreak" Name="JBTKO_SKT Signal 75E Kjedebrudd" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Vedlikeholdspersonell/Kjedebrudd" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Signal 75E-1 Kjedebrudd"/>
   <Variant Name="Signal 75E-2 Eksakt kjedebrudd"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTKO_SKT_75E_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTKO_SKT_75E_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the object's default 3D object model name.">
   <Signature>String _JBTKO_SKT_75E_Geometry3DName()</Signature>
   <Formula>
				function _JBTKO_SKT_75E_Geometry3DName()
					local t = "NO-BN-3D-KO-SKT-SKILT-75E-"
					if Variant == "Signal 75E-1 Kjedebrudd" then 
						return t.."1-KJEDEBRUDD"
					elseif Variant == "Signal 75E-2 Eksakt kjedebrudd" then 
						return t.."2-KJEDEBRUDD-EKSAKT"
					end
				end
			</Formula>
  </LuaFunction>
  <LuaExpression Name="dir">
   <Formula>"both"</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="FRA_1" DisplayName="Fra km" DefaultValue="15"/>
  <CustomProperty DataType="String" Name="FRA_2" DisplayName="Fra m hhv. mm" DefaultValue="422"/>
  <CustomProperty DataType="String" Name="TIL_1" DisplayName="Til km" DefaultValue="15"/>
  <CustomProperty DataType="String" Name="TIL_2" DisplayName="Til m. hhv. mm" DefaultValue="450"/>
  <CustomProperty DataType="String" Name="SPRANG" DisplayName="Sprang i m" DefaultValue="+28 m"/>
  <LuaExpression Name="FRA_1">
   <Formula>
				local ai = getAlignmentInfo()
				local m = ai and ai.NearestMileageChange.MileageIn or 0.0
				return RC__isNan(m) and "0" or string.format("%0.f",math.floor(m))
			</Formula>
  </LuaExpression>
  <LuaExpression Name="FRA_2">
   <Formula>
				local ai = getAlignmentInfo()
				local m = ai and ai.NearestMileageChange.MileageIn or 0.0
				if RC__isNan(m) then
					return "0",_warning, _info("Missing own alignment.")
				else
					if Variant == "Signal 75E-1 Kjedebrudd" then
						return string.format("%.0f",m%1e3)
					elseif Variant == "Signal 75E-2 Eksakt kjedebrudd" then
						return string.format("%.0f",(m*1000)%1e6)
					else
						return "Unrecognized variant ["..Variant.."]."
					end
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="TIL_1">
   <Formula>
				local ai = getAlignmentInfo()
				local m = ai and ai.NearestMileageChange.MileageOut or 0.0
				return RC__isNan(m) and "0" or string.format("%0.f",math.floor(m))
			</Formula>
  </LuaExpression>
  <LuaExpression Name="TIL_2">
   <Formula>
				local ai = getAlignmentInfo()
				local m = ai and ai.NearestMileageChange.MileageOut or 0.0
				if RC__isNan(m) then
					return "0",_warning, _info("Missing own alignment.")
				else
					if Variant == "Signal 75E-1 Kjedebrudd" then
						return string.format("%.0f",m%1e3)
					elseif Variant == "Signal 75E-2 Eksakt kjedebrudd" then
						return string.format("%.0f",(m*1000)%1e6)
					else
						return "Unrecognized variant ["..Variant.."]."
					end
				end
			</Formula>
  </LuaExpression>
  <LuaExpression Name="SPRANG">
   <Formula>
				local ai = getAlignmentInfo()
				if ai then 
					local mileageChange = getAlignmentInfo().NearestMileageChange
					if Variant == "Signal 75E-1 Kjedebrudd" then
						return string.format("%.0f", (mileageChange.MileageOut - mileageChange.MileageIn))
					elseif Variant == "Signal 75E-2 Eksakt kjedebrudd" then
						return string.format("%.3f", (mileageChange.MileageOut - mileageChange.MileageIn))
					else
						return "Unrecognized variant ["..Variant.."]."
					end
				else
					return "0"
				end
			</Formula>
  </LuaExpression>
  <InsertPointObject Name="Signal 75E-1 Kjedebrudd" DisplayBlockName="NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-SIGNAL-75E-KJEDEBRUDD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Signal 75E-2 Eksakt kjedebrudd" DisplayBlockName="NO-BN-2D-SKILT-VEDLIKEHOLD-SIGNAL-75E-EKSAKT-KJEDEBRUDD-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_THUMBNAIL-USPESIFISERT-Schematic" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
			NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-SIGNAL
			{% if Variant == 'Signal 75E-1 Kjedebrudd' %}75E-KJEDEBRUDD
			{% elsif Variant == 'Signal 75E-2 Eksakt kjedebrudd' %}75E-EKSAKT-KJEDEBRUDD
			{% else %}BAD_Variant_{{Variant}}
			{% endif %}
			{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="FRA_1">
    <Value>{% if Variant == 'Signal 75E-2 Eksakt kjedebrudd' %}Km{{FRA_1}},{% else %}{{FRA_1}}{% endif %}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="FRA_2">
    <Value>{% if Variant == 'Signal 75E-2 Eksakt kjedebrudd' %}{{FRA_3}},{% else %}{{FRA_2}}{% endif %}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TIL_1">
    <Value>{% if Variant == 'Signal 75E-2 Eksakt kjedebrudd' %}Km{{TIL_1}},{% else %}{{TIL_1}}{% endif %}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TIL_2">
    <Value>{% if Variant == 'Signal 75E-2 Eksakt kjedebrudd' %}Km{{TIL_3}},{% else %}{{TIL_2}}{% endif %}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="SPRANG">
    <Value>{% if sprang &gt; 0 %}+{% endif %}{{SPRANG}} m</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{% if Variant == 'Signal 75E-2 Eksakt kjedebrudd' %}Km{{FRA_1}},{% else %}{{FRA_1}}{% endif %}"</Value>
   </Attribute>
   <Attribute Tag="T02">
    <Value>{% if Variant == 'Signal 75E-2 Eksakt kjedebrudd' %}{{FRA_3}},{% else %}{{FRA_2}}{% endif %}</Value>
   </Attribute>
   <Attribute Tag="T03">
    <Value>{% if Variant == 'Signal 75E-2 Eksakt kjedebrudd' %}Km{{TIL_1}},{% else %}{{TIL_1}}{% endif %}</Value>
   </Attribute>
   <Attribute Tag="T04">
    <Value>{% if Variant == 'Signal 75E-2 Eksakt kjedebrudd' %}Km{{TIL_3}},{% else %}{{TIL_2}}{% endif %}</Value>
   </Attribute>
   <Attribute Tag="T05">
    <Value>{% if sprang &gt; 0 %}+{% endif %}{{SPRANG}} m</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0"/>
    <SnapPoint X="0" Y="3"/>
    <SnapPoint X="0" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssWorkProtectionArea" Name="JBTSA_MSS Arbeidsområdeskilt" DrawTail="true" Layer="JBTSA_MSS" Color="ByLayer" Group="Skilt/Vedlikeholdspersonell/Arbeidsområdeskilt" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="signal" DrawTail="true"/>
  <AttachTo Category="skilt" DrawTail="true"/>
  <AttachTo Category="apparatskap" DrawTail="true"/>
  <AttachTo Category="ertms_marker_board" DrawTail="true"/>
  <AttachTo Category="ertms_shunting_signal" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="TEKST1" DisplayName="Tekstlinje 1" DefaultValue=""/>
  <CustomProperty DataType="String" Name="TEKST2" DisplayName="Tekstlinje 2" DefaultValue="Arbeidsområde"/>
  <CustomProperty DataType="String" Name="TEKST3" DisplayName="Tekstlinje 3" DefaultValue=""/>
  <CustomProperty DataType="String" Name="TEKST4" DisplayName="Tekstlinje 4" DefaultValue=""/>
  <CustomProperty DataType="String" Name="TEKST5" DisplayName="Tekstlinje 5" DefaultValue="Arbeidsområde"/>
  <CustomProperty DataType="String" Name="TEKST6" DisplayName="Tekstlinje 6" DefaultValue=""/>
  <Variants>
   <Variant Name="Arbeidsområdeskilt Type 1-2"/>
   <Variant Name="Arbeidsområdeskilt Type 1-3"/>
   <Variant Name="Arbeidsområdeskilt Type 2-2"/>
   <Variant Name="Arbeidsområdeskilt Type 2-3"/>
   <Variant Name="Arbeidsområdeskilt Orienterende"/>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_SignNssWorkProtectionArea_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_SignNssWorkProtectionArea_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the object's default 3D object model name.">
   <Signature>String _JBTSA_MSS_SignNssWorkProtectionArea_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_MSS_SignNssWorkProtectionArea_Geometry3DName()		
					if Variant == "Arbeidsområdeskilt Type 1-2" then
						return "NO-BN-3D-SA-MSS-SKILT-ARBEIDSOMRÅDE-1-2"
					elseif Variant == "Arbeidsområdeskilt Type 1-3" then						
						return "NO-BN-3D-SA-MSS-SKILT-ARBEIDSOMRÅDE-1-3"
					elseif Variant == "Arbeidsområdeskilt Type 2-2" then						
						return "NO-BN-3D-SA-MSS-SKILT-ARBEIDSOMRÅDE-2-2"
					elseif Variant == "Arbeidsområdeskilt Type 2-3" then						
						return "NO-BN-3D-SA-MSS-SKILT-ARBEIDSOMRÅDE-2-3"
					elseif Variant == "Arbeidsområdeskilt Orienterende" then						
						return "NO-BN-3D-SA-MSS-SKILT-ARBEIDSOMRÅDE-3"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Arbeidsområdeskilt Type 1-2" DisplayBlockName="NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-1-2-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="TEKST1" Value="Arbeidsområde"/>
   <SetValue Key="TEKST2" Value="OSL 1"/>
  </InsertPointObject>
  <InsertPointObject Name="Arbeidsområdeskilt Type 1-3" DisplayBlockName="NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-1-3-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="TEKST1" Value="Arbeidsområde"/>
   <SetValue Key="TEKST2" Value="OSL 1"/>
   <SetValue Key="TEKST3" Value="OSL 3"/>
  </InsertPointObject>
  <InsertPointObject Name="Arbeidsområdeskilt Type 2-2" DisplayBlockName="NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-2-2-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="TEKST1" Value="   Arb.område"/>
   <SetValue Key="TEKST2" Value="OSL 1"/>
   <SetValue Key="TEKST4" Value="Arb.område   "/>
   <SetValue Key="TEKST5" Value="OSL 3"/>
  </InsertPointObject>
  <InsertPointObject Name="Arbeidsområdeskilt Type 2-3" DisplayBlockName="NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-2-3-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="both"/>
   <SetValue Key="TEKST1" Value="Venstre"/>
   <SetValue Key="TEKST2" Value="Arbeidsområde"/>
   <SetValue Key="TEKST3" Value="OSL 1"/>
   <SetValue Key="TEKST4" Value="Høyre"/>
   <SetValue Key="TEKST5" Value="Arbeidsområde"/>
   <SetValue Key="TEKST6" Value="OSL 3"/>
  </InsertPointObject>
  <InsertPointObject Name="Arbeidsområdeskilt Orienterende" DisplayBlockName="NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-3-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" RotateIfRightSideOfAlignment="true"/>
   <SetValue Key="dir" Value="none"/>
   <SetValue Key="TEKST2" Value="Port til:"/>
   <SetValue Key="TEKST4" Value="Arbeidsområde"/>
   <SetValue Key="TEKST5" Value="OSL 1 - OSL 3"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD-ARBEIDSOMRAADE-3-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSK_SKV-SKILT-VEDLIKEHOLD
				{% if Variant == 'Arbeidsområdeskilt Type 1-2' %}ARBEIDSOMRAADE-1-2
				{% elsif Variant == 'Arbeidsområdeskilt Type 1-3' %}ARBEIDSOMRAADE-1-3
				{% elsif Variant == 'Arbeidsområdeskilt Type 2-2' %}ARBEIDSOMRAADE-2-2
				{% elsif Variant == 'Arbeidsområdeskilt Type 2-3' %}ARBEIDSOMRAADE-2-3
				{% elsif Variant == 'Arbeidsområdeskilt Orienterende' %}ARBEIDSOMRAADE-3
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="TEKST1">
    <Value>{{TEKST1}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TEKST2">
    <Value>{{TEKST2}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TEKST3">
    <Value>{{TEKST3}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TEKST4">
    <Value>{{TEKST4}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TEKST5">
    <Value>{{TEKST5}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="TEKST6">
    <Value>{{TEKST6}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{TEKST1}}</Value>
   </Attribute>
   <Attribute Tag="T02">
    <Value>{{TEKST2}}</Value>
   </Attribute>
   <Attribute Tag="T03">
    <Value>{{TEKST3}}</Value>
   </Attribute>
   <Attribute Tag="T04">
    <Value>{{TEKST4}}</Value>
   </Attribute>
   <Attribute Tag="T05">
    <Value>{{TEKST5}}</Value>
   </Attribute>
   <Attribute Tag="T06">
    <Value>{{TEKST6}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
    <SnapPoint X="3" Y="0"/>
    <SnapPoint X="-3" Y="0"/>
    <SnapPoint X="0" Y="3"/>
    <SnapPoint X="0" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssEscapeRouteDistance" Name="JBTKO_SKT Rømningsavstand" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Tredjeperson" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt</RelationSpace>
  <AttachmentCategory Name="skilt" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt"/>
  <AttachTo Category="kl-mast" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Skilt Rømningsavstand begge veier">
   <Variant Name="Skilt Rømningsavstand begge veier"></Variant>
   <Variant Name="Skilt Rømningsavstand mot venstre"></Variant>
   <Variant Name="Skilt Rømningsavstand mot høyre"></Variant>
  </Variants>
  <SetValue Key="dir" Value="both"/>
  <CustomProperty DataType="String" Name="LeftDistance" DisplayName="Rømningsavstand mot venstre" DefaultValue="-" Description="The 'LeftDistance' custom attribute holds the distance, along own alignment, between the board and a left-sided related marker object."/>
  <CustomProperty DataType="String" Name="RightDistance" DisplayName="Rømningsavstand mot høyre" DefaultValue="-" Description="The 'RightDistance' custom attribute holds the distance, along own alignment, between the board and a right-sided related marker object."/>
  <LuaExpression Name="LeftDistance">
   <Formula>NOBN_bnp_getEscapeDistanceBoardTextLeft(10,0)</Formula>
  </LuaExpression>
  <LuaExpression Name="RightDistance">
   <Formula>NOBN_bnp_getEscapeDistanceBoardTextRight(10,0)</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>
				if Variant == "Skilt Rømningsavstand begge veier" then
					return "NO-BN-3D-KO-SKT-SKILT-RØMNINGSAVSTAND-VH"
				elseif  Variant == "Skilt Rømningsavstand mot venstre" then
					return "NO-BN-3D-KO-SKT-SKILT-RØMNINGSAVSTAND-V" 
				elseif  Variant == "Skilt Rømningsavstand mot høyre" then
					return "NO-BN-3D-KO-SKT-SKILT-RØMNINGSAVSTAND-H"
				else
					return "Unrecognized variant ["..Variant.."], cannot Evaluate 3D geometry's 'Name'",_warning
				end
			</Formula>
  </LuaExpression>
  <InsertPointObject Name="Skilt Rømningsavstand begge veier" DisplayBlockName="NO-BN-2D-JBTSK_SKP-SKILT-TREDJEPERSON-ROEMNINGSVEI-VH-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.8">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Skilt Rømningsavstand mot venstre" DisplayBlockName="NO-BN-2D-JBTSK_SKP-SKILT-TREDJEPERSON-ROEMNINGSVEI-V-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.8">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <InsertPointObject Name="Skilt Rømningsavstand mot høyre" DisplayBlockName="NO-BN-2D-JBTSK_SKP-SKILT-TREDJEPERSON-ROEMNINGSVEI-H-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4.8">
   <OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKP-SKILT-TREDJEPERSON-ROEMNINGSVEI-VH-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSK_SKP-SKILT-TREDJEPERSON
				{% if Variant == 'Skilt Rømningsavstand begge veier' %}ROEMNINGSVEI-VH
				{% elsif Variant == 'Skilt Rømningsavstand mot venstre' %}ROEMNINGSVEI-V
				{% elsif Variant == 'Skilt Rømningsavstand mot høyre' %}ROEMNINGSVEI-H
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
   <SymbolAttribute Tag="VDIST">
    <Value>{{LeftDistance}}</Value>
   </SymbolAttribute>
   <SymbolAttribute Tag="HDIST">
    <Value>{{RightDistance}}</Value>
   </SymbolAttribute>
  </SymbolDefinition>
  <Annotation3DTagDefinition>
   <Attribute Tag="T01">
    <Value>{{LeftDistance}}</Value>
   </Attribute>
   <Attribute Tag="T02">
    <Value>{{RightDistance}}</Value>
   </Attribute>
  </Annotation3DTagDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignNssLookOutForTrain" Name="JBTKO_SKT Stopp se og lytt" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Tredjeperson" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt_mot_vei</RelationSpace>
  <AttachmentCategory Name="skilt_mot_vei" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt_mot_vei"/>
  <AttachTo Category="signal_mot_vei"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="10" Layer="JBTKO@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="18" Layer="JBTKO@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="18" Layer="JBTKO@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="None"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants>
   <Variant Name="Skilt Stopp se og lytt">
    <SetValue Key="Geometry3D_0.Name" Value="NO-BN-3D-FE-DIV-UKJENT"/>
   </Variant>
  </Variants>
  <SetValue Key="dir" Value="both"/>
  <InsertPointObject Name="Skilt Stopp se og lytt" DisplayBlockName="NO-BN-2D-JBTSK_SKP-SKILT-TREDJEPERSON-STOPPSEOGLYTT-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5">
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <JigSymbolAppearance RotateIfRightSideOfAlignment="true" AddAngle="0" EnableDirectionSetting="false"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKP-SKILT-TREDJEPERSON-STOPPSEOGLYTT-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt_mot_vei"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <ObjectType DataType="tSign" Class="RailwayPlacedObject" LuaName="rctype_SignStAndrewsCross" Name="JBTSA_MSS Trafikkskilt 138 Jernbaneovergang" DrawTail="true" Layer="JBTKO_SKT" Color="ByLayer" Group="Skilt/Tredjeperson" AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}">
  <RelationSpace>skilt_mot_vei</RelationSpace>
  <AttachmentCategory Name="skilt_mot_vei" PassAttachmentToTarget="true"/>
  <AttachTo Category="skilt_mot_vei"/>
  <AttachTo Category="signal_mot_vei" DrawTail="true"/>
  <AttachTo Category="skiltfeste" DrawTail="true"/>
  <LuaExpression Name="SymbolFrame">
   <Formula>NOBN_com_setSymbolFrame()</Formula>
  </LuaExpression>
  <CustomProperty DataType="String" Name="Var0" DisplayName="Var0" DefaultValue="" Category="Local variables" Description="The 'Var0' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var1" DisplayName="Var1" DefaultValue="" Category="Local variables" Description="The 'Var1' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var2" DisplayName="Var2" DefaultValue="" Category="Local variables" Description="The 'Var2' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var3" DisplayName="Var3" DefaultValue="" Category="Local variables" Description="The 'Var3' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var4" DisplayName="Var4" DefaultValue="" Category="Local variables" Description="The 'Var4' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var5" DisplayName="Var5" DefaultValue="" Category="Local variables" Description="The 'Var5' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var6" DisplayName="Var6" DefaultValue="" Category="Local variables" Description="The 'Var6' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var7" DisplayName="Var7" DefaultValue="" Category="Local variables" Description="The 'Var7' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var8" DisplayName="Var8" DefaultValue="" Category="Local variables" Description="The 'Var8' custom property [String] is a local variable for free use."/>
  <CustomProperty DataType="String" Name="Var9" DisplayName="Var9" DefaultValue="" Category="Local variables" Description="The 'Var9' custom property [String] is a local variable for free use."/>
  <TextAttribute Annotative="true" BindingProperty="name" CadAttributeTag="OBJEKTNAVN" X="0" Y="7" Layer="JBTSA@OBJEKTNAVN" Color="ByBlock" Justify="MiddleCenter" Height="1.25" Rotation="-90" ObliqueAngle="15"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBaneDataID" CadAttributeTag="OBJEKTID" X="0" Y="15" Layer="JBTSA@OBJEKTID" Color="ByLayer" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <TextAttribute Annotative="true" BindingProperty="BaneNORBeskrivelse" CadAttributeTag="OBJEKTINFO" X="-1.4" Y="15" Layer="JBTSA@OBJEKTINFO" Color="ByBlock" Justify="MiddleCenter" Height="0.9" Rotation="-90"/>
  <CustomProperty DataType="Enumeration" Name="Discipline" DisplayName="Discipline" DefaultValue="" Category="General" Description="The custom 'Discipline' attribute [Felles | Skilt | Overbygning | Underbygning | Kontaktledning | Signal | Tele | Lavspent] identifies the discpline owning the object.">
   <Values>
    <Value>Felles</Value>
    <Value>Underbygning</Value>
    <Value>Overbygning</Value>
    <Value>Kontaktledning</Value>
    <Value>Signal</Value>
    <Value>Tele</Value>
    <Value>Lavspent</Value>
    <Value>Skilt</Value>
   </Values>
  </CustomProperty>
  <SetValue Key="Discipline" Value="Skilt"/>
  <CustomProperty DataType="String" ReadOnly="true" Category="Model check" Name="mc_NumberOfOcpAreas" DisplayName="Antall OCP områder" Description="Number of Operation / Control Point (OCP) areas to which the object belongs. Most objects shall belong to an OCP, holding properties such as location name and/or resource names."/>
  <LuaExpression Name="mc_NumberOfOcpAreas" IsModelCheck="true">
   <Formula>NOBN_com_chkNumberOfOcpAreas()</Formula>
  </LuaExpression>
  <LuaExpression Name="OcpStationReference">
   <Formula>RC__getOcpStationReference()</Formula>
  </LuaExpression>
  <LuaExpression Name="Stage">
   <Formula>NOBN_com_setStage()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer">
   <Formula>NOBN_com_setLayer()</Formula>
  </LuaExpression>
  <LuaExpression Name="Layer3D">
   <Formula>"3D_"..Discipline</Formula>
  </LuaExpression>
  <DynamicProperty Type="Representation3D" Subtype="Geometry3D">
   <SetValue Key="Parent" Value="ACS"/>
   <SetValue Key="SightingTarget" Value="True"/>
  </DynamicProperty>
  <LuaExpression Name="Geometry3D_0.PoleRouting">
   <Formula>NOBN_bnp_getPoleRoutingDefaultValue()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Offset.Z">
   <Formula>NOBN_bnp_getBoardOffset3DZ()</Formula>
  </LuaExpression>
  <LuaExpression Name="Geometry3D_0.Rotation.Z">
   <Formula>NOBN_trk_getYawFromDir()</Formula>
  </LuaExpression>
  <LuaExpression Name="name">
   <Formula>NOBN_bnp_getBoardOrPoleName()</Formula>
  </LuaExpression>
  <LuaExpression Name="sight">
   <Formula>NOBN_bnp_getBoardSightingRequirement()</Formula>
  </LuaExpression>
  <LuaExpression Name="LateralOffset">
   <Formula>(RightSided and 1 or -1) * (PortalMounted and 1e-3 or 3.5)</Formula>
  </LuaExpression>
  <LuaExpression Name="VerticalOffset">
   <Formula>
				if PortalMounted then
					--Object, or the object it is attached to, has the PortalMounted custom attribute:
					return PortalMounted and 8.0 or 0
				else
					if Variant:find("Baliseskilt") then return 0.30 --Typically located on platform side facing the track
					elseif Variant:find("75B") then return 2.75 --On tunnel wall
					elseif Variant:find("Rømningsavstand") then return 1.85 --Escape distance/directions. On tunnel wall.
					else
						return 0
					end
				end
			</Formula>
  </LuaExpression>
  <SetValue Key="EarthingMethod" Value="Rail"/>
  <LuaExpression Name="EarthingLabelColor">
   <Formula>NOBN_com_assignEarthingLabelColor()</Formula>
  </LuaExpression>
  <Variants DefaultValue="Andreaskors for enkeltspor">
   <Variant Name="Andreaskors for enkeltspor">
    <SetValue Key="name" Value="Jernbaneovergang"/>
   </Variant>
   <Variant Name="Andreaskors for flere spor">
    <SetValue Key="name" Value="Jernbaneovergang flere spor"/>
   </Variant>
  </Variants>
  <LuaExpression Name="Geometry3D_0.Name">
   <Formula>_JBTSA_MSS_SignNssStAndrewsCross_Geometry3DName()</Formula>
  </LuaExpression>
  <LuaFunction Name="_JBTSA_MSS_SignNssStAndrewsCross_Geometry3DName()" ReturnType="String" HideFromUser="false" Description="Returns the object's default 3D object model name.">
   <Signature>String _JBTSA_MSS_SignNssStAndrewsCross_Geometry3DName()</Signature>
   <Formula>
				function _JBTSA_MSS_SignNssStAndrewsCross_Geometry3DName()		
					if Variant == "Jernbaneovergang" then
						return "NO-BN-3D-SA-MSS-TRAFIKKSKILT-138-JERNBANEOVERGANG-ENKELTSPOR"
					elseif Variant == "Andreaskors for flere spor" then						
						return "NO-BN-3D-SA-MSS-TRAFIKKSKILT-138-JERNBANEOVERGANG-FLERSPOR"
					else
						return "Could not find 3D geometry name for variant"
					end
				end
			</Formula>
  </LuaFunction>
  <InsertPointObject Name="Andreaskors for enkeltspor" DisplayName="Trafikkskilt 138 Jernbaneovergang" DisplayBlockName="NO-BN-2D-JBTSK_SKP-SKILT-TREDJEPERSON-138-MOT-VEI-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>hjelpelinje</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <InsertPointObject Name="Andreaskors for flere spor" DisplayName="Trafikkskilt 138 Jernbaneovergang flere spor" DisplayBlockName="NO-BN-2D-JBTSK_SKP-SKILT-TREDJEPERSON-138-MOT-VEI-FLERE-SPOR-{{SymbolMode}}" DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="3.5" AskForAttachment="true">
   <OwnAlignmentTargetSpace>vei</OwnAlignmentTargetSpace>
   <OwnAlignmentTargetSpace>hjelpelinje</OwnAlignmentTargetSpace>
   <JigSymbolAppearance AddAngle="-90" EnableDirectionSetting="true"/>
  </InsertPointObject>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTSK_SKP-SKILT-TREDJEPERSON-138-MOT-VEI-{{SymbolMode}}" AllowSymbolMove="true">
   <Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270|plus:0}}
														{% elsif dir == 'down' %}{{90|plus:0}}
														{% elsif dir == 'both' and RightSided %}{{180|plus:0}}
														{% elsif dir == 'both' and LeftSided %}{{0|plus:0}}
														{% elsif dir == 'none' and RightSided %}{{0|plus:0}}
														{% elsif dir == 'none' and LeftSided %}{{180|plus:0}}
														{% else %}45.0
														{% endif %}"/>
   <BlockNameFormat JoinBy="-">
				NO-BN-2D-JBTSK_SKP-SKILT-TREDJEPERSON
				{% if Variant == 'Andreaskors for enkeltspor' %}138-MOT-VEI
				{% elsif Variant == 'Andreaskors for flere spor' %}138-MOT-VEI-FLERE-SPOR
				{% else %}BAD_Variant_{{Variant}}
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
  </SymbolDefinition>
  <SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" DoNotIncludeInSymbolFrame="true"/>
  <DockPointDefinitions>
   <SnapPoints>
    <SnapPoint X="0" Y="0" TargetSpace="skilt_mot_vei"/>
    <SnapPoint X="0" Y="0" TargetSpace="skiltfeste"/>
   </SnapPoints>
  </DockPointDefinitions>
  <DisplayPointDefinitions>
   <SnapPoints>
    <SnapPoint X="3" Y="3"/>
    <SnapPoint X="3" Y="-3"/>
    <SnapPoint X="-3" Y="3"/>
    <SnapPoint X="-3" Y="-3"/>
   </SnapPoints>
  </DisplayPointDefinitions>
 </ObjectType>
 <LuaFunction Name="NOBN_bnp_getBoardOffset3DZ()" ReturnType="String" Description="Returns the default pole 3D offset Z, i.e. the height of the pole.">
  <Signature>Double NOBN_bnp_getBoardOffset3DZ()</Signature>
  <Formula>
--[[
This formula does not catch all board configurations. If you have a complicated board configuration it is
likely that you will have to delete it and configure the Z offset manually to get the right behaviour for
your 3D model.

The formula is intended to handle the following cases: i) rctype_SignErtmsMiscBoard alone,
ii) rctype_SignErtmsMiscBoard with attached rctype_SignErtmsIdBoard, iii) rctype_SignErtmsMiscBoard attached
to rctype_SignErtmsMarkerBoard, iv) rctype_SignErtmsMiscBoard attached to rctype_SignErtmsMarkerBoard, with
attached rctype_SignErtmsIdBoard.

Note in particular that the formula does not handle the case where two rctype_SignErtmsMiscBoard are attached
to a single stop sign (rctype_SignErtmsMarkerBoard).

Returns the height of the Attachment board, if any.
--]]
function NOBN_bnp_getBoardOffset3DZ()
	if Attachment == nil then return nil
	elseif Attachment.Variant == "E35 Stop sign, side of track" then return 0.400
	elseif Attachment.Variant == "E35 Stop sign, side of track med dverg" then return 0.400
	elseif Attachment.Variant == "E35 Stop sign, side of track med lav dverg" then return 0.400
	elseif Attachment.Variant == "E35 Stop sign, above track" then return 0.400
	elseif Attachment.Variant == "E35 Stop sign, above track med dverg" then return 0.400
	else return nil
	end
end
--
-- If Attachment has an attached board that should be placed between it and this board, then this function returns it.
function getIntermediateBoard()
	if Attachment == nil or Attachment.AttachedElements == nil or Attachment.AttachedElements.Count == 0 then return nil end
	
	for i = 0, Attachment.AttachedElements.Count - 1 do
		if Attachment.AttachedElements[i].RcType == rctype_SignErtmsIdBoard then
			local kake = Attachment.AttachedElements[i]
			if (Attachment.AttachedElements[i].Variant == "E101-A ID board, intermediate stop sign, 400x325, white" 
			or Attachment.AttachedElements[i].Variant == "E101-B ID board, entry stop sign, 400x325, yellow" 
			or Attachment.AttachedElements[i].Variant == "E101-C ID board, exit stop sign, Ø400, yellow" 
			or Attachment.AttachedElements[i].Variant == "E101-D ID board, blocking stop sign, Ø400, white") then
				return Attachment.AttachedElements[i]
			end
		end
	end
end
--
-- Returns the height of this board.
function getThisBoardHeight()
	if Variant == "E36A Level crossing, location" then return 0.400
	elseif Variant == "E36B Level crossing, announcement" then return 0.400
	elseif Variant == "E37A Level transition" then return 0.400
	elseif Variant == "E37B Level zero" then return 0.400
	elseif Variant == "E38 Avalanche area" then return 0.400
	elseif Variant == "E39 Frost gate" then return 0.400
	elseif Variant == "E65H Lowering of pantograph, announcement" then return 0.400
	elseif Variant == "E65J Lowering of pantograph, location" then return 0.400
	elseif Variant == "E65K Raising of pantograph, location" then return 0.400
	elseif Variant == "E65L Dead section, announcement" then return 0.400
	elseif Variant == "E65M Disconnection in dead section" then return 0.400
	elseif Variant == "E65N Connection after dead section" then return 0.400
	elseif Variant == "E106A Stop for shunting, location" then return 0.400
	elseif Variant == "E106B Stop for shunting, announcement" then return 0.400
	elseif Variant == "E107 Interlocked area end" then return 0.400
	elseif Variant == "E108 Interlocked area begin" then return 0.400
	elseif Variant == "E200 Speed restriction lifted" then return 0.400
	elseif Variant == "E201 Speed restriction 10" then return 0.400
	elseif Variant == "E202 Speed restriction 20" then return 0.400
	elseif Variant == "E203 Speed restriction 30" then return 0.400
	elseif Variant == "E204 GSM-R network Norway" then return 0.400
	end
end
--
-- Of the ID signs attached to this board, returns the first one, if any.
function getFirstAttachedIdSign()
	if AttachedElements == nil or AttachedElements.Count == 0 then return nil end
	
	for i = 0, AttachedElements.Count - 1 do
		if AttachedElements[i].RcType == rctype_SignErtmsIdBoard then	return AttachedElements[i] end
	end
end
--
-- If this board has an attached ID sign, then this function returns the Z offset that placed this board just below that ID sign.
function getZOffsetFromIdSign(thisBoardHeight)
	local idSign = getFirstAttachedIdSign()
	if idSign == nil then return nil end
	
	local idSignZOffset = idSign.Geometry3D_0.Offset.Z
	
	local idSignHeight = nil
	if idSign.Variant == "E101-A ID board, intermediate stop sign, 400x325, white" then idSignHeight = 0.325
	elseif idSign.Variant == "E101-B ID board, entry stop sign, 400x325, yellow" then idSignHeight = 0.325
	elseif idSign.Variant == "E101-C ID board, exit stop sign, Ø400, yellow" then idSignHeight = 0.400
	elseif idSign.Variant == "E101-D ID board, blocking stop sign, Ø400, white" then idSignHeight = 0.400
	elseif idSign.Variant == "E101-E ID board, shunting, 160x150" then idSignHeight = 0.150
	elseif idSign.Variant == "Signal E101-F ID-skilt, Dverg på bakken under MB i åk, 160x150" then idSignHeight = 0.150
	elseif idSign.Variant == "E101-G ID board, stop for shunting, 400x325" then idSignHeight = 0.325
	elseif idSign.Variant == "E101-H ID board, interlocked area, 400x325" then idSignHeight = 0.325
	elseif idSign.Variant == "E101-J ID board, level crossing, 400x325" then idSignHeight = 0.325
	elseif idSign.Variant == "E101-K ID board, avalanche area, 400x325" then idSignHeight = 0.325
	elseif idSign.Variant == "E101-L ID board, frost gate, 400x325" then idSignHeight = 0.325
	end

	local minimumGap = 0.010
	local nominalZOffset = idSignZOffset + idSignHeight/2 + thisBoardHeight/2 + minimumGap 
	local roundedZOffset = tonumber(string.format("%.2f", nominalZOffset + 0.005)) -- Round up to nearest cm.
	return roundedZOffset
end
--
-- If this board is an ERTMS board, then this function attempts to to calculate its Z offset.
function getErtmsBoardZOffset()
	local thisBoardHeight = getThisBoardHeight()
		
	if Attachment == nil then
		local zOffsetFromIdSign = getZOffsetFromIdSign()
		
		if zOffsetFromIdSign ~= nil then return zOffsetFromIdSign
		else return 2.88  -- Default value. Corresponds to idSignZOffset = 2.5 and idSignHeight = 0.325.
		end
	else
		local minimumGap = 0.010
		local intermediateBoard = getIntermediateBoard()
		local intermediateBoardHeight = nil
		
		if intermediateBoard ~= nil then
			intermediateBoardZOffset = intermediateBoard.Geometry3D_0.Offset.Z
			
			if intermediateBoard.Variant == "E101-A ID board, intermediate stop sign, 400x325, white" then intermediateBoardHeight = 0.325
			elseif intermediateBoard.Variant == "E101-B ID board, entry stop sign, 400x325, yellow" then intermediateBoardHeight = 0.325
			elseif intermediateBoard.Variant == "E101-C ID board, exit stop sign, Ø400, yellow" then intermediateBoardHeight = 0.400
			elseif intermediateBoard.Variant == "E101-D ID board, blocking stop sign, Ø400, white" then intermediateBoardHeight = 0.400 
			end

			if intermediateBoardZOffset ~= nil and thisBoardHeight ~= nil then
				local nominalZOffset = intermediateBoardZOffset - intermediateBoardHeight/2 - minimumGap - thisBoardHeight/2
				local roundedZOffset = tonumber(string.format("%.2f", nominalZOffset - 0.005)) -- Round down to nearest cm.
				return roundedZOffset
			end
		else
			local attachmentZOffset = Attachment.Geometry3D_0.Offset.Z
			local attachmentBoardHeight = getAttachmentBoardHeight()
			intermediateBoardHeight = 0.325 -- Default height.
			
			if attachmentZOffset ~= nil and attachmentBoardHeight ~= nil and thisBoardHeight ~= nil then
				local nominalZOffset = attachmentZOffset - attachmentBoardHeight/2 - minimumGap - intermediateBoardHeight - minimumGap - thisBoardHeight/2
				local roundedZOffset = tonumber(string.format("%.2f", nominalZOffset - 0.005)) -- Round down to nearest cm.
				return roundedZOffset
			end
		end
	end
end
--
-- First tries to calculate the Z offset of this board by using the above ERTMS rules. If this fails then the below heuristics are used.
function NOBN_bnp_getBoardOffset3DZ()
	local ertmsBoardZOffset = getErtmsBoardZOffset()
	if ertmsBoardZOffset ~= nil then return ertmsBoardZOffset end

	-- To be mounted below other board on common pole:
	if Variant:find("Meterangivelse") then return 2.6 --May be placed under 68F
	elseif Variant:find("68F") then return 2.8 --Tilleggshastighet, to be placed under 68

	--To be mounted relatively low on NSI63 optical signal's mast:
	elseif Variant:find("62") then return 2.85 --Ugyldighetssignal på standard Bane NOR signalmast alternativ 2
	elseif Variant:find("72") then return 2.45 --FJS begynner/slutter
	elseif Variant:find("73") then return 2.45 --Rasvarsling
	elseif Variant:find("F-ATC") or Variant:find("D-ATC") then return 2.9

	--To be mounted on front/top of optical light signal's sunscreen:
	elseif Variant:find("60E") then return 5.80 --ATC Varsel. Remember to adjust Offset.Y as well.

	--Close to track, low placement, with pole:
	elseif Variant:find("Bevegelig kryss") then return 0.5 --Short vertical pole close to track
	elseif Variant:find("69") then return 1.5 --Temporary speed restriction, to be mounted with horizontal pole to track/sleeper

	--Close to track, low placement, no pole:
	elseif Variant:find("Baliseskilt") then return 0.0 --Mounted on platform element's side towards track, at A-balise

	--May be hanging from portal, othwerwise on own pole:
	elseif Variant:find("Spornummer") then return PortalMounted and -1 or 3.5
	-- TODO elseif Variant:find("E34") then return PortalMounted and -1 or 3.5 --ERTMS Stedsskilt
	elseif Variant:find("E35") then return PortalMounted and -1 or 3.5 --ERTMS Stoppskilt

	--To be read by train driver sitting in train, AND by walking people:
	elseif Variant:find("1000V") then return 2.5
	elseif Variant:find("kjedebrudd") then return 2.5

	--To be read by walking people:
	elseif Variant:find("Nødtelefon") then return 2.00
	elseif Variant:find("Stopp se og lytt") then return 2.00 --Skilt langs bilvei, for mennesker
	elseif Variant:find("Arbeidsområde") then return 2.02 --Tenkt montert på et NSI hovedsignal

	-- High relative Elevations, no pole:
	elseif Variant:find("75B") then return 0.0 --Old km board type, directly on tunnel wall (high VerticalOffset)
	elseif Variant:find("Rømningsavstand") then return 0.0 --Escape route distance / direction board, directly on tunnel wall

	else 
		return 3.5
	end
end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_bnp_getPoleRoutingDefaultValue()" ReturnType="String" Description="Returns the default pole setting for the board in question, from {'none','vertical','horizontal'}.">
  <Signature>Enumeration {'None','Vertical','Horizontal'} NOBN_bnp_getPoleRoutingDefaultValue()</Signature>
  <Formula>
			function NOBN_bnp_getPoleRoutingDefaultValue()
				if RcType == rctype_SignErtmsMarkerBoard then
					return "Vertical"
					
				elseif RcType == rctype_SignErtmsShuntingSignal then
					return "Vertical"
				
				elseif RcType:match("JBTSA_MSS") or RcType:match("JBTKO_SKT") or RcType:match("JBTEH_BKT") then
					--Those who do NOT use pole routing:
					if Variant:match("Baliseskilt")
					or Variant:match("60E")
					or Variant:match("62")
					or Variant:match("64")
					or Variant:match("65") --pantograph signs are usually mounted on OCS pole
					or Variant:match("67E")
					or Variant:match("68D%-2")
					or Variant:match("68D%-3")
					or Variant:match("68F")
					or Variant:match("70")
					or Variant:match("72A")
					or Variant:match("72B")
					or Variant:match("73")
					or Variant:match("Arbeidsområde")
					or Variant:match("138") --Traffic sign St.Andrew cross along road at level crossing, to be fixed on traffic light towards road.
					then 
						return "None"
					
					elseif Variant:find("69") then
						return "Horizontal" --Fixed with temporary bracket to closest rail/sleeper

					else 
						return "Vertical"
					end
				else
					return "None"
				end
			end
		</Formula>
 </LuaFunction>
 <LuaFunction Name="NOBN_bnp_getBoardSightingRequirement()" ReturnType="String" Description="Returns the sighting requirement according to TRV regulations for vegetation clearance towards boards. Speed is extracted from the object's own alignment using getAlignmentInfo().Speed.">
  <Signature>Double NOBN_bnp_getBoardSightingRequirement()</Signature>
  <Formula>
			function NOBN_bnp_getBoardSightingRequirement()
				local DesignSpeed = getAlignmentInfo().Speed or 130 --130 km/h assumed if alignment has no design speed available
			
				if 	   Variant:find("Baliseskilt")
					or Variant:find("Arbeidsområde")
					or Variant:find("75C") -- 75C: Hev sporrenser
					or Variant:find("75D") -- 75D: Senk sporrenser
					or Variant:find("60E") --ATC Varsel - Monteres på Fs eller Hs+Fs
					or Variant:find("62") --Ugyldighetsskilt - står alltid sammen med Hs, Fs eller enkelt innkjørsignal
					or Variant:find("64E") --64E: Blå/Hvit Teknisk stolpe
					or Variant:find("67E") --Orienteringssignal dagtid, unngå å gi signal 83 "Tog kommer" mellom kl 22 og 06
					or Variant:find("68F") --Tilleggshastighet underskilt - står alltid sammen med signal 68AB
					or Variant:find("68G") --Krengetoghasighet underskilt - står alltid sammen med signal 68AB
					or Variant:find("101") --ID-skilt av alle typer
					or Variant:find("102") --PIL
					or Variant:find("138") --Traffic sign St.Andrew cross along road at level crossing, to be fixed on traffic light towards road.
				then
					--No sighting requirement:
					return 0, _info("No sighting requirement.")
			
				elseif
					(Variant:find("60") and not Variant:find("60E")) --60ABCD_FGH: ATC skilt
					or Variant:find("61") --61ABC: Avstandsskilt 1/2/3 (1000/800/250 meter)
					or Variant:find("63") --63AB: Fallviser/Stigningsviser
					or Variant:find("64A") --64A: Grense-innkoblingsstolpe
					or Variant:find("64B") --64B: Seksjoneringsstolpe
					or Variant:find("64C") --64C: Rasvarslingsstolpe
					or Variant:find("64D") --64D: Bremsestolpe
					or Variant:find("65") --65ABCDEFG: KL-skilt
					or Variant:find("66") --66: Togvei slutt
					or Variant:find("68A") --69A: Nedsatt hastighet
					or Variant:find("68B") --69B: Økt hastighet
					or Variant:find("68C") --69C: Avvikende hastighet
					or Variant:find("68D") --69D: Markeringsmerke
					or Variant:find("69") --69AB: Midlertidig hastighet
					or Variant:find("70") --70: Planovergangsskilt "V"
					or Variant:find("72") --72AB: FJS begynner/slutter
					or Variant:find("73") --73: Rasvarsling
					or Variant:find("74") --74: Toglengdeskilt
					or Variant:find("75A") --75AB: Kilometerskilt, gammel type
					or Variant:find("75B") --75AB: Kilometer, ny type
				then
					-- Ref TRV Underbygning vedlikehold, 2.1.1 "Sikt til signaler og skilt"
					local v = math.max(40,math.min(130,DesignSpeed))
					local d = RC__round(v/3.6 * 5, 0)
					return d, _info(d.."m required at "..DesignSpeed.." km/h (5 seconds unbroken sighting, min. 56m, max. 181m).")
			
				elseif		
					--Krav som til dvergsignaler pga kun aktuelle å observere under skifting (40 km/h / 50 meter)
					Variant:find("51") --51ABCD: Sporvekselsignal, lysreflekterende. A=tilRettspor, B=fraAvvik, C=tilV, D=tilH
					or Variant:find("52") --52ABCD: Sporvekselsignal for kryssporveksel. A=fraVtilH, B=fraHtilV, C=fraVtilV, D=fraHtilH.
					or Variant:find("53") --53: Sporsperresignal, "sporet sperret"
					or Variant:find("54") --54: Sporsperresignal, "sporet fritt"
					or Variant:find("64E") --64E: Dvergsignalstolpe
				then
					return 50, _info("50 m fixed sighting requirement during shunting movements.")
			
				else
					return 0, _info(DesignSpeed.." km/h: Bad board type [RcType="..RcType..", Variant="..(Variant and "(void)" or Variant.."."))
				end
			end
		</Formula>
 </LuaFunction>
</RailwayObjectTypeDefinitions>
