<!--========================================================================================================

    NO-BN-OcsVariousObjects.xml
	
	Include in DNA file using XPPq XML preprocessor directive <xpp:expand href="fileName.xml" />.

	(c) Railcomplete AS, Norway, 2015-2021. All rights reserved.
	
=========================================================================================================-->
<xpp:bloc>

<!--========================================================================================================
	Line(ca)	Contents:
	  25		PROTECTION SCREEN AGAINST OVERVOLTAGE
	 220		SECTIONING ISOLATOR
	 290		CONTACT WIRE ISOLATOR
	 350		CATENARY SUPPORT WIRE ISOLATOR (and for contact wires outside the pantograph's reach)
	 420		FLOATING CROSSING
	 500		CURRENT BRIDGE
	 560		End Of File
=========================================================================================================-->


	
<!--========================================================================================================
	HIGH VOLTAGE
	PROTECTION SCREEN AGAINST OVERVOLTAGE
=========================================================================================================-->
	<!-- See EH.705338, 900x1400 single screen construction. -->
	<!-- See EH.704042, 2000x775 double-screen construction. -->
	<!-- See EH.705339, Utførelse type I, II, III, IV/V - various ways to mount 2 x 900x1400 screens. -->
	<ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" Name="JBTEH_XBE Beskyttelsesskjerm"
				Layer="JBTEH_XBE" Color="ByLayer"
				Group="Kontaktledning/Beskyttelse"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				 
		<RelationSpace>beskyttelse</RelationSpace>

		<!-- <xpp:expand select="NOBN_xxx_DEPRECATED_MACRO___TO_BE_REMOVED" /> -->
		<xpp:expand select="NOBN_com_SYMBOLFRAME" />
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_VAR" />
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___HORIZONTAL_AND_MEDIUM_CLOSE___OCS" />
		<xpp:expand select="NOBN_com_DISCIPLINE___OCS" />
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS" />
		<xpp:expand select="RC_com_SET_OCP_STATION_REFERENCE" />
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_GENERAL_OBJECT" />
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___EARTHED_TO_NONE" />
		<xpp:expand select="NOBN_com_PSET_BANE_NOR" />
		<xpp:expand select="NOBN_com_PSET_FDV_BANEDATA" />
		<xpp:expand select="NOBN_com_PSET_ISY_STK" />
		<xpp:expand select="NOBN_com_PSET_TITTELFELT" />

		<Variants DefaultValue="Beskyttelsesskjerm 2x900x1400xØ32 på betongmast / bjelkemast" >
			<Variant Name="Beskyttelsesskjerm 2x900x1400xØ32 på tunnelmast / tremast" >
				<!-- See EH.705338, Utførelse type I, II, III, IV/V-->
			</Variant>
			<Variant Name="Beskyttelsesskjerm 2x900x1400xØ32 på betongmast / bjelkemast" >
				<!-- See EH.705338, Utførelse type VI -->
				<!-- Assume HEB mast 200..280, or 240x240 concrete mast (3D models are made only for 240x240): -->
			</Variant>
			<Variant Name="Beskyttelsesskjerm 2x900x1400xØ32 på B-mast bredside" >
				<!-- See EH.705338, Utførelse type VI -->
			</Variant>
			<Variant Name="Beskyttelsesskjerm 2x900x1400xØ32 på B-mast smalside / H-mast" >
				<!-- See EH.705338, Utførelse type VI -->
			</Variant>
			<Variant Name="Beskyttelsesskjerm 2x900x1400xØ32 på hengemast" >
				<!-- See EH.705338, Utførelse type VI -->
			</Variant>
			<Variant Name="Beskyttelsesskjerm 2000x775xØ32 i åk, ett felt" >
				<!-- See EH.704042 type I+II (two plus two ears, placed one pair above the other) -->
			</Variant>
			<Variant Name="Beskyttelsesskjerm 2000x775xØ32 i åk, to felt" >
				<!-- See EH.704042 type I+II (two plus two ears, placed one pair above the other) -->
			</Variant>
		</Variants>

		<CustomAttribute DataType="Enumeration" Name="Tilt" DisplayName="Tilt"
			Description=
			"900x1400 protective screen inclination [00|01|10|11]: 00=none tilted, 01=tilted right, 10=tilted left, 11=both tilted." >
			<Values >
				<Value>00</Value>
				<Value>01</Value>
				<Value>10</Value>
				<Value>11</Value>
			</Values>
		</CustomAttribute>
		
		<LuaExpression Name="name" >
			<Formula>
				if Variant:match("Beskyttelsesskjerm") then return "Beskyttelseskjerm"
				else return "Unknown protective screen variant ["..Variant.."].",_warning
				end
			</Formula>
		</LuaExpression>

		<!-- Reference 3D elevation is assumed to be be center of upper Ø32 tube frame -->
		<LuaExpression Name="Model3DName" >
			<Formula>
				local s = "NO-BN-3D-EH-XBE-BESKYTTELSE-SKJERM-2x900x1400xØ32-UTF"
				local t = "NO-BN-3D-EH-XBE-BESKYTTELSE-SKJERM-2000x775xØ32"
				if Variant == "Beskyttelsesskjerm 2x900x1400xØ32 på tunnelmast / tremast" then 
					return string.format("%s-%d-%02d",s,1,tonumber(Tilt))
				elseif Variant == "Beskyttelsesskjerm 2x900x1400xØ32 på betongmast / bjelkemast" then 
					return string.format("%s-%d-%02d",s,2,tonumber(Tilt))
				elseif Variant == "Beskyttelsesskjerm 2x900x1400xØ32 på B-mast bredside" then 
					return string.format("%s-%d-%02d",s,3,tonumber(Tilt))
				elseif Variant == "Beskyttelsesskjerm 2x900x1400xØ32 på B-mast smalside / H-mast" then 
					return string.format("%s-%d-%02d",s,45,tonumber(Tilt))
				elseif Variant == "Beskyttelsesskjerm 2x900x1400xØ32 på hengemast" then 
					return string.format("%s-%d-%02d",s,6,tonumber(Tilt))
				elseif Variant == "Beskyttelsesskjerm 2000x775xØ32 i åk, ett felt" then 
					return string.format("%s-%s",t,"A")
				elseif Variant == "Beskyttelsesskjerm 2000x775xØ32 i åk, to felt" then 
					return string.format("%s-%s",t,"B")
				else 
					return "Unknown protective screen Variant ["..Variant.."].",_warning
				end
			</Formula>
		</LuaExpression>

		<InsertPointObject VariantName="Beskyttelsesskjerm 2x900x1400xØ32 på tunnelmast / tremast"
				DisplayBlockName="NO-BN-2D-JBTEH_XBE-BESKYTTELSE-SKJERM-1-{{SymbolMode}}"
				DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace> 
			<JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true" />
			<SetValue Key="Tilt" Value="00" />
			<SetValue Key="dir" Value="both" />
			<SetValue Key="RelativeElevation" Value="6.8" />
		</InsertPointObject>
		
		<InsertPointObject VariantName="Beskyttelsesskjerm 2x900x1400xØ32 på betongmast / bjelkemast" 
				DisplayBlockName="NO-BN-2D-JBTEH_XBE-BESKYTTELSE-SKJERM-2-{{SymbolMode}}"
				DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace> 
			<JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true" />
			<SetValue Key="Tilt" Value="00" />
			<SetValue Key="dir" Value="both" />
			<SetValue Key="RelativeElevation" Value="6.8" />
		</InsertPointObject>

		<InsertPointObject VariantName="Beskyttelsesskjerm 2x900x1400xØ32 på B-mast bredside" 
				DisplayBlockName="NO-BN-2D-JBTEH_XBE-BESKYTTELSE-SKJERM-3-{{SymbolMode}}"
				DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace> 
			<JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true" />
			<SetValue Key="Tilt" Value="00" />
			<SetValue Key="dir" Value="both" />
			<SetValue Key="RelativeElevation" Value="6.8" />
		</InsertPointObject>
		
		<InsertPointObject VariantName="Beskyttelsesskjerm 2x900x1400xØ32 på B-mast smalside / H-mast" 
				DisplayBlockName="NO-BN-2D-JBTEH_XBE-BESKYTTELSE-SKJERM-45-{{SymbolMode}}"
				DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace> 
			<JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true" />
			<SetValue Key="Tilt" Value="00" />
			<SetValue Key="dir" Value="both" />
			<SetValue Key="RelativeElevation" Value="6.8" />
		</InsertPointObject>
		
		<InsertPointObject VariantName="Beskyttelsesskjerm 2x900x1400xØ32 på hengemast" 
				DisplayBlockName="NO-BN-2D-JBTEH_XBE-BESKYTTELSE-SKJERM-6-{{SymbolMode}}"
				DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace> 
			<JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true" />
			<SetValue Key="Tilt" Value="00" />
			<SetValue Key="dir" Value="both" />
			<SetValue Key="RelativeElevation" Value="6.8" />
		</InsertPointObject>
		
		<InsertPointObject VariantName="Beskyttelsesskjerm 2000x775xØ32 i åk, ett felt" 
				DisplayBlockName="NO-BN-2D-JBTEH_XBE-BESKYTTELSE-SKJERM-704042-{{SymbolMode}}"
				DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace> 
			<JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true" />
			<SetValue Key="Tilt" Value="00" />
			<SetValue Key="dir" Value="both" />
			<SetValue Key="RelativeElevation" Value="6.8" />
		</InsertPointObject>
		
		<InsertPointObject VariantName="Beskyttelsesskjerm 2000x775xØ32 i åk, to felt" 
				DisplayBlockName="NO-BN-2D-JBTEH_XBE-BESKYTTELSE-SKJERM-704042-{{SymbolMode}}"
				DefaultSnapMode="Point" SnapToAlignment="false" SnapDistance="4.0" >
			<OwnAlignmentTargetSpace>spor</OwnAlignmentTargetSpace> 
			<JigSymbolAppearance AddAngle="0" EnableDirectionSetting="false" RotateIfRightSideOfAlignment="true" />
			<SetValue Key="Tilt" Value="00" />
			<SetValue Key="dir" Value="both" />
			<SetValue Key="RelativeElevation" Value="6.8" />
		</InsertPointObject>
		
		<SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_XBE-BESKYTTELSE-SKJERM-1-{{SymbolMode}}" >
			<Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-" >
				NO-BN-2D-JBTEH_XBE
				BESKYTTELSE-SKJERM
				{% if Variant == 'Beskyttelsesskjerm 2x900x1400xØ32 på tunnelmast / tremast' %}1
				{% elsif Variant == 'Beskyttelsesskjerm 2x900x1400xØ32 på betongmast / bjelkemast' %}2
				{% elsif Variant == 'Beskyttelsesskjerm 2x900x1400xØ32 på B-mast bredside' %}3
				{% elsif Variant == 'Beskyttelsesskjerm 2x900x1400xØ32 på B-mast smalside / H-mast' %}45
				{% elsif Variant == 'Beskyttelsesskjerm 2x900x1400xØ32 på hengemast' %}6
				{% elsif Variant == 'Beskyttelsesskjerm 2000x775xØ32 i åk, ett felt' %}704042
				{% elsif Variant == 'Beskyttelsesskjerm 2000x775xØ32 i åk, to felt' %}704042
				{% else %}BAD_Variant
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" />

	</ObjectType>



<!--========================================================================================================
	HIGH VOLTAGE
	SECTIONING ISOLATOR
=========================================================================================================-->
	<ObjectType DataType="RailCOMPLETEContinuation" Class="RailwayPlacedObject" Name="JBTEH_SIL Seksjonsisolator"
				Layer="JBTEH_SIL" Color="ByLayer"
				Group="Kontaktledning/Isolatorer"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSpace>seksjonsisolator</RelationSpace>

		<!-- <xpp:expand select="NOBN_xxx_DEPRECATED_MACRO___TO_BE_REMOVED" /> -->
		<xpp:expand select="NOBN_com_SYMBOLFRAME" />
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_VAR" />
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___HORIZONTAL_AND_VERY_CLOSE___OCS" />
		<xpp:expand select="NOBN_com_DISCIPLINE___OCS" />
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS" />
		<xpp:expand select="RC_com_SET_OCP_STATION_REFERENCE" />
		<xpp:expand select="NOBN_ocs_STD_LUAEXPRESSIONS___OVERHEADLINEBOUND_OBJECT" />
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___EARTHED_TO_NONE" />
		<xpp:expand select="NOBN_com_PSET_BANE_NOR" />
		<xpp:expand select="NOBN_com_PSET_FDV_BANEDATA" />
		<xpp:expand select="NOBN_com_PSET_ISY_STK" />
		<xpp:expand select="NOBN_com_PSET_TITTELFELT" />
		<xpp:expand select="NOBN_com_PSET_FDV_BANEDATA_EH_SIL" />
	
		<Variants DefaultValue="Seksjonsisolator" >
			<Variant Name="Seksjonsisolator" >
			</Variant>
		</Variants>

		<LuaExpression Name="name" >
			<Formula>
				if Variant == "Seksjonsisolator" then return "SI"
				else return "Unknown section insulator variant ["..Variant.."].",_warning
				end
			</Formula>
		</LuaExpression>

		<LuaExpression Name="Model3DName" >
			<Formula>
				-- Ref. EK.704790, for speeds up to 80 km/h. Not drawn entirely to scale!
				if Variant == "Seksjonsisolator" then return "NO-BN-3D-EH-SIL-SEKSJONSISOLATOR-BICC"
				else return "Unknown section insulator variant ["..Variant.."].",_warning
				end
			</Formula>
		</LuaExpression>

		<InsertPointObject VariantName="Seksjonsisolator" DisplayBlockName="NO-BN-2D-JBTEH_SIL-ISOLATOR-SEKSJONSISOLATOR-{{SymbolMode}}" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4e-4" >
			<OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
			<JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" />
		</InsertPointObject>
		
		<SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_SIL-ISOLATOR-SEKSJONSISOLATOR-{{SymbolMode}}" >
			<Rotation Add180DegreesIfDirIsDown="true" />
			<BlockNameFormat JoinBy="-" >
				NO-BN-2D-JBTEH_SIL
				ISOLATOR
				{% if Variant == 'Seksjonsisolator' %}SEKSJONSISOLATOR
				{% else %}BAD_Variant
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" />

	</ObjectType>



<!--========================================================================================================
	HIGH VOLTAGE
	CATENARY SUPPORT WIRE ISOLATOR (and for contact wires outside the pantograph's reach)
=========================================================================================================-->
	<ObjectType DataType="RailCOMPLETEContinuation" Class="RailwayPlacedObject" Name="JBTEH_ISO Lineisolator"
				Layer="JBTEH_ISO" Color="ByLayer"
				Group="Kontaktledning/Isolatorer"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSpace>lineisolator</RelationSpace>

		<!-- <xpp:expand select="NOBN_xxx_DEPRECATED_MACRO___TO_BE_REMOVED" /> -->
		<xpp:expand select="NOBN_com_SYMBOLFRAME" />
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_VAR" />
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___HORIZONTAL_AND_VERY_CLOSE___OCS" />
		<xpp:expand select="NOBN_com_DISCIPLINE___OCS" />
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS" />
		<xpp:expand select="RC_com_SET_OCP_STATION_REFERENCE" />
		<xpp:expand select="NOBN_ocs_STD_LUAEXPRESSIONS___OVERHEADLINEBOUND_OBJECT" />
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___EARTHED_TO_NONE" />
		<xpp:expand select="NOBN_com_PSET_BANE_NOR" />
		<xpp:expand select="NOBN_com_PSET_FDV_BANEDATA" />
		<xpp:expand select="NOBN_com_PSET_ISY_STK" />
		<xpp:expand select="NOBN_com_PSET_TITTELFELT" />

		<Variants DefaultValue="Lineisolator" >
			<Variant Name="Lineisolator" >
			</Variant>
		</Variants>

		<LuaExpression Name="name" >
			<Formula>
				if Variant == "Lineisolator" then return "Isol."
				else return "Unrecognized variant ["..Variant.."].",_warning
				end
			</Formula>
		</LuaExpression>

		<LuaExpression Name="Model3DName" >
			<Formula>
				if Variant == "Lineisolator" then return "NO-BN-3D-EH-ISO-LINEISOLATOR-600x100"
				else return "Unrecognized variant ["..Variant.."].",_warning
				end
			</Formula>
		</LuaExpression>

		<InsertPointObject VariantName="Lineisolator" DisplayBlockName="NO-BN-2D-JBTEH_ISO-ISOLATOR-LINEISOLATOR-{{SymbolMode}}" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4e-4" >
			<OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
			<OwnAlignmentTargetSpace>kl-oppheng</OwnAlignmentTargetSpace> 
			<OwnAlignmentTargetSpace>kl-bardun</OwnAlignmentTargetSpace> 
			<JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" />
		</InsertPointObject>
		
		<SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_ISO-ISOLATOR-LINEISOLATOR-{{SymbolMode}}" >
			<Rotation Add180DegreesIfDirIsDown="true" />
			<BlockNameFormat JoinBy="-" >
				NO-BN-2D-JBTEH_ISO
				ISOLATOR
				{% if Variant == 'Lineisolator' %}LINEISOLATOR
				{% else %}BAD_Variant
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" />

	</ObjectType>

	<!-- 2021-11-21 CLFEY: Experimenting with lineisolator as continuation object between kl-bardun and kl-oppheng and kontaktledning: -->
<!--	
	
	<ObjectType DataType="RailCOMPLETEContinuation" Class="RailwayPlacedObject" Name="JBTEH_ISO Lineisolator"
				Layer="JBTEH_ISO" Color="ByLayer"
				Group="Kontaktledning/Isolatorer"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSpace>lineisolator</RelationSpace>

		<xpp:expand select="NOBN_com_SYMBOLFRAME" />
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_VAR" />
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___HORIZONTAL_AND_VERY_CLOSE___OCS" />
		<xpp:expand select="NOBN_com_DISCIPLINE___OCS" />
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS" />
		<xpp:expand select="RC_com_SET_OCP_STATION_REFERENCE" />
		<xpp:expand select="NOBN_ocs_STD_LUAEXPRESSIONS___OVERHEADLINEBOUND_OBJECT" />
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___EARTHED_TO_NONE" />
		<xpp:expand select="NOBN_com_PSET_BANE_NOR" />
		<xpp:expand select="NOBN_com_PSET_FDV_BANEDATA" />
		<xpp:expand select="NOBN_com_PSET_ISY_STK" />
		<xpp:expand select="NOBN_com_PSET_TITTELFELT" />

		<Variants DefaultValue="Lineisolator" >
			<Variant Name="Lineisolator" >
			</Variant>
		</Variants>

		<LuaExpression Name="name" >
			<Formula>
				if Variant == "Lineisolator" then return "Isol."
				else return "Unrecognized variant ["..Variant.."].",_warning
				end
			</Formula>
		</LuaExpression>

		<LuaExpression Name="code" ><Formula>_JBTEH_ISO_code()</Formula></LuaExpression>
		<LuaFunction Name="_JBTEH_ISO_code()" ReturnType="String"
			Description="Returns a formated string containing the code properties '[Code1] --- [Code2]' for the two stretchers or wires that meet in a OCS wire continuation (a line isolator)." >
			<Constructor>String _JBTEH_ISO_code()</Constructor>
			<Formula>
				function _JBTEH_ISO_code()
					local first,second
					local compatibleAlignments = {"JBTEH_KTL Kontaktledning", "JBTEH_KLO Kontaktledningsoppheng", "JBTEH_BAR Bardun"}
					if RcType ~= "JBTEH_ISO Lineisolator" then
						return _error, "Bad object type ["..RcType.."] - 'JBTEH_ISO Lineisolator' was expected"
					else
						first = Alignment
						if first == nil then
							return "Bad or missing alignment reference",_warning
						elseif not RC__isMemberOf(compatibleAlignments,Alignment.RcType) then
							return "Cannot connect to alignment of type '"..Alignmnent.RcType.."'.",_warning
						end
						second = TargetAlignment
						if second == nil then
							return "Bad or missing continuing alignment reference",_warning
						end
						if first.id == second.id then
							return _error, "Own alignment and continuing alignment cannot be the same ["..first.Code.."]"
						elseif not RC__isMemberOf(compatibleAlignments,TargetAlignment.RcType) then
							return "Cannot connect to targert alignment of type '"..Alignmnent.RcType.."'.",_warning
						end
						--2021-08-23 CLFEY: Leave the text as-is, emphasize showing what is own / what is target:
						--if KmStigerMotVenstre then
						--	first,second = second,first 
						--end
						return "["..first.Code.."] ==> ["..second.Code.."]"
					end
				end
			</Formula>
		</LuaFunction>

		<LuaExpression Name="name" ><Formula>code</Formula></LuaExpression>

		<LuaExpression Name="Mileage" ><Formula>_JBTEH_ISO_mileage()</Formula></LuaExpression>
		<LuaFunction Name="_JBTEH_ISO_mileage()" ReturnType="Double"
				Description="Obtains the mileage from its alignment." >
			<Constructor>Double _JBTEH_ISO_mileage()</Constructor>
			<Formula>
				function _JBTEH_ISO_mileage()
					ai = getAlignmentInfo()
					if RC__isNan(ai.RelativePosition) then return nil, _info("Position not found.") end
					return ai.RelativePosition &lt; (Alignment.RcAlignment.HorizontalProfile.Length - ai.RelativePosition)
							and Alignment.RcAlignment.StartMileage or Alignment.RcAlignment.EndMileage
				end
			</Formula>
		</LuaFunction>
						
		<LuaExpression Name="Model3DName" >
			<Formula>
				if Variant == "Lineisolator" then return "NO-BN-3D-EH-ISO-LINEISOLATOR-600x100"
				else return "Unrecognized variant ["..Variant.."].",_warning
				end
			</Formula>
		</LuaExpression>

		<InsertPointObject VariantName="Lineisolator" DisplayBlockName="NO-BN-2D-JBTEH_ISO-ISOLATOR-LINEISOLATOR-{{SymbolMode}}" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4e-4" >
			<OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
			<OwnAlignmentTargetSpace>kl-oppheng</OwnAlignmentTargetSpace> 
			<JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" />
		</InsertPointObject>
		
		<SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_ISO-ISOLATOR-LINEISOLATOR-{{SymbolMode}}" >
			<Rotation Add180DegreesIfDirIsDown="true" />
			<BlockNameFormat JoinBy="-" >
				NO-BN-2D-JBTEH_ISO
				ISOLATOR
				{% if Variant == 'Lineisolator' %}LINEISOLATOR
				{% else %}BAD_Variant
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" />

	</ObjectType>
-->


<!--========================================================================================================
	HIGH VOLTAGE
	CONTACT WIRE ISOLATOR
=========================================================================================================-->
	<ObjectType DataType="RailCOMPLETEContinuation" Class="RailwayPlacedObject" Name="JBTEH_ISS Stavisolator"
				Layer="JBTEH_ISS" Color="ByLayer"
				Group="Kontaktledning/Isolatorer"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSpace>stavisolator</RelationSpace>

		<!-- <xpp:expand select="NOBN_xxx_DEPRECATED_MACRO___TO_BE_REMOVED" /> -->
		<xpp:expand select="NOBN_com_SYMBOLFRAME" />
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_VAR" />
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___HORIZONTAL_AND_VERY_CLOSE___OCS" />
		<xpp:expand select="NOBN_com_DISCIPLINE___OCS" />
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS" />
		<xpp:expand select="RC_com_SET_OCP_STATION_REFERENCE" />
		<xpp:expand select="NOBN_ocs_STD_LUAEXPRESSIONS___OVERHEADLINEBOUND_OBJECT" />
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___EARTHED_TO_NONE" />
		<xpp:expand select="NOBN_com_PSET_BANE_NOR" />
		<xpp:expand select="NOBN_com_PSET_FDV_BANEDATA" />
		<xpp:expand select="NOBN_com_PSET_ISY_STK" />
		<xpp:expand select="NOBN_com_PSET_TITTELFELT" />

		<Variants DefaultValue="Stavisolator" >
			<Variant Name="Stavisolator" >
			</Variant>
		</Variants>

		<LuaExpression Name="name" >
			<Formula>
				if Variant == "Stavisolator" then return "Stavisol."
				else return "Unrecognized variant ["..Variant.."].",_warning
				end
			</Formula>
		</LuaExpression>

		<!-- TODO lage 3D for stavisolator -->
		<LuaExpression Name="Model3DName" >
			<Formula>
				if Variant == "Stavisolator" then return "NO-BN-3D-EH-ISS-STAVISOLATOR"
				else return "Unrecognized variant ["..Variant.."].",_warning
				end
			</Formula>
		</LuaExpression>

		<InsertPointObject VariantName="Stavisolator" DisplayBlockName="NO-BN-2D-JBTEH_ISS-ISOLATOR-STAVISOLATOR-{{SymbolMode}}" 
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4e-4" >
			<OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace>
			<JigSymbolAppearance AddAngle="0" EnableDirectionSetting="true" />
		</InsertPointObject>
		
		<SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_ISS-ISOLATOR-STAVISOLATOR-{{SymbolMode}}" >
			<Rotation Add180DegreesIfDirIsDown="true" />
			<BlockNameFormat JoinBy="-" >
				NO-BN-2D-JBTEH_ISS
				ISOLATOR
				{% if Variant == 'Stavisolator' %}STAVISOLATOR
				{% else %}BAD_Variant
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" />

	</ObjectType>



<!--========================================================================================================
	HIGH VOLTAGE
	FLOATING CROSSING
	(Norwegian: svevende kryss Ref. EH.707403)
=========================================================================================================-->
	<!-- TODO: This one may form the connection object between high voltage wires -->
	<ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" Name="JBTEH_SVE Svevende kryss"
				Layer="JBTEH_SVE" Color="ByLayer"
				Group="Kontaktledning/Svevende kryss"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSpace>svevendekryss</RelationSpace>

		<!-- <xpp:expand select="NOBN_xxx_DEPRECATED_MACRO___TO_BE_REMOVED" /> -->
		<xpp:expand select="NOBN_com_SYMBOLFRAME" />
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_VAR" />
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___HORIZONTAL_AND_MEDIUM_CLOSE___OCS" />
		<xpp:expand select="NOBN_com_DISCIPLINE___OCS" />
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS" />
		<xpp:expand select="RC_com_SET_OCP_STATION_REFERENCE" />
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_GENERAL_OBJECT" />
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___EARTHED_TO_NONE" />
		<xpp:expand select="NOBN_com_PSET_BANE_NOR" />
		<xpp:expand select="NOBN_com_PSET_FDV_BANEDATA" />
		<xpp:expand select="NOBN_com_PSET_ISY_STK" />
		<xpp:expand select="NOBN_com_PSET_TITTELFELT" />

		<Variants DefaultValue="Svevende kryss" >
			<Variant Name="Svevende kryss" >
			</Variant>
		</Variants>

		<LuaExpression Name="name" >
			<Formula>
				if Variant == "Svevende kryss" then return "Svevende kryss"
				else return _error, "Bad OCS crossing lines conncector variant ["..Variant.."]."
				end
			</Formula>
		</LuaExpression>

		<LuaExpression Name="DistanceToAlignment" ><Formula>0</Formula></LuaExpression>

		<!-- TODO Lage 3D-modeller for svevende kryss osv -->
		<LuaExpression Name="Model3DName" >
			<Formula>
				if Variant == "Svevende kryss" then return "NO-BN-3D-EH-SVE-SVEVENDE-KRYSS-2500"
				else return _error, "Bad OCS crossing lines connector variant ["..Variant.."]."
				end
			</Formula>
		</LuaExpression>

		<InsertPointObject VariantName="Svevende kryss" DisplayBlockName="NO-BN-2D-JBTEH_SVE-FORBINDELSE-SVEVENDE-KRYSS-{{SymbolMode}}" 
				DefaultSnapMode="Alignment" SnapToAlignment="false" SnapDistance="4e-4" >
			<OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace> 
			<SetValue Key="name" Value="Svevende kryss" />
		</InsertPointObject>
		
		<SymbolDefinition AllowSymbolMove="true" DefaultBlockName="NO-BN-2D-JBTEH_SVE-FORBINDELSE-SVEVENDE-KRYSS-{{SymbolMode}}" >
			<Rotation Add180DegreesIfDirIsDown="false" AddAngle="{% if dir == 'up' %}{{270.0|plus:AngularOffset}}
														{% elsif dir == 'down' %}{{90.0|plus:AngularOffset}}
														{% elsif dir == 'both' and RightSided %}{{180.0|plus:AngularOffset}}
														{% elsif dir == 'both' and LeftSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and RightSided %}{{0.0|plus:AngularOffset}}
														{% elsif dir == 'none' and LeftSided %}{{180.0|plus:AngularOffset}}
														{% else %}45.0
														{% endif %}" />	
			<BlockNameFormat JoinBy="-" >
				NO-BN-2D-JBTEH_SVE
				FORBINDELSE
				{% if Variant == 'Svevende kryss' %}SVEVENDE-KRYSS
				{% else %}BAD_Variant
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" />

	</ObjectType>



<!--========================================================================================================
	HIGH VOLTAGE
	CURRENT BRIDGE
	EH-FOR Forbindelse (Strømbro "C" mellom kontaktledning og bæreline i to ledninger, med "M" mellom dem)
	Dvs elektrisk sammenkobling av to kontakttråder i et vekslingsfelt (seksjonsfelt har bryter)
	Ref. EH.705051.

	TODO 2020-09-26: Add 3D symbols to the library: Single / double Strømbro
=========================================================================================================-->
	<ObjectType DataType="tOrientedElement" Class="RailwayPlacedObject" Name="JBTEH_FOR Forbindelse, strømbro"
				Layer="JBTEH_FOR" Color="ByLayer"
				Group="Kontaktledning/Forbindelser"
				AttMirrorY="{% if RightSided %}true{% else %}false{% endif %}"
				>
				
		<RelationSpace>kl-forbindelse</RelationSpace>

		<!-- <xpp:expand select="NOBN_xxx_DEPRECATED_MACRO___TO_BE_REMOVED" /> -->
		<xpp:expand select="NOBN_com_SYMBOLFRAME" />
		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___ANGULAROFFSET_VAR" />
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___HORIZONTAL_AND_MEDIUM_CLOSE___OCS" />
		<xpp:expand select="NOBN_com_DISCIPLINE___OCS" />
		<xpp:expand select="NOBN_com_CHK_NUMBER_OF_OCP_AREAS" />
		<xpp:expand select="RC_com_SET_OCP_STATION_REFERENCE" />
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___WAYSIDE_GENERAL_OBJECT" />
		<xpp:expand select="NOBN_com_STD_LUAEXPRESSIONS___EARTHED_TO_NONE" />
		<xpp:expand select="NOBN_com_PSET_BANE_NOR" />
		<xpp:expand select="NOBN_com_PSET_FDV_BANEDATA" />
		<xpp:expand select="NOBN_com_PSET_ISY_STK" />
		<xpp:expand select="NOBN_com_PSET_TITTELFELT" />

		<Variants DefaultValue="Strømbro" >
			<Variant Name="Strømbro" >
			</Variant>
		</Variants>
		
		<LuaExpression Name="DistanceToAlignment" ><Formula>RightSided and 4e-4 or -4e-4</Formula></LuaExpression>

		<InsertPointObject VariantName="Strømbro" DisplayBlockName="NO-BN-2D-JBTEH_FOR-FORBINDELSE-STROEMBRO-H-{{SymbolMode}}"
				DefaultSnapMode="Alignment" SnapToAlignment="true" SnapDistance="4e-4" >
			<JigSymbolAppearance EnableDirectionSetting="true" MirrorAboutJigYAxisIfLeftSideOfAlignment="true" />
			<OwnAlignmentTargetSpace>kl-oppheng</OwnAlignmentTargetSpace> 
			<OwnAlignmentTargetSpace>kontaktledning</OwnAlignmentTargetSpace> 
			<SetValue Key="name" Value="Strømbro" />
		</InsertPointObject>
		
		<SymbolDefinition AllowSymbolMove="true" 
				DefaultBlockName="NO-BN-2D-JBTEH_SVE-FORBINDELSE-STROEMBRO-{% if dir == 'up' %}{% if RightSided %}H{% else %}V{% endif %}{% else %}{% if LeftSided %}H{% else %}V{% endif %}{% endif %}" >
			<Rotation Add180DegreesIfDirIsDown="false" 
				AddAngle="{% if RightSided %}{{0.0|plus:AngularOffset}}{% else %}{{180.0|plus:AngularOffset}}{% endif %}" />	
			<BlockNameFormat JoinBy="-" >
				NO-BN-2D-JBTEH_FOR
				FORBINDELSE
				{% if Variant == 'Strømbro' %}STROEMBRO
					{% if dir == 'up' %}{% if RightSided %}H{% else %}V{% endif %}{% else %}{% if RightSided %}V{% else %}H{% endif %}{% endif %}
				{% else %}BAD_Variant
				{% endif %}
				{{SymbolMode}}
			</BlockNameFormat>
		</SymbolDefinition>
		
		<SymbolDefinition DefaultBlockName="NO-BN-2D-JBTRC_INNSETTINGSPUNKT-Schematic" />

	</ObjectType>			
			
		
	<!-- ========================================================================================================
	HIGH VOLTAGE
	OVERHEAD CATENARY SYSTEM - CONTACT WIRE
 =========================================================================================================-->
	<ObjectType DataType="tElementWithAlignment" Class="RailwayAlignment" Name="JBTEH_XX XYZ"
				Layer="JBTEH_KTL_Kontaktledning_Kjørbar" Color="ByLayer"
				Group="Kontaktledning/Kontaktledning"
				>
		
		<RelationSpace>kontaktledning</RelationSpace>

		<AlignmentSystems DefaultSystemName="Kontaktledning" >
			<AlignmentSystem Name="Kontaktledning"
				CantGauge="0.010"
				AlignmentGauge="0.010"
				QuickMode3DLiftWithCant="true"
			 />
		</AlignmentSystems>

		<xpp:expand select="NOBN_com_STD_CUSTOMATTRIBUTES___VAR" />
		<xpp:expand select="NOBN_com_STD_TEXTATTRIBUTES___HORIZONTAL_AND_CLOSE___OCS" />
		<xpp:expand select="NOBN_com_DISCIPLINE___OCS" />
		<xpp:expand select="NOBN_com_PSET_BANE_NOR" />
		<xpp:expand select="NOBN_com_PSET_FDV_BANEDATA" />
		<xpp:expand select="NOBN_com_PSET_ISY_STK" />
		<xpp:expand select="NOBN_com_PSET_TITTELFELT" />
		<!-- <xpp:expand select="NOBN_com_PSET_FDV_BANEDATA_EH_XYZ" /> -->
				
		

		<Variants DefaultValue="AT-line" >
			<Variant Name="AT-line" /> 
			<Variant Name="AT-kabel" /> 
			<Variant Name="Returledning i luft" /> 
			<Variant Name="Returkabel" />
			<Variant Name="Mateledning i luft" /> 
			<Variant Name="Matekabel" />
			<Variant Name="Mate/Returledning i luft" /> 
			<Variant Name="Mate/Returkabel i jord/kanal" />
		</Variants>



		<LuaExpression Name="Wire2dColor" ><Formula>_JBTEH_XX_XYZ_Wire2dColor()</Formula></LuaExpression>
		<LuaFunction Name="_JBTEH_XX_XYZ_Wire2dColor()" ReturnType="String"
			Description="Obtains the CAD system layer name for the catenary wire, based on its Variant." >
			<Constructor>String _JBTEH_XX_XYZ_Wire2dColor()</Constructor>
		
			<Formula>
				function _JBTEH_XX_XYZ_Wire2dColor()
					if Variant == "AT-line" then
						return "Cyan"
					elseif Variant == "AT-kabel" then
						return "Cyan"
					elseif Variant == "Returledning i luft" then
						return "Cyan"
					elseif Variant == "Returkabel" then
						return "Cyan"
					elseif Variant == "Mateledning i luft" then
						return "Cyan"
					elseif Variant == "Matekabel" then
						return "Cyan"
					elseif Variant == "Mate/Returledning i luft" then
						return "Cyan"
					elseif Variant == "Mate/Returkabel i jord/kanal" then
						return "Cyan"
					else
						return "Bad Variant ["..Variant.."]."
					end
				end
			</Formula>
		</LuaFunction>
		<CustomAttribute DataType="Enumeration" Name="Wire2dColor" DisplayName="Ledningsfarge i 2D" DefaultValue=""
			Description="The overhead catenary system (OCS) wire's color when displayed as a polyline in the CAD program." 
		>

			<Values Variant="AT-line" >
				<Value>Cyan</Value>
			</Values>
			<Values Variant="AT-kabel" >
				<Value>Cyan</Value>
			</Values>
			<Values Variant="Returledning i luft" >
				<Value>Cyan</Value>
			</Values>
			<Values Variant="Returkabel" >
				<Value>Cyan</Value>
			</Values>
			<Values Variant="Mateledning i luft" >
				<Value>Cyan</Value>
			</Values>
			<Values Variant="Matekabel" >
				<Value>Cyan</Value>
			</Values>
			<Values Variant="Mate/Returledning i luft" >
				<Value>Cyan</Value>
			</Values>
			<Values Variant="Mate/Returkabel i jord/kanal" >
				<Value>Cyan</Value>
			</Values>
		</CustomAttribute>


		<LuaExpression Name="Linetype" ><Formula>_JBTEH_XX_XYZ_Linetype()</Formula></LuaExpression>
		<LuaFunction Name="_JBTEH_XX_XYZ_Linetype()" ReturnType="String"
			Description="Obtains the CAD system linetype (continuous / dashed) for the catenary wire, based on its Variant." >
			<Constructor>String _JBTEH_XX_XYZ_Linetype()</Constructor>
			<Formula>
				function _JBTEH_XX_XYZ_Linetype()
					if Variant == "AT-line" then
						return "RC-EH_LINJE"
					elseif Variant == "AT-kabel" then
						return "RC-EH_KABEL"
					elseif Variant == "Returledning i luft" then
						return "RC-RETURLEDNING"
					elseif Variant == "Returkabel" then
						return "RC-RETURKABEL"
					elseif Variant == "Mateledning i luft" then
						return "RC-EH_LINJE"
					elseif Variant == "Matekabel" then
						return "RC-EH_KABEL"
					elseif Variant == "Mate/Returledning i luft" then
						return "RC-ML-RL_LINJE"
					elseif Variant == "Mate/Returkabel i jord/kanal" then
						return "RC-ML-RL_KABEL"
					else
						return "Continuous" --Cannot return text string here
					end
				end
			</Formula>
		</LuaFunction>

		<LuaExpression Name="Color" ><Formula>_JBTEH_XX_XYZ_Color()</Formula></LuaExpression>
		<LuaFunction Name="_JBTEH_XX_XYZ_Color()" ReturnType="String"
			Description="Obtains the CAD system's polyline color, based on the wire's Wire2dColor." >
			<Constructor>String _JBTEH_XX_XYZ_Color()</Constructor>
			<Formula>
				function _JBTEH_XX_XYZ_Color()
					if     Wire2dColor:lower():match("cyan") then return 4 
					else return 7
					end
				end
			</Formula>
		</LuaFunction>

		<LuaExpression Name="Lineweight" ><Formula>_JBTEH_XX_XYZ_Lineweight())</Formula></LuaExpression>
		<LuaFunction Name="_JBTEH_XX_XYZ_Lineweight()" ReturnType="Double"
			Description="Obtains the CAD system lineweight (line width in print) for the catenary wire, based on its Variant." >
			<Constructor>Double _JBTEH_XX_XYZ_Lineweight()</Constructor>
			<Formula>
				--AutoCAD needs lineweights to be of the form "LineWeight035" for "0.35 mm" (only predefined values according to AutoCAD enum):
				function _JBTEH_KTL_Lineweight()
					if Wire2dColor:lower():match("sort") then
						return "LineWeight035"
					else
						return "LineWeight040"
					end
				end
			</Formula>
		</LuaFunction>

		<SetValue Key="Sweep3D" Value="True" />
		<SetValue Key="QuickMode3D" Value="True" />

		<!-- RailCOMPLETE provides the '_position' reserved identifier, sampled along the alignment, to be used in e.g. getAlignmentInfo() etc. -->
		<LuaExpression Name="Rotation3D.X" ><Formula>NOBN_trk_getPitchFromGradient(_position)</Formula></LuaExpression>
		<LuaExpression Name="Rotation3D.Y" ><Formula>NOBN_com_getRollFromCantInterpretedAsDecimalDegrees(_position)</Formula></LuaExpression>
		<LuaExpression Name="Rotation3D.Z" ><Formula>0.0</Formula></LuaExpression>
		
		<!-- The 2D Sweep profile: -->
		<LuaExpression Name="Model3DName" ><Formula>_JBTEH_XX_XYZ_Model3dName()</Formula></LuaExpression>
		<LuaFunction Name="_JBTEH_XX_XYZ_Model3dName()" ReturnType="Double"
			Description="Obtains the wire's 3D model name, based on its Variant and material." >
			<Constructor>Double _JBTEH_XX_XYZ_Model3dName()</Constructor>
			<Formula>
				function _JBTEH_XX_XYZ_Model3dName()
					if Variant == "Kontaktledning, kjørbar" or Variant == "Kontaktledning, ikke kjørbar" then
						return "NO-BN-SWEEP-EH-KTL-KONTAKTTRÅD-"..Material:gsub(" ","-")
					elseif Variant:match("Bæreline") then
						t = "NO-BN-SWEEP-FE-WIR-WIRE-BLANK-KOBBER-"
						if     Material:match("50/19 KHF isolert") then return "NO-BN-SWEEP-FE-WIR-WIRE-GRÅ-DIAMETER-013"
						elseif Material:match("70/19 KHF isolert") then return "NO-BN-SWEEP-FE-WIR-WIRE-GRÅ-DIAMETER-013"
						elseif Material:match("10/49") then return t.."10-MM2-DIAMETER-004"
						elseif Material:match("25/19") then return t.."25-MM2-DIAMETER-006"
						elseif Material:match("35/19") then return t.."35-MM2-DIAMETER-008"
						elseif Material:match("50/19") then return t.."50-MM2-DIAMETER-009"
						elseif Material:match("70/19") then return t.."70-MM2-DIAMETER-011"
						elseif Material:match("95/19") then return t.."95-MM2-DIAMETER-013"
						elseif Material:match("150/37") then return t.. "150-MM2-DIAMETER-016"
						end
					else 
						return "Bad Variant ["..Variant.."]."
					end
				end
			</Formula>
		</LuaFunction>
		
		<!-- The Model3DSeparation is needed during sweep in order to sweep the entire length of the underlying alignment 2D length -->
		<LuaExpression Name="Model3DSeparation" ><Formula>RC__getNearest3DStep(1.0)</Formula></LuaExpression>
		<SetValue Key="Model3DOffset" Value="0.0" />

		<LuaExpression Name="name" ><Formula>"L"..code</Formula></LuaExpression>
		<PropertyPrompt Key="code" DefaultValue="Kontaktledning" AcceptEmptyValue="false" />
		
		<InsertAlignment VariantName="AT-line" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTTRAAD-Schematic" DefaultToTangentContinuity="false" >
			<IncludeSegmentType>Tangent</IncludeSegmentType>
		</InsertAlignment>

		<InsertAlignment VariantName="AT-kabel" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTTRAAD-Schematic" DefaultToTangentContinuity="false" >
			<IncludeSegmentType>Tangent</IncludeSegmentType>
			<IncludeSegmentType>Curve</IncludeSegmentType>
		</InsertAlignment>

		<InsertAlignment VariantName="Returledning i luft" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTTRAAD-Schematic" DefaultToTangentContinuity="false" >
			<IncludeSegmentType>Tangent</IncludeSegmentType>
		</InsertAlignment>
		
		<InsertAlignment VariantName="Returkabel" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTTRAAD-Schematic" DefaultToTangentContinuity="false" >
			<IncludeSegmentType>Tangent</IncludeSegmentType>
			<IncludeSegmentType>Curve</IncludeSegmentType>
		</InsertAlignment>
		
		<InsertAlignment VariantName="Mateledning i luft" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTTRAAD-Schematic" DefaultToTangentContinuity="false" >
			<IncludeSegmentType>Tangent</IncludeSegmentType>
		</InsertAlignment>
		
		<InsertAlignment VariantName="Matekabel" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTTRAAD-Schematic" DefaultToTangentContinuity="false" >
			<IncludeSegmentType>Tangent</IncludeSegmentType>
			<IncludeSegmentType>Curve</IncludeSegmentType>
		</InsertAlignment>
		
		<InsertAlignment VariantName="Mate/Returledning i luft" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTTRAAD-Schematic" DefaultToTangentContinuity="false" >
			<IncludeSegmentType>Tangent</IncludeSegmentType>
		</InsertAlignment>
		
		<InsertAlignment VariantName="Mate/Returkabel i jord/kanal" DisplayBlockName="NO-BN-2D-JBTRC_THUMBNAIL-KONTAKTTRAAD-Schematic" DefaultToTangentContinuity="false" >
			<IncludeSegmentType>Tangent</IncludeSegmentType>
			<IncludeSegmentType>Curve</IncludeSegmentType>
		</InsertAlignment>

	</ObjectType>



<!--========================================================================================================
    End of file 
=========================================================================================================-->
</xpp:bloc>
