<!--========================================================================================================

    NO-BN PositionToolSettings.xml
	
	Include in DNA file using XPPq XML preprocessor directive <xpp:expand href="fileName.xml" />.

	(c) Railcomplete AS, Norway, 2015-2021. All rights reserved.

=========================================================================================================-->
<xpp:bloc>



<!--========================================================================================================
	Settings and Lua functions for linear referencing methods (LRM).
=========================================================================================================-->

<!-- Position tool interface function names - suggested naming conventions:
	
	Name part							Example									Comment
	=================================	=====================================	==============================================
	<4-letter administration code>		NOBN									XXGL, NOBN, FRSR, DEDB etc
	Separator							_										
	Discipline							com										Since alignments are common to many disciplines, not only track)
	Separator							_										
	Corresponding ResX element's key	PositionTransient_Set_Alignment_Own		RC looks up the ResX alias for the key and inserts this textobject
-->

<PositionToolSettings Name="NOBN-PositionToolSettings">
  	<PositionToolTextLines>

	<!-- TODO SVNOE 2021-08-20: Rename elements to: -->
	
	<!-- OwnAlignmentNameOrCodeOrId -->
	<!-- OwnAlignmentElevation -->
	<!-- OwnAlignmentDistanceToAlignment -->
	<!-- OwnAlignmentMileage -->
	<!-- OwnAlignmentPos -->
	<!-- ReferenceAlignmentNameOrCodeOrId -->
	<!-- ReferenceAlignmentElevation -->
	<!-- ReferenceAlignmentDistanceToAlignment -->
	<!-- ReferenceAlignmentMileage -->
	<!-- ReferenceAlignmentPos -->
	
  		<AlignmentOwn OrderPriority="6" LuaFormattingFunctionName="NOBN_trk_PositionTransient_Set_Alignment_Own"/>
		<ElevationOwn OrderPriority="4" LuaFormattingFunctionName="NOBN_trk_PositionTransient_Set_Elevation_Own"/>
		<DistanceOwn OrderPriority="3" LuaFormattingFunctionName="NOBN_trk_PositionTransient_Set_Distance_Own"/>
  		<MileageOwn OrderPriority="2" LuaFormattingFunctionName="NOBN_trk_PositionTransient_Set_Mileage_Own"/>
  		<PosOwn OrderPriority="1" LuaFormattingFunctionName="NOBN_trk_PositionTransient_Set_Pos_Own"/>
  		
		<AlignmentRef OrderPriority="5" LuaFormattingFunctionName="NOBN_trk_PositionTransient_Set_Alignment_Ref"/>
  		<ElevationRef OrderPriority="4" LuaFormattingFunctionName="NOBN_trk_PositionTransient_Set_Elevation_Ref"/>
  		<DistanceRef OrderPriority="3" LuaFormattingFunctionName="NOBN_trk_PositionTransient_Set_Distance_Ref"/>
  		<MileageRef OrderPriority="2" LuaFormattingFunctionName="NOBN_trk_PositionTransient_Set_Mileage_Ref"/>
  		<PosRef OrderPriority="1" LuaFormattingFunctionName="NOBN_trk_PositionTransient_Set_Pos_Ref"/>
  	
	</PositionToolTextLines>
</PositionToolSettings>



<LuaFunction Name="NOBN_trk_PositionTransient_Set_Alignment_Own()" ReturnType="String" HideFromUser="true" 
	Description="Returns a formatted string containing the current own alignment and a mileage direction marker, to be displayed by the position tool.\n\nWhen RC uses the function, then RC provides an input 'oa' [AlignmentReference] which is the current Own Alignment picked up by the CAD cursor, plus 'mitl' [Boolean] which tells whether the own alignment's Mileage Increases Towards Left as viewed on the user's computer screen.\n\nNote: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Alignment_Own'.">
	<Constructor>String NOBN_trk_PositionTransient_Set_Alignment_Own(AlignmentReference oa, Boolean mitl)</Constructor>
 	<Formula>
		function NOBN_trk_PositionTransient_Set_Alignment_Own(oa,mitl)
			if mitl then 
				return "&lt; "..RC__identify(oa) --prefix own alignment with left angle bracket
			else
				return RC__identify(oa).." &gt;" --postfix own alignment with right angle bracket
			end
		end
	</Formula>
</LuaFunction>

<LuaFunction Name="NOBN_trk_PositionTransient_Set_Alignment_Ref()" ReturnType="String" HideFromUser="true" 
	Description="Returns a formatted string containing the current reference alignment and a mileage direction marker, to be displayed by the position tool.\n\nWhen RC uses the function, then RC provides an input 'ra' [AlignmentReference] which is the current Reference Alignment picked up by the CAD cursor, plus 'mitl' [Boolean] which tells whether the reference alignment's Mileage Increases Towards Left as viewed on the user's computer screen.\n\nNote: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Alignment_Ref'.">
	<Constructor>String NOBN_trk_PositionTransient_Set_Alignment_Ref(AlignmentReference ra, Boolean mitl)</Constructor>
 	<Formula>
		function NOBN_trk_PositionTransient_Set_Alignment_Ref(ra,mitl)
			if mitl then 
				return "&lt; "..RC__identify(ra) --prefix reference alignment with left angle bracket
			else
				return RC__identify(ra).." &gt;" --postfix reference alignment with right angle bracket
			end
		end
	</Formula>
</LuaFunction>



<LuaFunction Name="NOBN_trk_PositionTransient_Set_Distance_Own()" ReturnType="String" HideFromUser="true" 
	Description="Returns a formatted string containing the current CAD cursor's distance to own alignment, to be displayed by the position tool.\n\nWhen RC uses the function, then RC provides an input 'd' [Double] which is the horizontal Distance from the CAD cursor to the current Own alignment.\n\nNote: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Distance_Own'.">
 	<Constructor>String NOBN_trk_PositionTransient_Set_Distance_Own(Double od)</Constructor>
 	<Formula>
		function NOBN_trk_PositionTransient_Set_Distance_Own(od)
			return string.format("Own dist.=%.3f",od)
		end 
	</Formula>
</LuaFunction>

<LuaFunction Name="NOBN_trk_PositionTransient_Set_Distance_Ref()" ReturnType="String" HideFromUser="true" 
	Description="Returns a formatted string containing the current CAD cursor's distance to own alignment, to be displayed by the position tool.\n\nWhen RC uses the function, then RC provides an input 'rd' [Double] which is the horizontal Distance from the CAD cursor to the current Reference alignment.\n\nNote: If this function is not provided to the position tool, then RC will format a suitable default text using the current translation found in the  built-in language pack system (ResX) for key 'PositionTransient_Set_Distance_Own'.">
 	<Constructor>String NOBN_trk_PositionTransient_Set_Distance_Ref(Double rd)</Constructor>
 	<Formula>
		function NOBN_trk_PositionTransient_Set_Distance_Ref(rd)
			return string.format("Ref dist.=%.3f",rd)
		end 
	</Formula>
</LuaFunction>




<!-- TODO: CLFEY skal lage beskrivelser for resten her, rakk det ikke før jeg må i møte med NO nå... -->
<LuaFunction Name="NOBN_trk_PositionTransient_Set_Elevation_Own()" ReturnType="String" HideFromUser="true" 
Description="Returns the Elevation_Own string displayed as transient graphics by the position tool. Input x unit is meters.">
	<Constructor>String NOBN_trk_PositionTransient_Set_Elevation_Own()</Constructor>
 	<Formula>
		function NOBN_trk_PositionTransient_Set_Elevation_Own(x)
			return string.format("Elevation=%.3f",x)
		end
	</Formula>
</LuaFunction>

<LuaFunction Name="NOBN_trk_PositionTransient_Set_Elevation_Ref()" ReturnType="String" HideFromUser="true" 
	Description="Returns the Elevation_Ref string displayed as transient graphics by the position tool. Input x unit is meters.">
	<Constructor>String NOBN_trk_PositionTransient_Set_Elevation_Ref()</Constructor>
 	<Formula>
		function NOBN_trk_PositionTransient_Set_Elevation_Ref(x)
			return string.format("Elevation(ref)=%.3f",x)
		end
	</Formula>
</LuaFunction>
  
<LuaFunction Name="NOBN_trk_PositionTransient_Set_Mileage_Own()" ReturnType="String" HideFromUser="true" 
	Description="Returns the Mileage_Own string displayed as transient graphics by the position tool. Input x unit is meters.">
	<Constructor>String NOBN_trk_PositionTransient_Set_Mileage_Own()</Constructor>
 	<Formula>
		function NOBN_trk_PositionTransient_Set_Mileage_Own(x)
			return string.format("Km.=%.3f",x/1000)
		end
	</Formula>
</LuaFunction>

<LuaFunction Name="NOBN_trk_PositionTransient_Set_Mileage_Ref()" ReturnType="String" HideFromUser="true" 
	Description="Returns the Mileage_Ref string displayed as transient graphics by the position tool. Input x unit is meters.">
	<Constructor>String NOBN_trk_PositionTransient_Set_Mileage_Ref()</Constructor>
 	<Formula>
		function NOBN_trk_PositionTransient_Set_Mileage_Ref(x)
			return string.format("Km-Ref.=%.6f",x/1000)
		end
	</Formula>
</LuaFunction>

<LuaFunction Name="NOBN_trk_PositionTransient_Set_Pos_Own()" ReturnType="String" HideFromUser="true" 
	Description="Returns the Pos_Own string displayed as transient graphics by the position tool. Input x unit is meters.">
	<Constructor>String NOBN_trk_PositionTransient_Set_Pos_Own()</Constructor>
 	<Formula>
		function NOBN_trk_PositionTransient_Set_Pos_Own(x)
			return string.format("Pos=%.3f",x)
		end
	</Formula>
</LuaFunction>

<LuaFunction Name="NOBN_trk_PositionTransient_Set_Pos_Ref()" ReturnType="String" HideFromUser="true" 
	Description="Returns the Pos_Ref string displayed as transient graphics by the position tool. Input x unit is meters.">
	<Constructor>String NOBN_trk_PositionTransient_Set_Pos_Ref()</Constructor>
 	<Formula>
		function NOBN_trk_PositionTransient_Set_Pos_Ref(x)
			return string.format("Pos(ref)=%.3f",x)
		end
	</Formula>
</LuaFunction>
		


<!--========================================================================================================
    End of file 
=========================================================================================================-->
</xpp:bloc>
